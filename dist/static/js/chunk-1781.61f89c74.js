(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1781"],{"6ClL":function(e,t,a){"use strict";a.r(t);var n=a("Nbur"),s=a("r21l");for(var i in s)["default"].indexOf(i)<0&&function(e){a.d(t,e,function(){return s[e]})}(i);var r=a("KHd+"),o=Object(r.a)(s.default,n.a,n.b,!1,null,null,null);o.options.__file="Form.vue",t.default=o.exports},"8Evn":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(a("P2sY")),s=o(a("QbLZ")),i=a("xCek"),r=o(a("vDqi"));function o(e){return e&&e.__esModule?e:{default:e}}t.default={props:["saved","loading","formData"],data:function(){return{disabledSave:!0,data:{},branches:[],loading:!1}},computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},langId:function(){return this.$store.state.userStores.langId},lang:function(){return this.$store.state.userStores.lang},userStores:function(){return this.$store.state.userStores}},watch:{data:{handler:function(e){e.alias&&""!==e.alias&&e.ref_id&&""!==e.ref_id?this.disabledSave=!1:this.disabledSave=!0},deep:!0},saved:{handler:function(e){!0===e&&(this.data={},this.disabledSave=!0)},deep:!0},formData:{handler:function(e){this.data=(0,s.default)({},e)},deep:!0,immediate:!0}},mounted:function(){this.searchBranches()},methods:{save:function(){this.disabledSave=!0;var e=(0,n.default)({},this.data);this.$emit("save",e)},remove:function(){this.$emit("remove",{id:this.data.id})},searchBranches:function(){var e=this;this.loading=!0;var t={Authorization:"Bearer "+this.token.access_token};(0,r.default)({method:"GET",url:(0,i.baseApi)(this.selectedStore.url_id,this.langId,"storebranches/gettoko"),params:{search_column:"role_id",search_text:"OW",active:1},headers:t}).then(function(t){e.branches=t.data.data,e.loading=!1}).catch(function(t){e.loading=!1,e.$notify({type:"warning",title:error.response.data.error.message,message:error.response.data.error.error})})}}}},JTY7:function(e,t,a){"use strict";a.r(t);var n=a("ms8p"),s=a("XU2e");for(var i in s)["default"].indexOf(i)<0&&function(e){a.d(t,e,function(){return s[e]})}(i);var r=a("KHd+"),o=Object(r.a)(s.default,n.a,n.b,!1,null,null,null);o.options.__file="Index.vue",t.default=o.exports},Nbur:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return s});var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("h4",[e._v(e._s(e.lang.merge_stocks))]),e._v(" "),a("div",{staticClass:"card-buttons"},[a("el-button",{attrs:{disabled:e.disabledSave,size:"small",type:"success",icon:"el-icon-check"},on:{click:e.save}},[e._v("\n          "+e._s(e.lang.save)+"\n        ")]),e._v(" "),e.data.id?a("el-button",{attrs:{disabled:e.disabledSave,size:"small",type:"danger",icon:"el-icon-delete"},on:{click:e.remove}}):e._e()],1)]),e._v(" "),a("div",{staticClass:"card-body"},[a("el-form",{attrs:{"label-width":"120px"},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},[a("el-form-item",{attrs:{required:!0,label:this.$lang[e.langId].select_store}},[a("el-select",{attrs:{label:e.lang.please_select},model:{value:e.data.ref_id,callback:function(t){e.$set(e.data,"ref_id",t)},expression:"data.ref_id"}},e._l(e.branches,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),a("p",{staticClass:"size-12 input-desc oldgrey"},[e._v("\n            "+e._s(e.lang.info_store_merge_stocks)+"\n          ")])],1),e._v(" "),a("el-form-item",{attrs:{label:this.$lang[e.langId].alias}},[a("el-input",{attrs:{type:"text"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.save.apply(null,arguments)}},model:{value:e.data.alias,callback:function(t){e.$set(e.data,"alias",t)},expression:"data.alias"}})],1)],1)],1)])],1)},s=[]},Q8xT:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=d(a("P2sY")),s=a("xCek"),i=d(a("vDqi")),r=d(a("6ClL")),o=a("6y4V");function d(e){return e&&e.__esModule?e:{default:e}}t.default={mixins:[o.checkCustomPermission],data:function(){return{loading:!0,saved:!1,tmp:{},data:[],isEditing:[],disabledButton:!1}},components:{GroupForm:r.default},computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},langId:function(){return this.$store.state.userStores.langId},lang:function(){return this.$store.state.userStores.lang},rootLang:function(){return this.$lang[this.$store.state.userStores.langId]}},watch:{"$store.getters.selectedStore":function(){this.getData()}},methods:{getData:function(){var e=this;this.loading=!0;var t={Authorization:"Bearer "+this.token.access_token};(0,i.default)({method:"GET",url:(0,s.baseApi)(this.selectedStore.url_id,this.langId,"storestockrefs/"),params:this.params,headers:t}).then(function(t){e.data=t.data.data,e.data.map(function(){e.isEditing.push({editing:!1})}),e.loading=!1}).catch(function(t){e.loading=!1,e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error})})},save:function(e,t){var a=this,n="POST",r="store",o="";e.id&&(n="PUT",r="updatealias",o=e.id),this.loading=!0;var d={Authorization:"Bearer "+this.token.access_token};(0,i.default)({method:n,url:(0,s.baseApi)(this.selectedStore.url_id,this.langId,"storestockrefs/"+r+"/"+o),headers:d,data:e}).then(function(e){a.getData(),a.saved=!0,a.isEditing[t].editing=!1,a.$message({type:"success",message:"saved"})}).catch(function(e){a.saved=!1,a.loading=!1,a.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error})})},remove:function(e,t){var a=this;this.loading=!0;var n={Authorization:"Bearer "+this.token.access_token};(0,i.default)({method:"DELETE",url:(0,s.baseApi)(this.selectedStore.url_id,this.langId,"storestockrefs/delete/"+e.id),headers:n}).then(function(e){a.loading=!1,a.data.splice(t,1),a.$message({type:"success",message:e.data.data.message})}).catch(function(e){a.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error}),a.loading=!1})},edit:function(e,t){this.tmp={},this.isEditing.map(function(e){e.editing=!1}),this.isEditing[t].editing=!0,this.tmp=(0,n.default)({},e)},cancelManageItems:function(e){this.isEditing[e].editing=!1,this.tmp={}}},mounted:function(){this.getData()}}},XU2e:function(e,t,a){"use strict";a.r(t);var n=a("Q8xT"),s=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,function(){return n[e]})}(i);t.default=s.a},ms8p:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return s});var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("el-row",{attrs:{gutter:10}},[e.checkCustomPermission("website/storestockrefs","store")?a("el-col",{attrs:{md:10}},[a("group-form",{attrs:{loading:e.loading,saved:e.saved},on:{save:e.save}})],1):e._e(),e._v(" "),a("el-col",{attrs:{md:14}},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("h4",[e._v(e._s(e.lang.registered))])]),e._v(" "),a("div",{staticClass:"card-body"},[a("el-table",{attrs:{data:e.data,stripe:"","max-height":"250"}},[a("el-table-column",{attrs:{prop:"name",label:e.lang.name,width:"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"url_id",label:e.rootLang.url_id,width:"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"alias",label:e.rootLang.alias,width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isEditing[t.$index].editing?e._e():a("span",{staticClass:"editable",on:{click:function(a){return e.edit(t.row,t.$index)}}},[e._v("\n                    "+e._s(t.row.alias)+"\n                  ")]),e._v(" "),e.isEditing[t.$index].editing?a("div",{staticClass:"form-in-cell"},[a("el-input",{attrs:{type:"text",size:"mini"},model:{value:e.tmp.alias,callback:function(t){e.$set(e.tmp,"alias",t)},expression:"tmp.alias"}}),e._v(" "),a("el-button",{attrs:{size:"mini",icon:"el-icon-close",type:"info"},on:{click:function(a){return e.cancelManageItems(t.$index)}}}),e._v(" "),a("el-button",{attrs:{size:"mini",icon:"el-icon-check",type:"success"},on:{click:function(a){return e.save(e.tmp,t.$index)}}})],1):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.rootLang.action},scopedSlots:e._u([{key:"default",fn:function(t){return[e.selectedStore.store_id!==t.row.id?a("button-action-authenticated",{staticClass:"btn-plain",attrs:{permission:["website/storestockrefs","destroy"],type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return e.remove({id:t.row.id},t.$index)}}}):e._e()]}}])})],1)],1)])],1)],1)],1)},s=[]},r21l:function(e,t,a){"use strict";a.r(t);var n=a("8Evn"),s=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,function(){return n[e]})}(i);t.default=s.a}}]);