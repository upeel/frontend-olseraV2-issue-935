(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2326"],{"9nHG":function(t,e,a){"use strict";a.r(e);var s=a("iYXk"),n=a.n(s);for(var r in s)["default"].indexOf(r)<0&&function(t){a.d(e,t,function(){return s[t]})}(r);e.default=n.a},B9Ks:function(t,e,a){"use strict";a.d(e,"a",function(){return s}),a.d(e,"b",function(){return n});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"main-content"},[a("div",{staticClass:"table-handler-flex"},[a("div",{staticStyle:{"flex-grow":"1"}},[a("h4",{staticClass:"main-content__title"},[t._v(t._s(t.$lang[t.langId].list)+" Stok Outstanding")]),t._v(" "),a("p",{staticClass:"main-content__subtitle"},[t._v(t._s(t.params.total)+" "+t._s(t.lang.outgoing_stock))])])]),t._v(" "),a("div",{staticClass:"table-handler-flex mb-16"},[a("div",{staticClass:"mb-8"},[a("el-select",{staticClass:"inline-form",attrs:{placeholder:t.lang.please_select,filterable:"",size:"small"},on:{change:t.changePageTable},model:{value:t.params.per_page,callback:function(e){t.$set(t.params,"per_page",e)},expression:"params.per_page"}},t._l(t.pages,function(e){return a("el-option",{key:e,attrs:{value:e,label:e+" "+t.lang.rows}})}),1)],1),t._v(" "),a("div",{staticClass:"mb-8",staticStyle:{"flex-grow":"1"}},[t.bulkPosting?a("el-button",{attrs:{type:"primary",loading:t.loadingPosting},on:{click:t.handleBulkPost}},[t._v("Post stok masuk")]):t._e()],1),t._v(" "),a("div",{staticClass:"mb-8"},[a("el-input",{staticClass:"inline-form input-search",attrs:{clearable:"",placeholder:t.lang.search+" "+t.lang.outgoing_stock_no,"prefix-icon":"el-icon-search",size:"small"},on:{change:t.handleSearch},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}})],1)]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",attrs:{data:t.tableData,border:"",stripe:""},on:{"sort-change":t.changeSortTable}},[a("el-table-column",{attrs:{width:"40",fixed:"","class-name":"text-center",prop:"in_out_id"},scopedSlots:t._u([{key:"header",fn:function(e){return[a("el-checkbox",{on:{change:t.handleCheckedAll},model:{value:t.checkedAll,callback:function(e){t.checkedAll=e},expression:"checkedAll"}})]}},{key:"default",fn:function(e){return[a("el-checkbox",{attrs:{disabled:e.row.disableChecked},on:{change:function(a){return t.selectChecked(e.row.in_out_id)}},model:{value:e.row.checked,callback:function(a){t.$set(e.row,"checked",a)},expression:"props.row.checked"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.$lang[t.langId].number,sortable:"",prop:"trans_no",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:{path:"/inventory/stocksoutstanding/"+e.row.in_out_id}}},[t._v("\n            "+t._s(e.row.trans_no)+"\n          ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.rootLang.transfer_date,sortable:"",prop:"date",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.fdate)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.rootLang.date_received,sortable:"",prop:"ref_date",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.fref_date)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"QTY "+t.lang.total,sortable:"",prop:"ref_date",align:"right",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.total_qty_send)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"QTY "+t.rootLang.accepted,sortable:"",prop:"ref_date",align:"right",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.total_qty_received)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"QTY "+t.lang.difference,sortable:"",prop:"ref_date",align:"right",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.total_qty_difference)+"\n        ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.lang.status,sortable:"",prop:"status_stock"},scopedSlots:t._u([{key:"default",fn:function(e){return["OUTSTANDING"===e.row.status_stock?a("el-tag",{attrs:{size:"mini",type:"warning"}},[t._v("\n            "+t._s(e.row.status_stock)+"\n          ")]):"POSTED"===e.row.status_stock?a("el-tag",{attrs:{size:"mini",type:"success"}},[t._v("\n            "+t._s(e.row.status_stock)+"\n          ")]):a("el-tag",{attrs:{size:"mini"}},[t._v("\n            "+t._s(e.row.status_stock)+"\n          ")])]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.params.currentPage,"page-size":t.params.per_page,layout:"prev, pager, next, jumper",total:t.params.total},on:{"size-change":t.changePageTable,"current-change":t.changeCurrentPage,"update:currentPage":function(e){return t.$set(t.params,"currentPage",e)},"update:current-page":function(e){return t.$set(t.params,"currentPage",e)}}})],1),t._v(" "),a("el-dialog",{attrs:{title:t.lang.update+t.lang.status,visible:t.importDialog,"max-width":"760px"},on:{"update:visible":function(e){t.importDialog=e}}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{md:8}},[a("a",{staticClass:"btn btn-default",attrs:{href:t.baseURL+"olsera_stockout_import_template.csv"}},[t._v("\n          "+t._s(t.lang.download_template)+"\n        ")])]),t._v(" "),a("el-col",{attrs:{md:16}},[t.dropdownForm?a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[t._v(t._s(t.lang.import_from_csv_info))])]),t._v(" "),a("vue-dropzone",{ref:"dropzone",attrs:{id:"drop1",options:{url:t.baseURL+"api/"+this.selectedStore.url_id+"/admin/v1/"+this.langId+"/stockoutgoing/importfromcsv",headers:{Authorization:"Bearer "+this.token.access_token,"Cache-Control":null},method:"post",acceptedFiles:".csv"}},on:{"vdropzone-success":t.afterComplete,"vdropzone-error":t.failed}}),t._v(" "),a("el-button",{staticStyle:{"margin-top":"8px"},on:{click:t.removeAllFiles}},[t._v("\n            "+t._s(t.$lang[t.langId].remove_all_file)+"\n          ")])],1):t._e()],1)],1)],1)],1)},n=[]},DChC:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=r(a("QbLZ")),n=r(a("Ljqw"));function r(t){return t&&t.__esModule?t:{default:t}}var o={mixins:[a("6y4V").checkCustomPermission],computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},langId:function(){return this.$store.state.userStores.langId},lang:function(){return this.$store.state.userStores?this.$store.state.userStores.lang:{}},userRole:function(){var t=this.$store.getters.selectedStore;return{role_id:t.role_id,role_name:t.role_name,is_pos_only:t.is_pos_only,is_mobile:t.is_mobile}},rootLang:function(){return this.$lang[this.langId]},headers:function(){var t=this.$store.getters.token;return this.$store.getters.webviewMode&&(t=this.$store.getters.webviewToken),{Authorization:"Bearer "+t.access_token}},baseURL:function(){return n.default},loggedInUser:function(){return this.$store.state.user.loggedInUser},stageLevel:function(){return"sit"},defaultAccessByStore:function(){return["setdemo1","allinolsera2"]},wejayafoodAccessByStore:function(){return["setdemo1","allinolsera2","ayammrotholpusat","ayammrotholdramaga"]},saveToAllAccessStore:function(){return["setdemo1","allinolsera2","siliwangidutagarden","barokahfrozenfood"]},outlets:function(){var t=[{name:this.$store.state.userStores.lang.all,store_id:0,url_id:"all"}],e=[];return this.$store.getters.stores.map(function(a){e.includes(a.store_id)||a.is_store_active&&(t.push((0,s.default)({},a)),e.push(a.store_id))}),t},tokopediaActiveStore:function(){return this.$store.state.tokopediaActiveStore},shopeeActiveStore:function(){return this.$store.state.shopeeActiveStore}}};e.default=o},DTW9:function(t,e,a){"use strict";a.r(e);var s=a("B9Ks"),n=a("9nHG");for(var r in n)["default"].indexOf(r)<0&&function(t){a.d(e,t,function(){return n[t]})}(r);var o=a("KHd+"),l=Object(o.a)(n.default,s.a,s.b,!1,null,null,null);l.options.__file="Index.vue",e.default=l.exports},Jtn0:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getListOutstanding=function(t){return(0,s.service)({url:"/stockinoutstransfer",params:t})},e.getDetailOutstanding=function(t){return(0,s.service)({url:"/stockinoutstransfer/"+t})},e.downloadOutstanding=function(t){return(0,s.service)({url:"/stockinoutstransfer/"+t,responseType:"blob",params:{type:"pdf"}})},e.postOutstanding=function(t){return(0,s.service)({url:"/stockinoutstransfer/"+t,method:"post"})},e.bulkpostOutstanding=function(t){return(0,s.service)({url:"/stockinoutstransfer/bulkpost",method:"post",data:t})};var s=a("xCek")},iYXk:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=c(a("m1cH")),n=a("xCek"),r=c(a("vDqi")),o=a("Jtn0"),l=c(a("ksP6"));a("Hj/Q");var i=c(a("DChC")),u=a("rOiX");function c(t){return t&&t.__esModule?t:{default:t}}e.default={name:"OutStandingList",components:{vueDropzone:l.default,tokenc:""},mixins:[i.default],data:function(){return{loading:!0,isButtonDisabled:!1,tableData:[],statusValue:null,searchValue:null,importDialog:!1,dropdownForm:!0,pages:[5,10,20],statusSelect:[{value:"",label:this.$store.state.userStores.lang.all},{value:"Pending",label:this.$lang[this.$store.state.userStores.langId].pending},{value:"Shipping",label:this.$lang[this.$store.state.userStores.langId].has_confirm},{value:"Shipped",label:this.$store.state.userStores.lang.delivered}],downloadSelect:[{value:"transfer",label:this.$store.state.userStores.lang.transfer_to_store,locked:(0,u.isHiddenByFeature)(this.$store.getters.selectedStore.plan_type_id,"/inventory/stocksoutgoing/create?path=transfer")},{value:"add",label:this.$store.state.userStores.lang.add+" "+this.$store.state.userStores.lang.outgoing_stock,locked:!1}],params:{search:null,total:null,currentPage:1,per_page:10,page:1},storeBrances:[],checkedAll:!1,loadingPosting:!1}},computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},langId:function(){return this.$store.state.userStores.langId},lang:function(){return this.$store.state.userStores.lang},bulkPosting:function(){var t=[];return this.tableData.map(function(e){e.checked&&t.push(e)}),t.length>0}},watch:{"$store.getters.selectedStore":function(){this.getData()}},mounted:function(){this.getData(),this.getStoreBrance()},methods:{getData:function(){var t=this;this.loading=!0,(0,o.getListOutstanding)(this.params).then(function(e){t.tableData=e.data.data,t.tableData.map(function(t){t.checked=!1,t.disableChecked=!1,"POSTED"===t.status_stock&&(t.disableChecked=!0)}),t.params.total=e.data.meta.total,t.loading=!1}).catch(function(e){t.loading=!1,t.params.total=0,404!==e.response.data.error.status_code&&t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error})})},getStoreBrance:function(){var t=this;this.loading=!0;var e={Authorization:"Bearer "+this.token.access_token};(0,r.default)({method:"GET",url:(0,n.baseApi)(this.selectedStore.url_id,this.langId,"storebranches/"),headers:e}).then(function(e){t.storeBrances=e.data.data,t.loading=!1}).catch(function(e){t.loading=!1,t.params.total=0,t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error})})},changePageTable:function(t){this.params.per_page=t,this.getData()},handleSearch:function(t){this.params.page=1,this.params.currentPage=1,this.params.search_text="",this.params.search_column=null,this.params.search=this.searchValue,this.getData()},changeSortTable:function(t){"ascending"===t.order&&(t.order="asc"),"descending"===t.order&&(t.order="desc"),null===t.order&&(t.order=this.params.sort_type),console.log(t),this.params.sort_type=t.order,this.params.sort_column=t.prop,this.getData()},changeCurrentPage:function(t){this.params.currentPage=t,this.params.page=t,this.getData()},addData:function(t){var e="";e=0===t?"transfer":"add",this.$router.push({path:"/inventory/stocksoutgoing/create",query:{path:e}})},afterComplete:function(t,e){console.log(e),0===e.error&&(this.$notify({title:"Sukses",message:e.data+" Produk."}),this.importDialog=!1,this.$router.push({path:"/inventory/stocksoutgoing/"+e.id}))},failed:function(t,e,s){console.log("file",t),console.log("message",e),console.log("xhr",s),a("EVdn")(".dz-error-message span").text(e.error.error)},removeAllFiles:function(){this.$refs.dropzone.removeAllFiles()},goToSinglePage:function(t){this.$router.push({path:"/inventory/stocksoutstanding/"+t.in_out_id})},selectChecked:function(t){var e=[].concat((0,s.default)(this.tableData));e.map(function(e){e.in_out_id===t&&"POSTED"===e.status_stock&&(e.checked=!1)}),this.tableData=[].concat((0,s.default)(e)),this.$forceUpdate()},handleCheckedAll:function(t){var e=[].concat((0,s.default)(this.tableData));t?e.map(function(t){"POSTED"===t.status_stock?t.checked=!1:t.checked=!0}):e.map(function(t){t.checked=!1}),this.tableData=[].concat((0,s.default)(e))},handleBulkPost:function(){var t=this,e=[];this.tableData.map(function(t){t.checked&&e.push(t.in_out_id)}),this.loadingPosting=!1,(0,o.bulkpostOutstanding)({in_out_id:e.join(",")}).then(function(e){t.getData(),t.$notify({type:"success",title:"Success",message:"Stok outstanding berhasil dipost ke stok masuk!"}),t.loadingPosting=!1}).catch(function(e){t.loadingPosting=!1,t.data={},t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error})})}}}}}]);