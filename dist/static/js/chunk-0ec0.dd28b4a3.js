(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0ec0"],{"2uR2":function(t,e,a){"use strict";a.r(e);var s=a("KKXR"),n=a("ysUs");for(var i in n)["default"].indexOf(i)<0&&function(t){a.d(e,t,function(){return n[t]})}(i);var r=a("KHd+"),o=Object(r.a)(n.default,s.a,s.b,!1,null,null,null);o.options.__file="List.vue",e.default=o.exports},"356E":function(t,e,a){"use strict";a.d(e,"a",function(){return s}),a.d(e,"b",function(){return n});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"box-card"},[a("div",{staticClass:"table-handler-flex",attrs:{slot:"header"},slot:"header"},[a("h4",{staticClass:"box-title"},[t._v(t._s(t.lang.add))]),t._v(" "),a("div",[a("el-button",{attrs:{disabled:t.disabledSave,size:"small",type:"success",icon:"el-icon-check"},on:{click:t.save}},[t._v("\n          "+t._s(t.lang.save)+"\n        ")]),t._v(" "),t.data.id?a("button-action-authenticated",{attrs:{permission:["settings/posrestolayout","destroy"],disabled:t.disabledSave,size:"small",type:"danger",icon:"el-icon-delete"},on:{click:t.remove}}):t._e()],1)]),t._v(" "),a("div",{staticClass:"card-body"},[a("el-form",{attrs:{"label-width":"120px"},model:{value:t.data,callback:function(e){t.data=e},expression:"data"}},[a("el-form-item",{attrs:{label:t.lang.layout_name,required:!0}},[a("el-input",{attrs:{type:"text"},model:{value:t.data.name,callback:function(e){t.$set(t.data,"name",e)},expression:"data.name"}}),t._v(" "),a("p",{staticClass:"size-12 input-desc oldgrey"},[t._v("\n            "+t._s(t.lang.info_resto_layout_name)+"\n          ")])],1),t._v(" "),a("el-form-item",{attrs:{label:t.lang.table_numbers,required:!0}},[a("el-input",{attrs:{placeholder:"type and hit enter",type:"text"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addTablesState.apply(null,arguments)},change:t.addTablesState},model:{value:t.data.table_numbers,callback:function(e){t.$set(t.data,"table_numbers",e)},expression:"data.table_numbers"}}),t._v(" "),a("p",{staticClass:"size-12 input-desc oldgrey"},[t._v("\n            "+t._s(t.lang.info_table_numbers)+"\n          ")]),t._v(" "),t.data.items?t._l(t.data.items,function(e,s){return a("el-tag",{key:s,attrs:{closable:""},on:{close:function(a){return t.removeTable(e,s)}}},[t._v("\n              "+t._s(e.name)+"\n            ")])}):t._e()],2)],1)],1)])],1)},n=[]},"5itK":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(a("m1cH")),n=i(a("QbLZ"));function i(t){return t&&t.__esModule?t:{default:t}}e.default={props:["saved","loading","formData","newState"],data:function(){return{disabledSave:!0,data:{items:[],table_numbers:""},arr:[]}},computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},lang:function(){return this.$store.state.userStores.lang}},watch:{data:{handler:function(t){t.items||(this.data.items=[]),t.name||(this.data.name=""),t.name&&""!==t.name&&t.items&&t.items.length>0?this.disabledSave=!1:this.disabledSave=!0},deep:!0},saved:{handler:function(t){this.disabledSave=!0===t},deep:!0},formData:{handler:function(t){var e=this;this.data=(0,n.default)({},t),t.items||(this.data.items=[]),t.name||(this.data.name=""),t.items&&t.items.map(function(t){-1===e.arr.indexOf(t.name)&&e.arr.push(t.name)})},deep:!0,immediate:!0}},methods:{addTablesState:function(t){var e=this;-1===this.arr.indexOf(t)&&this.arr.push(t),this.data.items=[],this.arr.map(function(t){e.data.items.push({name:t})}),this.data.table_numbers=""},save:function(){this.disabledSave=!0;var t=(0,n.default)({},this.data);t.tempitems=[].concat((0,s.default)(this.data.items)),t.items=t.tempitems.map(function(t){return t.name}),t.table_numbers=t.items.join(","),this.$emit("save",t)},remove:function(){this.$emit("remove",{id:this.data.id})},removeTable:function(t,e){this.data.items.splice(e,1);var a=[];this.data.items.map(function(t){a.push(t.name)}),this.arr=a}}}},"CsW/":function(t,e,a){"use strict";a.r(e);var s=a("356E"),n=a("oDaN");for(var i in n)["default"].indexOf(i)<0&&function(t){a.d(e,t,function(){return n[t]})}(i);var r=a("KHd+"),o=Object(r.a)(n.default,s.a,s.b,!1,null,null,null);o.options.__file="Form.vue",e.default=o.exports},Cytq:function(t,e,a){"use strict";a.r(e);var s=a("peeN"),n=a.n(s);for(var i in s)["default"].indexOf(i)<0&&function(t){a.d(e,t,function(){return s[t]})}(i);e.default=n.a},KKXR:function(t,e,a){"use strict";a.d(e,"a",function(){return s}),a.d(e,"b",function(){return n});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dd-handle"},[t._m(0),t._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{sm:18}},[t._v("\n      "+t._s(t.item.name)+" "),a("br"),t._v(" "),a("span",{staticClass:"size-10 oldgrey"},[t._v(t._s(t.item.table_name))])]),t._v(" "),a("el-col",{staticClass:"text-right",attrs:{sm:6}},[a("button-action-authenticated",{attrs:{permission:["settings/posrestolayout","show"],size:"mini",type:"text",icon:"el-icon-edit-outline"},on:{click:t.edit}})],1)],1)],1)},n=[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"hand"},[e("i",{staticClass:"el-icon-rank"})])}]},R3mc:function(t,e,a){"use strict";a.r(e);var s=a("ZyZB"),n=a("Cytq");for(var i in n)["default"].indexOf(i)<0&&function(t){a.d(e,t,function(){return n[t]})}(i);var r=a("KHd+"),o=Object(r.a)(n.default,s.a,s.b,!1,null,null,null);o.options.__file="Index.vue",e.default=o.exports},ZyZB:function(t,e,a){"use strict";a.d(e,"a",function(){return s}),a.d(e,"b",function(){return n});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("el-card",{staticClass:"card-body"},[a("div",{staticClass:"table-handler-flex",attrs:{slot:"header"},slot:"header"},[a("h4",{staticClass:"box-title"},[t._v(t._s(t.lang.restaurant_layout))]),t._v(" "),a("button-action-authenticated",{attrs:{permission:["settings/posrestolayout","store"],type:"success",icon:"el-icon-plus"},on:{click:function(e){t.isAdding=!0}}},[t._v("\n            "+t._s(t.lang.add)+"\n          ")])],1),t._v(" "),a("div",{staticClass:"card-body"},[a("draggable",{staticClass:"dd-list dragArea",attrs:{options:{group:{name:"collections"}}},on:{change:t.sortsChanged},model:{value:t.data,callback:function(e){t.data=e},expression:"data"}},t._l(t.data,function(e){return a("div",{key:e.id,staticClass:"dd-item"},[a("list",{attrs:{item:e},on:{edit:t.edit}})],1)}),0),t._v(" "),t.moreLink?a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingItems,expression:"loadingItems"}],staticClass:"load-more"},[a("el-button",{staticClass:"btn-block",attrs:{disabled:t.disabledButton},on:{click:t.loadMore}},[t._v("\n              "+t._s(t.$lang[t.langId].load_more)+"\n            ")])],1):t._e()],1)])],1)]),t._v(" "),a("el-dialog",{staticClass:"no-header",attrs:{visible:t.isAdding},on:{"update:visible":function(e){t.isAdding=e}}},[a("group-form",{attrs:{"form-data":t.tempData,loading:t.loading,"new-state":t.newState,saved:t.saved},on:{save:t.save}})],1),t._v(" "),a("el-dialog",{staticClass:"no-header",attrs:{visible:t.isEditing,width:"80%"},on:{"update:visible":function(e){t.isEditing=e}}},[a("div",{staticClass:"dialog-body"},[a("group-form",{attrs:{"form-data":t.singleData,saved:t.saved},on:{remove:t.remove,save:t.save}})],1)])],1)},n=[]},oDaN:function(t,e,a){"use strict";a.r(e);var s=a("5itK"),n=a.n(s);for(var i in s)["default"].indexOf(i)<0&&function(t){a.d(e,t,function(){return s[t]})}(i);e.default=n.a},peeN:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=m(a("m1cH")),n=m(a("QbLZ")),i=m(a("4d7F")),r=m(a("t2rG")),o=a("xCek"),d=m(a("vDqi")),l=m(a("CsW/")),u=m(a("2uR2")),c=a("6y4V");function m(t){return t&&t.__esModule?t:{default:t}}e.default={mixins:[c.checkCustomPermission],data:function(){return{loading:!0,loadingItems:!1,saved:!1,data:[],specifications:[],singleData:{},tmpData:[],moreLink:null,disabledSaveSorts:!0,isEditing:!1,isAdding:!1,disabledButton:!1,tmp:{data:[]},newState:!0,tempData:{items:[],name:"",table_numbers:""}}},components:{GroupForm:l.default,draggable:r.default,List:u.default},computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},lang:function(){return this.$store.state.userStores.lang},langId:function(){return this.$store.state.userStores.langId}},watch:{"$store.getters.selectedStore":function(){this.getData()}},methods:{getData:function(){var t=this;this.loading=!0;var e={Authorization:"Bearer "+this.token.access_token};(0,d.default)({method:"GET",url:(0,o.baseApi)(this.selectedStore.url_id,this.langId,"posrestolayout/"),params:this.params,headers:e}).then(function(e){t.data=e.data.data,t.moreLink=e.data.links.next,t.loading=!1}).catch(function(e){t.loading=!1,t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error})})},getSingleData:function(t,e,a){var s={Authorization:"Bearer "+this.token.access_token};(0,d.default)({method:"GET",url:(0,o.baseApi)(this.selectedStore.url_id,this.langId,"posrestolayout/detail/"+t),params:this.params,headers:s}).then(function(t){e(t.data.data)}).catch(function(t){a(t)})},sortsChanged:function(t){this.checkCustomPermission("settings/posrestolayout","edit")&&this.saveSorts()},edit:function(t){var e=this;this.loading=!0,new i.default(function(a,s){e.getSingleData(t.id,a,s)}).then(function(t){e.singleData=(0,n.default)({},t),e.isEditing=!0,e.loading=!1}).catch(function(t){e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error}),e.isEditing=!1,e.loading=!1})},save:function(t){var e=this,a="POST",s="store",n="";t.id&&(a="PUT",s="update",n=t.id),this.loading=!0;var i={Authorization:"Bearer "+this.token.access_token};(0,d.default)({method:a,url:(0,o.baseApi)(this.selectedStore.url_id,this.langId,"posrestolayout/"+s+"/"+n),headers:i,data:t}).then(function(t){e.getData(),e.saved=!0,e.singleData={},e.isAdding=!1,e.loading=!1,e.isEditing=!1,e.newState=!0,e.$message({type:"success",message:"saved"})}).catch(function(a){e.saved=!1,e.loading=!1,e.newState=!1,e.tempData={name:t.name,items:t.tempitems,table_numbers:""},e.$notify({type:"warning",title:a.response.data.error.message,message:a.response.data.error.error})})},saveSorts:function(){var t=this;this.loading=!0,this.disabledSaveSorts=!0;var e={Authorization:"Bearer "+this.token.access_token},a=[].concat((0,s.default)(this.data)),n={sorted_ids:a=a.map(function(t,e){return{id:t.id}})};(0,d.default)({method:"POST",url:(0,o.baseApi)(this.selectedStore.url_id,this.langId,"posrestolayout/sorting"),headers:e,params:{per_page:this.data.length},data:n}).then(function(e){t.data=e.data.data,t.$message({type:"success",message:"Success"}),t.loading=!1}).catch(function(e){t.disabledSaveSorts=!1,t.loading=!1,t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error})})},loadMore:function(){var t=this;this.disabledButton=!0,this.loadingItems=!0;var e={Authorization:"Bearer "+this.token.access_token};(0,d.default)({method:"GET",url:this.moreLink,params:this.params,headers:e}).then(function(e){t.data=t.data.concat(e.data.data),t.loadingItems=!1,t.moreLink=e.data.links.next,t.disabledButton=!1}).catch(function(e){t.loadingItems=!1,t.disabledButton=!1,t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error})})},remove:function(t){var e=this;this.loadingItems=!0;var a={Authorization:"Bearer "+this.token.access_token};(0,d.default)({method:"DELETE",url:(0,o.baseApi)(this.selectedStore.url_id,this.langId,"posrestolayout/delete/"+t.id),headers:a}).then(function(a){e.data.map(function(a,s){a.id===t.id&&e.data.splice(s,1)}),e.loadingItems=!1,e.isEditing=!1,e.singleData={},e.$message({type:"success",message:a.data.data.message})}).catch(function(t){e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error}),e.loadingItems=!1,e.isEditing=!0})},cancelManageItems:function(){this.isEditing=!1}},mounted:function(){this.getData()}}},"r/+j":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{item:{type:Object,default:null}},methods:{edit:function(){this.$router.push({path:"/restomode/posrestolayout/"+this.item.id})}}}},ysUs:function(t,e,a){"use strict";a.r(e);var s=a("r/+j"),n=a.n(s);for(var i in s)["default"].indexOf(i)<0&&function(t){a.d(e,t,function(){return s[t]})}(i);e.default=n.a}}]);