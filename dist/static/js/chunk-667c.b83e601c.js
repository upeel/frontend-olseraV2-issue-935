(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-667c"],{"9q2H":function(t,e,a){"use strict";a.d(e,"a",function(){return i}),a.d(e,"b",function(){return s});var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"box-card"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("h3",{staticClass:"box-title"},[t._v(t._s(t.lang.order_item))]),t._v(" "),t.showEdit&&"P"===t.detailData.status&&0==t.detailData.is_paid?a("div",{staticClass:"pull-right"},[a("button-action-authenticated",{attrs:{permission:[t.customRPermis,"edit"],type:"info",size:"small",icon:"el-icon-plus"},on:{click:t.showPackageDialog}},[t._v("\n        "+t._s(t.lang.product_combo)+"\n      ")]),t._v(" "),a("button-action-authenticated",{attrs:{permission:[t.customRPermis,"edit"],type:"info",size:"small",icon:"el-icon-plus"},on:{click:t.showProductDialog}},[t._v("\n        "+t._s(t.lang.product)+"\n      ")]),t._v(" "),a("button-action-authenticated",{attrs:{permission:[t.customRPermis,"edit"],type:"info",size:"small",icon:"el-icon-plus"},on:{click:function(e){t.importDialog=!0}}},[t._v("\n        "+t._s(t.lang.import)+"\n      ")])],1):t._e()]),t._v(" "),a("div",{staticClass:"card-body"},[t.showTable?a("div",[t.detailData.is_credit?a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table-orderitems table table-striped table-bordered"},[a("thead",[a("tr",[a("th",{staticClass:"description",attrs:{width:"250"}},[t._v(t._s(t.lang.description))]),t._v(" "),a("th",{attrs:{width:"150"}},[t._v(t._s(t.lang.serial))]),t._v(" "),a("th",{attrs:{width:"50"}},[t._v(t._s(t.lang.qty))]),t._v(" "),a("th",{attrs:{width:"100"}},[t._v(t._s(t.lang.price)+" ("+t._s(t.detailData.currency_id)+")")]),t._v(" "),a("th",{staticClass:"total",attrs:{width:"100"}},[t._v(t._s(t.lang.total_price)+" ("+t._s(t.detailData.currency_id)+")")]),t._v(" "),a("th",{attrs:{width:"100"}},[t._v(t._s(t.$lang[t.langId].action))])])]),t._v(" "),a("tbody",[t._l(t.detailData.orderitems,function(e,i){return a("tr",{key:i},[a("td",[a("div",{staticClass:"flex-container"},[e.photo_md?a("el-avatar",{staticStyle:{"min-width":"40px"},attrs:{src:e.photo_md}}):t._e(),t._v(" "),a("div",{staticClass:"ml-8"},[a("router-link",{attrs:{to:{path:"/catalog/product/"+e.product_id}}},[e.product_name?[t._v(t._s(e.product_name))]:t._e(),t._v(" "),e.product_variant_name?[t._v(t._s(e.product_variant_name))]:t._e(),t._v(" "),e.product_combo_name?[t._v(t._s(e.product_combo_name))]:t._e(),t._v(" "),e.product_sku?a("span",[t._v("\n                        ("+t._s(e.product_sku)+")\n                      ")]):t._e(),t._v(" "),e.product_combo_id?a("div",{staticClass:"product-comodities"},[a("strong",{staticClass:"size-11"},[t._v(t._s(t.lang.products_inside))]),t._v(" "),a("ul",{staticClass:"list-unstyled"},t._l(e.products,function(e){return a("li",{key:e.id},[t._v("\n                            "+t._s(e.product_name)+" ("+t._s(e.qty)+")\n                          ")])}),0)]):t._e(),t._v(" "),e.note?a("div",{staticClass:"font-12"},[t._v(t._s(e.note))]):t._e()],2)],1)],1)]),t._v(" "),a("td",{attrs:{valign:"middle",align:"left"}},[t.rowState[i].edited?a("div",[1==e.order_with_serial?a("el-input",{attrs:{type:"text",placeholder:t.$lang[t.langId].input_code,clearable:""},model:{value:t.editTable.noSerial,callback:function(e){t.$set(t.editTable,"noSerial",e)},expression:"editTable.noSerial"}}):t._e()],1):a("div",[e.serial_no?a("p",[t._v(t._s(e.serial_no))]):a("p",[t._v("-")])])]),t._v(" "),a("td",{attrs:{valign:"middle",align:"left"}},[t.rowState[i].edited?a("div",["P"===t.detailData.status&&0==t.detailData.is_paid?a("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:t.editTable.qty,callback:function(e){t.$set(t.editTable,"qty",e)},expression:"editTable.qty"}}):a("el-input",{attrs:{disabled:""},model:{value:e.qty,callback:function(a){t.$set(e,"qty",a)},expression:"item.qty"}})],1):a("div",[t._v(" "+t._s(e.qty)+" ")])]),t._v(" "),a("td",{attrs:{valign:"middle",align:"left"}},[t.rowState[i].edited?a("div",["P"===t.detailData.status&&0==t.detailData.is_paid?a("input-money",{nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.handleSimpanRow(i,e)}},model:{value:t.editTable.price,callback:function(e){t.$set(t.editTable,"price",e)},expression:"editTable.price"}}):a("el-input",{attrs:{disabled:""},model:{value:t.editTable.price,callback:function(e){t.$set(t.editTable,"price",e)},expression:"editTable.price"}})],1):a("div",{staticClass:"text-right"},[t._v(" "+t._s(e.fprice)+" ")]),t._v(" "),e.fdiscount&&"0"!==e.fdiscount?a("div",{staticClass:"font-12 text-right"},[t._v("( - "+t._s(e.fdiscount)+")")]):t._e()]),t._v(" "),a("td",{attrs:{valign:"middle",align:"right"}},[t._v(t._s(e.famount))]),t._v(" "),t.showEdit&&"P"===t.detailData.status&&0==t.detailData.is_paid?a("td",[t.rowState[i].edited?t._e():a("button-action-authenticated",{staticStyle:{color:"#0286CD"},attrs:{permission:[t.customRPermis,"edit"],size:"small",type:"text",icon:"el-icon-edit"},on:{click:function(a){return t.handleEditRow(i,e)}}},[t._v("\n                  "+t._s(t.lang.edit)+"\n                ")]),t._v(" "),t.rowState[i].edited?t._e():a("button-action-authenticated",{staticStyle:{color:"#F55246"},attrs:{permission:[t.customRPermis,"edit"],size:"small",type:"text",icon:"el-icon-delete"},on:{click:function(a){return t.handleDeleteRow(i,e)}}},[t._v("\n                  "+t._s(t.rootLang.delete)+"\n                ")]),t._v(" "),t.rowState[i].edited?a("button-action-authenticated",{staticStyle:{color:"#595959"},attrs:{permission:[t.customRPermis,"edit"],size:"small",type:"text",icon:"el-icon-close"},on:{click:function(e){return t.handleCancelRow(i)}}},[t._v("\n                  "+t._s(t.lang.cancel)+"\n                ")]):t._e(),t._v(" "),t.rowState[i].edited?a("button-action-authenticated",{staticStyle:{color:"#6EBE46"},attrs:{permission:[t.customRPermis,"edit"],size:"small",type:"text",icon:"el-icon-check"},on:{click:function(a){return t.handleSimpanRow(i,e)}}},[t._v("\n                  "+t._s(t.lang.save)+"\n                ")]):t._e()],1):a("td")])}),t._v(" "),a("tr",[a("td",{staticStyle:{"border-bottom":"1px solid #000",padding:"0 0 0 0"},attrs:{colspan:"12"}})]),t._v(" "),a("tr",[a("td",{staticClass:"text-right ipad-style",attrs:{colspan:"2"}},[t._v(t._s(t.lang.order_amount))]),t._v(" "),a("th",[t._v(t._s(t.detailData.ftotal_item_qty))]),t._v(" "),a("td",{attrs:{colspan:"3"}})]),t._v(" "),a("tr",[a("td",{staticClass:"text-right ipad-style",attrs:{colspan:"4"}},[t._v(t._s(t.lang.subtotal))]),t._v(" "),a("th",{staticStyle:{"text-align":"right"},attrs:{align:"right"}},[t._v(t._s(t.detailData.forder_amount))]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",{staticClass:"text-right ipad-style",attrs:{colspan:"4"}},[t._v(t._s(t.lang.discount))]),t._v(" "),a("th",{staticStyle:{"text-align":"right"},attrs:{align:"right"}},[t._v(t._s(t.detailData.fdiscount_amount)+" ("+t._s(t.detailData.fdiscount_percent)+"%)")]),t._v(" "),t.showEdit?a("td",[t.computedAccess?t._e():a("button-action-authenticated",{attrs:{permission:[t.customRPermis,"edit"],size:"small",type:"text",icon:"el-icon-setting"},on:{click:t.setDiscount}},[t._v("\n                  "+t._s(t.lang.settings)+" "+t._s(t.lang.discount)+"\n                ")])],1):a("td")]),t._v(" "),a("tr",[a("td",{staticClass:"text-right ipad-style",attrs:{colspan:"4"}},[t._v(t._s(t.lang.service_charge))]),t._v(" "),a("th",{staticStyle:{"text-align":"right"},attrs:{align:"right"}},[t._v(t._s(t.detailData.fservice_charge_amount))]),t._v(" "),a("td")]),t._v(" "),0!==parseInt(t.detailData.redeemed_amount)&&null!==t.detailData.fredeemed_amount?a("tr",[a("td"),t._v(" "),a("td",{staticClass:"ipad-style",staticStyle:{"text-align":"right",width:"100px"},attrs:{colspan:"4"}},[t._v(t._s(t.lang.redeemed_amount))]),t._v(" "),a("th",{staticStyle:{"text-align":"right"},attrs:{align:"right"}},[t._v("( "+t._s(t.detailData.fredeemed_amount)+" )")]),t._v(" "),a("td")]):t._e(),t._v(" "),a("tr",[a("td",{staticClass:"text-right ipad-style",attrs:{colspan:"4"}},[t._v(t._s(t.lang.tax))]),t._v(" "),a("th",{staticStyle:{"text-align":"right"},attrs:{align:"right"}},[t._v(t._s(t.detailData.ftax_amount))]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",{staticClass:"text-right ipad-style",attrs:{colspan:"4"}},[t._v(t._s(t.$lang[t.langId].rounded))]),t._v(" "),a("th",{staticStyle:{"text-align":"right"},attrs:{align:"right"}},[t._v(t._s(t.detailData.frounded_amount))]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",{staticClass:"text-right ipad-style",attrs:{colspan:"4"}},[t._v(t._s(t.lang.shipping_cost))]),t._v(" "),a("th",{staticStyle:{"text-align":"right"},attrs:{align:"right"}},[t._v(t._s(t.detailData.fshipping_cost))]),t._v(" "),t.showEdit?a("td",[t.computedAccess?t._e():a("button-action-authenticated",{attrs:{permission:[t.customRPermis,"edit"],size:"small",type:"text",icon:"el-icon-setting"},on:{click:t.setShippingPayment}},[t._v("\n                  "+t._s(t.lang.settings)+" "+t._s(t.lang.shipping_cost)+"\n                ")])],1):a("td")]),t._v(" "),0!==t.detailData.unique_payment_code?a("tr",[a("td",{staticClass:"text-right ipad-style",attrs:{colspan:"4"}},[t._v(t._s(t.lang.unique_code))]),t._v(" "),a("th",{staticStyle:{"text-align":"right"},attrs:{align:"right"}},[t._v(t._s(t.detailData.unique_payment_code))]),t._v(" "),a("td")]):t._e(),t._v(" "),a("tr",[a("td",{staticClass:"text-right ipad-style",attrs:{colspan:"4"}},[t._v(t._s(t.lang.total_due))]),t._v(" "),a("th",{staticStyle:{"text-align":"right"},attrs:{align:"right"}},[t._v(t._s(t.detailData.ftotal_amount))]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",{staticClass:"text-right ipad-style",attrs:{colspan:"4"}},[t._v(t._s(t.lang.payment)+" "+t._s(t.detailData.payment_mode_name))]),t._v(" "),a("th",{staticStyle:{"text-align":"right"},attrs:{align:"right"}},[t._v(t._s(t.detailData.fpayment_amount))]),t._v(" "),t.showEdit?a("td",[t.computedAccess?t._e():a("button-action-authenticated",{attrs:{permission:[t.customRPermis,"edit"],size:"small",type:"text",icon:"el-icon-setting"},on:{click:function(e){return t.setPayment(!1)}}},[t._v("\n                  "+t._s(t.lang.settings)+" "+t._s(t.lang.payment)+"\n                ")])],1):a("td")]),t._v(" "),t._l(t.detailData.creditpayments,function(e){return a("tr",{key:e.id},[""===e.payment_mode_name?a("td",{staticClass:"text-right ipad-style",attrs:{colspan:"4"}},[t._v("\n                "+t._s(t.lang.payment)+" "+t._s(e.payment_type_name)+" "+t._s(e.fpayment_date)+"\n              ")]):a("td",{staticClass:"text-right ipad-style",attrs:{colspan:"4"}},[t._v("\n                "+t._s(t.lang.payment)+" "+t._s(e.payment_mode_name)+" "+t._s(e.fpayment_date)+"\n              ")]),t._v(" "),a("th",[t._v(t._s(e.fpayment_amount))]),t._v(" "),a("td")])}),t._v(" "),0!==parseInt(t.detailData.credit_outstanding_amount)?a("tr",[a("td",{staticClass:"text-right ipad-style",attrs:{colspan:"4"}},[t._v(t._s(t.lang.outstanding_payment))]),t._v(" "),a("th",{staticStyle:{"text-align":"right"},attrs:{align:"right"}},[t._v(t._s(t.detailData.fcredit_outstanding_amount))]),t._v(" "),t.showEdit?a("td",[a("button-action-authenticated",{attrs:{permission:[t.customRPermis,"edit"],size:"small",type:"text",icon:"el-icon-plus"},on:{click:function(e){return t.setPayment(!0)}}},[t._v("\n                  "+t._s(t.lang.payment)+"\n                ")])],1):t._e()]):t._e(),t._v(" "),a("tr",{staticStyle:{"background-color":"#fff"}},[a("td",{staticStyle:{border:"none","text-align":"right"}}),t._v(" "),a("th",{staticStyle:{border:"none","text-align":"right"},attrs:{colspan:"3"}},[a("p",[t.detailData.payment_from_bank?a("label",[t._v(t._s(t.lang.payment_via_bank)+" : "+t._s(t.detailData.payment_from_bank)+" "+t._s(null!==t.detailData.payment_payee?"("+t.detailData.payment_payee+")":""))]):a("label",[t._v(t._s(t.lang.payment_via_bank)+" : -")])]),t._v(" "),a("p",[t.detailData.payment_charge?a("label",[t._v(t._s(t.lang.payment_charge)+" : "+t._s(t.detailData.payment_charge))]):t._e()]),t._v(" "),a("p",[t.detailData.payment_ref?a("label",[t._v(t._s(t.lang.payment_ref)+" : "+t._s(t.detailData.payment_ref))]):a("label",[t._v(t._s(t.lang.payment_ref)+" : -")])]),t._v(" "),a("p",[t.detailData.payment_date?a("label",[t._v(t._s(t.lang.payment_date)+" : "+t._s(t.detailData.payment_date))]):a("label",[t._v(t._s(t.lang.payment_date)+" : -")])])]),t._v(" "),a("td",{staticStyle:{border:"none"}})])],2)])]):a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table-orderitems table table-striped table-bordered"},[a("thead",[a("tr",[a("th",{attrs:{width:"20"}},[t._v("No. ")]),t._v(" "),a("th",{staticClass:"description",attrs:{width:"250"}},[t._v(t._s(t.lang.description))]),t._v(" "),a("th",{attrs:{width:"150"}},[t._v(t._s(t.lang.serial))]),t._v(" "),a("th",{attrs:{width:"200"}},[t._v(t._s(t.lang.qty))]),t._v(" "),a("th",{attrs:{width:"400"}},[t._v(t._s(t.lang.price)+" ("+t._s(t.detailData.currency_id)+")")]),t._v(" "),"dev"===t.stageLevel||"sit"===t.stageLevel?a("th",{attrs:{width:"400"}},[t._v(t._s(t.lang.discount))]):t._e(),t._v(" "),a("th",{staticClass:"total",attrs:{width:"400"}},[t._v(t._s(t.lang.total_price)+" ("+t._s(t.detailData.currency_id)+")")]),t._v(" "),a("th",{attrs:{width:"400"}},[t._v(t._s(t.$lang[t.langId].action))])])]),t._v(" "),a("tbody",[t._l(t.detailData.orderitems,function(e,i){return a("tr",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],key:i},[a("td",[t._v(t._s(i+1))]),t._v(" "),a("td",[a("div",{staticClass:"flex-container"},[e.photo_md?a("el-avatar",{staticStyle:{"min-width":"40px"},attrs:{src:e.photo_md}}):t._e(),t._v(" "),a("div",{staticClass:"ml-8"},[a("router-link",{attrs:{to:{path:null!==e.product_id?"/catalog/product/"+e.product_id:"/catalog/package/"+e.product_combo_id}}},[e.product_name?[t._v(t._s(e.product_name))]:t._e(),t._v(" "),e.product_variant_name?[t._v(t._s(e.product_variant_name))]:t._e(),t._v(" "),e.product_combo_name?[t._v(t._s(e.product_combo_name))]:t._e(),t._v(" "),e.product_sku?a("span",[t._v("\n                        ("+t._s(e.product_sku)+")\n                      ")]):t._e()],2),t._v(" "),a("router-link",{attrs:{to:{path:"/catalog/package/"+e.product_combo_id}}},[e.product_combo_id?a("div",{staticClass:"mt-8"},[a("strong",{staticClass:"size-11"},[t._v(t._s(t.lang.products_inside))]),t._v(" "),a("ul",{staticClass:"list-unstyled"},t._l(e.products,function(e){return a("li",{key:e.id},[t._v("\n                            * "+t._s(e.product_name)+" ("+t._s(e.qty)+")\n                          ")])}),0)]):t._e()]),t._v(" "),e.note?a("div",{staticClass:"font-12"},[t._v(t._s(e.note))]):t._e(),t._v(" "),e.prodaddons.length?t._l(e.prodaddons,function(e,i){return a("div",{key:i,staticClass:"font-12"},[t._v("+ "+t._s(e.name))])}):t._e(),t._v(" "),t.rowState[i].edited&&1===e.product_id?a("div",[a("el-input",{attrs:{placeholder:t.lang.note,type:"text",clearable:""},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.handleSimpanRow(i,e)}},model:{value:t.editTable.note,callback:function(e){t.$set(t.editTable,"note",e)},expression:"editTable.note"}})],1):t._e()],2)],1)]),t._v(" "),a("td",{attrs:{valign:"middle",align:"left"}},[t.rowState[i].edited?a("div",[1==e.order_with_serial?a("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:t.$lang[t.langId].input_code,type:"text",clearable:""},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.handleSimpanRow(i,e)}},model:{value:t.editTable.noSerial,callback:function(e){t.$set(t.editTable,"noSerial",e)},expression:"editTable.noSerial"}}):t._e()],1):a("div",[e.serial_no?a("p",[t._v(t._s(e.serial_no))]):a("p",[t._v("-")])])]),t._v(" "),a("td",{attrs:{valign:"middle",align:"left"}},[t.rowState[i].edited?["P"===t.detailData.status&&0==t.detailData.is_paid?[a("el-input-number",{attrs:{min:0,"controls-position":"right"},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.handleSimpanRow(i,e)}},model:{value:t.editTable.qty,callback:function(e){t.$set(t.editTable,"qty",e)},expression:"editTable.qty"}})]:[a("el-input",{attrs:{disabled:""},model:{value:e.qty,callback:function(a){t.$set(e,"qty",a)},expression:"item.qty"}})]]:[t._v(" "+t._s(e.qty)+" ")]],2),t._v(" "),a("td",{attrs:{valign:"middle",align:"left"}},[t.rowState[i].edited?a("div",["P"===t.detailData.status&&0==t.detailData.is_paid?a("input-money",{staticStyle:{width:"200px"},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.handleSimpanRow(i,e)}},model:{value:t.editTable.price,callback:function(e){t.$set(t.editTable,"price",e)},expression:"editTable.price"}}):a("el-input",{attrs:{disabled:""},model:{value:t.editTable.price,callback:function(e){t.$set(t.editTable,"price",e)},expression:"editTable.price"}})],1):a("div",{staticClass:"text-right"},[t._v(" \n                  "+t._s(e.fprice)+" \n                  "),e.fdiscount&&"0"!==e.fdiscount?a("div",{staticClass:"font-12 text-right"},[t._v("( - "+t._s(e.fdiscount)+")")]):t._e()])]),t._v(" "),"dev"===t.stageLevel||"sit"===t.stageLevel?a("td",{attrs:{valign:"middle",align:"right"}},[t.rowState[i].edited?a("div",{staticClass:"flex-container",staticStyle:{width:"300px"}},[a("div",{staticStyle:{width:"60%"}},[1===t.discType&&"P"===t.detailData.status&&0==t.detailData.is_paid?a("input-money",{staticClass:"switch-discount--money border border--grey-border",staticStyle:{width:"100%"},model:{value:t.editTable.discount,callback:function(e){t.$set(t.editTable,"discount",e)},expression:"editTable.discount"}}):t._e(),t._v(" "),2===t.discType?a("el-input",{staticClass:"switch-discount--money border border--grey-border",staticStyle:{width:"100%"},model:{value:t.editTable.discount,callback:function(e){t.$set(t.editTable,"discount",e)},expression:"editTable.discount"}},[a("template",{slot:"append"},[t._v("%")])],2):t._e()],1),t._v(" "),a("div",{staticStyle:{width:"40%"}},[a("el-radio-group",{staticClass:"flex-container",on:{change:t.handleMatchDiscount},model:{value:t.discType,callback:function(e){t.discType=e},expression:"discType"}},[a("el-radio-button",{staticClass:"lpoint-type",staticStyle:{width:"50%"},attrs:{label:1}},[t._v("IDR")]),t._v(" "),a("el-radio-button",{staticClass:"lpoint-type",staticStyle:{width:"50%"},attrs:{label:2}},[t._v("%")])],1)],1)]):a("div",{staticClass:"text-right"},[t._v(" "+t._s(e.fdiscount)+" ")])]):t._e(),t._v(" "),a("td",{attrs:{valign:"middle",align:"right"}},[t._v(t._s(e.famount))]),t._v(" "),t.showEdit&&"P"===t.detailData.status&&0==t.detailData.is_paid?a("td",[t.rowState[i].edited?t._e():a("button-action-authenticated",{staticStyle:{color:"#0286CD"},attrs:{permission:[t.customRPermis,"edit"],size:"small",type:"text",icon:"el-icon-edit"},on:{click:function(a){return t.handleEditRow(i,e)}}},[t._v("\n                  "+t._s(t.lang.edit)+"\n                ")]),t._v(" "),t.rowState[i].edited?t._e():a("button-action-authenticated",{staticStyle:{color:"#F55246"},attrs:{permission:[t.customRPermis,"edit"],size:"small",type:"text",icon:"el-icon-delete"},on:{click:function(a){return t.handleDeleteRow(i,e)}}},[t._v("\n                  "+t._s(t.rootLang.delete)+"\n                ")]),t._v(" "),t.rowState[i].edited?a("button-action-authenticated",{staticStyle:{color:"#595959"},attrs:{permission:[t.customRPermis,"edit"],size:"small",type:"text",icon:"el-icon-close"},on:{click:function(e){return t.handleCancelRow(i)}}},[t._v("\n                  "+t._s(t.lang.cancel)+"\n                ")]):t._e(),t._v(" "),t.rowState[i].edited?a("button-action-authenticated",{staticStyle:{color:"#6EBE46"},attrs:{permission:[t.customRPermis,"edit"],size:"small",type:"text",icon:"el-icon-check"},on:{click:function(a){return t.handleSimpanRow(i,e)}}},[t._v("\n                  "+t._s(t.lang.save)+"\n                ")]):t._e()],1):a("td")])}),t._v(" "),a("tr",[a("td",{staticStyle:{"border-bottom":"1px solid #000",padding:"0 0 0 0"},attrs:{colspan:"6"}}),t._v(" "),a("td",{staticStyle:{"border-bottom":"1px solid #000",padding:"0 0 0 0"},attrs:{colspan:"6"}})]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",{staticClass:"ipad-style",staticStyle:{"text-align":"right"},attrs:{colspan:"2"}},[t._v(t._s(t.lang.order_amount))]),t._v(" "),a("th",[t._v(t._s(t.detailData.ftotal_item_qty))]),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",{staticClass:"ipad-style",staticStyle:{"text-align":"right"},attrs:{colspan:"dev"===t.stageLevel||"sit"===t.stageLevel?"5":"4"}},[t._v(t._s(t.lang.subtotal))]),t._v(" "),a("th",{staticStyle:{"text-align":"right"},attrs:{align:"right"}},[t._v(t._s(t.detailData.forder_amount))]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",{staticClass:"ipad-style",staticStyle:{"text-align":"right"},attrs:{colspan:"dev"===t.stageLevel||"sit"===t.stageLevel?"5":"4"}},[t._v(t._s(t.lang.discount))]),t._v(" "),a("th",{staticStyle:{"text-align":"right"},attrs:{align:"right"}},[t._v(t._s(t.detailData.fdiscount_amount)+" ("+t._s(t.detailData.fdiscount_percent)+"%)")]),t._v(" "),t.showEdit?a("td",[t.computedAccess?t._e():a("button-action-authenticated",{attrs:{permission:[t.customRPermis,"edit"],size:"small",type:"text",icon:"el-icon-setting"},on:{click:t.setDiscount}},[t._v("\n                  "+t._s(t.lang.settings)+" "+t._s(t.lang.discount)+"\n                ")])],1):a("td")]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",{staticClass:"ipad-style",staticStyle:{"text-align":"right",width:"100px"},attrs:{colspan:"dev"===t.stageLevel||"sit"===t.stageLevel?"5":"4"}},[t._v(t._s(t.lang.service_charge))]),t._v(" "),a("th",{staticStyle:{"text-align":"right"},attrs:{align:"right"}},[t._v(t._s(t.detailData.fservice_charge_amount))]),t._v(" "),a("td")]),t._v(" "),0!==parseInt(t.detailData.redeemed_amount)&&null!==t.detailData.fredeemed_amount?a("tr",[a("td"),t._v(" "),a("td",{staticClass:"ipad-style",staticStyle:{"text-align":"right",width:"100px"},attrs:{colspan:"dev"===t.stageLevel||"sit"===t.stageLevel?"5":"4"}},[t._v(t._s(t.lang.redeemed_amount))]),t._v(" "),a("th",{staticStyle:{"text-align":"right"},attrs:{align:"right"}},[t._v("( "+t._s(t.detailData.fredeemed_amount)+" )")]),t._v(" "),a("td")]):t._e(),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",{staticClass:"ipad-style",staticStyle:{"text-align":"right"},attrs:{colspan:"dev"===t.stageLevel||"sit"===t.stageLevel?"5":"4"}},[t._v(t._s(t.lang.tax))]),t._v(" "),a("th",{staticStyle:{"text-align":"right"}},[t._v(t._s(t.detailData.ftax_amount))]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",{staticClass:"ipad-style",staticStyle:{"text-align":"right"},attrs:{colspan:"dev"===t.stageLevel||"sit"===t.stageLevel?"5":"4"}},[t._v(t._s(t.$lang[t.langId].rounded))]),t._v(" "),a("th",{staticStyle:{"text-align":"right"}},[t._v(t._s(t.detailData.frounded_amount))]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",{staticClass:"ipad-style",staticStyle:{"text-align":"right"},attrs:{colspan:"dev"===t.stageLevel||"sit"===t.stageLevel?"5":"4"}},[t._v(t._s(t.lang.shipping_cost))]),t._v(" "),a("th",{staticStyle:{"text-align":"right"},attrs:{align:"right"}},[t._v(t._s(t.detailData.fshipping_cost))]),t._v(" "),t.showEdit?a("td",[t.computedAccess?t._e():a("button-action-authenticated",{attrs:{permission:[t.customRPermis,"edit"],size:"small",type:"text",icon:"el-icon-setting"},on:{click:t.setShippingPayment}},[t._v("\n                  "+t._s(t.lang.settings)+" "+t._s(t.lang.shipping_cost)+"\n                ")])],1):a("td")]),t._v(" "),a("td"),t._v(" "),0!==t.detailData.unique_payment_code?a("tr",[a("td",{staticClass:"ipad-style",staticStyle:{"text-align":"right"},attrs:{colspan:"dev"===t.stageLevel||"sit"===t.stageLevel?"5":"4"}},[t._v(t._s(t.lang.unique_code))]),t._v(" "),a("th",{staticStyle:{"text-align":"right"},attrs:{align:"right"}},[t._v(t._s(t.detailData.unique_payment_code))]),t._v(" "),a("td")]):t._e(),t._v(" "),a("tr",[a("td",{staticStyle:{padding:"0 0 0 0"},attrs:{colspan:"6"}})]),t._v(" "),a("tr",{staticStyle:{"background-color":"#fff"}},[a("td"),t._v(" "),a("td",{staticClass:"ipad-style",staticStyle:{"text-align":"right"},attrs:{colspan:"dev"===t.stageLevel||"sit"===t.stageLevel?"5":"4"}},[t._v(t._s(t.lang.total_due))]),t._v(" "),a("th",{staticStyle:{"text-align":"right"},attrs:{align:"right"}},[t._v(t._s(t.detailData.ftotal_amount))]),t._v(" "),a("td")]),t._v(" "),t.detailData.is_credit?t._e():a("tr",{staticStyle:{"background-color":"#fff"}},[a("td"),t._v(" "),a("td",{staticClass:"ipad-style",staticStyle:{"text-align":"right"},attrs:{colspan:"dev"===t.stageLevel||"sit"===t.stageLevel?"5":"4"}},[t._v(t._s(t.lang.payment))]),t._v(" "),a("th",{staticClass:"font-bold text-right"},[t._v(t._s(t.detailData.fpayment_amount))]),t._v(" "),t.showEdit?a("td",[t.computedAccess?t._e():a("button-action-authenticated",{attrs:{permission:[t.customRPermis,"edit"],size:"small",type:"text",icon:"el-icon-setting"},on:{click:function(e){return t.setPayment(!1)}}},[t._v("\n                  "+t._s(t.lang.settings)+" "+t._s(t.lang.payment)+"\n                ")])],1):a("td")]),t._v(" "),"BT"===t.detailData.payment_type_id?a("tr",{staticStyle:{"background-color":"#fff"}},[a("th",{attrs:{colspan:"6"}},[a("p",[a("label",[t._v(t._s(t.lang.payment)+" "+t._s(t.detailData.payment_type_name)+" ( "+t._s(t.detailData.bt_bank_name)+" - "+t._s(t.detailData.bt_account_no)+" )")])]),t._v(" "),a("p",[t.detailData.payment_from_bank?a("label",[t._v(t._s(t.lang.payment_via_bank)+" : "+t._s(t.detailData.payment_from_bank)+" "+t._s(null!==t.detailData.payment_payee?"("+t.detailData.payment_payee+")":""))]):a("label",[t._v(t._s(t.lang.payment_via_bank)+" : -")])]),t._v(" "),a("p",[t.detailData.payment_charge?a("label",[t._v(t._s(t.lang.payment_charge)+" : "+t._s(t.detailData.payment_charge))]):t._e()]),t._v(" "),a("p",[t.detailData.payment_ref?a("label",[t._v(t._s(t.lang.payment_ref)+" : "+t._s(t.detailData.payment_ref))]):a("label",[t._v(t._s(t.lang.payment_ref)+" : -")])]),t._v(" "),a("p",[t.detailData.payment_date?a("label",[t._v(t._s(t.lang.payment_date)+" : "+t._s(t.detailData.payment_date))]):a("label",[t._v(t._s(t.lang.payment_date)+" : -")])])]),t._v(" "),a("td")]):a("tr",{staticStyle:{"background-color":"#fff"}},[a("th",{attrs:{colspan:"6"}},[a("p",[t.detailData.payment_mode_name?a("label",[t._v(t._s(t.lang.payment_mode)+" : "+t._s(t.detailData.payment_mode_name))]):a("label",[t._v(t._s(t.lang.payment_mode)+" : -")])]),t._v(" "),a("p",[t.detailData.payment_mode_id2?[a("label",[t._v(t._s(t.lang.total)+" "+t._s(t.lang.payment)+" : "+t._s(t.detailData.fpayment_amount))])]:[t.detailData.payment_charge?a("label",[t._v(t._s(t.lang.payment_charge)+" : "+t._s(t.detailData.payment_charge))]):a("label",[t._v(t._s(t.lang.payment_charge)+" : -")])]],2),t._v(" "),a("p",[t.detailData.payment_ref?a("label",[t._v(t._s(t.lang.payment_ref)+" : "+t._s(t.detailData.payment_ref))]):a("label",[t._v(t._s(t.lang.payment_ref)+" : -")])]),t._v(" "),a("p",[t.detailData.payment_date?a("label",[t._v(t._s(t.lang.payment_date)+" : "+t._s(t.detailData.payment_date))]):a("label",[t._v(t._s(t.lang.payment_date)+" : -")])])]),t._v(" "),a("td")]),t._v(" "),t.detailData.payment_mode_id2?a("tr",{staticStyle:{"background-color":"#fff"}},[a("th",{attrs:{colspan:"6"}},[a("p",[t.detailData.payment_mode_name2?a("label",[t._v(t._s(t.lang.payment_mode)+" : "+t._s(t.detailData.payment_mode_name2))]):a("label",[t._v(t._s(t.lang.payment_mode)+" : -")])]),t._v(" "),a("p",[t.detailData.payment_mode_id2?[a("label",[t._v(t._s(t.lang.total)+" "+t._s(t.lang.payment)+" : "+t._s(t.detailData.fpayment_amount2))])]:[t.detailData.payment_charge?a("label",[t._v(t._s(t.lang.payment_charge)+" : "+t._s(t.detailData.payment_charge))]):a("label",[t._v(t._s(t.lang.payment_charge)+" : -")])]],2),t._v(" "),a("p",[t.detailData.payment_ref2?a("label",[t._v(t._s(t.lang.payment_ref)+" : "+t._s(t.detailData.payment_ref2))]):a("label",[t._v(t._s(t.lang.payment_ref)+" : -")])])]),t._v(" "),a("td")]):t._e()],2)])])]):a("div",{staticClass:"no-product text-center"},[a("p",[t._v(t._s(t.lang.no_order))]),t._v(" "),a("img",{attrs:{src:"/static/img/no-data.svg",alt:"No Data Picture"}})])]),t._v(" "),a("el-dialog",{attrs:{title:t.lang.add_product,visible:t.addProductDialog,"close-on-click-modal":!1,"custom-class":"mw-760"},on:{"update:visible":function(e){t.addProductDialog=e}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.addingOrderItem,expression:"addingOrderItem"}]},[a("div",{staticClass:"row add-product"},[a("div",{staticClass:"col-md-3 text-right"},[a("label",[t._v(t._s(t.lang.product))])]),t._v(" "),a("div",{staticClass:"col-md-9"},[a("input-autocomplete",{ref:"InputAutocomplete",attrs:{"fetch-suggestions":t.setQueryString,"searching-products":t.loadingSearch,"search-result-products":t.searchData},on:{select:t.selectProduct}})],1)]),t._v(" "),a("div",{staticStyle:{"margin-bottom":"8px"}}),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3 text-right"},[a("label",[t._v(t._s(t.lang.qty))])]),t._v(" "),a("div",{staticClass:"col-md-9"},[a("el-input-number",{attrs:{"controls-position":"right",min:0},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addProductsToSale.apply(null,arguments)}},model:{value:t.formAddProduct.qty,callback:function(e){t.$set(t.formAddProduct,"qty",e)},expression:"formAddProduct.qty"}})],1)])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"text"},on:{click:function(e){t.addProductDialog=!1}}},[t._v(t._s(t.lang.cancel))]),t._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:t.addProductsToSale}},[t._v("\n        "+t._s(t.lang.add)+"\n      ")])],1)]),t._v(" "),a("el-dialog",{attrs:{title:t.lang.product_combo,visible:t.packageProductDialog,"close-on-click-modal":!1,"custom-class":"mw-760"},on:{"update:visible":function(e){t.packageProductDialog=e}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingPackage,expression:"loadingPackage"}]},[a("div",{staticClass:"row mb-12"},[a("div",{staticClass:"col-md-4 font-bold"},[t._v(t._s(t.lang.combo))]),t._v(" "),a("div",{staticClass:"col-md-8"},[a("el-autocomplete",{staticClass:"inline-form",attrs:{"fetch-suggestions":t.getProductCombo,debounce:t.autoCompleteStartOn,placeholder:t.lang.please_select,clearable:""},on:{select:t.handleSelectPackage},model:{value:t.formPackage.package,callback:function(e){t.$set(t.formPackage,"package",e)},expression:"formPackage.package"}})],1)]),t._v(" "),t.formPackage.selectPackageData&&t.formPackage.selectPackageData.items?a("div",[a("div",{staticClass:"font-bold mb-12"},[t._v("\n          "+t._s(t.lang.products_in_combo)+":\n        ")]),t._v(" "),t._l(t.formPackage.selectPackageData.items.data,function(e,i){return a("div",{key:i,staticClass:"row mb-12"},[a("div",{staticClass:"col-md-4"},[t._v(t._s(e.product_group_name))]),t._v(" "),a("div",{staticClass:"col-md-8"},[a("el-select",{staticClass:"w-fit",model:{value:t.packageSelect[i],callback:function(e){t.$set(t.packageSelect,i,e)},expression:"packageSelect[index]"}},t._l(e.tempItems,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1)])})],2):t._e(),t._v(" "),a("div",{staticClass:"row mb-12"},[a("div",{staticClass:"col-md-4 font-bold"},[t._v("\n          "+t._s(t.lang.qty)+"\n        ")]),t._v(" "),a("div",{staticClass:"col-md-8"},[a("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:t.formPackage.qty,callback:function(e){t.$set(t.formPackage,"qty",e)},expression:"formPackage.qty"}})],1)])]),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"text"},on:{click:function(e){t.packageProductDialog=!1}}},[t._v(t._s(t.lang.cancel))]),t._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:t.addPackageProduct}},[t._v("\n        "+t._s(t.lang.save)+"\n      ")])],1)]),t._v(" "),a("el-dialog",{staticClass:"delete",attrs:{visible:t.deleteRowProduct,"close-on-click-modal":!1,"custom-class":"mw-760"},on:{"update:visible":function(e){t.deleteRowProduct=e}}},[a("div",{staticStyle:{"text-align":"center"}},[a("h3",{staticClass:"alert-delete",staticStyle:{"font-weight":"bold"}},[a("svg-icon",{staticStyle:{stroke:"#FFB05C",width:"22px",height:"22px"},attrs:{"icon-class":"alert-triangle"}}),t._v("\n        "+t._s(t.lang.are_you_sure_to_remove_this_data)+"?\n      ")],1)]),t._v(" "),a("div",{staticClass:"row delete-image",staticStyle:{margin:"30px 20px 20px 20px"},attrs:{data:t.deleteRowData}},[a("div",{staticClass:"col-md-3"},[a("img",{staticClass:"table-image",attrs:{src:t.deleteRowData.photo_md,alt:t.deleteRowData.product_name}})]),t._v(" "),a("div",{staticClass:"col-md-9"},[a("h3",[t._v(t._s(t.deleteRowData.product_name))]),t._v(" "),a("p",[t._v(t._s(t.deleteRowData.product_sku))]),t._v(" "),a("p",[t._v(t._s(t.deleteRowData.product_variant_name))])])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{color:"#F44336"},attrs:{type:"text"},on:{click:function(e){return t.saveDeleteRow(t.deleteRowData.id)}}},[t._v(t._s(t.$lang[t.langId].delete))]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.deleteRowProduct=!1}}},[t._v(t._s(t.lang.cancel))])],1)]),t._v(" "),a("el-dialog",{staticClass:"discount",attrs:{title:t.lang.discount,visible:t.dialogDiscount,"close-on-click-modal":!1,"custom-class":"mw-760"},on:{"update:visible":function(e){t.dialogDiscount=e}}},[a("div",[a("h3",[t._v(t._s(t.$lang[t.langId].please_input)+t._s(t.lang.discount))]),t._v(" "),a("p",[t._v(t._s(t.$lang[t.langId].info_discount_one_type))]),t._v(" "),a("el-radio-group",{attrs:{size:"mini"},on:{change:t.handleRadioDiscount},model:{value:t.discountValue,callback:function(e){t.discountValue=e},expression:"discountValue"}},[a("el-radio-button",{attrs:{label:"1"}},[a("span",{staticStyle:{"font-size":"18px","margin-right":"10px"}},[t._v("%")]),t._v("\n          "+t._s(t.lang.discount)+"\n        ")]),t._v(" "),a("el-radio-button",{attrs:{label:"2"}},[a("span",{staticStyle:{"font-size":"18px","margin-right":"10px"}},[t._v("$")]),t._v("\n          "+t._s(t.$lang[t.langId].nominal)+"\n        ")]),t._v(" "),a("el-radio-button",{attrs:{label:"3"}},[a("span",{staticStyle:{"font-size":"18px","margin-right":"10px"}},[a("i",{staticClass:"fa fa-tag"})]),t._v("\n          "+t._s(t.lang.discount_coupon)+"\n        ")])],1),t._v(" "),"1"===t.discountValue?a("el-input",{attrs:{type:"number",min:0,max:100},on:{focus:t.onFocusPercent},nativeOn:{keyup:function(e){return t.handlePercent.apply(null,arguments)}},model:{value:t.discountForm.percent,callback:function(e){t.$set(t.discountForm,"percent",e)},expression:"discountForm.percent"}},[a("template",{slot:"append"},[t._v("%")])],2):t._e(),t._v(" "),"2"===t.discountValue?a("input-money",{nativeOn:{keyup:function(e){return t.handlePrice.apply(null,arguments)}},model:{value:t.discountForm.price,callback:function(e){t.$set(t.discountForm,"price",e)},expression:"discountForm.price"}}):t._e(),t._v(" "),"3"===t.discountValue?a("el-input",{attrs:{placeholder:t.$lang[t.langId].input_code},model:{value:t.discountForm.coupon,callback:function(e){t.$set(t.discountForm,"coupon",e)},expression:"discountForm.coupon"}}):t._e()],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{color:"#F44336"},attrs:{type:"text"},on:{click:t.handleRadioDiscount}},[t._v(t._s(t.$lang[t.langId].delete))]),t._v(" "),a("el-button",{attrs:{type:"success"},on:{click:function(e){return t.saveDiscount(t.discountValue)}}},[t._v(t._s(t.lang.save))])],1)]),t._v(" "),a("el-dialog",{staticClass:"shipping-price",attrs:{title:t.lang.shipping_cost,visible:t.dialogShipping,"close-on-click-modal":!1,"custom-class":"mw-760"},on:{"update:visible":function(e){t.dialogShipping=e}}},[a("div",[a("el-button",{attrs:{type:"primary",plain:"",autofocus:!0},on:{click:function(e){t.manualTable=!1}}},[t._v(t._s(t.$lang[t.langId].automatic))]),t._v(" "),a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.getManualTable(t.detailData.id)}}},[t._v(t._s(t.$lang[t.langId].manual))])],1),t._v(" "),a("hr"),t._v(" "),t.manualTable?a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingManual,expression:"loadingManual"}]},[a("div",{staticClass:"row header"},[a("div",{staticClass:"col-md-1"},[a("span")]),t._v(" "),a("div",{staticClass:"col-md-4",staticStyle:{left:"30px"}},[a("p",[t._v(t._s(t.lang.courier))])]),t._v(" "),a("div",{staticClass:"col-md-4",staticStyle:{left:"30px"}},[a("p",[t._v(t._s(t.lang.type))])]),t._v(" "),a("div",{staticClass:"col-md-2"},[a("p",[t._v(t._s(t.lang.weight))])])]),t._v(" "),a("div",[a("ul",{staticClass:"cart-items"},t._l(t.manualDataTable,function(e,i){return a("li",{key:i,class:{active:t.formShipping.manualRadio===i}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-1"},[a("el-radio",{attrs:{label:i},on:{change:function(a){return t.radioManualTable(e)}},model:{value:t.formShipping.manualRadio,callback:function(e){t.$set(t.formShipping,"manualRadio",e)},expression:"formShipping.manualRadio"}},[a("span")])],1),t._v(" "),e.courier_name?a("div",{staticClass:"col-md-4"},[t._v("\n                "+t._s(e.courier_name)+"\n              ")]):a("div",{staticClass:"col-md-4"},[t._v("\n                -\n              ")]),t._v(" "),e.type_name?a("div",{staticClass:"col-md-4"},[t._v("\n                "+t._s(e.type_name)+"\n              ")]):a("div",{staticClass:"col-md-4"},[t._v("\n                -\n              ")]),t._v(" "),e.total_weight?a("div",{staticClass:"col-md-2"},[t._v("\n                "+t._s(e.total_weight)+"\n              ")]):a("div",{staticClass:"col-md-2"},[t._v("\n                -\n              ")])])])}),0)]),t._v(" "),a("div",{staticClass:"row type-footer",staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"col-md-6 text-right"},[a("p",[t._v(t._s(t.lang.type))])]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("el-input",{attrs:{disabled:"",placeholder:t.lang.please_select},model:{value:t.formShipping.typeName,callback:function(e){t.$set(t.formShipping,"typeName",e)},expression:"formShipping.typeName"}})],1)]),t._v(" "),a("div",{staticClass:"row",staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"col-md-6 text-right"},[a("p",[t._v(t._s(t.lang.shipping_cost))])]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("input-money",{model:{value:t.formShipping.price,callback:function(e){t.$set(t.formShipping,"price",e)},expression:"formShipping.price"}})],1)])]):a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingAuto,expression:"loadingAuto"}]},[a("div",{staticClass:"row header"},[a("div",{staticClass:"col-md-1"},[a("span")]),t._v(" "),a("div",{staticClass:"col-md-2",staticStyle:{left:"30px"}},[a("p",[t._v(t._s(t.lang.courier))])]),t._v(" "),a("div",{staticClass:"col-md-3",staticStyle:{left:"30px"}},[a("p",[t._v(t._s(t.lang.type))])]),t._v(" "),a("div",{staticClass:"col-md-2"},[a("p",[t._v(t._s(t.lang.est))])]),t._v(" "),a("div",{staticClass:"col-md-2"},[a("p",[t._v(t._s(t.lang.weight))])]),t._v(" "),a("div",{staticClass:"col-md-2"},[a("p",[t._v(t._s(t.lang.tariff))])])]),t._v(" "),a("div",[a("ul",{staticClass:"cart-items"},t._l(t.automateDataTable,function(e,i){return a("li",{key:i,class:{active:t.formShipping.automateRadio===i}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-1"},[a("el-radio",{attrs:{label:i},on:{change:function(a){return t.radioAutomateTable(e)}},model:{value:t.formShipping.automateRadio,callback:function(e){t.$set(t.formShipping,"automateRadio",e)},expression:"formShipping.automateRadio"}},[a("span")])],1),t._v(" "),e.courier_name?a("div",{staticClass:"col-md-2"},[t._v("\n                "+t._s(e.courier_name)+"\n              ")]):a("div",{staticClass:"col-md-2"},[t._v("\n                -\n              ")]),t._v(" "),e.type_name?a("div",{staticClass:"col-md-3"},[t._v("\n                "+t._s(e.type_name)+"\n              ")]):a("div",{staticClass:"col-md-3"},[t._v("\n                -\n              ")]),t._v(" "),e.etd_days?a("div",{staticClass:"col-md-2"},[t._v("\n                "+t._s(e.etd_days)+" "+t._s(t.lang.day)+"\n              ")]):a("div",{staticClass:"col-md-2"},[t._v("\n                -\n              ")]),t._v(" "),e.total_weight?a("div",{staticClass:"col-md-2"},[t._v("\n                "+t._s(e.total_weight)+"\n              ")]):a("div",{staticClass:"col-md-2"},[t._v("\n                -\n              ")]),t._v(" "),e.ftotal_tariff?a("div",{staticClass:"col-md-2"},[t._v("\n                "+t._s(e.ftotal_tariff)+"\n              ")]):a("div",{staticClass:"col-md-2"},[t._v("\n                -\n              ")])])])}),0)]),t._v(" "),a("div",{staticClass:"row type-footer",staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"col-md-6 text-right"},[a("p",[t._v(t._s(t.lang.type))])]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("el-input",{attrs:{disabled:"",placeholder:t.lang.please_select},model:{value:t.formShipping.typeNameAutomate,callback:function(e){t.$set(t.formShipping,"typeNameAutomate",e)},expression:"formShipping.typeNameAutomate"}})],1)]),t._v(" "),a("div",{staticClass:"row",staticStyle:{"margin-top":"10px"}},[a("div",{staticClass:"col-md-6 text-right"},[a("p",[t._v(t._s(t.lang.shipping_cost))])]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("input-money",{model:{value:t.formShipping.priceAutomate,callback:function(e){t.$set(t.formShipping,"priceAutomate",e)},expression:"formShipping.priceAutomate"}})],1)])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"text"},on:{click:function(e){t.dialogShipping=!1}}},[t._v(t._s(t.lang.cancel))]),t._v(" "),t.manualTable?a("el-button",{attrs:{type:"success"},on:{click:function(e){return t.saveShipping("manual")}}},[t._v(t._s(t.lang.save))]):a("el-button",{attrs:{type:"success"},on:{click:function(e){return t.saveShipping("automate")}}},[t._v(t._s(t.lang.save))])],1)]),t._v(" "),a("el-dialog",{staticClass:"payment",attrs:{title:t.lang.payment,visible:t.dialogPayment,"close-on-click-modal":!1,"custom-class":"mw-760"},on:{"update:visible":function(e){t.dialogPayment=e}}},[a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5 text-right"},[a("h4",[t._v(t._s(t.lang.payment_date))])]),t._v(" "),a("div",{staticClass:"col-md-7"},[a("el-date-picker",{attrs:{placeholder:t.$lang[t.langId].pick_a_day,clearable:!1,type:"date",format:"dd-MM-yyyy","value-format":"yyyy-MM-dd"},model:{value:t.formPayment.paymentDate,callback:function(e){t.$set(t.formPayment,"paymentDate",e)},expression:"formPayment.paymentDate"}})],1)]),t._v(" "),a("hr"),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5 text-right"},[a("h4",[t._v(t._s(t.lang.payment_methods))])]),t._v(" "),a("div",{staticClass:"col-md-7"},[a("el-select",{staticClass:"inline-form",attrs:{filterable:"",placeholder:t.lang.please_select},on:{change:t.handlePaymentMethod},model:{value:t.formPayment.paymentMethodLabel,callback:function(e){t.$set(t.formPayment,"paymentMethodLabel",e)},expression:"formPayment.paymentMethodLabel"}},t._l(t.paymentMethodData,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e}},[null!==e.name?a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.name))]):a("span",{staticStyle:{float:"left"}},[t._v(t._s(e.payment_type))]),t._v(" "),"BT"===e.payment_type_id?a("span",[t._v(t._s(" ("+e.bt_bank_name+"-"+e.bt_account_no+")"))]):t._e()])}),1)],1)]),t._v(" "),"BT"===t.formPayment.paymentMethodType?a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5 text-right"},[a("h4",[t._v(t._s(t.$lang[t.langId].payment_via))])]),t._v(" "),a("div",{staticClass:"col-md-7"},[a("el-input",{model:{value:t.formPayment.paymentVia,callback:function(e){t.$set(t.formPayment,"paymentVia",e)},expression:"formPayment.paymentVia"}})],1)]):t._e(),t._v(" "),"BT"===t.formPayment.paymentMethodType?a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5 text-right"},[a("h4",[t._v(t._s(t.lang.bank_account_name))])]),t._v(" "),a("div",{staticClass:"col-md-7"},[a("el-input",{model:{value:t.formPayment.paymentName,callback:function(e){t.$set(t.formPayment,"paymentName",e)},expression:"formPayment.paymentName"}})],1)]):t._e(),t._v(" "),"CS"!==t.formPayment.paymentMethodType?a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5 text-right"},[a("h4",[t._v(t._s(t.lang.payment_ref))]),t._v(" "),a("p",[t._v(t._s(t.lang.info_payment_ref))])]),t._v(" "),a("div",{staticClass:"col-md-7"},[a("el-input",{attrs:{placeholder:t.$lang[t.langId].please_input+t.lang.payment_ref},model:{value:t.formPayment.paymentReference,callback:function(e){t.$set(t.formPayment,"paymentReference",e)},expression:"formPayment.paymentReference"}})],1)]):t._e(),t._v(" "),a("hr"),t._v(" "),"BT"===t.formPayment.paymentMethodType&&0!==t.formPayment.unique_code?a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5 text-right"},[a("h4",[t._v(t._s(t.lang.unique_code))])]),t._v(" "),a("div",{staticClass:"col-md-7"},[a("el-input",{attrs:{placeholder:t.$lang[t.langId].input_code},model:{value:t.formPayment.paymentUniq,callback:function(e){t.$set(t.formPayment,"paymentUniq",e)},expression:"formPayment.paymentUniq"}})],1)]):t._e(),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5 text-right"},[a("h4",[t._v(t._s(t.lang.payment_currency))])]),t._v(" "),a("div",{staticClass:"col-md-7"},[a("el-select",{staticClass:"inline-form",attrs:{filterable:"",placeholder:t.lang.please_select},model:{value:t.formPayment.paymentCurrency,callback:function(e){t.$set(t.formPayment,"paymentCurrency",e)},expression:"formPayment.paymentCurrency"}},t._l(t.currencyData,function(t){return a("el-option",{key:t.currency_id,attrs:{label:t.currency_name,value:t.currency_id}})}),1)],1)]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5 text-right"},[a("h4",[t._v(t._s(t.lang.payment_amount))])]),t._v(" "),a("div",{staticClass:"col-md-7"},[a("div",{staticClass:"el-input"},[a("input-money",{model:{value:t.formPayment.paymentTotal,callback:function(e){t.$set(t.formPayment,"paymentTotal",e)},expression:"formPayment.paymentTotal"}})],1)])])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"text"},on:{click:function(e){t.dialogPayment=!1}}},[t._v(t._s(t.lang.cancel))]),t._v(" "),a("el-button",{attrs:{type:"success",disabled:t.loadingPayment},on:{click:t.savePayment}},[t.loadingPayment?a("span",[a("loading-component",{staticStyle:{"text-align":"center"},attrs:{active:!0,color:"#1bb4e6",loader:"dots",width:32,height:10,backgroundColor:"#ffffff"}})],1):a("span",[t._v(t._s(t.lang.save))])])],1),t._v(" "),a("el-dialog",{attrs:{width:"30%",title:t.$lang[t.langId].accounting_3rd_party_process,visible:t.waitingPayment,"show-close":!1,"close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(e){t.waitingPayment=e}}},[a("div",{attrs:{align:"center"}},[t._v(t._s(t.$lang[t.langId].jurnal_please_wait))]),t._v(" "),a("loading-component",{staticStyle:{"text-align":"center"},attrs:{active:!0,color:"#1bb4e6",loader:"bars",width:64,height:64,backgroundColor:"#ffffff"}})],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.lang.import,visible:t.importDialog},on:{"update:visible":function(e){t.importDialog=e}}},[a("div",[a("div",{staticClass:"mb-8"},[a("el-button",{on:{click:t.downloadTemplate}},[t._v(t._s(t.lang.download_template))])],1),t._v(" "),a("div",{staticClass:"flex-container justify-center"},[a("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingImport,expression:"loadingImport"}],ref:"importProduct",staticClass:"upload-demo",attrs:{drag:"",action:t.uploadImportUrl.url,headers:t.uploadImportUrl.header,"on-success":t.handleSuccessImport,"on-error":t.handlerErrorImport,"on-progress":t.handleOnProgressImport,data:{order_id:t.$route.params.id},multiple:""}},[a("i",{staticClass:"el-icon-upload"}),t._v(" "),a("div",{staticClass:"el-upload__text"},[t._v("Drop file here or "),a("em",[t._v("click to upload")])]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("\n            "+t._s(t.lang.import_from_csv_info)+"\n          ")])])],1)])])],1)},s=[]},BbGh:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=h(a("OyzN")),s=h(a("EJiy")),n=h(a("14Xm")),o=h(a("D3Ub")),l=h(a("FyfS")),r=h(a("P2sY")),d=a("xCek"),c=h(a("vDqi")),_=h(a("Ckak")),u=h(a("eWfT")),p=(a("0dap"),h(a("Ljqw"))),m=h(a("kGIl")),g=h(a("DChC")),v=h(a("o3dS"));function h(t){return t&&t.__esModule?t:{default:t}}e.default={name:"OrderTable",components:{InputMoney:_.default,InputAutocomplete:u.default,LoadingComponent:m.default,ButtonActionAuthenticated:v.default},mixins:[g.default],props:{dataTable:{default:null,type:Object},editShow:{default:!0,type:Boolean}},data:function(){return{loading:!0,detailData:{},showEdit:!0,showTable:!1,addProductDialog:!1,packageProductDialog:!1,deleteRowProduct:!1,dialogDiscount:!1,dialogShipping:!1,dialogPayment:!1,waitingPayment:!1,rowState:[],formAddProduct:{qty:1},searchQuery:"",searchData:[],addingOrderItem:!1,loadingPackage:!1,deleteRowData:{},discountValue:"1",discountForm:{percent:0,price:0,coupon:""},manualTable:!1,automateDataTable:[],manualDataTable:[],formLabelWidth:"30%",formPayment:{paymentDate:"",paymentMethodId:"",paymentMethodLabel:"",paymentMethodType:"",paymentVia:"",paymentName:"",paymentReference:"",paymentUniq:this.randomString(3),paymentCurrency:"",paymentTotal:""},formShipping:{automateRadio:"",typeIdAutomate:"",typeNameAutomate:"",priceAutomate:"",manualRadio:"",typeId:"",typeName:"",price:""},currencyData:[],paymentMethodData:[],editTable:{noSerial:"",qty:"",price:"",note:"",discount:""},packageProductData:[],formPackage:{},selectPackageData:{},showPackage:!1,outstanding:!1,packageSelect:[],loadingGetCombo:!1,importDialog:!1,loadingImport:!1,loadingManual:!1,loadingAuto:!1,loadingSearch:!1,loadingPayment:!1,autoCompleteStartOn:300,discType:1,customRPermis:"sales/openorders"}},computed:{selectedStore:function(){return this.$store.getters.selectedStore},selectRoute:function(){return this.$route.name},token:function(){return this.$store.state.user.token},langId:function(){return this.$store.state.userStores.langId},lang:function(){return this.$store.state.userStores.lang},rootLang:function(){return this.$lang[this.$store.state.userStores.langId]},uploadImportUrl:function(){return{url:(0,d.baseApi)(this.selectedStore.url_id,this.langId,"openorder/importitem"),header:{authorization:"Bearer "+this.token.access_token,accept:"application/json"}}},accessByStore:function(){return["cvsms"]},computedAccess:function(){if(this.accessByStore.includes(this.selectedStore.url_id)&&("ST"===this.selectedStore.role_id||"SS"===this.selectedStore.role_id))return!0}},watch:{dataTable:function(){this.getData()},editShow:function(){this.showEditForm()}},mounted:function(){"Complete Order Detail"===this.$route.name?this.customRPermis="sales/closedorders":"Return Order Detail"===this.$route.name?this.customRPermis="sales/salesreturns":"Cancel Order Detail"===this.$route.name&&(this.customRPermis="sales/cancelledorders")},methods:{showEditForm:function(){this.showEdit=this.editShow},getData:function(){this.detailData=(0,r.default)({},this.dataTable),this.refreshTable()},refreshTable:function(){var t=this;this.loading=!0,this.detailData.orderitems.length>0?(this.loading=!1,this.detailData.orderitems.map(function(e,a){t.$set(e,"edited",!1),t.rowState.push(e)}),this.showTable=!0):(this.loading=!1,this.showTable=!1)},selectProduct:function(t){this.formAddProduct.product=t},setQueryString:function(t){t?this.getProductSearch(t):this.searchData=[]},getProductSearch:function(t,e){var a=this;this.loadingSearch=!0;var i={Authorization:"Bearer "+this.token.access_token},s={sort_column:"name",sort_type:"asc",search:t,per_page:1e3};(0,c.default)({method:"GET",url:(0,d.baseApi)(this.selectedStore.url_id,this.langId,"productvariantonlysearch"),headers:i,params:s}).then(function(t){a.searchData=t.data.data,a.loadingSearch=!1}).catch(function(t){a.searchData=[],a.loadingSearch=!1})},getProductSelect:function(t){this.formAddProduct.product=t.product_id},addProductsToSale:function(){var t=this;this.addingOrderItem=!0;var e={Authorization:"Bearer "+this.token.access_token},a={order_id:this.detailData.id,item_products:this.formAddProduct.product?this.formAddProduct.product.join(","):"",item_qty:this.formAddProduct.qty};(0,c.default)({method:"POST",url:(0,d.baseApi)(this.selectedStore.url_id,this.langId,"openorder/additem"),headers:e,data:a}).then(function(e){t.detailData=e.data.data,t.$message({message:"Success",type:"success"}),t.addingOrderItem=!1,t.addProductDialog=!1,t.$nextTick(function(){t.$refs.InputAutocomplete.resetKeyword()}),t.refreshTable()}).catch(function(e){t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error}),t.addingOrderItem=!1,t.addProductDialog=!0})},showProductDialog:function(){this.searchData=[],this.searchQuery="",this.formAddProduct={product:"",qty:1},this.addProductDialog=!0},showPackageDialog:function(){this.formPackage={package:"",selectPackageData:{},qty:0},this.showPackage=!1,this.packageProductDialog=!0},getProductCombo:function(t,e){var a=this,i={Authorization:"Bearer "+this.token.access_token},s={sort_column:"id",sort_type:"asc",search:t};(0,c.default)({method:"GET",url:(0,d.baseApi)(this.selectedStore.url_id,this.langId,"productcombo"),headers:i,params:s}).then(function(t){var i=!0,s=!1,n=void 0;try{for(var o,r=(0,l.default)(t.data.data);!(i=(o=r.next()).done);i=!0){var d=o.value;d.value=d.name}}catch(t){s=!0,n=t}finally{try{!i&&r.return&&r.return()}finally{if(s)throw n}}a.packageProductData=t.data.data,e(a.packageProductData)}).catch(function(t){a.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error}),a.packageProductData=[]})},handleSelectPackage:function(t){var e=this;this.loadingGetCombo=!0,this.packageSelect=[];var a={Authorization:"Bearer "+this.token.access_token},i=t.id;(0,c.default)({method:"GET",url:(0,d.baseApi)(this.selectedStore.url_id,this.langId,"productcombo/"+i),headers:a}).then(function(t){e.formPackage.selectPackageData=t.data.data,console.log(e.formPackage.selectPackageData),e.formPackage.selectPackageData.items.data.map(function(t,a){null!==t.product_sku&&null!==t.product_name&&null!==t.product_variant_name?t.name=t.product_sku+"-"+t.product_name+"-"+t.product_variant_name:null!==t.product_variant_sku&&null!==t.product_name&&null!==t.product_variant_name?t.name=t.product_variant_sku+"-"+t.product_name+"-"+t.product_variant_name:null===t.product_sku&&t.product_name&&t.product_variant_name?t.name=t.product_name+"-"+t.product_variant_name:0===t.product_variant_id&&t.product_name&&t.variant.length?t.name=t.product_name+"-"+t.variant[0].name:t.name=t.product_name;var i=[];i.push(t),e.packageSelect[a]=t.id,t.children.data.length>0&&t.children.data.map(function(t){t.product_sku&&t.product_name&&t.product_variant_name?t.name=t.product_sku+"-"+t.product_name+"-"+t.product_variant_name:t.product_variant_sku&&t.product_name&&t.product_variant_name?t.name=t.product_variant_sku+"-"+t.product_name+"-"+t.product_variant_name:!t.product_sku&&t.product_name&&t.product_variant_name?t.name=t.product_name+"-"+t.product_variant_name:0===t.product_variant_id&&t.product_name?t.name=t.product_name+"-"+t.variant[0].name:t.name=t.product_name,i.push(t)}),t.tempItems=i}),e.loadingGetCombo=!1,e.showPackage=!0}).catch(function(t){e.$notify({type:"warning",title:t.message,message:t.string}),console.log("ee",t),e.loadingGetCombo=!1})},addPackageProduct:function(t){var e=this;this.loadingPackage=!0;var a={Authorization:"Bearer "+this.token.access_token},i={order_id:this.detailData.id,item_combo_id:this.formPackage.selectPackageData.id,item_combo_qty:this.formPackage.qty};this.formPackage.selectPackageData.items&&this.formPackage.selectPackageData.items.data.length>0&&this.formPackage.selectPackageData.items.data.map(function(t,a){t.tempItems.map(function(s,n){e.packageSelect[a]===s.id&&(i["item_combo_"+t.id+"_"+a]=s.product_id+"|"+s.product_variant_id)})}),(0,c.default)({method:"POST",url:(0,d.baseApi)(this.selectedStore.url_id,this.langId,"openorder/additemcombo"),headers:a,data:i}).then(function(t){e.detailData=t.data.data,e.$message({message:"Success",type:"success"}),e.loadingPackage=!1,e.packageProductDialog=!1,e.refreshTable()}).catch(function(t){e.$notify({type:"warning",title:t.message,message:t.string}),e.loadingPackage=!1,e.packageProductDialog=!0})},handleEditRow:function(t,e){var a=this;return(0,o.default)(n.default.mark(function i(){return n.default.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,a.rowState.map(function(t){t.edited=!1});case 2:null===e.serial_no||"null"===e.serial_no?a.editTable.noSerial="":a.editTable.noSerial=e.serial_no,a.editTable.qty=e.qty,a.editTable.price=e.price,a.editTable.note=e.note,a.editTable.order_with_serial=e.order_with_serial,a.editTable.discount=e.discount,a.rowState[t].edited=!0;case 9:case"end":return i.stop()}},i,a)}))()},handleSimpanRow:function(t,e){var a=this,i=!1;1===this.editTable.order_with_serial&&(this.editTable.noSerial.split("\n").map(function(t){t.length<=1&&(i=!0)}),i&&this.$notify({type:"warning",message:"Serial harus lebih dari 1 digit"}));if(2===this.discType){var s=this.editTable.discount/100*(this.editTable.price*this.editTable.qty);this.editTable.discount=s}if(!i){this.loading=!0;var n={Authorization:"Bearer "+this.token.access_token},o={order_id:this.detailData.id,id:e.id,serial_no:this.editTable.noSerial,qty:this.editTable.qty,price:this.editTable.price,note:this.editTable.note,discount:this.editTable.discount};(0,c.default)({method:"POST",url:(0,d.baseApi)(this.selectedStore.url_id,this.langId,"openorder/updatedetail"),headers:n,data:o}).then(function(e){a.detailData=e.data.data,a.$message({message:"Success",type:"success"}),a.loading=!1,a.rowState[t].edited=!1,a.refreshTable()}).catch(function(t){a.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error}),a.loading=!1})}},handleCancelRow:function(t){this.editTable={noSerial:"",qty:"",price:"",note:"",discount:""},this.discType=1,this.rowState[t].edited=!1},handleDeleteRow:function(t,e){this.deleteRowData=e,this.deleteRowProduct=!0},saveDeleteRow:function(t){var e=this;this.loading=!0;var a={Authorization:"Bearer "+this.token.access_token},i={order_id:this.detailData.id,id:t,qty:0};(0,c.default)({method:"POST",url:(0,d.baseApi)(this.selectedStore.url_id,this.langId,"openorder/updateitemqty"),headers:a,data:i}).then(function(t){e.detailData=t.data.data,e.$message({message:"Success",type:"success"}),e.loading=!1,e.deleteRowProduct=!1,e.refreshTable()}).catch(function(t){e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error}),e.loading=!1})},getAutomateTable:function(t){var e=this;this.loadingAuto=!0;var a={Authorization:"Bearer "+this.token.access_token},i={id:t};(0,c.default)({method:"GET",url:(0,d.baseApi)(this.selectedStore.url_id,this.langId,"openorder/shippingtariffs"),headers:a,params:i}).then(function(t){e.automateDataTable=t.data.data,e.loadingAuto=!1,e.manualTable=!1}).catch(function(t){e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error}),e.loadingAuto=!1})},getManualTable:function(t){var e=this;this.loadingManual=!0;var a={Authorization:"Bearer "+this.token.access_token},i={order_id:t};(0,c.default)({method:"GET",url:(0,d.baseApi)(this.selectedStore.url_id,this.langId,"openorder/shippingtariffsmanual"),headers:a,params:i}).then(function(t){e.manualDataTable=t.data.data,e.loadingManual=!1,e.manualTable=!0}).catch(function(t){e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error}),e.loadingManual=!1})},getPaymentMethod:function(){var t=this;this.loading=!0;var e={Authorization:"Bearer "+this.token.access_token},a=this.detailData.id;(0,c.default)({method:"GET",url:(0,d.baseApi)(this.selectedStore.url_id,this.langId,"openorder/editpayment/"+a),headers:e}).then(function(e){t.paymentMethodData=e.data.data.payment_modes,t.loading=!1}).catch(function(e){t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error}),t.loading=!1})},getCurrency:function(){var t=this;this.loading=!0;var e={Authorization:"Bearer "+this.token.access_token};(0,c.default)({method:"GET",url:(0,d.baseApi)(this.selectedStore.url_id,this.langId,"currency"),headers:e}).then(function(e){t.currencyData=e.data.data,t.loading=!1}).catch(function(e){t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error}),t.loading=!1})},setDiscount:function(){this.handleRadioDiscount(),this.dialogDiscount=!0},handleRadioDiscount:function(){this.discountForm.percent=0,this.discountForm.price=0,this.discountForm.coupon=""},onFocusPercent:function(){this.discountForm.percent=null},saveDiscount:function(t){if("1"===t){var e=(0,d.baseApi)(this.selectedStore.url_id,this.langId,"openorder/updateDiscountAmount"),a=parseFloat(this.discountForm.percent)*parseInt(this.detailData.order_amount)/100,i={pk:this.detailData.id,value:a};this.updateDiscount(t,e,i)}else if("2"===t){var s=(0,d.baseApi)(this.selectedStore.url_id,this.langId,"openorder/updateDiscountAmount"),n={pk:this.detailData.id,value:this.discountForm.price};this.updateDiscount(t,s,n)}else if("3"===t){var o=(0,d.baseApi)(this.selectedStore.url_id,this.langId,"openorder/updateDiscountCode"),l={pk:this.detailData.id,value:this.discountForm.coupon};this.updateDiscount(t,o,l)}},updateDiscount:function(t,e,a){var i=this;this.loading=!0;var s={Authorization:"Bearer "+this.token.access_token};(0,c.default)({method:"POST",url:e,headers:s,data:a}).then(function(t){i.detailData=t.data.data,i.$message({message:"Success",type:"success"}),i.loading=!1,i.dialogDiscount=!1,i.refreshTable()}).catch(function(t){i.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error}),i.loading=!1})},setPayment:function(t){this.outstanding=t;var e=new Date,a=String(e.getDate()).padStart(2,"0"),i=String(e.getMonth()+1).padStart(2,"0");e=e.getFullYear()+"-"+i+"-"+a,this.formPayment.paymentDate=e,this.formPayment.paymentMethodId="",this.formPayment.paymentMethodLabel="",this.formPayment.paymentMethodType="",this.formPayment.paymentVia="",this.formPayment.paymentName="",this.formPayment.paymentReference="",this.formPayment.paymentUniq="",this.formPayment.paymentCurrency=this.detailData.currency_id,this.detailData.is_credit&&this.outstanding?this.formPayment.paymentTotal=this.detailData.credit_outstanding_amount:this.formPayment.paymentTotal=this.detailData.total_amount,this.getPaymentMethod(),this.getCurrency(),this.dialogPayment=!0},setShippingPayment:function(){this.formShipping={automateRadio:"",typeIdAutomate:"",typeNameAutomate:"",priceAutomate:"",manualRadio:"",typeId:"",typeName:"",price:""};var t=this.detailData.id;this.getAutomateTable(t),this.dialogShipping=!0},radioAutomateTable:function(t){this.formShipping.idAutomate=t.id,this.formShipping.typeIdAutomate=t.courier_id,this.formShipping.typeAutomate=t.type,this.formShipping.typeNameAutomate=t.type_name,this.formShipping.priceAutomate=t.tariff},radioManualTable:function(t){var e=t.courier_id,a=t.type_name?t.type_name:t.courier_name;this.formShipping.typeId=e,this.formShipping.typeName=a},saveShipping:function(t){if("automate"===t){var e={order_id:this.detailData.id,shipping_courier_id:this.formShipping.typeIdAutomate,shipping_tariff:this.formShipping.idAutomate,shipping_service_type:this.formShipping.typeAutomate,shipping_cost:this.formShipping.priceAutomate};this.updateData(t,e)}else if("manual"===t){var a={order_id:this.detailData.id,shipping_courier_id:this.formShipping.typeId,shipping_tariff:this.formShipping.typeName,shipping_service_type:this.formShipping.typeName,shipping_cost:this.formShipping.price};this.updateData(t,a)}},updateData:function(t,e){var a=this;this.loading=!0;var i={Authorization:"Bearer "+this.token.access_token};(0,c.default)({method:"POST",url:(0,d.baseApi)(this.selectedStore.url_id,this.langId,"openorder/updateshippingcost"),headers:i,data:e}).then(function(t){a.detailData=t.data.data,a.$message({message:"Success",type:"success"}),a.loading=!1,a.dialogShipping=!1,a.refreshTable(),a.$emit("refresh",a.detailData)}).catch(function(t){a.$notify({type:"warning",title:t.message,message:t.string}),a.loading=!1})},handlePaymentMethod:function(t){"BT"===t.payment_type_id?(this.formPayment.paymentMethodLabel=t.payment_type+" ("+t.bt_bank_name+"-"+t.bt_account_no+")",this.formPayment.paymentUniq=this.detailData.unique_payment_code?this.detailData.unique_payment_code:this.randomString(3),this.formPayment.unique_code=t.activate_unique_code):this.formPayment.paymentMethodLabel=t.payment_type,this.formPayment.paymentMethodId=t.id,this.formPayment.paymentMethodType=t.payment_type_id},parsePaymentTotal:function(){this.formPayment.paymentTotal=parseInt(this.formPayment.paymentTotal)},savePayment:function(){var t=this;this.loading=!0,this.loadingPayment=!0,1===this.dataTable.jurnal_posted_transaction&&(this.waitingPayment=!0);var e={Authorization:"Bearer "+this.token.access_token},a={order_id:this.detailData.id,payment_seq:this.outstanding?"2":"0",payment_date:this.formPayment.paymentDate,payment_mode_id:this.formPayment.paymentMethodId,payment_from_bank:this.formPayment.paymentVia,payment_payee:this.formPayment.paymentName,payment_ref:this.formPayment.paymentReference,unique_payment_code:this.formPayment.paymentUniq,payment_currency_id:this.formPayment.paymentCurrency,payment_amount:this.formPayment.paymentTotal};(0,c.default)({method:"POST",url:(0,d.baseApi)(this.selectedStore.url_id,this.langId,"openorder/updatepayment"),headers:e,data:a}).then(function(e){t.detailData=e.data.data,t.$message({message:"Success",type:"success"}),t.$emit("save-payment",t.detailData),t.loading=!1,(t.dataTable.jurnal_posted_transaction=1)&&(t.waitingPayment=!1),t.loadingPayment=!1,t.dialogPayment=!1,t.outstanding=!1,t.refreshTable()}).catch(function(e){if("string"==typeof e.response.data.error.error)t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error});else if("object"===(0,s.default)(e.response.data.error.error)){var a=(0,i.default)(e.response.data.error.error);if(a.length>=2){var n=[];a.map(function(t,a){n.push(e.response.data.error.error[t][0])});var o=n.join(", ");t.$notify({type:"warning",title:e.response.data.error.message,message:o})}else t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error[a[0]][0]})}(t.dataTable.jurnal_posted_transaction=1)&&(t.waitingPayment=!1),t.outstanding=!1,t.loading=!1,t.loadingPayment=!1})},randomString:function(t,e){e=e||"0123456789";for(var a="",i=0;i<t;i++){var s=Math.floor(Math.random()*e.length);a+=e.substring(s,s+1)}return a},handlePercent:function(t){this.discountForm.percent>100&&(this.discountForm.percent=100)},handlePrice:function(t){this.discountForm.price>this.detailData.total_amount&&(this.discountForm.price=this.detailData.total_amount)},downloadTemplate:function(){window.open(p.default+"olsera_order_item_import_template.csv")},handleSuccessImport:function(t){this.loadingImport=!1,this.detailData=t.data,this.refreshTable(),this.importDialog=!1,this.$refs.importProduct.clearFiles()},handlerErrorImport:function(t,e){var a=JSON.parse(t.message);this.loadingImport=!1,this.$message({type:"error",message:a.error.error})},handleOnProgressImport:function(){this.loadingImport=!0},handleMatchDiscount:function(){var t=0,e=this.editTable.price*this.editTable.qty;2===this.discType&&(t=this.editTable.discount/e*100),1===this.discType&&(t=this.editTable.discount/100*e),this.editTable.discount=t}}}},DChC:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(a("QbLZ")),s=n(a("Ljqw"));function n(t){return t&&t.__esModule?t:{default:t}}var o={mixins:[a("6y4V").checkCustomPermission],computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},langId:function(){return this.$store.state.userStores.langId},lang:function(){return this.$store.state.userStores?this.$store.state.userStores.lang:{}},userRole:function(){var t=this.$store.getters.selectedStore;return{role_id:t.role_id,role_name:t.role_name,is_pos_only:t.is_pos_only,is_mobile:t.is_mobile}},rootLang:function(){return this.$lang[this.langId]},headers:function(){var t=this.$store.getters.token;return this.$store.getters.webviewMode&&(t=this.$store.getters.webviewToken),{Authorization:"Bearer "+t.access_token}},baseURL:function(){return s.default},loggedInUser:function(){return this.$store.state.user.loggedInUser},stageLevel:function(){return"sit"},defaultAccessByStore:function(){return["setdemo1","allinolsera2"]},wejayafoodAccessByStore:function(){return["setdemo1","allinolsera2","ayammrotholpusat","ayammrotholdramaga"]},saveToAllAccessStore:function(){return["setdemo1","allinolsera2","siliwangidutagarden","barokahfrozenfood"]},outlets:function(){var t=[{name:this.$store.state.userStores.lang.all,store_id:0,url_id:"all"}],e=[];return this.$store.getters.stores.map(function(a){e.includes(a.store_id)||a.is_store_active&&(t.push((0,i.default)({},a)),e.push(a.store_id))}),t},tokopediaActiveStore:function(){return this.$store.state.tokopediaActiveStore},shopeeActiveStore:function(){return this.$store.state.shopeeActiveStore}}};e.default=o},RV5X:function(t,e,a){"use strict";a.r(e);var i=a("BbGh"),s=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,function(){return i[t]})}(n);e.default=s.a},Zi58:function(t,e,a){"use strict";a.r(e);var i=a("9q2H"),s=a("RV5X");for(var n in s)["default"].indexOf(n)<0&&function(t){a.d(e,t,function(){return s[t]})}(n);var o=a("KHd+"),l=Object(o.a)(s.default,i.a,i.b,!1,null,null,null);l.options.__file="DetailTableOrder.vue",e.default=l.exports}}]);