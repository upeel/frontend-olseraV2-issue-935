(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0e02"],{"1YuR":function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return s});var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.showForm?e._e():a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"box-card"},[a("div",{staticClass:"table-handler-flex",attrs:{slot:"header"},slot:"header"},[a("div",{staticStyle:{"flex-grow":"1"}},[a("h4",[e._v(e._s(e.$lang[e.langId].list)+" "+e._s(e.lang.store_branches))]),e._v(" "),a("p",[e._v(e._s(e.params.total)+" "+e._s(e.lang.store))])]),e._v(" "),a("button-action-authenticated",{attrs:{permission:["settings/storebranches","edit"],disabled:e.disabledSave,size:"small",type:"success",icon:"el-icon-plus"},on:{click:e.add}},[e._v("\n        "+e._s(e.lang.add)+"\n      ")])],1),e._v(" "),a("div",{staticClass:"card-body"},[a("div",{staticClass:"table-handler-flex"},[a("el-select",{staticClass:"mr-8 inline-form",attrs:{placeholder:e.lang.please_select,filterable:""},on:{change:e.changePageTable},model:{value:e.params.per_page,callback:function(t){e.$set(e.params,"per_page",t)},expression:"params.per_page"}},e._l(e.pages,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),a("el-input",{staticClass:"inline-form input-search",attrs:{placeholder:e.lang.search,clearable:"","prefix-icon":"el-icon-search"},on:{change:e.handleSearch},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1),e._v(" "),a("el-table",{attrs:{data:e.data,stripe:""}},[a("el-table-column",{attrs:{prop:"name",label:e.lang.name,width:"140"}}),e._v(" "),a("el-table-column",{attrs:{label:e.$lang[e.langId].url_id,prop:"url_id",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return t.row.url_id?[e._v("\n            "+e._s(t.row.url_id)+".myolsera.com\n          ")]:void 0}}],null,!0)}),e._v(" "),a("el-table-column",{staticClass:"form-in-cell-wrapper",attrs:{"class-name":e.methodFeatureIsHiddenCellTable("centralized_crm"),label:e.lang.centralized_crm,width:"130",prop:"centralized_crm"},scopedSlots:e._u([{key:"default",fn:function(t){return["crm"!==e.isEditing[t.$index].block?a("span",{staticClass:"editable",on:{click:function(a){return e.edit(t.row,"crm",t.$index)}}},[1===t.row.centralized_crm?[e._v("\n                "+e._s(e.lang.yes)+"\n              ")]:[e._v("\n                "+e._s(e.lang.no)+"\n              ")]],2):e._e(),e._v(" "),e.isEditing[t.$index].editing&&"crm"===e.isEditing[t.$index].block?a("div",{staticClass:"form-in-cell"},[a("el-select",{attrs:{size:"mini"},model:{value:e.tmp.centralized_crm,callback:function(t){e.$set(e.tmp,"centralized_crm",t)},expression:"tmp.centralized_crm"}},[a("el-option",{attrs:{value:1,label:e.lang.yes}}),e._v(" "),a("el-option",{attrs:{value:0,label:e.lang.no}})],1),e._v(" "),a("el-button",{attrs:{size:"mini",icon:"el-icon-close",type:"info"},on:{click:function(a){return e.cancelManageItems(t.$index)}}}),e._v(" "),a("el-button",{attrs:{size:"mini",icon:"el-icon-check",type:"success"},on:{click:function(a){return e.save(e.tmp,t.$index)}}})],1):e._e()]}}],null,!1,3078711213)}),e._v(" "),a("el-table-column",{staticClass:"form-in-cell-wrapper",attrs:{prop:"centralized_product_price",label:e.lang.centralized_product_price},scopedSlots:e._u([{key:"default",fn:function(t){return["centralized_product_price"!==e.isEditing[t.$index].block?a("span",{staticClass:"editable",on:{click:function(a){return e.edit(t.row,"centralized_product_price",t.$index)}}},[1===t.row.centralized_product_price?[e._v("\n                "+e._s(e.lang.yes)+"\n              ")]:[e._v("\n                "+e._s(e.lang.no)+"\n              ")]],2):e._e(),e._v(" "),e.isEditing[t.$index].editing&&"centralized_product_price"===e.isEditing[t.$index].block?a("div",{staticClass:"form-in-cell"},[a("el-select",{attrs:{size:"mini"},model:{value:e.tmp.centralized_product_price,callback:function(t){e.$set(e.tmp,"centralized_product_price",t)},expression:"tmp.centralized_product_price"}},[a("el-option",{attrs:{value:1,label:e.lang.yes}}),e._v(" "),a("el-option",{attrs:{value:0,label:e.lang.no}})],1),e._v(" "),a("el-button",{attrs:{size:"mini",icon:"el-icon-close",type:"info"},on:{click:function(a){return e.cancelManageItems(t.$index)}}}),e._v(" "),a("el-button",{attrs:{size:"mini",icon:"el-icon-check",type:"success"},on:{click:function(a){return e.save(e.tmp,t.$index)}}})],1):e._e()]}}],null,!1,3593762246)}),e._v(" "),a("el-table-column",{attrs:{label:e.$lang[e.langId].action},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"btn-plain",attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(a){return e.remove({id:t.row.id})}}})]}}],null,!1,1679087576)})],1),e._v(" "),a("div",[a("el-pagination",{attrs:{"current-page":e.params.currentPage,"page-size":e.params.per_page,layout:"prev, pager, next, jumper",total:e.params.total},on:{"size-change":e.changePageTable,"current-change":e.changeCurrentPage,"update:currentPage":function(t){return e.$set(e.params,"currentPage",t)},"update:current-page":function(t){return e.$set(e.params,"currentPage",t)}}})],1)],1)]),e._v(" "),e.showForm?a("group-form",{attrs:{saved:e.saved,loading:e.loading,"role-options":e.roles},on:{save:e.save,cancel:e.cancel}}):e._e()],1)},s=[]},"3HrY":function(e,t,a){"use strict";a.r(t);var n=a("weMV"),s=a("EuFl");for(var i in s)["default"].indexOf(i)<0&&function(e){a.d(t,e,function(){return s[e]})}(i);var r=a("KHd+"),l=Object(r.a)(s.default,n.a,n.b,!1,null,null,null);l.options.__file="Form.vue",t.default=l.exports},Ccnf:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mixinHiddenFeatureByPlanType=void 0;var n=a("rOiX"),s={computed:{planType:function(){return this.$store.getters.selectedStore.plan_type_id},selectedStore:function(){return this.$store.getters.selectedStore}},watch:{planType:{handler:function(e){this.resetLock()}}},mounted:function(){this.resetLock()},destroyed:function(){this.resetLock()},methods:{precheckByUrlId:function(e){return n.featureAccessByUrlIds[this.selectedStore.url_id]&&n.featureAccessByUrlIds[this.selectedStore.url_id].includes(e)},resetLock:function(){this.destoryIconSubmenuDisabled();var e=document.querySelectorAll(".submenu-disabled a, .button-plan-type-disabled");e&&e.length&&e.forEach(function(e){e.insertAdjacentHTML("beforeend",'<svg aria-hidden="true" class="ml-10 svg-icon icon-submenu-disabled"><use xlink:href="#icon-lock"></use></svg>')})},destoryIconSubmenuDisabled:function(){var e=document.querySelectorAll(".panel.tab-list .icon-submenu-disabled, .button-plan-type-disabled .icon-submenu-disabled");e&&e.length&&e.forEach(function(e){e.remove()})},methodRouteIsHidden:function(e){return this.$isHiddenByPlanType(this.planType,e)},methodFeatureNameIsHidden:function(e){return this.$isFeatureNameHiddenByPlanType(this.planType,e)},methodFeatureIsHiddenCellTable:function(e){return this.handlerClassName(e,"methodFeatureNameIsHidden",["celltable"])},methodRouteIsHiddenSidebarMenuClass:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.precheckByUrlId(e)&&this.handlerClassName(e,"methodRouteIsHidden",["sidebarmenu"],t)},methodRouteIsHiddenSubMenuClass:function(e){return!this.precheckByUrlId(e)&&this.handlerClassName(e,"methodRouteIsHidden",["submenu"])},methodRouteIsHiddenButtonClass:function(e){return this.handlerClassName(e,"methodFeatureNameIsHidden",["button","button-plan-type"])},handlerClassName:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s="-enabled";this[t](e)&&!n&&(s="-disabled");var i=[];return a.map(function(e){i.push(e+s)}),i.join(" ")}}};t.mixinHiddenFeatureByPlanType=s},EuFl:function(e,t,a){"use strict";a.r(t);var n=a("hwt5"),s=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,function(){return n[e]})}(i);t.default=s.a},X9XA:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=d(a("P2sY")),s=d(a("m1cH")),i=a("xCek"),r=d(a("vDqi")),l=d(a("3HrY")),o=a("Ccnf"),c=a("6y4V");function d(e){return e&&e.__esModule?e:{default:e}}t.default={components:{GroupForm:l.default},mixins:[o.mixinHiddenFeatureByPlanType,c.checkCustomPermission],data:function(){return{loading:!1,loadingItems:!1,saved:!1,data:[],isEditing:[],showForm:!1,disabledButton:!1,tmp:{},pages:[{value:5,label:"5 "+this.$store.state.userStores.lang.rows},{value:10,label:"10 "+this.$store.state.userStores.lang.rows},{value:20,label:"20 "+this.$store.state.userStores.lang.rows}],params:{search:"",per_page:5},searchValue:"",disabledSave:!1}},computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},lang:function(){return this.$store.state.userStores.lang},langId:function(){return this.$store.state.userStores.langId}},watch:{"$store.getters.selectedStore":function(){this.getData()}},mounted:function(){this.getData()},methods:{getData:function(){var e=this;if([].concat((0,s.default)(document.getElementById("app").classList)).includes("dummy-page"))this.getMockupData();else{this.loading=!0;var t={Authorization:"Bearer "+this.token.access_token};(0,r.default)({method:"GET",url:(0,i.baseApi)(this.selectedStore.url_id,this.langId,"storebranches/"),params:this.params,headers:t}).then(function(t){e.data=t.data.data,e.params.total=t.data.meta.total,e.data.map(function(){e.isEditing.push({editing:!1,block:""})}),e.loading=!1}).catch(function(t){e.loading=!1,e.params.total=0,e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error})})}},getMockupData:function(){var e=this;this.params.total=10,this.data=a("c3nT"),this.data.map(function(){e.isEditing.push({editing:!1,block:""})})},add:function(){this.showForm=!0},save:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;console.log(e);var n="POST",s="store",l="";e.id&&(n="PUT",s="updateattr",l=e.id),this.loading=!0;var o={Authorization:"Bearer "+this.token.access_token};(0,r.default)({method:n,url:(0,i.baseApi)(this.selectedStore.url_id,this.langId,"storebranches/"+s+"/"+l),headers:o,data:e}).then(function(e){null!==a&&t.cancelManageItems(a),t.saved=!0,t.showForm=!1,t.getData(),t.$message({type:"success",message:"saved"})}).catch(function(e){t.saved=!1,t.loading=!1,t.isEditing=[],t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error})})},changePageTable:function(e){this.params.per_page=e,this.getData()},handleSearch:function(e){this.params.page=1,this.params.currentPage=1,this.params.search_text="",this.params.search_column=null,this.params.search=this.searchValue,this.getData()},changeSortTable:function(e){"ascending"===e.order&&(e.order="asc"),"descending"===e.order&&(e.order="desc"),this.params.sort_type=e.order,this.params.sort_column=e.prop,this.getData()},changeCurrentPage:function(e){this.params.currentPage=e,this.params.page=e,this.getData()},edit:function(e,t,a){this.checkCustomPermission("settings/storebranches","edit")&&(this.tmp={},this.isEditing.map(function(e){e.editing=!1,e.block=""}),this.isEditing[a].editing=!0,this.isEditing[a].block=t,this.tmp=(0,n.default)({},e))},remove:function(e){var t=this;this.loadingItems=!0;var a={Authorization:"Bearer "+this.token.access_token};(0,r.default)({method:"DELETE",url:(0,i.baseApi)(this.selectedStore.url_id,this.langId,"storebranches/delete/"+e.id),headers:a}).then(function(a){t.data.map(function(a,n){a.id===e.id&&t.data.splice(n,1)}),t.loadingItems=!1,t.$message({type:"success",message:a.data.data.message})}).catch(function(e){t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error}),t.loadingItems=!1})},cancel:function(){this.showForm=!1},cancelManageItems:function(e){this.isEditing[e].editing=!1,this.isEditing[e].block="",this.tmp={}}}}},aNPa:function(e,t,a){"use strict";a.r(t);var n=a("X9XA"),s=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){a.d(t,e,function(){return n[e]})}(i);t.default=s.a},c3nT:function(e){e.exports=JSON.parse('[{"id":1,"name":"Cabang 1","url_id":"cabang1"},{"id":2,"name":"Cabang 2","url_id":"cabang2"},{"id":3,"name":"Cabang 3","url_id":"cabang3"},{"id":4,"name":"Cabang 4","url_id":"cabang4"},{"id":5,"name":"Cabang 5","url_id":"cabang5"},{"id":6,"name":"Cabang 6","url_id":"cabang6"},{"id":7,"name":"Cabang 7","url_id":"cabang7"},{"id":8,"name":"Cabang 8","url_id":"cabang8"},{"id":9,"name":"Cabang 9","url_id":"cabang9"},{"id":10,"name":"Cabang 10","url_id":"cabang10"}]')},hwt5:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(a("P2sY")),s=l(a("QbLZ")),i=a("xCek"),r=l(a("vDqi"));function l(e){return e&&e.__esModule?e:{default:e}}t.default={props:["saved","loading","formData"],data:function(){return{disabledSave:!0,data:{},control:{},branches:[],loading:!1}},computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},lang:function(){return this.$store.state.userStores.lang},langId:function(){return this.$store.state.userStores.langId},userStores:function(){return this.$store.state.userStores}},watch:{data:{handler:function(e){e.branch_id&&""!==e.branch_id?this.disabledSave=!1:this.disabledSave=!0},deep:!0},saved:{handler:function(e){!0===e&&(this.data={},this.disabledSave=!0)},deep:!0},formData:{handler:function(e){this.data=(0,s.default)({},e)},deep:!0,immediate:!0}},mounted:function(){this.searchBranches()},methods:{searchBranches:function(){var e=this;this.loading=!0;var t={Authorization:"Bearer "+this.token.access_token};(0,r.default)({method:"GET",url:(0,i.baseApi)(this.selectedStore.url_id,this.langId,"storebranches/gettoko"),params:{search_column:"role_id",search_text:"OW",active:1,per_page:100},headers:t}).then(function(t){e.branches=t.data.data,e.loading=!1}).catch(function(t){e.loading=!1,e.$notify({type:"warning",title:error.response.data.error.message,message:error.response.data.error.error})})},cancel:function(){this.data={},this.$emit("cancel")},save:function(){this.disabledSave=!0;var e=(0,n.default)({},this.data);this.$emit("save",e)},remove:function(){this.$emit("remove",{id:this.data.id})}}}},qiPw:function(e,t,a){"use strict";a.r(t);var n=a("1YuR"),s=a("aNPa");for(var i in s)["default"].indexOf(i)<0&&function(e){a.d(t,e,function(){return s[e]})}(i);var r=a("KHd+"),l=Object(r.a)(s.default,n.a,n.b,!1,null,null,null);l.options.__file="Index.vue",t.default=l.exports},weMV:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return s});var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("div",{staticClass:"table-handler-flex",attrs:{slot:"header"},slot:"header"},[a("h4",{staticStyle:{"flex-grow":"1"}},[e._v(e._s(e.lang.add)+" "+e._s(e.lang.store_branches))]),e._v(" "),a("div",[a("el-button",{attrs:{size:"small",type:"info"},on:{click:e.cancel}},[e._v("\n        "+e._s(e.lang.cancel)+"\n      ")]),e._v(" "),a("button-action-authenticated",{attrs:{permission:["settings/storebranches","edit"],disabled:e.disabledSave,size:"small",type:"success",icon:"el-icon-check"},on:{click:e.save}},[e._v("\n        "+e._s(e.lang.save)+"\n      ")])],1)]),e._v(" "),a("div",{staticClass:"card-body"},[a("el-form",{attrs:{"label-width":"140px"},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}},[a("el-form-item",{attrs:{label:e.lang.name,required:!0}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.$lang[e.langId].please_input+e.lang.store_name,filterable:""},model:{value:e.data.branch_id,callback:function(t){e.$set(e.data,"branch_id",t)},expression:"data.branch_id"}},e._l(e.branches,function(e){return a("el-option",{key:e.id,attrs:{label:e.name+"  ("+e.url_id+".myolsera.com)",value:e.id}})}),1),e._v(" "),a("p",{staticClass:"input-desc oldgrey size-12"},[e._v("\n          "+e._s(e.lang.info_store_branches)+"\n        ")])],1)],1)],1)])},s=[]}}]);