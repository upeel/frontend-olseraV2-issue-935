(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-e4df"],{"+kZv":function(e){e.exports=JSON.parse('[{"id":3624970,"name":"Setoran bank","type":"E","type_name":"Expense"},{"id":3532728,"name":"Penggajian karyawan","type":"E","type_name":"Expense"},{"id":3501824,"name":"Elpiji","type":"E","type_name":"Expense"},{"id":3430942,"name":"Senar gitar","type":"I","type_name":"Income"},{"id":3365529,"name":"Stik PS kantor","type":"E","type_name":"Expense"},{"id":3347062,"name":"Tagihan Listrik Mei 2020","type":"E","type_name":"Expense"},{"id":3312126,"name":"kas kecil neh","type":"I","type_name":"Income"}]')},DChC:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(a("QbLZ")),o=s(a("Ljqw"));function s(e){return e&&e.__esModule?e:{default:e}}var r={mixins:[a("6y4V").checkCustomPermission],computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},langId:function(){return this.$store.state.userStores.langId},lang:function(){return this.$store.state.userStores?this.$store.state.userStores.lang:{}},userRole:function(){var e=this.$store.getters.selectedStore;return{role_id:e.role_id,role_name:e.role_name,is_pos_only:e.is_pos_only,is_mobile:e.is_mobile}},rootLang:function(){return this.$lang[this.langId]},headers:function(){var e=this.$store.getters.token;return this.$store.getters.webviewMode&&(e=this.$store.getters.webviewToken),{Authorization:"Bearer "+e.access_token}},baseURL:function(){return o.default},loggedInUser:function(){return this.$store.state.user.loggedInUser},stageLevel:function(){return"sit"},defaultAccessByStore:function(){return["setdemo1","allinolsera2"]},wejayafoodAccessByStore:function(){return["setdemo1","allinolsera2","ayammrotholpusat","ayammrotholdramaga"]},saveToAllAccessStore:function(){return["setdemo1","allinolsera2","siliwangidutagarden","barokahfrozenfood"]},outlets:function(){var e=[{name:this.$store.state.userStores.lang.all,store_id:0,url_id:"all"}],t=[];return this.$store.getters.stores.map(function(a){t.includes(a.store_id)||a.is_store_active&&(e.push((0,n.default)({},a)),t.push(a.store_id))}),e},tokopediaActiveStore:function(){return this.$store.state.tokopediaActiveStore},shopeeActiveStore:function(){return this.$store.state.shopeeActiveStore}}};t.default=r},Jz24:function(e,t,a){"use strict";a.r(t);var n=a("dMAZ"),o=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(e){a.d(t,e,function(){return n[e]})}(s);t.default=o.a},RxDf:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return o});var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-wrapper"},[a("section",{staticClass:"content income-expense"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"table-handler-flex",attrs:{slot:"header"},slot:"header"},[a("div",{staticClass:"box-title",staticStyle:{"flex-grow":"1"}},[a("h4",[e._v(e._s(e.lang.transaction_type))]),e._v(" "),e.showTable?a("p",[e._v(e._s(e.params.total)+" "+e._s(e.lang.type))]):a("p",[e._v("0 "+e._s(e.lang.type))])]),e._v(" "),"dev"===e.stageLevel||"sit"===e.stageLevel?a("div",{staticClass:"mr-8"},[a("el-button",{attrs:{loading:e.loadingDownloadPdf,icon:"el-icon-printer"},on:{click:function(t){return e.getPDF()}}},[e._v("\n            PDF\n          ")]),e._v(" "),a("el-button",{attrs:{loading:e.loadingDownloadExcel,icon:"el-icon-document"},on:{click:function(t){return e.getExcel()}}},[e._v("\n            EXCEL\n          ")])],1):e._e(),e._v(" "),a("div",{staticClass:"mr-8"},[a("button-action-authenticated",{attrs:{permission:["inex/inextranstype","store"],icon:"el-icon-upload"},on:{click:function(t){e.importDialog=!0}}},[e._v("\n            "+e._s(e.lang.import)+"\n          ")])],1),e._v(" "),a("div",[a("router-link",{attrs:{to:{name:"Transaction Type Create"}}},[a("button-action-authenticated",{attrs:{permission:["inex/inextranstype","store"],type:"primary",icon:"el-icon-plus"}},[e._v("\n              "+e._s(e.lang.add)+"\n            ")])],1)],1)]),e._v(" "),a("div",{staticClass:"card-body"},[a("div",{staticClass:"table-handler-flex"},[a("div",{staticClass:"mb-4",staticStyle:{"flex-grow":"1"}},[a("el-select",{staticClass:"inline-form",attrs:{filterable:"",placeholder:e.lang.please_select,size:"small"},on:{change:e.changePageTable},model:{value:e.params.per_page,callback:function(t){e.$set(e.params,"per_page",t)},expression:"params.per_page"}},e._l(e.pages,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("div",{staticClass:"mb-4"},[a("el-input",{staticClass:"inline-form type-transaction",attrs:{placeholder:e.lang.search,clearable:"","prefix-icon":"el-icon-search",size:"small"},on:{change:e.handleSearch},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1)]),e._v(" "),a("el-divider"),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"pointer",attrs:{data:e.typeTransactionData,stripe:""},on:{"sort-change":e.changeSortTable}},[a("el-table-column",{attrs:{label:e.lang.name,sortable:"",prop:"name","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.rowState[t.$index].edited?a("div",[a("el-input",{model:{value:e.formEdit.name,callback:function(t){e.$set(e.formEdit,"name",t)},expression:"formEdit.name"}})],1):a("div",[t.row.name?a("strong",[e._v(e._s(t.row.name))]):a("strong",[e._v("-")])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.lang.transaction_type,sortable:"",prop:"type_name","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.type_name?a("div",["I"===t.row.type?a("div",[a("p",{staticStyle:{color:"#6EBE46"}},[e._v(e._s(t.row.type_name))])]):e._e(),e._v(" "),"E"===t.row.type?a("div",[a("p",{staticStyle:{color:"#F44336"}},[e._v(e._s(t.row.type_name))])]):e._e()]):a("div",[a("p",[e._v("-")])])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.rootLang.action,"min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.rowState[t.$index].edited?e._e():a("button-action-authenticated",{staticClass:"delete-button",staticStyle:{color:"#000000"},attrs:{permission:["inex/inextranstype","destroy"],type:"text"},on:{click:function(a){return e.showDeleteDialog(t.row)}}},[a("i",{staticClass:"el-icon-delete"}),e._v("\n                "+e._s(e.rootLang.delete)+"\n              ")]),e._v(" "),e.rowState[t.$index].edited?e._e():a("button-action-authenticated",{staticClass:"edit-button",attrs:{permission:["inex/inextranstype","edit"],type:"text"},on:{click:function(a){return e.editHandle(t.$index,t.row)}}},[a("i",{staticClass:"el-icon-edit"}),e._v("\n                "+e._s(e.lang.edit)+"\n              ")]),e._v(" "),e.rowState[t.$index].edited?a("el-button",{staticClass:"cancel-button",staticStyle:{color:"#575757"},attrs:{type:"text"},on:{click:function(a){return e.cancelHandle(t.$index)}}},[a("i",{staticClass:"el-icon-circle-close-outline"}),e._v("\n                "+e._s(e.lang.cancel)+"\n              ")]):e._e(),e._v(" "),e.rowState[t.$index].edited?a("el-button",{staticClass:"save-button",staticStyle:{color:"#6EBE46"},attrs:{type:"text"},on:{click:function(a){return e.saveHandle(t.$index)}}},[a("i",{staticClass:"el-icon-circle-check-outline"}),e._v("\n                "+e._s(e.lang.save)+"\n              ")]):e._e()]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.params.currentPage,"page-size":e.params.per_page,layout:"prev, pager, next, jumper",total:e.params.total},on:{"size-change":e.changePageTable,"current-change":e.changeCurrentPage,"update:currentPage":function(t){return e.$set(e.params,"currentPage",t)},"update:current-page":function(t){return e.$set(e.params,"currentPage",t)}}})],1)],1)]),e._v(" "),a("el-dialog",{attrs:{visible:e.deleteDialog,width:"50%",center:"","close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(t){e.deleteDialog=t}}},[a("span",{attrs:{slot:"title"},slot:"title"},[a("svg-icon",{staticStyle:{stroke:"#F44336"},attrs:{"icon-class":"alert-triangle"}}),e._v("\n        "+e._s(e.lang.notif_warn)+"\n      ")],1),e._v(" "),a("div",{staticClass:"text-center word-break"},[a("p",[e._v(e._s(e.lang.are_you_sure_to_remove_this_data)+"\n          "),a("span",{staticStyle:{"font-weight":"bold"}},[e._v('"'+e._s(e.deleteData.name)+'"')])]),e._v(" "),a("p",{staticStyle:{color:"#AFB0AF"}},[e._v(e._s(e.rootLang.info_delete_item))])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancelDeleteDialog}},[e._v(e._s(e.lang.cancel))]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:e.deleteHandle}},[e._v(e._s(e.rootLang.delete))])],1)]),e._v(" "),a("el-dialog",{attrs:{title:e.lang.import+" "+e.lang.transaction_type,visible:e.importDialog,"max-width":"760px"},on:{"update:visible":function(t){e.importDialog=t},close:e.cancelImport}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{md:8}},[a("el-button",{staticClass:"btn btn-default",attrs:{loading:e.loadingTemplate},on:{click:e.downloadTemplate}},[e._v("\n            "+e._s(e.lang.download_template)+"\n          ")])],1),e._v(" "),a("el-col",{attrs:{md:16}},[e.dropdownForm?a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v(e._s(e.lang.import_from_csv_info))])]),e._v(" "),a("vue-dropzone",{ref:"dropzone",attrs:{id:"drop1",options:{url:e.baseURL+"api/"+this.selectedStore.url_id+"/admin/v1/"+this.langId+"/inextranstype/importfromcsv",headers:{Authorization:"Bearer "+this.token.access_token,"Cache-Control":null},method:"post",acceptedFiles:".csv"}},on:{"vdropzone-success":e.afterComplete,"vdropzone-error":e.failed}})],1):e._e(),e._v(" "),e.tableImport?a("div",[0!=e.errorImport?a("div",{staticClass:"mb-8"},[a("el-tag",{staticClass:"font-14",attrs:{type:"danger"}},[e._v("\n                "+e._s(e.$lang[e.langId].theres_error)+". "+e._s(e.$lang[e.langId].fix_upload_error)+"\n              ")])],1):e._e(),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{border:"",data:e.dataTableImport,"default-sort":{prop:"id",order:"ascending"},"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{label:e.$lang[e.langId].number,type:"index",index:e.indexMethod}}),e._v(" "),a("el-table-column",{attrs:{label:e.lang.name,prop:"name",sortable:"","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("strong",[e._v(e._s(t.row.name))])]}}],null,!1,3671510750)}),e._v(" "),a("el-table-column",{attrs:{label:e.lang.transaction_type,sortable:"",prop:"type","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",["I"===t.row.type?a("div",[a("p",{staticStyle:{color:"#6EBE46"}},[e._v(e._s(e.rootLang.revennue))])]):e._e(),e._v(" "),"E"===t.row.type?a("div",[a("p",{staticStyle:{color:"#F44336"}},[e._v(e._s(e.rootLang.expense))])]):e._e()])]}}],null,!1,2038492534)}),e._v(" "),a("el-table-column",{attrs:{label:e.lang.error,prop:"error",sortable:"","min-width":"300"}})],1)],1):e._e(),e._v(" "),a("el-button",{staticStyle:{"margin-top":"8px"},on:{click:e.removeAllFiles}},[e._v("\n            "+e._s(e.$lang[e.langId].remove_all_file)+"\n          ")]),e._v(" "),a("el-button",{attrs:{loading:e.loadingImport,type:"success",disabled:e.btnProses},on:{click:e.saveImportData}},[e._v(e._s(e.lang.processing))])],1)],1)],1)],1)])},o=[]},ZRw0:function(e,t,a){"use strict";a.r(t);var n=a("RxDf"),o=a("Jz24");for(var s in o)["default"].indexOf(s)<0&&function(e){a.d(t,e,function(){return o[e]})}(s);var r=a("KHd+"),i=Object(r.a)(o.default,n.a,n.b,!1,null,null,null);i.options.__file="TransactionTypeList.vue",t.default=i.exports},cBQt:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.downloadTemplate=function(e){return(0,n.service)({url:"inextranstype/importtemplate",method:"GET",params:{type:"csv"},responseType:"blob"})};var n=a("xCek")},dMAZ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(a("m1cH")),o=a("xCek"),s=c(a("vDqi")),r=c(a("ksP6"));a("Hj/Q");var i=c(a("DChC")),l=a("cBQt");function c(e){return e&&e.__esModule?e:{default:e}}t.default={name:"TransactionTypeList",components:{vueDropzone:r.default},mixins:[i.default],data:function(){return{loading:!1,typeTransactionData:[],loadingDownloadPdf:!1,searchValue:null,showTable:!1,rowState:{},deleteDialog:!1,loadingDownloadExcel:!1,deleteData:{},pages:[{value:5,label:"5 "+this.$store.state.userStores.lang.rows},{value:10,label:"10 "+this.$store.state.userStores.lang.rows},{value:20,label:"20 "+this.$store.state.userStores.lang.rows}],params:{search:null,total:null,currentPage:1,sort_column:"id",sort_type:"desc",per_page:5,page:1,store:null,search_column:null,search_text:""},formEdit:{id:null,name:""},dropdownForm:!0,importDialog:!1,errorImport:0,tableImport:!1,dataTableImport:[],fileConfirm:"",btnProses:!0,loadingImport:!1,loadingTemplate:!1}},computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},langId:function(){return this.$store.state.userStores.langId},lang:function(){return this.$store.state.userStores.lang},rootLang:function(){return this.$lang[this.$store.state.userStores.langId]}},watch:{"$store.getters.selectedStore":function(e){this.getTypeTransaction()}},methods:{getTypeTransaction:function(){var e=this;if(this.params.store_id||(this.params.store_id=this.selectedStore.store_id),[].concat((0,n.default)(document.getElementById("app").classList)).includes("dummy-page"))this.getMockupData();else{this.loading=!0;var t={Authorization:"Bearer "+this.token.access_token};(0,s.default)({method:"GET",url:(0,o.baseApi)(this.selectedStore.url_id,this.langId,"inextranstype"),params:this.params,headers:t}).then(function(t){e.typeTransactionData=t.data.data,e.params.total=t.data.meta.total,e.rowState=e.typeTransactionData.map(function(e){return{edited:!1}}),e.loading=!1,e.showTable=!0}).catch(function(t){404!==t.response.data.error.status_code&&e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error}),e.typeTransactionData=[],e.showTable=!1,e.loading=!1})}},getMockupData:function(){var e=this;this.showTable=!0,this.params.total=10,this.typeTransactionData=a("+kZv"),this.rowState=[],this.typeTransactionData.map(function(){e.rowState.push({edited:!1})})},changePageTable:function(e){this.params.per_page=e,this.params.page=1,this.params.currentPage=1,this.getTypeTransaction()},handleSearch:function(e){this.params.page=1,this.params.currentPage=1,this.params.search_text="",this.params.search_column=null,this.params.search=this.searchValue,this.getTypeTransaction()},changeSortTable:function(e){"ascending"===e.order&&(e.order="asc"),"descending"===e.order&&(e.order="desc"),console.log(e),this.params.sort_type=e.order,this.params.sort_column=e.prop,this.getTypeTransaction()},changeCurrentPage:function(e){this.params.currentPage=e,this.params.page=e,this.getTypeTransaction()},editHandle:function(e,t){this.formEdit.id=t.id,this.formEdit.name=t.name,this.rowState[e].edited=!0},cancelHandle:function(e){this.formEdit.id=null,this.formEdit.name="",this.rowState[e].edited=!1},saveHandle:function(e){var t=this;this.loading=!0;var a={Authorization:"Bearer "+this.token.access_token},n={name:this.formEdit.name};(0,s.default)({method:"PUT",url:(0,o.baseApi)(this.selectedStore.url_id,this.langId,"inextranstype/"+this.formEdit.id),headers:a,data:n}).then(function(a){t.saveResult=a.data.data,t.$message({message:"Success",type:"success"}),t.loading=!1,t.rowState[e].edited=!1,t.getTypeTransaction()}).catch(function(a){t.$notify({type:"warning",title:a.response.data.error.message,message:a.response.data.error.error}),t.loading=!1,t.rowState[e].edited=!0})},showDeleteDialog:function(e){this.deleteData=e,this.deleteDialog=!0},cancelDeleteDialog:function(){this.deleteData={},this.deleteDialog=!1},deleteHandle:function(){var e=this;this.loading=!0;var t={Authorization:"Bearer "+this.token.access_token},a=this.deleteData.id;(0,s.default)({method:"DELETE",url:(0,o.baseApi)(this.selectedStore.url_id,this.langId,"inextranstype/"+a),headers:t}).then(function(t){e.responseDelete=t.data.data,e.$message({message:"Success",type:"success"}),e.loading=!1,e.deleteDialog=!1,e.getTypeTransaction()}).catch(function(t){e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error}),e.loading=!1,e.deleteDialog=!1})},afterComplete:function(e,t){console.log(t),0===t.error&&(0!==t.unready_import?this.btnProses=!0:this.btnProses=!1,this.dropdownForm=!1,this.tableImport=!0,this.dataTableImport=t.data,this.errorImport=t.error,this.fileConfirm=t.file_confirmed)},failed:function(e,t,n){console.log("file",e),console.log("message",t),console.log("xhr",n),this.$notify({type:"error",title:t.error.message,message:t.error.error}),a("EVdn")(".dz-error-message span").text(t.error.error)},removeAllFiles:function(){this.$refs.dropzone&&this.$refs.dropzone.removeAllFiles(),this.dropdownForm=!0,this.tableImport=!1,this.dataTableImport=[],this.fileConfirm=""},tableRowClassName:function(e){var t=e.row;e.rowIndex,e.props;return null!==t.error?"warning-row":""},indexMethod:function(e){return e+1},getExcel:function(){var e=this;if(this.$store.getters.webviewMode)console.log("mobile");else{this.loadingDownloadExcel=!0;var t={Authorization:"Bearer "+this.token.access_token},a={type:"xlsx"};(0,s.default)({url:(0,o.baseApi)(this.selectedStore.url_id,this.langId,"inextranstype/export"),method:"GET",responseType:"blob",headers:t,params:a}).then(function(t){var a=window.URL.createObjectURL(new Blob([t.data])),n=document.createElement("a");n.href=a,n.setAttribute("download","Tipe Transaksi.xlsx"),document.body.appendChild(n),n.click(),e.loadingDownloadExcel=!1}).catch(function(t){e.loadingDownloadExcel=!1})}},getPDF:function(){var e=this;if(this.$store.getters.webviewMode)console.log("mobile");else{this.loadingDownloadPdf=!0;var t={Authorization:"Bearer "+this.token.access_token},a={type:"pdf"};(0,s.default)({url:(0,o.baseApi)(this.selectedStore.url_id,this.langId,"inextranstype/export"),method:"GET",responseType:"blob",headers:t,params:a}).then(function(t){console.log("qweqweqweqweqwe",t);var a=window.URL.createObjectURL(new Blob([t.data])),n=document.createElement("a");n.href=a,n.setAttribute("download","Tipe Transaksi.pdf"),document.body.appendChild(n),n.click(),e.loadingDownloadPdf=!1}).catch(function(t){console.log(t,"error"),e.loadingDownloadPdf=!1})}},saveImportData:function(){var e=this;this.loadingImport=!0;var t={Authorization:"Bearer "+this.token.access_token};(0,s.default)({method:"POST",url:(0,o.baseApi)(this.selectedStore.url_id,this.langId,"inextranstype/importconfirmed?file_confirmed="+this.fileConfirm),headers:t}).then(function(t){e.loadingImport=!1,e.cancelImport(),e.importDialog=!1,e.$message({title:"Success",message:t.data.message+" Product."}),e.getTypeTransaction()}).catch(function(t,a){e.loadingImport=!1,e.$notify({type:"warning",message:t.message,error:t.string})})},cancelImport:function(){this.dataTableImport=[],this.fileConfirm="",this.dropdownForm=!0,this.tableImport=!1,this.importDialog=!1,this.btnProses=!0},downloadTemplate:function(){var e=this;this.loadingTemplate=!0,(0,l.downloadTemplate)().then(function(t){var a=window.URL.createObjectURL(new Blob([t.data])),n=document.createElement("a");n.href=a,n.setAttribute("download","olsera_type_transaction_import_template.csv"),document.body.appendChild(n),n.click(),e.loadingTemplate=!1}).catch(function(t){e.loadingTemplate=!1})}},mounted:function(){this.getTypeTransaction()}}}}]);