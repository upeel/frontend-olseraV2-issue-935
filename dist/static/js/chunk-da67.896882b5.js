(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-da67"],{"8RZV":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=o(e("QbLZ")),n=e("xCek"),i=o(e("vDqi")),l=o(e("hogc")),r=e("EOyy");function o(t){return t&&t.__esModule?t:{default:t}}var d=e("wd/R");a.default={components:{DateRangePicker:l.default},data:function(){return{loading:!0,loadingItems:!1,saved:!1,data:[],isEditing:[],showForm:!1,disabledButton:!1,searchValue:"",tmp:{},pages:[{value:5,label:"5 "+this.$store.state.userStores.lang.rows},{value:10,label:"10 "+this.$store.state.userStores.lang.rows},{value:20,label:"20 "+this.$store.state.userStores.lang.rows},{value:50,label:"50 "+this.$store.state.userStores.lang.rows},{value:100,label:"100 "+this.$store.state.userStores.lang.rows}],params:{search:"",per_page:5,start_date:d().format("YYYY-MM-DD"),end_date:d().format("YYYY-MM-DD")},dataShift:{additional:[]},showDetail:!1,loadingExport:!1}},computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},lang:function(){return this.$store.state.userStores.lang},langId:function(){return this.$store.state.userStores.langId}},watch:{"$store.getters.selectedStore":function(){this.getData()}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;this.loading=!0;var a={Authorization:"Bearer "+this.token.access_token};(0,i.default)({method:"GET",url:(0,n.baseApi)(this.selectedStore.url_id,this.langId,"shiftbalance"),params:this.params,headers:a}).then(function(a){a.data.data&&(t.data=a.data.data,t.params.total=a.data.meta.total,t.data.map(function(){t.isEditing.push({editing:!1,block:""})})),t.loading=!1}).catch(function(a){t.loading=!1,t.data=[],t.params.total=0,404!==a.statusCode&&t.$notify({type:"warning",title:a.message,message:a.string})})},sortsChanged:function(t){this.saveSorts()},changePageTable:function(t){this.params.per_page=t,this.getData()},handleSearch:function(t){this.params.page=1,this.params.search=this.searchValue,this.getData()},changeSortTable:function(t){"ascending"===t.order&&(t.order="asc"),"descending"===t.order&&(t.order="desc"),this.params.sort_type=t.order,this.params.sort_column=t.prop,this.getData()},changeCurrentPage:function(t){this.params.page=t,this.getData()},filterByDate:function(t){this.params.start_date=t.start_date,this.params.end_date=t.end_date,this.getData()},rowClick:function(t){var a=this;this.loading=!0,this.dataShift={};var e={Authorization:"Bearer "+this.token.access_token};(0,i.default)({method:"GET",url:(0,n.baseApi)(this.selectedStore.url_id,this.langId,"shiftbalance/detail/"+t.id),headers:e}).then(function(t){a.dataShift=t.data.data,a.showDetail=!0,a.loading=!1}).catch(function(t){a.loading=!1,a.showDetail=!1,a.dataShift=[],a.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error})})},handleExport:function(){var t=this;this.loadingExport=!0;var a=(0,s.default)({},this.params);(0,r.exportShiftbalance)(a).then(function(e){var s="shiftbalance-"+a.start_date+"-"+a.end_date+"__.xlsx",n=window.URL.createObjectURL(new Blob([e.data])),i=document.createElement("a");i.href=n,i.setAttribute("download",s),document.body.appendChild(i),i.click(),t.loadingExport=!1}).catch(function(a){console.log(a,"error"),t.loadingExport=!1})}}}},"9r8T":function(t,a,e){"use strict";e.r(a);var s=e("USI5"),n=e("kXxl");for(var i in n)["default"].indexOf(i)<0&&function(t){e.d(a,t,function(){return n[t]})}(i);var l=e("KHd+"),r=Object(l.a)(n.default,s.a,s.b,!1,null,null,null);r.options.__file="Index.vue",a.default=r.exports},EOyy:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.exportShiftbalance=function(t){return(0,s.service)({url:"/shiftbalance/excel",method:"GET",responseType:"blob",params:t})};var s=e("xCek")},USI5:function(t,a,e){"use strict";e.d(a,"a",function(){return s}),e.d(a,"b",function(){return n});var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"content-wrapper"},[e("section",{staticClass:"content sales-list no-subpage"},[t.showForm?t._e():e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"table-handler-flex",attrs:{slot:"header"},slot:"header"},[e("h4",{staticClass:"box-title"},[t._v(t._s(t.lang.shift_summary))])]),t._v(" "),e("div",{staticClass:"card-body"},[e("div",{staticClass:"table-handler-flex"},[e("div",{staticClass:"mb-4",staticStyle:{"flex-grow":"1"}},[e("el-select",{staticClass:"inline-form",attrs:{filterable:"",placeholder:t.lang.please_select,size:"small"},on:{change:t.changePageTable},model:{value:t.params.per_page,callback:function(a){t.$set(t.params,"per_page",a)},expression:"params.per_page"}},t._l(t.pages,function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),e("div",[e("date-range-picker",{staticClass:"mb-4",on:{picked:t.filterByDate}}),t._v(" "),e("el-input",{staticClass:"inline-form input-search mb-4",attrs:{clearable:"",placeholder:t.lang.search,"prefix-icon":"el-icon-search"},on:{change:t.handleSearch},model:{value:t.searchValue,callback:function(a){t.searchValue=a},expression:"searchValue"}}),t._v(" "),e("el-button",{attrs:{type:"primary",loading:t.loadingExport},on:{click:t.handleExport}},[t._v("Export Excel")])],1)]),t._v(" "),e("el-divider"),t._v(" "),e("el-table",{attrs:{data:t.data,stripe:""},on:{"row-click":t.rowClick}},[e("el-table-column",{attrs:{prop:"fshift_date",label:t.lang.date,"min-width":"100"}}),t._v(" "),e("el-table-column",{attrs:{prop:"cashier_name",label:t.lang.cashier,"min-width":"120"}}),t._v(" "),e("el-table-column",{attrs:{prop:"start_time",label:t.lang.start,width:"180"}}),t._v(" "),e("el-table-column",{attrs:{prop:"end_time",width:"180",label:t.lang.end}}),t._v(" "),e("el-table-column",{attrs:{prop:"ftotal_expected_amount",width:"140",label:t.lang.expected}}),t._v(" "),e("el-table-column",{attrs:{prop:"ftotal_actual_amount",width:"140",label:t.lang.actual}}),t._v(" "),e("el-table-column",{attrs:{prop:"ftotal_difference_amount",label:t.lang.difference}})],1),t._v(" "),e("div",{staticStyle:{"text-align":"center"}},[e("el-pagination",{attrs:{"current-page":t.params.currentPage,"page-size":t.params.per_page,layout:"prev, pager, next, jumper",total:t.params.total},on:{"size-change":t.changePageTable,"current-change":t.changeCurrentPage,"update:currentPage":function(a){return t.$set(t.params,"currentPage",a)},"update:current-page":function(a){return t.$set(t.params,"currentPage",a)}}})],1)],1)])],1),t._v(" "),e("el-dialog",{attrs:{visible:t.showDetail,title:t.dataShift.fshift_date+" "+t.dataShift.cashier_name,width:"70%"},on:{"update:visible":function(a){t.showDetail=a}}},[e("div",[e("div",{staticClass:"flex-container p-8"},[e("div",{staticClass:"full-width"},[e("p",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.lang.cashier))]),t._v(" "),e("p",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.lang.shift))]),t._v(" "),e("p",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.lang.cash_expected))]),t._v(" "),e("div",{staticStyle:{"margin-left":"15px"}},[e("p",[t._v(t._s(t.lang.starting_in_drawer))]),t._v(" "),e("p",[t._v(t._s(t.lang.cash_sales))]),t._v(" "),e("p",[t._v(t._s(t.lang.cash_refund))]),t._v(" "),e("p",[t._v(t._s(t.lang.cash_void))]),t._v(" "),e("p",[t._v(t._s(t.lang.cash_pay_in))]),t._v(" "),e("p",[t._v(t._s(t.lang.cash_pay_out))])]),t._v(" "),e("p",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.lang.cash_actual))]),t._v(" "),e("p",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.lang.cash_difference))]),t._v(" "),t.dataShift.additional.length>0?e("div",t._l(t.dataShift.additional,function(a,s){return e("div",{key:s},[e("p",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(a.payment_mode_name))]),t._v(" "),e("p",{staticStyle:{"margin-left":"10px"}},[t._v(t._s(t.lang.sales))]),t._v(" "),"0.00"!==a.refund_amount?e("p",{staticStyle:{"margin-left":"10px"}},[t._v(" "+t._s(t.$lang[t.langId].salesreturn)+" ")]):t._e(),t._v(" "),"0.00"!==a.void_amount?e("p",{staticStyle:{"margin-left":"10px"}},[t._v(" "+t._s(t.lang.void)+" ")]):t._e()])}),0):t._e()]),t._v(" "),e("div",{staticClass:"full-width text-right"},[e("p",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.dataShift.cashier_name))]),t._v(" "),e("p",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.dataShift.fstart_time)+" - "+t._s(t.dataShift.fend_time))]),t._v(" "),e("p",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.dataShift.fcash_expected_amount))]),t._v(" "),e("p",[t._v(t._s(t.dataShift.fcash_begin_amount))]),t._v(" "),e("p",[t._v(t._s(t.dataShift.fcash_sales_amount))]),t._v(" "),e("p",[t._v(t._s(t.dataShift.fcash_refund_amount))]),t._v(" "),e("p",[t._v(t._s(t.dataShift.fcash_void_amount))]),t._v(" "),e("p",[t._v(t._s(t.dataShift.fcash_pay_in_amount))]),t._v(" "),e("p",[t._v(t._s(t.dataShift.fcash_pay_out_amount))]),t._v(" "),e("p",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.dataShift.fcash_actual_amount))]),t._v(" "),e("p",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.dataShift.fcash_difference_amount))]),t._v(" "),t.dataShift.additional.length>0?e("div",t._l(t.dataShift.additional,function(a,s){return e("div",{key:s},[e("p",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(a.factual_amount))]),t._v(" "),e("p",[t._v(t._s(a.fsales_amount))]),t._v(" "),"0.00"!==a.refund_amount?e("p",[t._v(" "+t._s(a.frefund_amount)+" ")]):"0.00"!==a.void_amount?e("p",[t._v(" - "+t._s(a.fvoid_amount)+" ")]):t._e()])}),0):t._e()])]),t._v(" "),e("el-row",{staticStyle:{background:"#eee","padding-left":"5px","padding-right":"5px","padding-top":"5px"}},[e("el-col",{attrs:{md:9}},[e("p",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.lang.total_expected))]),t._v(" "),e("p",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.lang.total_actual))]),t._v(" "),e("p",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.lang.total_difference))])]),t._v(" "),e("el-col",{staticStyle:{"text-align":"right"},attrs:{md:15}},[e("p",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.dataShift.ftotal_expected_amount))]),t._v(" "),e("p",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.dataShift.ftotal_actual_amount))]),t._v(" "),e("p",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.dataShift.ftotal_difference_amount))])])],1)],1)])],1)},n=[]},kXxl:function(t,a,e){"use strict";e.r(a);var s=e("8RZV"),n=e.n(s);for(var i in s)["default"].indexOf(i)<0&&function(t){e.d(a,t,function(){return s[t]})}(i);a.default=n.a}}]);