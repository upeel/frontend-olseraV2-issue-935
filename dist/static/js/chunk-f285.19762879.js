(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-f285"],{"1sVx":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=d(r("GQeE")),s=d(r("EJiy")),o=d(r("FyfS")),n=r("xCek"),l=d(r("vDqi")),i=d(r("wd/R"));function d(e){return e&&e.__esModule?e:{default:e}}t.default={name:"OpenOrderCreate",data:function(){return{loading:!0,createCustomer:!1,isDisableCustomer:!1,customerType:null,suggestData:[],currencyType:[],autoCompleteStartOn:300,formAdd:{customerValue:null,nameCustomerEmail:"",nameCustomer:"",customerId:null,customerTypes:{id:null},phone:"",dateBuy:(0,i.default)().format("YYYY-MM-DD"),currencyTypes:{currency_id:""},notes:""}}},computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},langId:function(){return this.$store.state.userStores.langId},lang:function(){return this.$store.state.userStores.lang},rootLang:function(){return this.$lang[this.$store.state.userStores.langId]},disabledDate:function(){return"ST"===this.$store.state.userStores.userRole.role_id}},watch:{"$store.getters.selectedStore":function(){this.getCustomerType(),this.getCurrency()}},methods:{handleSelectCustomer:function(e){this.formAdd.customerId=e.id},getCustomerType:function(){var e=this;this.loading=!0;var t={Authorization:"Bearer "+this.token.access_token};(0,l.default)({method:"GET",url:(0,n.baseApi)(this.selectedStore.url_id,this.langId,"customertype"),headers:t,params:{search:"",per_page:100}}).then(function(t){e.customerType=t.data.data,e.loading=!1}).catch(function(t){console.log(t),e.loading=!1})},getCurrency:function(){var e=this;this.loading=!0;var t={Authorization:"Bearer "+this.token.access_token};(0,l.default)({method:"GET",url:(0,n.baseApi)(this.selectedStore.url_id,this.langId,"currency"),headers:t}).then(function(t){e.currencyType=t.data.data,t.data.data.map(function(t){"IDR"===t.currency_id&&(e.formAdd.currencyTypes.currency_id=t.currency_id)}),e.loading=!1}).catch(function(t){console.log(t),e.loading=!1})},getCustomerSuggest:function(e,t){var r=this,a={Authorization:"Bearer "+this.token.access_token},s={search:e};(0,l.default)({method:"GET",url:(0,n.baseApi)(this.selectedStore.url_id,this.langId,"customer"),headers:a,params:s}).then(function(e){if(e){var a=!0,s=!1,n=void 0;try{for(var l,i=(0,o.default)(e.data.data);!(a=(l=i.next()).done);a=!0){var d=l.value;d.value=d.customer_text}}catch(e){s=!0,n=e}finally{try{!a&&i.return&&i.return()}finally{if(s)throw n}}r.suggestData=e.data.data,t(r.suggestData)}}).catch(function(){r.suggestData=[],t(r.suggestData)})},addCustomer:function(){this.createCustomer=!0,this.isDisableCustomer=!0,this.formAdd.customerValue=null},cancelAddCust:function(){this.createCustomer=!1,this.isDisableCustomer=!1,this.formAdd.customerTypes.id=null,this.formAdd.nameCustomer="",this.formAdd.nameCustomerEmail="",this.formAdd.phone=""},save:function(){var e=this;this.loading=!0;var t={Authorization:"Bearer "+this.token.access_token},r={order_date:this.formAdd.dateBuy,currency_id:this.formAdd.currencyTypes.currency_id,notes:this.formAdd.notes};this.createCustomer?(this.$set(r,"customer_name",this.formAdd.nameCustomer),this.$set(r,"customer_type_id",this.formAdd.customerTypes.id),this.$set(r,"customer_email",this.formAdd.nameCustomerEmail),this.$set(r,"customer_phone",this.formAdd.phone)):this.$set(r,"customer_id",this.formAdd.customerId),(0,l.default)({method:"POST",url:(0,n.baseApi)(this.selectedStore.url_id,this.langId,"openorder"),headers:t,data:r}).then(function(t){e.loading=!1,e.$router.push({path:"/sales/openorder/"+t.data.data.id})}).catch(function(t){if(e.loading=!1,"object"===(0,s.default)(t.response.data.error.error)){var r=(0,a.default)(t.response.data.error.error)[0];e.$notify({tipe:"warning",title:t.response.data.error.message,message:t.response.data.error.error[r][0]})}else e.$notify({tipe:"warning",title:t.response.data.error.message,message:t.response.data.error.error})})}},mounted:function(){this.getCustomerType(),this.getCurrency()}}},"5RI/":function(e,t,r){"use strict";r.d(t,"a",function(){return a}),r.d(t,"b",function(){return s});var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[r("section",[r("el-card",{staticClass:"box-card"},[r("div",{staticClass:"table-handler-flex",attrs:{slot:"header"},slot:"header"},[r("h3",{staticClass:"box-title",staticStyle:{"flex-grow":"1"}},[e._v("\n          "+e._s(e.lang.add)+" "+e._s(e.lang.orders)+"\n        ")]),e._v(" "),r("div",[r("router-link",{attrs:{to:"/sales/openorder"}},[r("el-button",{attrs:{type:"text"}},[e._v(e._s(e.lang.cancel))])],1),e._v(" "),e.formAdd.customerValue&&e.formAdd.dateBuy&&e.formAdd.currencyTypes.currency_id||e.formAdd.nameCustomer&&e.formAdd.dateBuy&&e.formAdd.currencyTypes.currency_id?r("el-button",{attrs:{icon:"el-icon-check",type:"success"},on:{click:e.save}},[e._v("\n            "+e._s(e.lang.save)+"\n          ")]):r("el-button",{attrs:{type:"info",disabled:""}},[e._v("\n            "+e._s(e.lang.save)+"\n          ")])],1)]),e._v(" "),r("div",{staticClass:"box-body"},[r("el-form",{attrs:{"label-position":"left","label-width":"220px"},nativeOn:{submit:function(e){e.preventDefault()}}},[r("div",{staticClass:"mb-24"},[r("div",{staticClass:"color-primary font-bold mb-12"},[e._v("\n              "+e._s(e.lang.customer)+" *\n            ")]),e._v(" "),r("el-form-item",{attrs:{label:e.lang.name_or_email}},[r("el-autocomplete",{staticClass:"w-fit",attrs:{"fetch-suggestions":e.getCustomerSuggest,debounce:e.autoCompleteStartOn,placeholder:e.lang.search_by_name_email,disabled:e.isDisableCustomer},on:{select:e.handleSelectCustomer},model:{value:e.formAdd.customerValue,callback:function(t){e.$set(e.formAdd,"customerValue",t)},expression:"formAdd.customerValue"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.lang.info_or_add_new_customer}},[r("el-button",{staticClass:"add-button",attrs:{disabled:e.isDisableCustomer,icon:"el-icon-plus",type:"primary"},on:{click:e.addCustomer}})],1),e._v(" "),1==e.createCustomer?r("div",[r("el-form-item",{attrs:{label:e.lang.customer_name}},[r("el-input",{staticClass:"inline-form",attrs:{placeholder:e.$lang[e.langId].please_input+e.lang.customer_name},model:{value:e.formAdd.nameCustomer,callback:function(t){e.$set(e.formAdd,"nameCustomer",t)},expression:"formAdd.nameCustomer"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.lang.customer_type}},[r("el-select",{staticClass:"inline-form",attrs:{filterable:"",placeholder:e.lang.please_select},model:{value:e.formAdd.customerTypes.id,callback:function(t){e.$set(e.formAdd.customerTypes,"id",t)},expression:"formAdd.customerTypes.id"}},e._l(e.customerType,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:e.lang.email}},[r("el-input",{staticClass:"inline-form",attrs:{placeholder:e.$lang[e.langId].input_email},model:{value:e.formAdd.nameCustomerEmail,callback:function(t){e.$set(e.formAdd,"nameCustomerEmail",t)},expression:"formAdd.nameCustomerEmail"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.lang.phone}},[r("el-input",{staticClass:"inline-form",attrs:{type:"number",placeholder:e.$lang[e.langId].input_number},model:{value:e.formAdd.phone,callback:function(t){e.$set(e.formAdd,"phone",t)},expression:"formAdd.phone"}})],1),e._v(" "),r("el-button",{attrs:{type:"info"},on:{click:e.cancelAddCust}},[e._v(e._s(e.lang.cancel))])],1):e._e()],1),e._v(" "),r("div",[r("div",{staticClass:"color-primary font-bold mb-12"},[e._v("\n              "+e._s(e.lang.sales)+"\n            ")]),e._v(" "),r("el-form-item",{attrs:{label:e.lang.order_date}},[r("el-date-picker",{attrs:{type:"date",disabled:e.disabledDate,placeholder:e.$lang[e.langId].pick_a_day,format:"dd-MM-yyyy","value-format":"yyyy-MM-dd"},model:{value:e.formAdd.dateBuy,callback:function(t){e.$set(e.formAdd,"dateBuy",t)},expression:"formAdd.dateBuy"}})],1),e._v(" "),r("el-form-item",{attrs:{label:e.lang.sales_currency}},[r("el-select",{staticClass:"inline-form",attrs:{filterable:"",placeholder:e.lang.please_select},model:{value:e.formAdd.currencyTypes.currency_id,callback:function(t){e.$set(e.formAdd.currencyTypes,"currency_id",t)},expression:"formAdd.currencyTypes.currency_id"}},e._l(e.currencyType,function(e){return r("el-option",{key:e.currency_id,attrs:{label:e.currency_name,value:e.currency_id}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:e.lang.notes}},[r("el-input",{attrs:{type:"textarea",placeholder:e.$lang[e.langId].please_input+e.lang.notes},model:{value:e.formAdd.notes,callback:function(t){e.$set(e.formAdd,"notes",t)},expression:"formAdd.notes"}})],1)],1)])],1)])],1)])},s=[]},FyfS:function(e,t,r){e.exports={default:r("fUKC"),__esModule:!0}},"NdK/":function(e,t,r){"use strict";r.r(t);var a=r("1sVx"),s=r.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){r.d(t,e,function(){return a[e]})}(o);t.default=s.a},fUKC:function(e,t,r){r("ZY/g"),r("C5kU"),e.exports=r("sbOA")},s5x1:function(e,t,r){"use strict";r.r(t);var a=r("5RI/"),s=r("NdK/");for(var o in s)["default"].indexOf(o)<0&&function(e){r.d(t,e,function(){return s[e]})}(o);var n=r("KHd+"),l=Object(n.a)(s.default,a.a,a.b,!1,null,null,null);l.options.__file="OpenOrderCreate.vue",t.default=l.exports},sbOA:function(e,t,r){var a=r("d+lc"),s=r("I90/");e.exports=r("VSTI").getIterator=function(e){var t=s(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return a(t.call(e))}}}]);