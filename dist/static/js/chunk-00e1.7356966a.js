(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-00e1"],{"332Y":function(t,a,e){"use strict";e.d(a,"a",function(){return n}),e.d(a,"b",function(){return o});var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"main-content"},[e("div",{staticClass:"table-handler-flex"},[e("div",{staticStyle:{"flex-grow":"1"}},[e("h4",{staticClass:"main-content__title"},[t._v(t._s(t.lang.stock_movement))]),t._v(" "),e("p",{staticClass:"main-content__subtitle"},[t._v(t._s(t.params.total)+" "+t._s(t.lang.item))])]),t._v(" "),e("date-range-picker",{staticClass:"mr-4",attrs:{"init-date":t.initParamDate,attendance:!0},on:{picked:t.getData}}),t._v(" "),e("el-button",{attrs:{type:"success",icon:"el-icon-download"},on:{click:t.downloadExcel}},[t._v("\n        "+t._s(t.$lang[t.langId].download_excel)+"\n      ")])],1),t._v(" "),e("div",{staticClass:"table-handler-flex mb-16"},[e("div",{staticClass:"mb-8",staticStyle:{"flex-grow":"1"}},[e("el-select",{staticClass:"inline-form",attrs:{filterable:"",placeholder:t.lang.please_select,size:"small"},on:{change:t.changePageTable},model:{value:t.params.per_page,callback:function(a){t.$set(t.params,"per_page",a)},expression:"params.per_page"}},t._l(t.pages,function(a){return e("el-option",{key:a,attrs:{value:a,label:a+" "+t.lang.rows}})}),1)],1),t._v(" "),e("div",{staticClass:"mb-8"},[e("el-input",{staticClass:"inline-form input-search",attrs:{clearable:"",placeholder:t.lang.search,"prefix-icon":"el-icon-search",size:"small"},on:{change:t.handleSearch},model:{value:t.searchValue,callback:function(a){t.searchValue=a},expression:"searchValue"}})],1)]),t._v(" "),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.tableData,stripe:"",border:""},on:{"row-click":t.openDetail,"sort-change":t.changeSortTable}},[e("el-table-column",{attrs:{label:t.lang.group,sortable:"","min-width":"100px"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v("\n          "+t._s(a.row.product_group_name)+"\n        ")]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.lang.product,sortable:"",prop:"product_name","min-width":"150px"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("h5",[e("strong",[t._v(t._s(a.row.product_name))])]),t._v(" "),e("small",[t._v(t._s(a.row.product_sku))]),t._v(" "),e("p",[e("small",[t._v(t._s(a.row.product_variant_name))])])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.lang.beginning,sortable:"",prop:"beginning_qty","min-width":"80px"},scopedSlots:t._u([{key:"default",fn:function(a){return[t._v("\n          "+t._s(a.row.beginning_qty)+"\n        ")]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.lang.incoming,sortable:"",prop:"sum_incoming_qty","min-width":"80px"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("svg-icon",{staticStyle:{width:"15px",height:"15px",stroke:"#6EBE46"},attrs:{"icon-class":"corner-right-down"}}),t._v(" "),e("span",{staticStyle:{color:"#6EBE46"}},[t._v(t._s(a.row.sum_incoming_qty))])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.lang.sales_return,sortable:"",prop:"sum_return_qty","min-width":"80px"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("svg-icon",{staticStyle:{width:"15px",height:"15px",stroke:"#6EBE46"},attrs:{"icon-class":"corner-right-down"}}),t._v(" "),e("span",{staticStyle:{color:"#6EBE46"}},[t._v(t._s(a.row.sum_return_qty))])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.lang.sales,sortable:"",prop:"sum_sales_qty","min-width":"80px"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("svg-icon",{staticStyle:{width:"15px",height:"15px",stroke:"#6EBE46"},attrs:{"icon-class":"corner-right-down"}}),t._v(" "),e("span",{staticStyle:{color:"#6EBE46"}},[t._v(t._s(a.row.sum_sales_qty))])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.lang.outgoing,sortable:"",prop:"sum_outgoing_qty","min-width":"80px"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("svg-icon",{staticStyle:{width:"15px",height:"15px",stroke:"#F44336"},attrs:{"icon-class":"corner-right-up"}}),t._v(" "),e("span",{staticStyle:{color:"#F44336"}},[t._v(t._s(a.row.sum_outgoing_qty))])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:t.lang.outstanding,sortable:"",prop:"sisa","min-width":"80px"}})],1),t._v(" "),e("el-pagination",{attrs:{"current-page":t.params.currentPage,"page-size":t.params.per_page,layout:"prev, pager, next, jumper",total:t.params.total},on:{"size-change":t.changePageTable,"current-change":t.changeCurrentPage,"update:currentPage":function(a){return t.$set(t.params,"currentPage",a)},"update:current-page":function(a){return t.$set(t.params,"currentPage",a)}}})],1),t._v(" "),e("el-dialog",{attrs:{"before-close":t.closeDetail,visible:t.modalState,title:t.modalTitle,"append-to-body":"",width:"80%"},on:{"update:visible":function(a){t.modalState=a}}},[e("div",{staticClass:"dialog-body"},[t.modalData?e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingElement,expression:"loadingElement"}],attrs:{stripe:"",border:"",data:t.modalData.data},on:{"sort-change":t.changeSortTable,"row-click":t.rowClick}},[e("el-table-column",{attrs:{label:t.lang.date},scopedSlots:t._u([{key:"default",fn:function(a){return[e("i",{staticClass:"el-icon-success"}),t._v(" "+t._s(a.row.fdate)),e("br"),t._v(" "),e("i",{staticClass:"el-icon-upload"}),t._v(" "+t._s(a.row.fcreated_time)+"\n          ")]}}],null,!1,492573430)}),t._v(" "),e("el-table-column",{attrs:{label:t.lang.type},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(a.row.type))]),e("br"),t._v(" "),a.row.ref_no?e("router-link",{attrs:{to:{path:t.computedLink(a.row)}}},[t._v("\n              "+t._s(a.row.ref_no)+"\n            ")]):t._e()]}}],null,!1,3523362468)}),t._v(" "),e("el-table-column",{attrs:{label:t.lang.beginning,prop:"beginning_qty"}}),t._v(" "),e("el-table-column",{attrs:{label:t.lang.incoming,prop:"incoming_qty"}}),t._v(" "),e("el-table-column",{attrs:{label:t.lang.outgoing,prop:"outgoing_qty"}}),t._v(" "),e("el-table-column",{attrs:{label:t.lang.outstanding,prop:"balance_qty"}})],1):t._e(),t._v(" "),t.modalData?e("div",{staticStyle:{"text-align":"center","margin-top":"12px"}},[e("el-pagination",{attrs:{"page-size":10,layout:"prev, pager, next, jumper",total:t.modalParams.total},on:{"current-change":t.changeModalCurrentPage}})],1):t._e()],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-download"},on:{click:t.downloadExcelDetail}},[t._v("\n        "+t._s(t.$lang[t.langId].download_excel)+"\n      ")]),t._v(" "),e("el-button",{attrs:{type:"info",size:"small",icon:"el-icon-close"},on:{click:t.closeDetail}},[t._v(t._s(t.lang.close))])],1)])],1)},o=[]},"3PXN":function(t,a,e){"use strict";e.r(a);var n=e("332Y"),o=e("H31o");for(var s in o)["default"].indexOf(s)<0&&function(t){e.d(a,t,function(){return o[t]})}(s);var r=e("KHd+"),l=Object(r.a)(o.default,n.a,n.b,!1,null,null,null);l.options.__file="Index.vue",a.default=l.exports},"49/L":function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e("xCek"),o=r(e("vDqi")),s=r(e("hogc"));function r(t){return t&&t.__esModule?t:{default:t}}var l=e("wd/R"),i=(l().add(-6,"days").format("YYYY-MM-DD"),l().format("YYYY-MM-DD"));a.default={components:{dateRangePicker:s.default},data:function(){return{loading:!0,loadingElement:!0,tableData:[],searchValue:null,pages:[5,10,20],modalState:!1,modalData:{},modalTitle:null,params:{search:null,total:null,currentPage:1,sort_column:"product_group_name",sort_type:"asc",start_date:i,end_date:i,per_page:10,page:1},modalParams:{page:1,product_id:null,total:0}}},computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},langId:function(){return this.$store.state.userStores.langId},lang:function(){return this.$store.state.userStores.lang}},watch:{"$store.getters.selectedStore":function(){this.getData()}},methods:{getData:function(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.loading=!0,a&&(this.params.start_date=a.start_date,this.params.end_date=a.end_date);var e={Authorization:"Bearer "+this.token.access_token};(0,o.default)({method:"GET",url:(0,n.baseApi)(this.selectedStore.url_id,this.langId,"stockmovement"),params:this.params,headers:e}).then(function(a){t.tableData=a.data.data,t.params.total=a.data.meta.total,t.loading=!1}).catch(function(a){t.tableData=[],t.params.total=0,t.loading=!1})},changePageTable:function(t){this.params.per_page=t,this.getData()},handleSearch:function(t){this.params.page=1,this.params.currentPage=1,this.params.search_text="",this.params.search_column=null,this.params.search=this.searchValue,this.getData()},changeSortTable:function(t){"ascending"===t.order&&(t.order="asc"),"descending"===t.order&&(t.order="desc"),null===t.order&&(t.order=this.params.sort_type),this.params.sort_type=t.order,this.params.sort_column=t.prop,this.getData()},changeCurrentPage:function(t){this.params.currentPage=t,this.params.page=t,this.getData()},getDetailData:function(){var t=this;this.loadingElement=!0;var a={Authorization:"Bearer "+this.token.access_token},e={product_id:this.modalParams.product_id,per_page:10,page:this.modalParams.page,search:null,start_date:this.params.start_date,end_date:this.params.end_date,product_variant_id:this.modalParams.product_variant_id};(0,o.default)({method:"GET",url:(0,n.baseApi)(this.selectedStore.url_id,this.langId,"stockmovement/detail"),params:e,headers:a}).then(function(a){t.modalData=a.data,t.modalParams.total=a.data.meta.total,t.loadingElement=!1}).catch(function(a){t.loadingElement=!1})},changeModalCurrentPage:function(t){this.modalParams.page=t,this.getDetailData()},openDetail:function(t){this.modalState=!0,this.modalTitle=t.product_variant_id?t.product_name+" - "+t.product_variant_name:t.product_name,this.modalParams.product_id=t.product_id,this.modalParams.product_variant_id=t.product_variant_id,this.modalParams.total=0,this.modalParams.page=1,this.getDetailData(t)},closeDetail:function(){this.modalState=!1,this.modalParams.product_id=null,this.modalParams.total=0,this.modalParams.page=1,this.modalData={}},downloadExcel:function(){var t=this;this.loading=!0;var a={Authorization:"Bearer "+this.token.access_token};(0,o.default)({method:"GET",url:(0,n.baseApi)(this.selectedStore.url_id,this.langId,"stockmovement/export/summary"),params:{start_date:this.params.start_date,end_date:this.params.end_date,type:"xlsx"},responseType:"blob",headers:a}).then(function(a){var e="summary-"+t.params.start_date+"__"+t.params.end_date+".xlsx",n=window.URL.createObjectURL(new Blob([a.data])),o=document.createElement("a");o.href=n,o.setAttribute("download",e),document.body.appendChild(o),o.click(),t.loading=!1}).catch(function(a){console.log(a,"error"),t.loading=!1})},downloadExcelDetail:function(){var t=this;this.loading=!0;var a={Authorization:"Bearer "+this.token.access_token};(0,o.default)({method:"GET",url:(0,n.baseApi)(this.selectedStore.url_id,this.langId,"stockmovement/export/detail"),params:{start_date:this.params.start_date,end_date:this.params.end_date,product_id:this.modalParams.product_id,product_variant_id:null,type:"xlsx"},responseType:"blob",headers:a}).then(function(a){var e="summary-"+t.params.start_date+"__"+t.params.end_date+".xlsx",n=window.URL.createObjectURL(new Blob([a.data])),o=document.createElement("a");o.href=n,o.setAttribute("download",e),document.body.appendChild(o),o.click(),t.loading=!1}).catch(function(a){console.log(a,"error"),t.loading=!1})},rowClick:function(t){"INCOMING"!==t.type&&"OUTGOING"!==t.type&&"PRODUCTION_OUT"!==t.type&&"PRODUCTION_IN"!==t.type||this.$router.push("/inventory/stocksincoming/"+t.id_data),"OPNAME"===t.type&&this.$router.push("/inventory/stocksopname/"+t.id_data),"ONLINE_SALE"!==t.type&&"POS_SALE"!==t.type&&"ONLINE_CANCEL"!==t.type&&"POS_CANCEL"!==t.type||null!==t.status&&("X"===t.status&&this.$router.push("/sales/cancelorder/"+t.id_data),"Z"===t.status?this.$router.push("/sales/completeorder/"+t.id_data):this.$router.push("/sales/openorder/"+t.id_data)),"ONLINE_SALE"===t.type&&console.log("go to return order",t)},computedLink:function(t){var a="";return"INCOMING"!==t.type&&"OUTGOING"!==t.type&&"PRODUCTION_OUT"!==t.type&&"PRODUCTION_IN"!==t.type||(a="/inventory/stocksincoming/"+t.id_data),"OPNAME"===t.type&&(a="/inventory/stocksopname/"+t.id_data),"ONLINE_SALE"!==t.type&&"POS_SALE"!==t.type||null!==t.status&&("X"===t.status&&(a="/sales/cancelorder/"+t.id_data),a="Z"===t.status?"/sales/completeorder/"+t.id_data:"/sales/openorder/"+t.id_data),a}},mounted:function(){this.getData()}}},H31o:function(t,a,e){"use strict";e.r(a);var n=e("49/L"),o=e.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){e.d(a,t,function(){return n[t]})}(s);a.default=o.a}}]);