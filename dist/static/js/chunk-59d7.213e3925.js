(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-59d7"],{"0fJC":function(e,t,a){"use strict";a.d(t,"a",function(){return r}),a.d(t,"b",function(){return o});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"box-card"},[a("div",{staticClass:"table-handler-flex",attrs:{slot:"header"},slot:"header"},[a("div",[a("h4",[e._v(e._s(e.$lang[e.langId].list)+" "+e._s(e.lang.customer_review))]),e._v(" "),e.showTable?a("p",[e._v(e._s(e.params.total)+" "+e._s(e.lang.customer))]):a("p",[e._v("0 "+e._s(e.lang.customer))])])]),e._v(" "),a("div",{staticClass:"card-body"},[e.showTable?a("div",[a("div",{staticClass:"table-handler-flex"},[a("div",{staticClass:"mb-4",staticStyle:{"flex-grow":"1"}},[a("el-select",{staticClass:"inline-form",attrs:{filterable:"",placeholder:e.lang.please_select,size:"small"},on:{change:e.changePageTable},model:{value:e.params.per_page,callback:function(t){e.$set(e.params,"per_page",t)},expression:"params.per_page"}},e._l(e.pages,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),a("div",{staticClass:"mb-4"},[a("el-input",{staticClass:"inline-form input-search",attrs:{clearable:"",placeholder:e.lang.search,"prefix-icon":"el-icon-search",size:"small"},on:{change:e.handleSearch},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1)]),e._v(" "),a("el-divider"),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"sales-table-max-height mobile-fix-height-unset",attrs:{data:e.customerReviewData,stripe:""},on:{"sort-change":e.changeSortTable}},[a("el-table-column",{attrs:{label:e.lang.customer,prop:"customer_name",sortable:"","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.customer_name?a("p",[e._v(e._s(t.row.customer_name))]):a("p",[e._v("-")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.lang.item,prop:"deal_title",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.deal_title)+"\n                "),t.row.product_combo_name?a("span",[e._v(" - "+e._s(t.row.product_combo_name))]):e._e(),e._v(" "),t.row.product_name?a("span",[e._v(" - "+e._s(t.row.product_name))]):e._e()])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.lang.posted_time,prop:"fcreated_time",sortable:"","min-width":"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.fcreated_time?a("p",[e._v(e._s(t.row.fcreated_time))]):a("p",[e._v("-")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.lang.review,prop:"comment",sortable:"","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-rate",{model:{value:t.row.rating,callback:function(a){e.$set(t.row,"rating",a)},expression:"props.row.rating"}}),e._v(" "),a("p",[e._v(e._s(t.row.comment))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.lang.reply,prop:"reply","min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.rowState[t.$index].edited?e._e():a("p",[e._v(e._s(t.row.reply))]),e._v(" "),e.rowState[t.$index].edited?a("el-input",{attrs:{type:"textarea"},model:{value:e.formEdit.reply,callback:function(t){e.$set(e.formEdit,"reply",t)},expression:"formEdit.reply"}}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.rootLang.action,"min-width":"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.rowState[t.$index].edited?e._e():a("button-action-authenticated",{staticClass:"edit-button",attrs:{permission:["customer/customerreviews","edit"],type:"text"},on:{click:function(a){return e.editHandle(t.$index,t.row)}}},[a("svg-icon",{attrs:{"icon-class":"edit"}}),e._v("\n                "+e._s(e.lang.edit)+"\n              ")],1),e._v(" "),e.rowState[t.$index].edited?e._e():a("button-action-authenticated",{staticClass:"delete-button",attrs:{permission:["customer/customerreviews","destroy"],type:"text"},on:{click:function(a){return e.showDeleteDialog(t.row)}}},[a("svg-icon",{attrs:{"icon-class":"trash"}}),e._v("\n                "+e._s(e.rootLang.delete)+"\n              ")],1),e._v(" "),e.rowState[t.$index].edited?a("el-button",{staticClass:"cancel-button",attrs:{type:"text"},on:{click:function(a){return e.cancelHandle(t.$index)}}},[e._v("\n                "+e._s(e.lang.cancel)+"\n              ")]):e._e(),e._v(" "),e.rowState[t.$index].edited?a("el-button",{staticClass:"save-button",attrs:{type:"text"},on:{click:function(a){return e.saveHandle(t.$index)}}},[e._v("\n                "+e._s(e.lang.save)+"\n              ")]):e._e()]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.params.currentPage,"page-size":e.params.per_page,layout:"prev, pager, next, jumper",total:e.params.total},on:{"size-change":e.changePageTable,"current-change":e.changeCurrentPage,"update:currentPage":function(t){return e.$set(e.params,"currentPage",t)},"update:current-page":function(t){return e.$set(e.params,"currentPage",t)}}})],1)],1):a("div",{staticClass:"no-product"},[a("p",[e._v(e._s(e.$lang[e.langId].no_data))]),e._v(" "),a("img",{attrs:{src:"/static/img/no-data.svg",alt:"No Data Picture"}})])])]),e._v(" "),a("el-dialog",{attrs:{title:e.lang.notif_warn,visible:e.deleteDialog,width:"50%",center:"","close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(t){e.deleteDialog=t}}},[a("div",{staticClass:"text-center"},[a("p",[e._v(e._s(e.$lang[e.langId].are_you_want_remove)+" "+e._s(e.lang.customer_review))]),e._v(" "),a("p",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(e.deleteData.customer_name)+"\n        "),e.deleteData.deal_title?a("span",[e._v("- "+e._s(e.deleteData.deal_title))]):e._e(),e._v(" "),e.deleteData.product_combo_name?a("span",[e._v("- "+e._s(e.deleteData.product_combo_name))]):e._e(),e._v(" "),e.deleteData.product_name?a("span",[e._v("- "+e._s(e.deleteData.product_name))]):e._e()])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancelDeleteDialog}},[e._v(e._s(e.lang.cancel))]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:e.deleteHandle}},[e._v(e._s(e.rootLang.delete))])],1)])],1)},o=[]},ODb7:function(e,t,a){"use strict";a.r(t);var r=a("0fJC"),o=a("srpU");for(var s in o)["default"].indexOf(s)<0&&function(e){a.d(t,e,function(){return o[e]})}(s);var n=a("KHd+"),i=Object(n.a)(o.default,r.a,r.b,!1,null,null,null);i.options.__file="CustomerReviewList.vue",t.default=i.exports},srpU:function(e,t,a){"use strict";a.r(t);var r=a("vENO"),o=a.n(r);for(var s in r)["default"].indexOf(s)<0&&function(e){a.d(t,e,function(){return r[e]})}(s);t.default=o.a},tg9I:function(e){e.exports=JSON.parse('[{"id":1,"customer_name":"Trilith","fcreated_time":"11/18/2021","deal_title":"Tablet","product_name":"Xiomi Pad 2","rating":5,"comment":"Good product","edited":false},{"id":2,"customer_name":"Yabox","fcreated_time":"11/18/2021","deal_title":"Tablet","product_name":"Xiomi Pad 2","rating":5,"comment":"Good product","edited":false},{"id":3,"customer_name":"Roomm","fcreated_time":"11/18/2021","deal_title":"Tablet","product_name":"Xiomi Pad 2","rating":5,"comment":"Good product","edited":false},{"id":4,"customer_name":"Topiczoom","fcreated_time":"11/18/2021","deal_title":"Tablet","product_name":"Xiomi Pad 2","rating":5,"comment":"Good product","edited":false},{"id":5,"customer_name":"Meeveo","fcreated_time":"11/18/2021","deal_title":"Tablet","product_name":"Xiomi Pad 2","rating":5,"comment":"Good product","edited":false},{"id":6,"customer_name":"Skalith","fcreated_time":"11/18/2021","deal_title":"Tablet","product_name":"Xiomi Pad 2","rating":5,"comment":"Good product","edited":false},{"id":7,"customer_name":"Jaxbean","fcreated_time":"11/18/2021","deal_title":"Tablet","product_name":"Xiomi Pad 2","rating":5,"comment":"Good product","edited":false},{"id":8,"customer_name":"Oba","fcreated_time":"11/18/2021","deal_title":"Tablet","product_name":"Xiomi Pad 2","rating":5,"comment":"Good product","edited":false},{"id":9,"customer_name":"Jabberbean","fcreated_time":"11/18/2021","deal_title":"Tablet","product_name":"Xiomi Pad 2","rating":5,"comment":"Good product","edited":false},{"id":10,"customer_name":"Fivespan","fcreated_time":"11/18/2021","deal_title":"Tablet","product_name":"Xiomi Pad 2","rating":5,"comment":"Good product","edited":false}]')},vENO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(a("m1cH")),o=a("xCek"),s=n(a("vDqi"));function n(e){return e&&e.__esModule?e:{default:e}}t.default={name:"CustomerReviewList",data:function(){return{loading:!1,customerReviewData:[],rowState:[],deleteData:{},searchValue:null,deleteDialog:!1,showTable:!1,pages:[{value:5,label:"5 "+this.$store.state.userStores.lang.rows},{value:10,label:"10 "+this.$store.state.userStores.lang.rows},{value:20,label:"20 "+this.$store.state.userStores.lang.rows}],params:{search:null,total:null,currentPage:1,sort_column:"customer_name",sort_type:"desc",per_page:10,page:1,store:null,search_column:null,search_text:""},formEdit:{id:null,reply:""}}},computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},langId:function(){return this.$store.state.userStores.langId},lang:function(){return this.$store.state.userStores.lang},rootLang:function(){return this.$lang[this.$store.state.userStores.langId]}},watch:{"$store.getters.selectedStore":function(){this.getCustomerReview()}},methods:{getCustomerReview:function(){var e=this;if([].concat((0,r.default)(document.getElementById("app").classList)).includes("dummy-page"))this.getMockupData();else{this.loading=!0;var t={Authorization:"Bearer "+this.token.access_token};(0,s.default)({method:"GET",url:(0,o.baseApi)(this.selectedStore.url_id,this.langId,"customerreview"),params:this.params,headers:t}).then(function(t){e.customerReviewData=t.data.data,e.params.total=t.data.meta.total;for(var a=0;a<e.customerReviewData.length;a++)e.customerReviewData[a].rating=parseInt(e.customerReviewData[a].rating);e.rowState=e.customerReviewData.map(function(e){return{edited:!1}}),e.showTable=!0,e.loading=!1}).catch(function(){e.params.total=0,e.loading=!1})}},getMockupData:function(){var e=this;this.showTable=!0,this.params.total=10,this.customerReviewData=a("tg9I"),this.customerReviewData.map(function(){e.rowState.push({edited:!1})})},changePageTable:function(e){this.params.per_page=e,this.getCustomerReview()},handleSearch:function(e){this.params.page=1,this.params.currentPage=1,this.params.search_text="",this.params.search_column=null,this.params.search=this.searchValue,this.getCustomerReview()},changeSortTable:function(e){"ascending"===e.order&&(e.order="asc"),"descending"===e.order&&(e.order="desc"),console.log(e),this.params.sort_type=e.order,this.params.sort_column=e.prop,this.getCustomerReview()},changeCurrentPage:function(e){this.params.currentPage=e,this.params.page=e,this.getCustomerReview()},editHandle:function(e,t){this.formEdit.id=t.id,this.formEdit.reply=t.reply,this.rowState[e].edited=!0},cancelHandle:function(e){this.formEdit.id=null,this.formEdit.reply="",this.rowState[e].edited=!1},saveHandle:function(e){var t=this;this.loading=!0;var a={Authorization:"Bearer "+this.token.access_token},r={pk:this.formEdit.id,name:"reply",value:this.formEdit.reply};(0,s.default)({method:"POST",url:(0,o.baseApi)(this.selectedStore.url_id,this.langId,"customerreview/updateattr"),headers:a,data:r}).then(function(a){t.result=a.data,200===a.data.status&&(t.editData=a.data.data,t.$message({message:"Success",type:"success"})),t.loading=!1,t.rowState[e].edited=!1,t.getCustomerReview()}).catch(function(a){t.$message({message:"Error",type:"error"}),console.log(a),t.loading=!1,t.rowState[e].edited=!0})},showDeleteDialog:function(e){this.deleteData=e,this.deleteDialog=!0},cancelDeleteDialog:function(){this.deleteData={},this.deleteDialog=!1},deleteHandle:function(){var e=this;this.loading=!0;var t={Authorization:"Bearer "+this.token.access_token},a=this.deleteData.id;(0,s.default)({method:"DELETE",url:(0,o.baseApi)(this.selectedStore.url_id,this.langId,"customerreview/"+a),headers:t}).then(function(t){e.result=t.data,200===t.data.status&&(e.responseDelete=t.data.data,e.$message({message:"Success",type:"success"})),e.loading=!1,e.deleteDialog=!1,e.getCustomerReview()}).catch(function(t){e.$message({message:"Error",type:"error"}),e.loading=!1,e.deleteDialog=!1,console.log(t)})}},mounted:function(){this.getCustomerReview()}}}}]);