(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-d909","chunk-2563","chunk-25638"],{"1BPP":function(t,e,a){"use strict";
/**
 * Vue Currency Input 1.20.3
 * (c) 2018-2020 Matthias Stiller
 * @license MIT
 */
function r(t,e,a){var r=document.createEvent("CustomEvent");r.initCustomEvent(e,!0,!0,a),t.dispatchEvent(r)}a.r(e),a.d(e,"CurrencyDirective",function(){return w}),a.d(e,"CurrencyInput",function(){return O}),a.d(e,"parseCurrency",function(){return h}),a.d(e,"setValue",function(){return f});var i=function(t,e,a){return e&&null!=t?Number(t.toFixed(a).split(".").join("")):t},n=function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},s=function(t){return t.replace(/^0+(0$|[^0])/,"$1")},o=function(t,e){return(t.match(new RegExp(n(e),"g"))||[]).length},l=function(t,e){return t.substring(0,e.length)===e},d=function(t,e){return t.substring(0,t.indexOf(e))},u=[",",".","Ù«"],c=function(t){var e=t.currency,a=t.locale,r=t.precision,i=t.autoDecimalMode,n=t.valueAsInteger,s=new Intl.NumberFormat(a,"string"==typeof e?{currency:e,style:"currency"}:{minimumFractionDigits:1}),l=s.format(123456);this.locale=a,this.currency=e,this.digits=[0,1,2,3,4,5,6,7,8,9].map(function(t){return t.toLocaleString(a)}),this.decimalSymbol=o(l,this.digits[0])?l.substr(l.indexOf(this.digits[6])+1,1):void 0,this.groupingSymbol=l.substr(l.indexOf(this.digits[3])+1,1),this.minusSymbol=d(Number(-1).toLocaleString(a),this.digits[1]),void 0===this.decimalSymbol?this.minimumFractionDigits=this.maximumFractionDigits=0:"number"==typeof r?this.minimumFractionDigits=this.maximumFractionDigits=r:"object"!=typeof r||i||n?"string"==typeof e?(this.minimumFractionDigits=s.resolvedOptions().minimumFractionDigits,this.maximumFractionDigits=s.resolvedOptions().maximumFractionDigits):this.minimumFractionDigits=this.maximumFractionDigits=2:(this.minimumFractionDigits=r.min||0,this.maximumFractionDigits=void 0!==r.max?r.max:20),"string"==typeof e?(this.prefix=d(l,this.digits[1]),this.negativePrefix=d(s.format(-1),this.digits[1]),this.suffix=l.substring(l.lastIndexOf(this.decimalSymbol?this.digits[0]:this.digits[6])+1)):(this.prefix=(e||{}).prefix||"",this.negativePrefix=""+this.minusSymbol+this.prefix,this.suffix=(e||{}).suffix||"")};c.prototype.parse=function(t){var e=this.isNegative(t);t=this.normalizeDigits(t),t=this.stripCurrencySymbol(t),t=this.stripMinusSymbol(t);var a=this.decimalSymbol?"("+n(this.decimalSymbol)+"\\d*)?":"",r=t.match(new RegExp("^"+this.integerPattern()+a+"$"));return r?Number((e?"-":"")+this.onlyDigits(r[1])+"."+this.onlyDigits(r[3]||"")):null},c.prototype.format=function(t,e){return void 0===e&&(e={minimumFractionDigits:this.minimumFractionDigits,maximumFractionDigits:this.maximumFractionDigits}),"string"==typeof this.currency?t.toLocaleString(this.locale,Object.assign({},{style:"currency",currency:this.currency},e)):this.insertCurrencySymbol(Math.abs(t).toLocaleString(this.locale,e),t<0||0===t&&1/t<0)},c.prototype.integerPattern=function(){return"(0|[1-9]\\d{0,2}("+n(this.groupingSymbol)+"?\\d{3})*)"},c.prototype.toFraction=function(t){return""+this.digits[0]+this.decimalSymbol+this.onlyLocaleDigits(t.substr(1)).substr(0,this.maximumFractionDigits)},c.prototype.isFractionIncomplete=function(t){return!!this.normalizeDigits(t).match(new RegExp("^"+this.integerPattern()+n(this.decimalSymbol)+"$"))},c.prototype.isNegative=function(t){return l(t,this.negativePrefix)||l(t.replace("-",this.minusSymbol),this.minusSymbol)},c.prototype.insertCurrencySymbol=function(t,e){return""+(e?this.negativePrefix:this.prefix)+t+this.suffix},c.prototype.stripMinusSymbol=function(t){return t.replace("-",this.minusSymbol).replace(this.minusSymbol,"")},c.prototype.stripCurrencySymbol=function(t){return t.replace(this.negativePrefix,"").replace(this.prefix,"").replace(this.suffix,"")},c.prototype.normalizeDecimalSymbol=function(t,e){var a=this;return u.forEach(function(r){t=t.substr(0,e)+t.substr(e).replace(r,a.decimalSymbol)}),t},c.prototype.normalizeDigits=function(t){return"0"!==this.digits[0]&&this.digits.forEach(function(e,a){t=t.replace(new RegExp(e,"g"),a)}),t},c.prototype.onlyDigits=function(t){return this.normalizeDigits(t).replace(/\D+/g,"")},c.prototype.onlyLocaleDigits=function(t){return t.replace(new RegExp("[^"+this.digits.join("")+"]*","g"),"")};var m={locale:void 0,currency:"EUR",valueAsInteger:!1,distractionFree:!0,precision:void 0,autoDecimalMode:!1,valueRange:void 0,allowNegative:!0},h=function(t,e){var a=Object.assign({},m,e),r=new c(a);return i(r.parse(t),a.valueAsInteger,r.maximumFractionDigits)},f=function(t,e){return r(t,"format",{value:e})},g=function(t,e){return t.setSelectionRange(e,e)},v=function(t,e){if(t===e)return!0;if(!t||!e||"object"!=typeof t||"object"!=typeof e)return!1;var a=Object.keys(t);return a.length===Object.keys(e).length&&(!!a.every(Object.prototype.hasOwnProperty.bind(e))&&a.every(function(a){return v(t[a],e[a])}))},_=function(t){this.numberFormat=t};_.prototype.conformToMask=function(t,e){var a=this;void 0===e&&(e="");var r=this.numberFormat.isNegative(t),i=t;i=this.numberFormat.stripCurrencySymbol(i);var n=function(t){if(""===t&&r&&e!==a.numberFormat.negativePrefix)return"";if(a.numberFormat.maximumFractionDigits>0){if(a.numberFormat.isFractionIncomplete(t))return t;if(l(t,a.numberFormat.decimalSymbol))return a.numberFormat.toFraction(t)}return null}(i=this.numberFormat.stripMinusSymbol(i));if(null!=n)return this.numberFormat.insertCurrencySymbol(n,r);var o=i.split(this.numberFormat.decimalSymbol),d=o[0],u=o.slice(1),c=s(this.numberFormat.onlyDigits(d)),m=this.numberFormat.onlyDigits(u.join("")).substr(0,this.numberFormat.maximumFractionDigits),h=u.length>0&&0===m.length,f=""===c&&r&&(e===t.slice(0,-1)||e!==this.numberFormat.negativePrefix);return h||f?e:c.match(/\d+/)?{numberValue:Number((r?"-":"")+c+"."+m),fractionDigits:m}:""};var p=function(t){this.numberFormat=t};p.prototype.conformToMask=function(t){if(""===t)return"";var e=this.numberFormat.isNegative(t),a=""===this.numberFormat.stripMinusSymbol(t)?-0:Number((e?"-":"")+s(this.numberFormat.onlyDigits(t)))/Math.pow(10,this.numberFormat.minimumFractionDigits);return{numberValue:a,fractionDigits:a.toFixed(this.numberFormat.minimumFractionDigits).slice(-this.numberFormat.minimumFractionDigits)}};var b=Math.pow(2,53)-1,y=function(t,e,a){var r=a.$CI_DEFAULT_OPTIONS,i="input"===t.tagName.toLowerCase()?t:t.querySelector("input");if(!i)throw new Error("No input element found");var n=Object.assign({},r||m,e),s=n.distractionFree,o=n.autoDecimalMode,l=n.valueRange;"boolean"==typeof s&&(n.distractionFree={hideCurrencySymbol:s,hideNegligibleDecimalDigits:s,hideGroupingSymbol:s}),n.valueRange=l?{min:void 0!==l.min?Math.max(l.min,-b):-b,max:void 0!==l.max?Math.min(l.max,b):b}:{min:-b,max:b},o?(n.distractionFree.hideNegligibleDecimalDigits=!1,i.setAttribute("inputmode","numeric")):i.setAttribute("inputmode","decimal");var d=new c(n);return i.$ci=Object.assign({},i.$ci||{numberValue:null},{options:n,numberMask:n.autoDecimalMode?new p(d):new _(d),currencyFormat:d}),i},D=function(t,e){var a=t.$ci,n=a.numberValue,s=a.currencyFormat,o=a.options;r(t,e,{numberValue:n=i(n,o.valueAsInteger,s.maximumFractionDigits)})},S=function(t,e,a){void 0===a&&(a=!1);var r=t.$ci,i=r.currencyFormat,n=r.options;x(t,null!=e?i.format(function(t,e){return Math.min(Math.max(t,e.min),e.max)}(e,n.valueRange)):null),(e!==t.$ci.numberValue||a)&&D(t,"change")},x=function(t,e,a){void 0===a&&(a=!1),function(t,e,a){if(null!=e){var r=t.$ci,i=r.focus,n=r.decimalSymbolInsertedAt,s=r.options,o=r.numberMask,l=r.currencyFormat,d=r.previousConformedValue,u=s.allowNegative,c=s.distractionFree;void 0!==n&&(e=l.normalizeDecimalSymbol(e,n),t.$ci.decimalSymbolInsertedAt=void 0);var m,h=o.conformToMask(e,d);if("object"==typeof h){var f=h.numberValue,g=h.fractionDigits,v=l.maximumFractionDigits,_=l.minimumFractionDigits;i&&(_=v),_=a?g.replace(/0+$/,"").length:Math.min(_,g.length),m=f>b?d:l.format(f,{useGrouping:!(i&&c.hideGroupingSymbol),minimumFractionDigits:_,maximumFractionDigits:v})}else m=h;u||(m=m.replace(l.negativePrefix,l.prefix)),i&&c.hideCurrencySymbol&&(m=m.replace(l.negativePrefix,l.minusSymbol).replace(l.prefix,"").replace(l.suffix,"")),t.value=m,t.$ci.numberValue=l.parse(t.value)}else t.value=t.$ci.numberValue=null;t.$ci.previousConformedValue=t.value}(t,e,a),D(t,"input")},k=function(t){t.addEventListener("input",function(e){if(!e.detail){var a=t.value,r=t.selectionStart,i=t.$ci,n=i.currencyFormat,s=i.options;x(t,a),t.$ci.focus&&g(t,function(t,e,a,r,i){var n=r.prefix,s=r.suffix,l=r.decimalSymbol,d=r.maximumFractionDigits,u=r.groupingSymbol,c=e.indexOf(l)+1,m=e.length-a;return Math.abs(t.length-e.length)>1&&a<=c?t.indexOf(l)+1:t.substr(a,1)===u&&o(t,u)===o(e,u)+1?t.length-m-1:(!i.autoDecimalMode&&0!==c&&a>c&&r.onlyDigits(e.substr(c)).length-1===d&&(m-=1),i.distractionFree.hideCurrencySymbol?t.length-m:Math.max(t.length-Math.max(m,s.length),0===n.length?0:n.length+1))}(t.value,a,r,n,s))}},{capture:!0}),t.addEventListener("keypress",function(e){u.includes(e.key)&&(t.$ci.decimalSymbolInsertedAt=t.selectionStart)}),t.addEventListener("format",function(e){var a=t.$ci,r=a.currencyFormat,i=a.options,n=a.numberValue,s=function(t){return i.valueAsInteger&&null!=t?t/Math.pow(10,r.maximumFractionDigits):t}(e.detail.value);n!==s&&S(t,s)}),t.addEventListener("focus",function(){t.$ci.focus=!0;var e=t.$ci.options.distractionFree,a=e.hideCurrencySymbol,r=e.hideGroupingSymbol,i=e.hideNegligibleDecimalDigits;(a||r||i)&&setTimeout(function(){var e=t.value,a=t.selectionStart,r=t.selectionEnd;e&&x(t,e,i),Math.abs(a-r)>0?t.setSelectionRange(0,t.value.length):g(t,function(t,e,a,r){var i=r;return e.distractionFree.hideCurrencySymbol&&(i-=t.prefix.length),e.distractionFree.hideGroupingSymbol&&(i-=o(a.substring(0,r),t.groupingSymbol)),Math.max(0,i)}(t.$ci.currencyFormat,t.$ci.options,e,a))})}),t.addEventListener("blur",function(){t.$ci.focus=!1,null!=t.$ci.numberValue&&S(t,t.$ci.numberValue)}),t.addEventListener("change",function(e){e.detail||D(t,"change")})},w={bind:function(t,e,a){var r=e.value,i=a.context,n=y(t,r,i);k(n),f(n,n.$ci.currencyFormat.parse(n.value))},componentUpdated:function(t,e,a){var r=e.value,i=e.oldValue,n=a.context;if(!v(r,i)){var s=y(t,r,n);S(s,s.$ci.numberValue,!0)}}},O={render:function(t){var e=this;return t("input",{directives:[{name:"currency",value:this.options}],on:Object.assign({},this.$listeners,{change:function(t){t.detail&&e.$emit("change",t.detail.numberValue)},input:function(t){t.detail&&e.value!==t.detail.numberValue&&e.$emit("input",t.detail.numberValue)}})})},directives:{currency:w},name:"CurrencyInput",props:{value:{type:Number,default:null},locale:{type:String,default:void 0},currency:{type:[String,Object],default:void 0},distractionFree:{type:[Boolean,Object],default:void 0},precision:{type:[Number,Object],default:void 0},autoDecimalMode:{type:Boolean,default:void 0},valueAsInteger:{type:Boolean,default:void 0},valueRange:{type:Object,default:void 0},allowNegative:{type:Boolean,default:void 0}},mounted:function(){this.setValue(this.value)},computed:{options:function(){var t=this,e=Object.assign({},this.$CI_DEFAULT_OPTIONS||m);return Object.keys(m).forEach(function(a){void 0!==t[a]&&(e[a]=t[a])}),e}},watch:{value:"setValue"},methods:{setValue:function(t){f(this.$el,t)}}},C={install:function(t,e){void 0===e&&(e={});var a=e.componentName;void 0===a&&(a=O.name);var r=e.directiveName;void 0===r&&(r="currency");var i=e.globalOptions;void 0===i&&(i={}),t.prototype.$CI_DEFAULT_OPTIONS=Object.assign({},m,i),t.component(a,O),t.directive(r,w),t.prototype.$parseCurrency=function(t,e){return void 0===e&&(e={}),h(t,Object.assign({},i,e))}}};"undefined"!=typeof window&&window.Vue&&window.Vue.use(C),e.default=C},"1NWK":function(t,e,a){"use strict";a.r(e);var r=a("lQY7"),i=a.n(r);for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,function(){return r[t]})}(n);e.default=i.a},Ca56:function(t,e,a){"use strict";a.d(e,"a",function(){return r}),a.d(e,"b",function(){return i});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"sales-detail"},[a("section",{staticClass:"order-detail"},[a("el-card",{staticClass:"box-card with-back-button"},[a("div",{staticClass:"card-body"},[a("el-button",{staticClass:"back-button",attrs:{icon:"el-icon-arrow-left"},on:{click:t.back}}),t._v(" "),a("div",{staticClass:"flex-container flex-container--wrap"},[a("div",{staticStyle:{"flex-grow":"1"}},[t.returnOrderData.return_no?a("h4",{staticClass:"font-bold"},[t._v(t._s(t.returnOrderData.return_no))]):a("h4",[t._v("-")]),t._v(" "),a("p",[t._v(t._s(t.lang.sales_by)+" "+t._s(t.returnOrderData.created_by))])]),t._v(" "),t.checkCustomPermission("sales/salesreturns","edit")?a("div",["A"!==t.returnOrderData.status?a("el-select",{staticClass:"inline-form mb-4",attrs:{placeholder:t.lang.status,size:"small"},on:{change:t.handleUpdateStatus},model:{value:t.returnOrderData.status,callback:function(e){t.$set(t.returnOrderData,"status",e)},expression:"returnOrderData.status"}},t._l(t.statusSelect,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1):t._e(),t._v(" "),a("el-button",{staticClass:"mb-4",attrs:{icon:"el-icon-message"},on:{click:function(e){t.emailDialog=!0}}},[t._v("\n              "+t._s(t.lang.email)+"\n            ")]),t._v(" "),a("el-dropdown",{staticClass:"drop-complete mb-4",on:{command:t.handleDownload}},[a("el-button",{staticClass:"el-dropdown-link",attrs:{icon:"el-icon-printer"}}),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.downloadSelect,function(e,r){return a("el-dropdown-item",{key:r,attrs:{command:e.value}},[t._v("\n                  "+t._s(e.label)+"\n                ")])}),1)],1),t._v(" "),a("el-date-picker",{staticClass:"return-date mb-4",attrs:{type:"date",placeholder:t.$lang[t.langId].pick_a_day,format:"dd-MM-yyyy","value-format":"yyyy-MM-dd"},on:{change:t.changeDateHeader},model:{value:t.returnOrderData.return_date,callback:function(e){t.$set(t.returnOrderData,"return_date",e)},expression:"returnOrderData.return_date"}})],1):t._e()])],1)]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("el-card",{staticClass:"box-card"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("h3",{staticClass:"box-title"},[t._v(t._s(t.lang.customer))])]),t._v(" "),a("div",{staticClass:"card-body"},[a("ul",{staticClass:"list-unstyled"},[a("li",[a("p",[t._v(t._s(t.lang.name))]),t._v(" "),t.isEditing.customer?a("div",[a("el-input",{model:{value:t.returnOrderData.customer_name,callback:function(e){t.$set(t.returnOrderData,"customer_name",e)},expression:"returnOrderData.customer_name"}})],1):a("div",[t.returnOrderData.customer_name?a("h5",[t._v(t._s(t.returnOrderData.customer_name))]):a("h5",[t._v("-")])])]),t._v(" "),a("li",[a("p",[t._v(t._s(t.lang.email))]),t._v(" "),t.isEditing.customer?a("div",[a("el-input",{model:{value:t.returnOrderData.customer_email,callback:function(e){t.$set(t.returnOrderData,"customer_email",e)},expression:"returnOrderData.customer_email"}})],1):a("div",[t.returnOrderData.customer_email?a("h5",[t._v(t._s(t.returnOrderData.customer_email))]):a("h5",[t._v("-")])])])])])])],1),t._v(" "),a("div",{staticClass:"col-md-4"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"flex-container flex-container--wrap",attrs:{slot:"header"},slot:"header"},[a("h3",{staticClass:"box-title"},[t._v(t._s(t.lang.orders))]),t._v(" "),"P"===t.returnOrderData.status?a("div",[t.hideEdit?t._e():a("div",{staticClass:"pull-right"},[t.isEditing.order?a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.cancelEdit("order")}}},[t._v(t._s(t.lang.cancel))]):t._e(),t._v(" "),t.isEditing.order?a("el-button",{attrs:{type:"success"},on:{click:function(e){return t.saveEdit("order")}}},[t._v(t._s(t.lang.save))]):t._e(),t._v(" "),t.isEditing.order?t._e():a("button-action-authenticated",{attrs:{permission:["sales/salesreturns","edit"],type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.handleEdit("order")}}},[t._v("\n                  "+t._s(t.lang.edit)+"\n                ")])],1)]):t._e()]),t._v(" "),a("div",{staticClass:"card-body"},[a("ul",{staticClass:"list-unstyled"},[a("li",[a("p",[t._v(t._s(t.lang.customer))]),t._v(" "),t.isEditing.order?a("div",[a("el-autocomplete",{attrs:{"fetch-suggestions":t.getCustomerSuggest,debounce:t.autoCompleteStartOn,placeholder:t.lang.search+" "+t.lang.customer},on:{select:t.handleSelectCustomer},model:{value:t.formOrder.customerValue,callback:function(e){t.$set(t.formOrder,"customerValue",e)},expression:"formOrder.customerValue"}})],1):a("div",[t.returnOrderData.customer_name?a("h5",[t._v(t._s(t.returnOrderData.customer_name))]):a("h5",[t._v("-")])])]),t._v(" "),a("li",[a("p",[t._v(t._s(t.lang.order_no))]),t._v(" "),t.isEditing.order?a("div",[t.formOrder.suggestOrderNo.length<1?a("el-input",{attrs:{disabled:"",value:t.$lang[t.langId].there_is_no}}):a("el-select",{staticClass:"inline-form",attrs:{filterable:"",placeholder:t.lang.please_select},model:{value:t.formOrder.orderNo,callback:function(e){t.$set(t.formOrder,"orderNo",e)},expression:"formOrder.orderNo"}},t._l(t.formOrder.suggestOrderNo,function(t){return a("el-option",{key:t.id,attrs:{label:t.order_no,value:t.id}})}),1)],1):a("div",[t.returnOrderData.sales_order_no?a("h5",[t._v(t._s(t.returnOrderData.sales_order_no))]):a("h5",[t._v("-")])])])])])])],1),t._v(" "),a("div",{staticClass:"col-md-4"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"flex-container flex-container--wrap",attrs:{slot:"header"},slot:"header"},[a("h3",{staticClass:"box-title"},[t._v(t._s(t.lang.notes))]),t._v(" "),"P"===t.returnOrderData.status?a("div",[t.isEditing.notes?a("el-button",{attrs:{type:"text"},on:{click:function(e){return t.cancelEdit("notes")}}},[t._v(t._s(t.lang.cancel))]):t._e(),t._v(" "),t.isEditing.notes?a("el-button",{attrs:{type:"success"},on:{click:function(e){return t.saveEdit("notes")}}},[t._v(t._s(t.lang.save))]):t._e(),t._v(" "),t.isEditing.notes?t._e():a("button-action-authenticated",{attrs:{permission:["sales/salesreturns","edit"],type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.handleEdit("notes")}}},[t._v("\n                "+t._s(t.lang.edit)+"\n              ")])],1):t._e()]),t._v(" "),a("div",{staticClass:"card-body"},[t.isEditing.notes?a("div",[a("el-input",{attrs:{type:"textarea",autosize:"",placeholder:t.$lang[t.langId].please_input+t.lang.notes},model:{value:t.formNotes,callback:function(e){t.formNotes=e},expression:"formNotes"}})],1):a("div",[t.returnOrderData.notes?a("p",[t._v(t._s(t.returnOrderData.notes))]):a("p",[t._v(t._s(t.$lang[t.langId].there_is_no))])])])])],1)]),t._v(" "),a("return-table",{attrs:{"data-table":t.returnOrderData},on:{"item-deleted":t.itemDeleted}}),t._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("h3",{staticClass:"box-title"},[t._v(t._s(t.lang.sales_return_details))])]),t._v(" "),a("div",{staticClass:"card-body"},[a("div",{staticStyle:{"margin-bottom":"22px"}},[a("h5",[t._v(t._s(t.lang.created_time))]),t._v(" "),a("label",[t._v(t._s(t.returnOrderData.created_by)+", "+t._s(t.returnOrderData.created_time))])]),t._v(" "),a("div",[a("h5",[t._v(t._s(t.lang.last_modified))]),t._v(" "),a("label",[t._v(t._s(t.returnOrderData.modified_by)+", "+t._s(t.returnOrderData.modified_time))])])])])],1),t._v(" "),a("el-dialog",{staticClass:"email-dialog",attrs:{visible:t.emailDialog,width:"30%"},on:{"update:visible":function(e){t.emailDialog=e}}},[a("span",{attrs:{slot:"title"},slot:"title"},[a("svg-icon",{attrs:{"icon-class":"mail"}}),t._v("\n      "+t._s(t.lang.email)+"\n    ")],1),t._v(" "),a("p",[t._v(t._s(t.$lang[t.langId].send_notification_via_email))]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{color:"#A5A5A5"},attrs:{type:"text"},on:{click:function(e){t.emailDialog=!1}}},[t._v(t._s(t.lang.cancel))]),t._v(" "),a("el-button",{attrs:{type:"success"},on:{click:t.sendEmail}},[t._v("\n        "+t._s(t.lang.submit)+"\n      ")])],1)])],1)},i=[]},DChC:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(a("QbLZ")),i=n(a("Ljqw"));function n(t){return t&&t.__esModule?t:{default:t}}var s={mixins:[a("6y4V").checkCustomPermission],computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},langId:function(){return this.$store.state.userStores.langId},lang:function(){return this.$store.state.userStores?this.$store.state.userStores.lang:{}},userRole:function(){var t=this.$store.getters.selectedStore;return{role_id:t.role_id,role_name:t.role_name,is_pos_only:t.is_pos_only,is_mobile:t.is_mobile}},rootLang:function(){return this.$lang[this.langId]},headers:function(){var t=this.$store.getters.token;return this.$store.getters.webviewMode&&(t=this.$store.getters.webviewToken),{Authorization:"Bearer "+t.access_token}},baseURL:function(){return i.default},loggedInUser:function(){return this.$store.state.user.loggedInUser},stageLevel:function(){return"sit"},defaultAccessByStore:function(){return["setdemo1","allinolsera2"]},wejayafoodAccessByStore:function(){return["setdemo1","allinolsera2","ayammrotholpusat","ayammrotholdramaga"]},saveToAllAccessStore:function(){return["setdemo1","allinolsera2","siliwangidutagarden","barokahfrozenfood"]},outlets:function(){var t=[{name:this.$store.state.userStores.lang.all,store_id:0,url_id:"all"}],e=[];return this.$store.getters.stores.map(function(a){e.includes(a.store_id)||a.is_store_active&&(t.push((0,r.default)({},a)),e.push(a.store_id))}),t},tokopediaActiveStore:function(){return this.$store.state.tokopediaActiveStore},shopeeActiveStore:function(){return this.$store.state.shopeeActiveStore}}};e.default=s},DiAI:function(t,e,a){"use strict";a.r(e);var r=a("cKAH"),i=a("kw7Z");for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,function(){return i[t]})}(n);var s=a("KHd+"),o=Object(s.a)(i.default,r.a,r.b,!1,null,null,null);o.options.__file="ReturnOrderTable.vue",e.default=o.exports},FyfS:function(t,e,a){t.exports={default:a("fUKC"),__esModule:!0}},SJaG:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=l(a("P2sY")),i=a("xCek"),n=l(a("vDqi")),s=l(a("Ckak")),o=l(a("DChC"));function l(t){return t&&t.__esModule?t:{default:t}}e.default={name:"ReturnTable",props:{dataTable:{default:null,type:Object}},components:{InputMoney:s.default},mixins:[o.default],data:function(){return{loading:!0,detailData:{},showTable:!1,addReturnDialog:!1,deleteRowProduct:!1,dialogAdditional:!1,rowState:[],addingOrderItem:!1,deleteRowData:{},editTable:{qty:"",price:0},formReturn:{reasonData:[],reason:"",reasonOther:"",productItem:[],qty:0,fqty:[],checkedProduct:[],restoreStock:0},formAdditional:{description:"",price:0},disableSaveReturn:!1}},watch:{dataTable:function(){this.getData()}},computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},langId:function(){return this.$store.state.userStores.langId},lang:function(){return this.$store.state.userStores.lang},rootLang:function(){return this.$lang[this.$store.state.userStores.langId]}},methods:{getData:function(){this.detailData=(0,r.default)({},this.dataTable),this.refreshTable()},refreshTable:function(){var t=this;this.loading=!0,this.detailData.returnitems.length>0?(this.loading=!1,this.detailData.returnitems.map(function(e,a){t.$set(e,"edited",!1),t.rowState.push(e)}),this.showTable=!0):(this.loading=!1,this.showTable=!1)},showReturnDialog:function(){this.formReturn.checkedProduct=[],this.formReturn.productItem=[],this.formReturn.qty=0,this.formReturn.reason="",this.formReturn.reasonOther="",this.formReturn.restoreStock=1,this.getReturnProductItem(),this.getReturnReason()},handleEditRow:function(t,e){this.editTable.qty=e.qty,this.editTable.price=parseInt(e.price),this.rowState[t].edited=!0},handleSimpanRow:function(t,e){var a=this;this.loading=!0;var r={Authorization:"Bearer "+this.token.access_token},s={return_id:this.$route.params.id,id:e.id,qty:this.editTable.qty,price:this.editTable.price};(0,n.default)({method:"POST",url:(0,i.baseApi)(this.selectedStore.url_id,this.langId,"salesreturn/updateitem"),headers:r,data:s}).then(function(e){a.result=e.data,200===e.data.status&&(a.detailData=e.data.data,a.$message({message:"Success",type:"success"})),e.data.error&&a.$message({message:"Error",type:"error"}),a.refreshTable(),a.loading=!1,a.rowState[t].edited=!1}).catch(function(t){a.loading=!1,a.$notify({title:"Error: "+t,type:"warning",message:"Error: "+t}),a.refreshTable()})},handleCancelRow:function(t){this.editTable.qty="",this.editTable.price=0,this.rowState[t].edited=!1},handleDeleteRow:function(t,e){this.deleteRowData=e,this.deleteRowProduct=!0},confirmDeleteProduct:function(){var t=this;this.loading=!0;var e={Authorization:"Bearer "+this.token.access_token},a={return_id:this.deleteRowData.sales_return_id,id:this.deleteRowData.id,qty:0};(0,n.default)({method:"POST",url:(0,i.baseApi)(this.selectedStore.url_id,this.langId,"salesreturn/updateitem"),headers:e,data:a}).then(function(){t.loading=!1,t.deleteRowProduct=!1,t.$emit("item-deleted")}).catch(function(){t.loading=!1})},getReturnProductItem:function(){var t=this;this.loading=!0;var e={Authorization:"Bearer "+this.token.access_token},a={id:this.$route.params.id,per_page:100};(0,n.default)({method:"GET",url:(0,i.baseApi)(this.selectedStore.url_id,this.langId,"salesreturn/returnableItems"),headers:e,params:a}).then(function(e){t.formReturn.productItem=e.data.data,t.formReturn.productItem.map(function(e){t.formReturn.fqty.push(0)}),t.formReturn.productItem.length>0&&(t.disableSaveReturn=!0),t.loading=!1,t.addReturnDialog=!0}).catch(function(e){console.log(e),t.$notify({title:"Error: "+e,type:"warning",message:"Error: "+e}),t.loading=!1})},getReturnReason:function(){var t=this;this.loading=!0;var e={Authorization:"Bearer "+this.token.access_token};(0,n.default)({method:"GET",url:(0,i.baseApi)(this.selectedStore.url_id,this.langId,"salesreturnreason"),headers:e}).then(function(e){t.formReturn.reasonData=e.data.data,t.formReturn.reason=e.data.data[0].id,t.loading=!1}).catch(function(e){console.log(e),t.loading=!1})},handleCheckboxChange:function(){this.formReturn.checkedProduct.length>0?this.disableSaveReturn=!1:this.formReturn.checkedProduct.length<1&&(this.disableSaveReturn=!0)},handleSelectReason:function(){100===this.formReturn.reason?this.disableSaveReturn=!0:(this.disableSaveReturn=!1,this.formReturn.reasonOther="")},handleReasonOther:function(){this.formReturn.reasonOther?this.disableSaveReturn=!1:this.disableSaveReturn=!0},saveReturnDialog:function(){var t=this,e=[];this.formReturn.productItem.map(function(t){e.push(t.qty)}),this.formReturn.qty=e.join(","),this.formReturn.checkedProduct.length<1?this.formReturn.checkedProduct=0:1===this.formReturn.checkedProduct.length?(this.formReturn.checkedProduct=this.formReturn.checkedProduct.join(),this.formReturn.checkedProduct=parseInt(this.formReturn.checkedProduct)):this.formReturn.checkedProduct.length>1&&(this.formReturn.checkedProduct=this.formReturn.checkedProduct.join(",")),this.loading=!0;var a={Authorization:"Bearer "+this.token.access_token},r={id:this.$route.params.id,item_id:this.formReturn.checkedProduct,qty:this.formReturn.qty,reason_id:this.formReturn.reason,restore_to_stock:this.formReturn.restoreStock,reason_other:this.formReturn.reasonOther};(0,n.default)({method:"POST",url:(0,i.baseApi)(this.selectedStore.url_id,this.langId,"salesreturn/additem"),headers:a,data:r}).then(function(e){t.detailData=e.data.data,t.refreshTable(),t.$message({message:"Success",type:"success"}),t.loading=!1}).catch(function(e){console.log(e),t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error}),t.loading=!1}),this.addReturnDialog=!1},cancelAdditional:function(){this.dialogAdditional=!1,this.formAdditional.description="",this.formAdditional.price=0},saveAdditional:function(){var t=this;this.loading=!0;var e={Authorization:"Bearer "+this.token.access_token},a={return_id:this.$route.params.id,additional_description:this.formAdditional.description,additional_amount:this.formAdditional.price};(0,n.default)({method:"POST",url:(0,i.baseApi)(this.selectedStore.url_id,this.langId,"salesreturn/updateadditional"),headers:e,data:a}).then(function(e){t.detailData=e.data.data,t.refreshTable(),t.$message({message:"Success",type:"success"}),t.loading=!1,t.dialogAdditional=!1}).catch(function(e){console.log(e),t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error}),t.loading=!1})},handleSelectionChange:function(t){console.log("data",t);var e=[];t.length>0?(t.map(function(t){e.push(t.sales_order_item_id)}),this.disableSaveReturn=!1):this.disableSaveReturn=!0,this.formReturn.checkedProduct=e}}}},cKAH:function(t,e,a){"use strict";a.d(e,"a",function(){return r}),a.d(e,"b",function(){return i});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"flex-container flex-container--wrap",attrs:{slot:"header"},slot:"header"},[a("h3",{staticClass:"box-title"},[t._v(t._s(t.lang.order_item))]),t._v(" "),"P"===t.dataTable.status?a("div",[a("button-action-authenticated",{attrs:{permission:["sales/salesreturns","store"],type:"info",size:"small",icon:"el-icon-plus"},on:{click:t.showReturnDialog}},[t._v("\n        "+t._s(t.lang.return_orders)+"\n      ")])],1):t._e()]),t._v(" "),a("div",{staticClass:"card-body"},[t.showTable?a("div",[a("div",{staticClass:"table-responsive"},[a("table",{staticClass:"table-orderitems table table-striped"},[a("thead",[a("tr",[a("th",{staticClass:"description",attrs:{width:"300"}},[t._v(t._s(t.lang.description))]),t._v(" "),a("th",{attrs:{width:"50"}},[t._v(t._s(t.lang.qty))]),t._v(" "),a("th",{attrs:{width:"100"}},[t._v(t._s(t.lang.price)+" ("+t._s(t.detailData.currency_id)+")")]),t._v(" "),a("th",{attrs:{width:"100"}},[t._v(t._s(t.lang.total_price)+" ("+t._s(t.detailData.currency_id)+")")]),t._v(" "),a("th",{attrs:{width:"100"}},[t._v(t._s(t.$lang[t.langId].action))])])]),t._v(" "),a("tbody",[t._l(t.detailData.returnitems,function(e,r){return a("tr",{key:r},[a("td",[a("div",{staticClass:"flex-container"},[a("div",[t._v(t._s(r+1))]),t._v(" "),a("div",{staticClass:"ml-8"},[e.product_photo_md?a("el-avatar",{staticStyle:{"min-width":"40px"},attrs:{src:e.product_photo_md}}):t._e()],1),t._v(" "),a("div",{staticClass:"ml-8"},[e.product_name?[a("span",[t._v(t._s(e.product_name))])]:t._e(),t._v(" "),e.product_variant_name?[t._v(t._s(e.product_variant_name))]:t._e(),t._v(" "),e.product_combo_name?[t._v(t._s(e.product_combo_name))]:t._e(),t._v(" "),e.product_sku?a("span",[t._v("\n                      ("+t._s(e.product_sku)+")\n                    ")]):t._e(),a("br"),t._v(" "),a("span",[a("i",{staticClass:"el-icon-warning-outline"}),t._v(t._s(e.reason_name))])],2)])]),t._v(" "),a("td",{attrs:{valign:"middle",align:"left"}},[t.rowState[r].edited?a("div",[a("el-input-number",{attrs:{"controls-position":"right"},model:{value:t.editTable.qty,callback:function(e){t.$set(t.editTable,"qty",e)},expression:"editTable.qty"}})],1):a("div",[t._v(" "+t._s(e.qty)+" ")])]),t._v(" "),a("td",{attrs:{valign:"middle",align:"left"}},[t.rowState[r].edited?a("div",[a("input-money",{model:{value:t.editTable.price,callback:function(e){t.$set(t.editTable,"price",e)},expression:"editTable.price"}})],1):a("div",[t._v(" "+t._s(e.fprice)+" ")])]),t._v(" "),a("td",{attrs:{valign:"middle",align:"left"}},[t._v(t._s(e.famount))]),t._v(" "),a("td",["P"===t.dataTable.status?a("div",[t.rowState[r].edited?t._e():a("button-action-authenticated",{staticStyle:{color:"#0286CD"},attrs:{permission:["sales/salesreturns","edit"],size:"small",type:"text"},on:{click:function(a){return t.handleEditRow(r,e)}}},[a("svg-icon",{staticClass:"mr-4",attrs:{"icon-class":"edit-2"}}),t._v(t._s(t.lang.edit)+"\n                  ")],1),t._v(" "),t.rowState[r].edited?t._e():a("button-action-authenticated",{staticStyle:{color:"#F55246"},attrs:{permission:["sales/salesreturns","edit"],size:"small",type:"text",icon:"el-icon-delete"},on:{click:function(a){return t.handleDeleteRow(r,e)}}},[t._v("\n                    "+t._s(t.rootLang.delete)+"\n                  ")]),t._v(" "),t.rowState[r].edited?a("button-action-authenticated",{staticStyle:{color:"#595959"},attrs:{permission:["sales/salesreturns","edit"],size:"small",type:"text",icon:"el-icon-close"},on:{click:function(e){return t.handleCancelRow(r)}}},[t._v("\n                    "+t._s(t.lang.cancel)+"\n                  ")]):t._e(),t._v(" "),t.rowState[r].edited?a("button-action-authenticated",{staticStyle:{color:"#6EBE46"},attrs:{permission:["sales/salesreturns","edit"],size:"small",type:"text",icon:"el-icon-check"},on:{click:function(a){return t.handleSimpanRow(r,e)}}},[t._v("\n                    "+t._s(t.lang.save)+"\n                  ")]):t._e()],1):t._e()])])}),t._v(" "),a("tr",[a("td",{staticStyle:{"border-bottom":"1px solid #000",padding:"0 0 0 0"},attrs:{colspan:"5"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t.lang.order_amount))]),t._v(" "),a("th",[t._v(t._s(t.detailData.total_item_qty))]),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t.lang.subtotal))]),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("th",[t._v(t._s(t.detailData.fsubtotal_amount))]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t.lang.add_ons))]),t._v(" "),a("td"),t._v(" "),a("td",[t._v(t._s(t.detailData.fadditional_amount))]),t._v(" "),a("td",[t._v(t._s(t.detailData.additional_description))]),t._v(" "),a("td",["P"===t.dataTable.status?a("button-action-authenticated",{attrs:{permission:["sales/salesreturns","edit"],size:"small",type:"text",icon:"el-icon-setting"},on:{click:function(e){t.dialogAdditional=!0}}},[t._v("\n                  "+t._s(t.lang.settings)+" "+t._s(t.lang.add_ons)+"\n                ")]):t._e()],1)]),t._v(" "),a("tr",[a("td",{staticStyle:{padding:"0 0 0 0"},attrs:{colspan:"5"}})]),t._v(" "),a("tr",{staticStyle:{"background-color":"#fff"}},[a("td",{staticStyle:{"text-align":"right"}},[t._v(t._s(t.lang.return_totals))]),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("th",[t._v(t._s(t.detailData.ftotal_amount))]),t._v(" "),a("td")])],2)])])]):a("div",{staticClass:"no-product text-center"},[a("p",[t._v(t._s(t.lang.no_order))]),t._v(" "),a("img",{attrs:{src:"/static/img/no-data.svg",alt:"No Data Picture"}})])]),t._v(" "),a("el-dialog",{staticClass:"delete",attrs:{title:t.lang.are_you_sure_to_remove_this_data,visible:t.deleteRowProduct,"close-on-click-modal":!1,width:"360px"},on:{"update:visible":function(e){t.deleteRowProduct=e}}},[a("div",{staticClass:"row",staticStyle:{margin:"30px 20px 20px 20px"},attrs:{data:t.deleteRowData}},[a("img",{staticClass:"table-image",attrs:{src:t.deleteRowData.product_photo_md,alt:t.deleteRowData.product_name}}),t._v(" "),t.deleteRowData.product_name?a("h3",[t._v(t._s(t.deleteRowData.product_name))]):t._e(),t._v(" "),t.deleteRowData.product_combo_name?a("h3",[t._v(t._s(t.deleteRowData.product_combo_name))]):t._e()]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{color:"#F44336"},attrs:{type:"text"},on:{click:t.confirmDeleteProduct}},[t._v("\n        "+t._s(t.$lang[t.langId].delete)+"\n      ")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.deleteRowProduct=!1}}},[t._v("\n        "+t._s(t.lang.cancel)+"\n      ")])],1)]),t._v(" "),a("el-dialog",{staticClass:"return-product",attrs:{title:t.lang.return_orders,visible:t.addReturnDialog,"close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(e){t.addReturnDialog=e}}},[a("span",{attrs:{slot:"title"},slot:"title"},[a("div",{staticClass:"flex-container"},[a("div",{staticClass:"font-24 full-width"},[t._v(t._s(t.lang.return_orders))]),t._v(" "),a("div",{staticClass:"text-right full-width"},[a("el-button",{staticStyle:{background:"#F5F5F5"},on:{click:function(e){t.addReturnDialog=!1}}},[t._v(t._s(t.lang.cancel))]),t._v(" "),t.disableSaveReturn?a("el-button",{attrs:{type:"info",disabled:""}},[t._v(t._s(t.lang.save))]):a("el-button",{attrs:{type:"success"},on:{click:t.saveReturnDialog}},[t._v(t._s(t.lang.save))])],1)])]),t._v(" "),a("div",[a("div",{staticClass:"radius-10 box-shadow-2 px-16 py-12",staticStyle:{border:"1px solid #F5F5F5"}},[t.formReturn.productItem.length<1?a("el-input",{attrs:{disabled:"",value:t.$lang[t.langId].no_product}}):a("div",[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.formReturn.productItem},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{label:"Pilih Produk",width:"350px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"flex-container full-width"},[a("div",{staticClass:"mr-8"},[a("el-avatar",{attrs:{src:t.baseURL+"img/no_data_item.png",size:48}})],1),t._v(" "),a("div",{staticClass:"full-width"},[null!==e.row.product_item?a("div",[t._v(t._s(e.row.product_item.length>30?e.row.product_item.substring(0,30)+"...":e.row.product_item))]):t._e(),t._v(" "),a("div",[t._v(t._s(e.row.product_combo_name))]),t._v(" "),a("div",[t._v(t._s(e.row.deal_title))])])])]}}])}),t._v(" "),a("el-table-column",{attrs:{"min-width":"130px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"text-right"},[a("el-input-number",{staticStyle:{width:"120px"},attrs:{min:0},model:{value:t.formReturn.productItem[e.$index].qty,callback:function(a){t.$set(t.formReturn.productItem[e.$index],"qty",a)},expression:"formReturn.productItem[scope.$index].qty"}})],1)]}}])})],1)],1)],1),t._v(" "),a("div",{staticClass:"mt-24"},[a("span",{staticClass:"font-12"},[t._v(t._s(t.lang.reason_of_return))]),t._v(" "),a("el-select",{staticClass:"inline-form",staticStyle:{width:"100% !important"},attrs:{filterable:"",placeholder:t.lang.please_select},on:{change:t.handleSelectReason},model:{value:t.formReturn.reason,callback:function(e){t.$set(t.formReturn,"reason",e)},expression:"formReturn.reason"}},t._l(t.formReturn.reasonData,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1),t._v(" "),100===t.formReturn.reason?a("div",{staticClass:"mt-8"},[a("el-input",{attrs:{type:"textarea",step:"width: 100%"},on:{change:t.handleReasonOther},model:{value:t.formReturn.reasonOther,callback:function(e){t.$set(t.formReturn,"reasonOther",e)},expression:"formReturn.reasonOther"}})],1):t._e()],1),t._v(" "),a("div",{staticClass:"mt-16"},[a("div",{staticClass:"flex-container border border--input py-8 px-8",staticStyle:{"border-radius":"2px"}},[a("div",{staticClass:"full-width font-16 font-bold"},[t._v(t._s(t.lang.restore_back_to_stock))]),t._v(" "),a("div",{staticClass:"full-width text-right"},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.formReturn.restoreStock,callback:function(e){t.$set(t.formReturn,"restoreStock",e)},expression:"formReturn.restoreStock"}}),t._v(" "),0===t.formReturn.restoreStock?a("span",[t._v(t._s(t.lang.no))]):a("span",[t._v(t._s(t.lang.yes))])],1)]),t._v(" "),a("span",{staticClass:"font-12"},[t._v(t._s(t.lang.info_sales_return_restore_back_to_store))])])])]),t._v(" "),a("el-dialog",{staticClass:"additional-return",attrs:{title:t.lang.add_ons,visible:t.dialogAdditional,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogAdditional=e}}},[a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4 text-right"},[a("h5",[t._v(t._s(t.lang.description))])]),t._v(" "),a("div",{staticClass:"col-md-8"},[a("el-input",{attrs:{type:"textarea"},model:{value:t.formAdditional.description,callback:function(e){t.$set(t.formAdditional,"description",e)},expression:"formAdditional.description"}})],1)]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4 text-right"},[a("h5",[t._v(t._s(t.lang.amount))])]),t._v(" "),a("div",{staticClass:"col-md-8"},[a("input-money",{model:{value:t.formAdditional.price,callback:function(e){t.$set(t.formAdditional,"price",e)},expression:"formAdditional.price"}})],1)])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"text"},on:{click:t.cancelAdditional}},[t._v(t._s(t.lang.cancel))]),t._v(" "),a("el-button",{attrs:{type:"success"},on:{click:t.saveAdditional}},[t._v(t._s(t.lang.save))])],1)])],1)},i=[]},fUKC:function(t,e,a){a("ZY/g"),a("C5kU"),t.exports=a("sbOA")},gugX:function(t,e,a){"use strict";a.r(e);var r=a("Ca56"),i=a("1NWK");for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,function(){return i[t]})}(n);var s=a("KHd+"),o=Object(s.a)(i.default,r.a,r.b,!1,null,null,null);o.options.__file="ReturnOrderDetail.vue",e.default=o.exports},kw7Z:function(t,e,a){"use strict";a.r(e);var r=a("SJaG"),i=a.n(r);for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,function(){return r[t]})}(n);e.default=i.a},lQY7:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=d(a("GQeE")),i=d(a("FyfS")),n=a("xCek"),s=d(a("vDqi")),o=d(a("DiAI")),l=a("6y4V");function d(t){return t&&t.__esModule?t:{default:t}}e.default={name:"DetailReturnOrder",mixins:[l.checkCustomPermission],components:{ReturnTable:o.default},data:function(){return{loading:!0,loadingElement:!1,returnOrderData:{},downloadValue:null,emailDialog:!1,emailRadioValue:1,statusSelect:[{value:"D",label:this.$lang[this.$store.state.userStores.langId].draft},{value:"P",label:this.$lang[this.$store.state.userStores.langId].pending},{value:"A",label:this.$lang[this.$store.state.userStores.langId].has_confirm},{value:"X",label:this.$lang[this.$store.state.userStores.langId].cancel}],downloadSelect:[{value:"pdf",label:this.$store.state.userStores.lang.download_pdf}],isEditing:{order:!1,notes:!1},formNotes:"",formOrder:{customerValue:"",suggestCustomer:[],customerId:null,suggestOrderNo:[],orderNo:null},autoCompleteStartOn:300,hideEdit:!1,email_id:""}},computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},langId:function(){return this.$store.state.userStores.langId},lang:function(){return this.$store.state.userStores.lang}},methods:{getDetailData:function(t){var e=this;this.loading=!0;var a={Authorization:"Bearer "+this.token.access_token};(0,s.default)({method:"GET",url:(0,n.baseApi)(this.selectedStore.url_id,this.langId,"salesreturn/"+this.$route.params.id),headers:a}).then(function(t){e.returnOrderData=t.data.data,e.splitDate(e.returnOrderData.return_date),e.returnOrderData.returnitems.length>0&&(e.hideEdit=!0),e.loading=!1}).catch(function(t){e.loading=!1,e.$notify({type:"warning",message:t})})},handleDownload:function(t){this.download(t)},download:function(t){var e=this;this.loading=!0;var a={Authorization:"Bearer "+this.token.access_token};(0,s.default)({url:(0,n.baseApi)(this.selectedStore.url_id,this.langId,"salesreturn/"+t),method:"GET",headers:a,responseType:"blob",params:{id:this.returnOrderData.id}}).then(function(a){var r=e.returnOrderData.return_no+"_"+t+".pdf",i=window.URL.createObjectURL(new Blob([a.data])),n=document.createElement("a");n.href=i,n.setAttribute("download",r),document.body.appendChild(n),n.click(),e.loading=!1}).catch(function(t){e.loading=!1,e.$notify({type:"warning",title:t.response.statusText})})},handleUpdateStatus:function(){var t=this;this.loading=!0;var e={Authorization:"Bearer "+this.token.access_token},a={status:this.returnOrderData.status,return_id:this.returnOrderData.id};(0,s.default)({method:"POST",url:(0,n.baseApi)(this.selectedStore.url_id,this.langId,"salesreturn/updatestatus"),headers:e,data:a}).then(function(e){t.result=e.data,t.returnOrderData=e.data.data,t.loading=!1,t.$message({message:"Success",type:"success"}),t.getDetailData()}).catch(function(e){t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error}),t.loading=!1})},handleEdit:function(t){"order"===t?this.isEditing.order=!0:"notes"===t&&(this.formNotes=this.returnOrderData.notes,this.isEditing.notes=!0)},cancelEdit:function(t){"order"===t?(this.formOrder.customerValue="",this.suggestCustomer=[],this.customerId=null,this.suggestOrderNo=[],this.orderNo=null,this.isEditing.order=!1):"notes"===t&&(this.formNotes="",this.isEditing.notes=!1)},saveEdit:function(t){if("order"===t){var e=(0,n.baseApi)(this.selectedStore.url_id,this.langId,"salesreturn/updatecustomerorder");""===this.formOrder.orderNo&&(this.formOrder.orderNo=0);var a={return_id:this.returnOrderData.id,customer_id:this.formOrder.customerId,order_id:this.formOrder.orderNo};this.updateData(t,e,a)}else if("notes"===t){var r=(0,n.baseApi)(this.selectedStore.url_id,this.langId,"salesreturn/updateattr"),i={pk:this.returnOrderData.id,name:"notes",value:this.formNotes};this.updateData(t,r,i)}},updateData:function(t,e,a){var r=this;this.loadingElement=!0;var i={Authorization:"Bearer "+this.token.access_token};(0,s.default)({method:"POST",url:e,headers:i,data:a}).then(function(e){r.result=e.data,200===e.data.status&&(r.returnOrderData=e.data.data,r.$message({message:"Success",type:"success"})),e.data.error&&r.$message({message:"Error",type:"error"}),r.loading=!1,r.cancelEdit(t),r.getDetailData()}).catch(function(t){r.loading=!1,r.$notify({title:"Error: "+t,type:"warning",message:"Error: "+t}),r.getDetailData()})},splitDate:function(t){var e=t.split(" ")[0];this.returnOrderData.return_date=e},changeDateHeader:function(t){var e=this;this.loading=!0;var a={Authorization:"Bearer "+this.token.access_token},r={pk:this.returnOrderData.id,name:"return_date",value:t};(0,s.default)({method:"POST",url:(0,n.baseApi)(this.selectedStore.url_id,this.langId,"salesreturn/updateattr"),headers:a,data:r}).then(function(t){e.result=t.data,200===t.data.status&&(e.returnOrderData=t.data.data,e.$message({message:"Success",type:"success"})),t.data.error&&e.$message({message:"Error",type:"error"}),e.loading=!1,e.getDetailData()}).catch(function(t){e.loading=!1})},getCustomerSuggest:function(t,e){var a=this,r={Authorization:"Bearer "+this.token.access_token},o={search:t};(0,s.default)({method:"GET",url:(0,n.baseApi)(this.selectedStore.url_id,this.langId,"customer"),headers:r,params:o}).then(function(t){var r=!0,n=!1,s=void 0;try{for(var o,l=(0,i.default)(t.data.data);!(r=(o=l.next()).done);r=!0){var d=o.value;d.value=d.customer_text}}catch(t){n=!0,s=t}finally{try{!r&&l.return&&l.return()}finally{if(n)throw s}}a.formOrder.suggestCustomer=t.data.data,e(a.formOrder.suggestCustomer)}).catch(function(t){})},handleSelectCustomer:function(t){this.formOrder.customerId=t.id,this.formOrder.orderNo="",this.formOrder.suggestOrderNo=[],this.getOrderNoCust()},getOrderNoCust:function(){var t=this,e={Authorization:"Bearer "+this.token.access_token},a={customer_id:this.formOrder.customerId};(0,s.default)({method:"GET",url:(0,n.baseApi)(this.selectedStore.url_id,this.langId,"salesreturn/refundableorders"),headers:e,params:a}).then(function(e){t.formOrder.suggestOrderNo=e.data.data}).catch(function(t){})},back:function(){(0,r.default)(this.$route.query).includes("pathName")?this.$router.push({name:"Integrate Jurnal.ID",params:{lastParams:this.$route.query.lastParams,labelDate:this.$route.query.labelDate},query:{menu:"general",tab:this.$route.query.tab}}):this.$router.push("/sales/returnorder/")},itemDeleted:function(){this.getDetailData()},sendEmail:function(){var t=this;this.loading=!0;var e={Authorization:"Bearer "+this.token.access_token},a={type:"R",return_id:this.$route.params.id,email_type_id:this.email_id};(0,s.default)({method:"POST",url:(0,n.baseApi)(this.selectedStore.url_id,this.langId,"allorder/sendemail"),headers:e,params:a}).then(function(e){t.loading=!1,t.$notify({type:"success",title:"Succes",message:e.data.message})}).catch(function(e){t.loading=!1}),this.emailDialog=!1},getEmailID:function(){var t=this,e={Authorization:"Bearer "+this.token.access_token};(0,s.default)({method:"GET",url:(0,n.baseApi)(this.selectedStore.url_id,this.langId,"emailnotify"),headers:e}).then(function(e){e.data.data.map(function(e){107===e.id&&(t.email_id=e.id)})}).catch(function(t){})}},beforeMount:function(){this.handleCustomPermissionSinglePage("sales/salesreturns","show")},mounted:function(){this.getEmailID(),this.getDetailData(this.selectedStore)}}},sbOA:function(t,e,a){var r=a("d+lc"),i=a("I90/");t.exports=a("VSTI").getIterator=function(t){var e=i(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return r(e.call(t))}}}]);