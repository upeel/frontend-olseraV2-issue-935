(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6b23"],{Ccnf:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mixinHiddenFeatureByPlanType=void 0;var s=a("rOiX"),i={computed:{planType:function(){return this.$store.getters.selectedStore.plan_type_id},selectedStore:function(){return this.$store.getters.selectedStore}},watch:{planType:{handler:function(e){this.resetLock()}}},mounted:function(){this.resetLock()},destroyed:function(){this.resetLock()},methods:{precheckByUrlId:function(e){return s.featureAccessByUrlIds[this.selectedStore.url_id]&&s.featureAccessByUrlIds[this.selectedStore.url_id].includes(e)},resetLock:function(){this.destoryIconSubmenuDisabled();var e=document.querySelectorAll(".submenu-disabled a, .button-plan-type-disabled");e&&e.length&&e.forEach(function(e){e.insertAdjacentHTML("beforeend",'<svg aria-hidden="true" class="ml-10 svg-icon icon-submenu-disabled"><use xlink:href="#icon-lock"></use></svg>')})},destoryIconSubmenuDisabled:function(){var e=document.querySelectorAll(".panel.tab-list .icon-submenu-disabled, .button-plan-type-disabled .icon-submenu-disabled");e&&e.length&&e.forEach(function(e){e.remove()})},methodRouteIsHidden:function(e){return this.$isHiddenByPlanType(this.planType,e)},methodFeatureNameIsHidden:function(e){return this.$isFeatureNameHiddenByPlanType(this.planType,e)},methodFeatureIsHiddenCellTable:function(e){return this.handlerClassName(e,"methodFeatureNameIsHidden",["celltable"])},methodRouteIsHiddenSidebarMenuClass:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!this.precheckByUrlId(e)&&this.handlerClassName(e,"methodRouteIsHidden",["sidebarmenu"],t)},methodRouteIsHiddenSubMenuClass:function(e){return!this.precheckByUrlId(e)&&this.handlerClassName(e,"methodRouteIsHidden",["submenu"])},methodRouteIsHiddenButtonClass:function(e){return this.handlerClassName(e,"methodFeatureNameIsHidden",["button","button-plan-type"])},handlerClassName:function(e,t,a){var s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i="-enabled";this[t](e)&&!s&&(i="-disabled");var n=[];return a.map(function(e){n.push(e+i)}),n.join(" ")}}};t.mixinHiddenFeatureByPlanType=i},Vbf3:function(e,t,a){"use strict";a.d(t,"a",function(){return s}),a.d(t,"b",function(){return i});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"sales-detail"},[a("section",{staticClass:"order-detail"},[a("el-card",{staticClass:"box-card with-back-button"},[a("div",{staticClass:"card-body"},[a("el-button",{staticClass:"back-button",attrs:{icon:"el-icon-arrow-left"},on:{click:e.backHandle}}),e._v(" "),a("div",{staticClass:"flex-container flex-container--wrap"},[a("div",{staticStyle:{"flex-grow":"1"}},[e.openOrderData.order_no?a("h4",{staticClass:"font-bold"},[e._v(e._s(e.openOrderData.order_no))]):a("h4",[e._v("-")]),e._v(" "),a("p",[e._v(e._s(e.lang.sales_by)+" "+e._s(e.openOrderData.sales_by_name))])]),e._v(" "),e.showEdit?a("div",[a("div",{staticClass:"flex-container flex-container--wrap"},[a("div",{staticClass:"mb-4 mr-4"},[a("el-select",{staticStyle:{"max-width":"120px"},attrs:{placeholder:e.lang.status,"popper-class":"el-select-statusorder"},on:{change:function(t){return e.handleChangeStatus(e.statusOrder)}},model:{value:e.statusOrder,callback:function(t){e.statusOrder=t},expression:"statusOrder"}},e._l(e.statusSelect,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})}),1)],1),e._v(" "),a("div",{staticClass:"mb-4 mr-4"},[a("el-button",{attrs:{icon:"el-icon-message"},on:{click:function(t){e.emailDialog=!0}}},[e._v("\n                  "+e._s(e.lang.email)+"\n                ")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"0"},attrs:{disabled:e.methodFeatureNameIsHidden("struk-sms"),icon:"el-icon-mobile-phone"},on:{click:function(t){e.smsDialog=!0}}},[e._v("\n                  "+e._s(e.$lang[e.langId].sms)+"\n                ")]),e._v(" "),a("el-button",{staticStyle:{"margin-left":"0"},attrs:{disabled:e.methodFeatureNameIsHidden("struk-wa")},on:{click:function(t){e.waDialog=!0}}},[a("svg-icon",{attrs:{"icon-class":"ico-whatsapp"}}),e._v(" "+e._s(e.$lang[e.langId].whatsapp)+"\n                ")],1)],1),e._v(" "),a("div",{staticClass:"mb-4 mr-4"},[a("el-dropdown",{staticClass:"drop-complete",on:{command:e.handleDownload}},[a("el-button",{staticClass:"el-dropdown-link",attrs:{icon:"el-icon-printer"}}),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.downloadSelect,function(t,s){return a("el-dropdown-item",{key:s,attrs:{command:s}},[e._v("\n                      "+e._s(t.label)+"\n                    ")])}),1)],1)],1),e._v(" "),a("div",{staticClass:"mb-4 mr-4"},[a("span",[e._v(e._s(e.lang.paid)+"?")]),e._v(" "),a("el-switch",{attrs:{disabled:e.computedAccess,"active-value":1,"inactive-value":0},on:{change:e.handleSwitchPayment},model:{value:e.switchValue,callback:function(t){e.switchValue=t},expression:"switchValue"}}),e._v(" "),0===e.openOrderData.is_paid?a("span",[e._v(e._s(e.lang.not_yet))]):e._e(),e._v(" "),1===e.openOrderData.is_paid?a("span",[e._v(e._s(e.$lang[e.langId].done))]):e._e()],1),e._v(" "),a("el-date-picker",{staticClass:"mb-4",staticStyle:{width:"140px"},attrs:{placeholder:e.$lang[e.langId].pick_a_day,clearable:!1,disabled:e.computedAccess,type:"date",format:"dd-MM-yyyy","value-format":"yyyy-MM-dd"},on:{change:e.changeDateHeader},model:{value:e.openOrderData.order_date,callback:function(t){e.$set(e.openOrderData,"order_date",t)},expression:"openOrderData.order_date"}})],1)]):a("div",[a("div",{staticClass:"flex-container flex-container--wrap"},[a("el-date-picker",{staticClass:"date-complete mb-4 mr-4",staticStyle:{"max-width":"160px"},attrs:{placeholder:e.$lang[e.langId].pick_a_day,clearable:!1,type:"date",format:"dd-MM-yyyy","value-format":"yyyy-MM-dd",disabled:""},model:{value:e.openOrderData.order_date,callback:function(t){e.$set(e.openOrderData,"order_date",t)},expression:"openOrderData.order_date"}}),e._v(" "),e.visibleEdit?a("el-button",{staticClass:"edit-header mb-4",attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.editHeaderButton}},[e._v("\n                "+e._s(e.lang.edit)+"\n              ")]):e._e()],1)]),e._v(" "),e.visibleEdit?e._e():a("div",[a("el-dropdown",{staticClass:"drop-complete",on:{command:e.handleDownloadEdit}},[a("el-button",{staticClass:"el-dropdown-link",attrs:{icon:"el-icon-printer"}}),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},e._l(e.downloadSelectEdit,function(t,s){return a("el-dropdown-item",{key:s,attrs:{command:s}},[e._v("\n                  "+e._s(t.label)+"\n                ")])}),1)],1)],1)])],1)]),e._v(" "),a("el-row",{staticClass:"content-above",attrs:{gutter:4}},[a("el-col",{attrs:{md:12}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"flex-container flex-container--wrap",attrs:{slot:"header"},slot:"header"},[a("h3",{staticClass:"box-title"},[e._v(e._s(e.lang.customer))]),e._v(" "),e.showEdit?a("div",{staticClass:"pull-right"},[e.isEditing.customer?a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.cancelEdit("customer")}}},[e._v(e._s(e.lang.cancel))]):e._e(),e._v(" "),e.isEditing.customer?a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){return e.saveEdit("customer")}}},[e._v(e._s(e.lang.save))]):e._e(),e._v(" "),e.isEditing.customer?e._e():a("el-button",{attrs:{size:"mini",type:"primary",disabled:e.computedAccess,icon:"el-icon-edit"},on:{click:function(t){return e.handleEdit("customer")}}},[e._v("\n                "+e._s(e.lang.edit)+"\n              ")])],1):e._e()]),e._v(" "),a("div",{staticClass:"card-body"},[a("ul",{staticClass:"list-unstyled mb-8--list mb-0--p"},[a("li",[a("p",{staticClass:"color-info"},[e._v(e._s(e.lang.name))]),e._v(" "),e.isEditing.customer?a("div",[a("el-autocomplete",{attrs:{"fetch-suggestions":e.getCustomerSuggest,debounce:e.autoCompleteStartOn,placeholder:e.lang.search+" "+e.lang.customer,clearable:""},on:{select:e.handleSelectCustomer},model:{value:e.formCustomer.customerName,callback:function(t){e.$set(e.formCustomer,"customerName",t)},expression:"formCustomer.customerName"}})],1):a("div",[e.openOrderData.customer_name?a("h5",[e._v(e._s(e.openOrderData.customer_name))]):a("h5",[e._v("-")])])]),e._v(" "),a("li",[a("p",{staticClass:"color-info"},[e._v(e._s(e.lang.email))]),e._v(" "),e.isEditing.customer?a("div",[a("el-input",{attrs:{disabled:""},model:{value:e.formCustomer.customerEmail,callback:function(t){e.$set(e.formCustomer,"customerEmail",t)},expression:"formCustomer.customerEmail"}})],1):a("div",[e.openOrderData.customer_email?a("h5",[e._v(e._s(e.openOrderData.customer_email))]):a("h5",[e._v("-")])])]),e._v(" "),a("li",[a("p",{staticClass:"color-info"},[e._v(e._s(e.lang.phone))]),e._v(" "),e.isEditing.customer?a("div",[a("el-input",{attrs:{disabled:""},model:{value:e.formCustomer.customerPhone,callback:function(t){e.$set(e.formCustomer,"customerPhone",t)},expression:"formCustomer.customerPhone"}})],1):a("div",[e.openOrderData.customer_phone?a("h5",[e._v(e._s(e.openOrderData.customer_phone))]):a("h5",[e._v("-")])])])])])])],1),e._v(" "),a("el-col",{staticClass:"shipping",attrs:{md:12}},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingElement,expression:"loadingElement"}],staticClass:"box-card"},[a("div",{staticClass:"flex-container flex-container--wrap",attrs:{slot:"header"},slot:"header"},[a("h3",{staticClass:"box-title"},[e._v(e._s(e.lang.shipping_to))]),e._v(" "),e.showEdit?a("div",{staticClass:"pull-right"},[e.isEditing.shippingto?a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.cancelEdit("shippingto")}}},[e._v(e._s(e.lang.cancel))]):e._e(),e._v(" "),e.isEditing.shippingto?a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){return e.saveEdit("shippingto")}}},[e._v(e._s(e.lang.save))]):e._e(),e._v(" "),e.isEditing.shippingto?e._e():a("el-button",{attrs:{size:"mini",type:"primary",disabled:e.computedAccess,icon:"el-icon-edit"},on:{click:function(t){return e.handleEdit("shippingto")}}},[e._v("\n                "+e._s(e.lang.edit)+"\n              ")])],1):e._e()]),e._v(" "),a("div",{staticClass:"card-body"},[a("ul",{staticClass:"list-unstyled mb-8--list mb-0--p"},[a("li",[a("p",{staticClass:"color-info "},[e._v(e._s(e.lang.name))]),e._v(" "),e.isEditing.shippingto?a("div",[a("el-input",{model:{value:e.openOrderData.shipping_to,callback:function(t){e.$set(e.openOrderData,"shipping_to",t)},expression:"openOrderData.shipping_to"}})],1):a("div",[e.openOrderData.shipping_to?a("h5",[e._v(e._s(e.openOrderData.shipping_to))]):a("h5",[e._v("-")])])]),e._v(" "),a("li",[a("p",{staticClass:"color-info "},[e._v(e._s(e.lang.address))]),e._v(" "),e.isEditing.shippingto?a("div",[a("el-input",{attrs:{placeholder:e.$lang[e.langId].please_input+e.lang.address},model:{value:e.openOrderData.shipping_address,callback:function(t){e.$set(e.openOrderData,"shipping_address",t)},expression:"openOrderData.shipping_address"}})],1):a("div",[e.openOrderData.shipping_address?a("h5",[e._v(e._s(e.openOrderData.shipping_address))]):a("h5",[e._v("-")]),e._v(" "),a("div",[e._v("\n                    "+e._s(e.openOrderData.shipping_city_district)+" "+e._s(e.openOrderData.shipping_city_name)+"\n                  ")]),e._v(" "),a("div",[e._v("\n                    "+e._s(e.openOrderData.shipping_state_name)+" "+e._s(e.openOrderData.shipping_postal_code)+"\n                  ")]),e._v(" "),a("div",[e._v("\n                    "+e._s(e.openOrderData.shipping_country_name)+"\n                  ")])])]),e._v(" "),e.isEditing.shippingto?a("li",[a("p",{staticClass:"color-info "},[e._v(e._s(e.lang.country))]),e._v(" "),a("el-select",{staticClass:"inline-form",attrs:{placeholder:e.lang.please_select,"value-key":"id",filterable:"",size:"small"},on:{change:e.editChangeCountry},model:{value:e.openOrderData.shipping_country_name,callback:function(t){e.$set(e.openOrderData,"shipping_country_name",t)},expression:"openOrderData.shipping_country_name"}},e._l(e.openOrderData.country,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e}})}),1)],1):e._e(),e._v(" "),"ID"===e.openOrderData.shipping_country_id?[e.isEditing.shippingto?a("li",[a("p",{staticClass:"color-info "},[e._v(e._s(e.lang.province))]),e._v(" "),a("el-select",{staticClass:"inline-form",attrs:{placeholder:e.lang.please_select,"value-key":"id",filterable:"",size:"small"},on:{change:e.editProvince},model:{value:e.openOrderData.shipping_state_name,callback:function(t){e.$set(e.openOrderData,"shipping_state_name",t)},expression:"openOrderData.shipping_state_name"}},e._l(e.stateCountry,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e}})}),1)],1):e._e(),e._v(" "),e.isEditing.shippingto?a("li",[a("p",{staticClass:"color-info "},[e._v(e._s(e.lang.city))]),e._v(" "),a("el-select",{staticClass:"inline-form",attrs:{placeholder:e.lang.please_select,"value-key":"id",filterable:"",size:"small"},on:{change:e.editCity},model:{value:e.openOrderData.shipping_city_name,callback:function(t){e.$set(e.openOrderData,"shipping_city_name",t)},expression:"openOrderData.shipping_city_name"}},e._l(e.shippingCity,function(e){return a("el-option",{key:e.id,attrs:{label:e.city,value:e}})}),1)],1):e._e(),e._v(" "),e.isEditing.shippingto?a("li",[a("p",{staticClass:"color-info "},[e._v(e._s(e.lang.district))]),e._v(" "),a("el-select",{staticClass:"inline-form",attrs:{placeholder:e.lang.please_select,"value-key":"id",filterable:"",size:"small"},on:{change:e.editSubDistrict},model:{value:e.openOrderData.shipping_subdistrict_name,callback:function(t){e.$set(e.openOrderData,"shipping_subdistrict_name",t)},expression:"openOrderData.shipping_subdistrict_name"}},e._l(e.subDistrict,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e}})}),1)],1):e._e(),e._v(" "),e.isEditing.shippingto?a("li",[a("p",{staticClass:"color-info "},[e._v(e._s(e.lang.postal_code))]),e._v(" "),a("el-input",{attrs:{type:"number",placeholder:e.$lang[e.langId].input_number},model:{value:e.openOrderData.shipping_postal_code,callback:function(t){e.$set(e.openOrderData,"shipping_postal_code",t)},expression:"openOrderData.shipping_postal_code"}})],1):e._e()]:e._e(),e._v(" "),a("li",[a("p",{staticClass:"color-info "},[e._v(e._s(e.lang.phone))]),e._v(" "),e.isEditing.shippingto?a("div",[a("el-input",{attrs:{placeholder:e.$lang[e.langId].input_number},model:{value:e.openOrderData.shipping_phone,callback:function(t){e.$set(e.openOrderData,"shipping_phone",t)},expression:"openOrderData.shipping_phone"}})],1):a("div",[e.openOrderData.shipping_phone?a("h5",[e._v(e._s(e.openOrderData.shipping_phone))]):a("h5",[e._v("-")])])])],2)])])],1),e._v(" "),a("el-col",{staticClass:"status",attrs:{md:12}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"flex-container flex-container--wrap",attrs:{slot:"header"},slot:"header"},[a("h3",{staticClass:"box-title"},[e._v(e._s(e.lang.shipping_status))]),e._v(" "),e.showEdit?a("div",{staticClass:"pull-right"},[e.isEditing.status?a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.cancelEdit("status")}}},[e._v(e._s(e.lang.cancel))]):e._e(),e._v(" "),e.isEditing.status?a("el-button",{attrs:{size:"mini",type:"success",disabled:e.loading},on:{click:function(t){return e.saveEdit("status")}}},[e.loading?a("loading-component",{staticStyle:{"text-align":"center"},attrs:{active:!0,color:"#1bb4e6",loader:"dots",width:32,height:10,backgroundColor:"#ffffff"}}):a("span",[e._v(e._s(e.lang.save))])],1):e._e(),e._v(" "),e.isEditing.status?e._e():a("el-button",{attrs:{size:"mini",type:"primary",disabled:e.computedAccess,icon:"el-icon-edit"},on:{click:function(t){return e.handleEdit("status")}}},[e._v("\n                "+e._s(e.lang.edit)+"\n              ")])],1):e._e()]),e._v(" "),a("div",{staticClass:"card-body"},[a("ul",{staticClass:"list-unstyled mb-8--list mb-0--p"},[a("el-form",{ref:"status",attrs:{model:e.formShippingStatus}},[a("li",[a("p",{staticClass:" color-info"},[e._v(e._s(e.lang.shipping_courier))]),e._v(" "),a("div",[e.openOrderData.shipping_courier_name?a("h5",[e._v(e._s(e.openOrderData.shipping_courier_name))]):a("h5",[e._v("-")])])]),e._v(" "),a("li",[a("p",{staticClass:" color-info"},[e._v(e._s(e.lang.shipping_service_type))]),e._v(" "),a("div",[e.openOrderData.shipping_service_type?a("h5",[e._v(e._s(e.openOrderData.shipping_service_type))]):a("h5",[e._v("-")])])]),e._v(" "),a("li",[a("p",{staticClass:" color-info"},[e._v(e._s(e.lang.shipping_date))]),e._v(" "),e.isEditing.status?a("div",[a("el-form-item",{attrs:{prop:"dateShipping",rules:[{required:!0,message:"Please input date",trigger:"change"}]}},[a("el-date-picker",{attrs:{placeholder:e.$lang[e.langId].pick_a_day,clearable:!1,type:"date",format:"dd-MM-yyyy","value-format":"yyyy-MM-dd"},on:{change:e.timeChange},model:{value:e.formShippingStatus.dateShipping,callback:function(t){e.$set(e.formShippingStatus,"dateShipping",t)},expression:"formShippingStatus.dateShipping"}})],1)],1):a("div",[e.openOrderData.fshipping_date?a("h5",[e._v(e._s(e.labelDate))]):a("h5",[e._v("-")])])]),e._v(" "),a("li",[a("p",{staticClass:"color-info "},[e._v(e._s(e.lang.tracking_no))]),e._v(" "),e.isEditing.status?a("div",[a("el-form-item",{attrs:{prop:"noTracking",rules:[{required:!0,message:"Please input no tracking",trigger:"blur"}]}},[a("el-input",{attrs:{type:"text",placeholder:e.$lang[e.langId].input_code,clearable:""},model:{value:e.formShippingStatus.noTracking,callback:function(t){e.$set(e.formShippingStatus,"noTracking",t)},expression:"formShippingStatus.noTracking"}})],1)],1):a("div",[e.openOrderData.shipping_track_no?a("h5",[e._v(e._s(e.openOrderData.shipping_track_no))]):a("h5",[e._v("-")])])])])],1)])])],1),e._v(" "),a("el-col",{attrs:{md:12}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"flex-container flex-container--wrap",attrs:{slot:"header"},slot:"header"},[a("h3",{staticClass:"box-title"},[e._v(e._s(e.lang.drop_ship))]),e._v(" "),e.showEdit?a("div",{staticClass:"pull-right"},[e.isEditing.dropship?a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){return e.cancelEdit("dropship")}}},[e._v(e._s(e.lang.cancel))]):e._e(),e._v(" "),e.isEditing.dropship?a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(t){return e.saveEdit("dropship")}}},[e._v(e._s(e.lang.save))]):e._e(),e._v(" "),e.isEditing.dropship?e._e():a("el-button",{attrs:{size:"mini",type:"primary",disabled:e.computedAccess,icon:"el-icon-edit"},on:{click:function(t){return e.handleEdit("dropship")}}},[e._v("\n                "+e._s(e.lang.edit)+"\n              ")])],1):e._e()]),e._v(" "),a("div",{staticClass:"card-body"},[a("ul",{staticClass:"list-unstyled mb-8--list mb-0--p"},[a("li",[a("p",{staticClass:"color-info "},[e._v(e._s(e.lang.store_name))]),e._v(" "),e.isEditing.dropship?a("div",[a("el-input",{model:{value:e.formDropShip.dropShipName,callback:function(t){e.$set(e.formDropShip,"dropShipName",t)},expression:"formDropShip.dropShipName"}})],1):a("div",[e.openOrderData.drop_ship_store_name?a("h5",[e._v(e._s(e.openOrderData.drop_ship_store_name))]):a("h5",[e._v("-")])])]),e._v(" "),a("li",[a("p",{staticClass:"color-info "},[e._v(e._s(e.lang.sender))]),e._v(" "),e.isEditing.dropship?a("div",[a("el-input",{model:{value:e.formDropShip.dropShipSender,callback:function(t){e.$set(e.formDropShip,"dropShipSender",t)},expression:"formDropShip.dropShipSender"}})],1):a("div",[e.openOrderData.drop_ship_sender_name?a("h5",[e._v(e._s(e.openOrderData.drop_ship_sender_name))]):a("h5",[e._v("-")])])]),e._v(" "),a("li",[a("p",{staticClass:"color-info "},[e._v(e._s(e.lang.phone))]),e._v(" "),e.isEditing.dropship?a("div",[a("el-input",{model:{value:e.formDropShip.dropShipPhone,callback:function(t){e.$set(e.formDropShip,"dropShipPhone",t)},expression:"formDropShip.dropShipPhone"}})],1):a("div",[e.openOrderData.drop_ship_contact_phone?a("h5",[e._v(e._s(e.openOrderData.drop_ship_contact_phone))]):a("h5",[e._v("-")])])])])])])],1)],1),e._v(" "),a("order-table",{attrs:{"data-table":e.openOrderData,"edit-show":e.showEdit},on:{"save-payment":e.updatePayment,refresh:e.refreshData}}),e._v(" "),a("el-row",{attrs:{gutter:5}},[a("el-col",{attrs:{md:8}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"flex-container flex-container--wrap",attrs:{slot:"header"},slot:"header"},[a("h3",{staticClass:"box-title"},[e._v(e._s(e.lang.payment_due_date))]),e._v(" "),e.showEdit?a("div",{staticClass:"pull-right"},[e.isEditing.due_date?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.cancelEdit("due_date")}}},[e._v(e._s(e.lang.cancel))]):e._e(),e._v(" "),e.isEditing.due_date?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(t){return e.saveEdit("due_date")}}},[e._v(e._s(e.lang.save))]):e._e(),e._v(" "),e.isEditing.due_date?e._e():a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.computedAccess,icon:"el-icon-edit"},on:{click:function(t){return e.handleEdit("due_date")}}},[e._v("\n                "+e._s(e.lang.edit)+"\n              ")])],1):e._e()]),e._v(" "),a("div",{staticClass:"card-body"},[e.isEditing.due_date?a("div",[a("el-date-picker",{staticClass:"date-complete mb-4 mr-4",staticStyle:{"max-width":"160px"},attrs:{placeholder:e.$lang[e.langId].pick_a_day,clearable:!1,type:"date",format:"dd-MM-yyyy","value-format":"yyyy-MM-dd"},model:{value:e.openOrderData.payment_due_date,callback:function(t){e.$set(e.openOrderData,"payment_due_date",t)},expression:"openOrderData.payment_due_date"}})],1):a("div",[e.openOrderData.payment_due_date?a("p",{staticClass:"show-white-space"},[e._v(e._s(e.openOrderData.fpayment_due_date))]):a("p",[e._v("-")])])])])],1),e._v(" "),a("el-col",{attrs:{md:8}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"flex-container flex-container--wrap",attrs:{slot:"header"},slot:"header"},[a("h3",{staticClass:"box-title"},[e._v(e._s(e.lang.notes))]),e._v(" "),e.showEdit?a("div",{staticClass:"pull-right"},[e.isEditing.notes?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.cancelEdit("notes")}}},[e._v(e._s(e.lang.cancel))]):e._e(),e._v(" "),e.isEditing.notes?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(t){return e.saveEdit("notes")}}},[e._v(e._s(e.lang.save))]):e._e(),e._v(" "),e.isEditing.notes?e._e():a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.computedAccess,icon:"el-icon-edit"},on:{click:function(t){return e.handleEdit("notes")}}},[e._v("\n                "+e._s(e.lang.edit)+"\n              ")])],1):e._e()]),e._v(" "),a("div",{staticClass:"card-body"},[e.isEditing.notes?a("div",[a("el-input",{attrs:{type:"textarea",autosize:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleShiftEnter.apply(null,arguments)}},model:{value:e.openOrderData.notes,callback:function(t){e.$set(e.openOrderData,"notes",t)},expression:"openOrderData.notes"}})],1):a("div",[e.openOrderData.notes?a("p",{staticClass:"show-white-space"},[e._v(e._s(e.openOrderData.notes))]):a("p",[e._v(e._s(e.$lang[e.langId].there_is_no))])])])])],1),e._v(" "),a("el-col",{staticClass:"invoice-footer",attrs:{md:8}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"flex-container flex-container--wrap",attrs:{slot:"header"},slot:"header"},[a("h3",{staticClass:"box-title"},[e._v(e._s(e.lang.invoice)+" "+e._s(e.lang.footer))]),e._v(" "),e.showEdit?a("div",{staticClass:"pull-right"},[e.isEditing.invoice?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.cancelEdit("invoice")}}},[e._v(e._s(e.lang.cancel))]):e._e(),e._v(" "),e.isEditing.invoice?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(t){return e.saveEdit("invoice")}}},[e._v(e._s(e.lang.save))]):e._e(),e._v(" "),e.isEditing.invoice?e._e():a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.computedAccess,icon:"el-icon-edit"},on:{click:function(t){return e.handleEdit("invoice")}}},[e._v("\n                "+e._s(e.lang.edit)+"\n              ")])],1):e._e()]),e._v(" "),a("div",{staticClass:"card-body"},[e.isEditing.invoice?a("div",{staticClass:"show-white-space"},[a("el-input",{attrs:{type:"textarea",autosize:""},model:{value:e.openOrderData.invoice_notes,callback:function(t){e.$set(e.openOrderData,"invoice_notes",t)},expression:"openOrderData.invoice_notes"}})],1):a("div",[e.openOrderData.invoice_notes?e._e():a("p",[e._v(e._s(e.$lang[e.langId].there_is_no))]),e._v(" "),a("p",{staticClass:"invoice show-white-space"},[e._v(e._s(e.openOrderData.invoice_notes))]),e._v(" "),a("p",[e._v(e._s(e.$lang[e.langId].info_cantact_our_support)+" ")])])])])],1),e._v(" "),a("el-col",{attrs:{md:8}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"flex-container flex-container--wrap",attrs:{slot:"header"},slot:"header"},[a("h3",{staticClass:"box-title"},[e._v(e._s(e.$lang[e.langId].server_pos))]),e._v(" "),e.showEdit?a("div",{staticClass:"pull-right"},[e.isEditing.server?a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(t){return e.cancelEdit("server")}}},[e._v(e._s(e.lang.cancel))]):e._e(),e._v(" "),e.isEditing.server?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(t){return e.saveEdit("server")}}},[e._v(e._s(e.lang.save))]):e._e(),e._v(" "),e.isEditing.server?e._e():a("el-button",{attrs:{type:"primary",size:"mini",disabled:e.computedAccess,icon:"el-icon-edit"},on:{click:function(t){return e.handleEdit("server")}}},[e._v("\n                "+e._s(e.lang.edit)+"\n              ")])],1):e._e()]),e._v(" "),a("div",{staticClass:"card-body"},[e.isEditing.server?a("div",[a("el-select",{staticStyle:{"max-width":"120px"},attrs:{placeholder:e.lang.status},model:{value:e.openOrderData.serve_by_id,callback:function(t){e.$set(e.openOrderData,"serve_by_id",t)},expression:"openOrderData.serve_by_id"}},e._l(e.openOrderData.serve_bys,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1):a("div",[e.openOrderData.serve_by_id?a("p",[e._v(e._s(e.openOrderData.serve_by_name))]):a("p",[e._v(" - ")])])])])],1)],1),e._v(" "),a("el-row",{attrs:{gutter:5}},[a("el-col",{attrs:{md:8}},[a("el-card",{staticClass:"box-card"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("h3",{staticClass:"box-title"},[e._v("Log")])]),e._v(" "),a("div",{staticClass:"card-body"},[a("div",{staticStyle:{"margin-bottom":"22px"}},[a("h5",[e._v(e._s(e.lang.created_time))]),e._v(" "),a("label",[e._v(e._s(e.openOrderData.created_by)+", "+e._s(e.openOrderData.order_time))])]),e._v(" "),e.openOrderData.translogs?a("div",e._l(e.openOrderData.translogs,function(t){return a("div",{key:t.id},[a("h5",[e._v(e._s(t.action))]),e._v(" "),a("label",[e._v(e._s(t.created_by)+", "+e._s(t.action_time))])])}),0):e._e(),e._v(" "),a("div",[a("h5",[e._v(e._s(e.lang.last_modified))]),e._v(" "),a("label",[e._v(e._s(e.openOrderData.modified_by)+", "+e._s(e.openOrderData.modified_time))])])])])],1)],1)],1),e._v(" "),a("el-dialog",{staticClass:"email-dialog",attrs:{visible:e.emailDialog,"custom-class":"mw-420"},on:{"update:visible":function(t){e.emailDialog=t}}},[a("span",{attrs:{slot:"title"},slot:"title"},[a("svg-icon",{attrs:{"icon-class":"mail"}}),e._v("\n      "+e._s(e.lang.email)+"\n    ")],1),e._v(" "),a("p",[e._v(e._s(e.$lang[e.langId].send_notification_via_email))]),e._v(" "),a("ul",{staticClass:"list-unstyled"},e._l(e.emailNotify,function(t){return a("li",{key:t.id},[a("el-radio",{attrs:{label:t.id},model:{value:e.emailRadioValue,callback:function(t){e.emailRadioValue=t},expression:"emailRadioValue"}},[e._v(e._s(t.email_notify_type_name))])],1)}),0),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{color:"#A5A5A5"},attrs:{type:"text"},on:{click:function(t){e.emailDialog=!1}}},[e._v(e._s(e.lang.cancel))]),e._v(" "),a("el-button",{attrs:{type:"success"},on:{click:e.handleSentEmail}},[e._v("\n        "+e._s(e.lang.submit)+"\n      ")])],1)]),e._v(" "),a("el-dialog",{staticClass:"sms-dialog",attrs:{visible:e.smsDialog,"custom-class":"mw-420"},on:{"update:visible":function(t){e.smsDialog=t}}},[a("span",{attrs:{slot:"title"},slot:"title"},[a("svg-icon",{attrs:{"icon-class":"smartphone"}}),e._v("\n      "+e._s(e.$lang[e.langId].sms)+"\n    ")],1),e._v(" "),a("p",[e._v(e._s(e.$lang[e.langId].send_notification_via_sms))]),e._v(" "),a("ul",{staticClass:"list-unstyled"},e._l(e.smsNotify,function(t){return a("li",{key:t.id},[a("el-radio",{attrs:{label:t.id},model:{value:e.smsRadioValue,callback:function(t){e.smsRadioValue=t},expression:"smsRadioValue"}},[e._v(e._s(t.sms_notify_type_name))])],1)}),0),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{color:"#A5A5A5"},attrs:{type:"text"},on:{click:function(t){e.smsDialog=!1}}},[e._v(e._s(e.lang.cancel))]),e._v(" "),a("el-button",{attrs:{type:"success"},on:{click:e.handleSentSms}},[e._v("\n        "+e._s(e.lang.submit)+"\n      ")])],1)]),e._v(" "),a("el-dialog",{staticClass:"sms-dialog",attrs:{visible:e.waDialog,"custom-class":"mw-420"},on:{"update:visible":function(t){e.waDialog=t}}},[a("span",{attrs:{slot:"title"},slot:"title"},[a("svg-icon",{attrs:{"icon-class":"smartphone"}}),e._v("\n      "+e._s(e.$lang[e.langId].whatsapp)+"\n    ")],1),e._v(" "),a("p",[e._v(e._s(e.$lang[e.langId].send_notification_via_wa))]),e._v(" "),a("ul",{staticClass:"list-unstyled"},e._l(e.smsNotify,function(t){return a("li",{key:t.id},[a("el-radio",{attrs:{label:t.id},model:{value:e.waRadioValue,callback:function(t){e.waRadioValue=t},expression:"waRadioValue"}},[e._v(e._s(t.sms_notify_type_name))])],1)}),0),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{color:"#A5A5A5"},attrs:{type:"text"},on:{click:function(t){e.waDialog=!1}}},[e._v(e._s(e.lang.cancel))]),e._v(" "),a("el-button",{attrs:{type:"success"},on:{click:e.handleSentWa}},[e._v("\n        "+e._s(e.lang.submit)+"\n      ")])],1)])],1)},i=[]},Xq2r:function(e,t,a){"use strict";a.r(t);var s=a("Vbf3"),i=a("tvGC");for(var n in i)["default"].indexOf(n)<0&&function(e){a.d(t,e,function(){return i[e]})}(n);var r=a("KHd+"),o=Object(r.a)(i.default,s.a,s.b,!1,null,null,null);o.options.__file="DetailOrder.vue",t.default=o.exports},qDLJ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=_(a("QbLZ")),i=_(a("FyfS")),n=_(a("4d7F")),r=_(a("GQeE")),o=_(a("DChC")),d=a("Ccnf"),l=a("xCek"),p=_(a("vDqi")),c=_(a("Zi58")),u=_(a("wd/R")),h=_(a("kGIl"));function _(e){return e&&e.__esModule?e:{default:e}}t.default={name:"DetailOrder",components:{OrderTable:c.default,LoadingComponent:h.default},mixins:[o.default,d.mixinHiddenFeatureByPlanType],data:function(){return{loading:!0,loadingElement:!1,openOrderData:{},showTable:!1,downloadValue:null,emailDialog:!1,smsDialog:!1,emailRadioValue:1,smsRadioValue:1,statusSelect:[{value:"P",label:this.$lang[this.$store.state.userStores.langId].pending,disabled:!1},{value:"A",label:this.$lang[this.$store.state.userStores.langId].has_confirm,disabled:!1},{value:"S",label:this.$lang[this.$store.state.userStores.langId].being_sent,disabled:!1},{value:"T",label:this.$lang[this.$store.state.userStores.langId].delivered,disabled:!1},{value:"Z",label:this.$lang[this.$store.state.userStores.langId].complete,disabled:!1},{value:"X",label:this.$lang[this.$store.state.userStores.langId].cancel,disabled:!1}],downloadSelect:[{value:"pdf",label:this.$store.state.userStores.lang.download_pdf},{value:"pdf",label:this.$lang[this.$store.state.userStores.langId].delivery_order},{value:"pdf",label:this.$lang[this.$store.state.userStores.langId].delivery_order+" "+this.$lang[this.$store.state.userStores.langId].no_image},{value:"invoicepdf",label:this.$store.state.userStores.lang.invoice},{value:"packinglabelpdf",label:this.$store.state.userStores.lang.packing_label},{value:"packinglabelpdf",label:this.$store.state.userStores.lang.packing_label+" 1/2W"},{value:"packinglabelpdf",label:this.$store.state.userStores.lang.packing_label+"+ Weight 1/2W"}],downloadSelectEdit:[{value:"pdf",label:this.$store.state.userStores.lang.download_pdf},{value:"pdf",label:this.$lang[this.$store.state.userStores.langId].delivery_order},{value:"pdf",label:this.$lang[this.$store.state.userStores.langId].delivery_order+" "+this.$lang[this.$store.state.userStores.langId].no_image},{value:"packinglabelpdf",label:this.$store.state.userStores.lang.packing_label},{value:"packinglabelpdf",label:this.$store.state.userStores.lang.packing_label+" 1/2W"},{value:"packinglabelpdf",label:this.$store.state.userStores.lang.packing_label+"+ Weight 1/2W"}],isEditing:{customer:!1,shippingto:!1,status:!1,dropship:!1,notes:!1,invoice:!1,server:!1,due_date:!1},stateCountry:[],shippingCity:[],subDistrict:[],formShippingStatus:{dateShipping:"",noTracking:""},labelDate:"",suggestData:[],autoCompleteStartOn:300,formCustomer:{customerName:"",customerId:"",customerEmail:"",customerPhone:""},formDropShip:{dropShipName:"",dropShipSender:"",dropShipPhone:""},showEdit:!0,switchValue:0,routeName:"",statusOrder:"",repeat:!1,emailNotify:[],smsNotify:[],waDialog:!1,waRadioValue:1,customRPermis:"sales/openorders"}},computed:{selectedStore:function(){return this.$store.getters.selectedStore},selectRoute:function(){return this.$route.name},token:function(){return this.$store.state.user.token},langId:function(){return this.$store.state.userStores.langId},lang:function(){return this.$store.state.userStores.lang},userRole:function(){var e=this.$store.getters.selectedStore;return{role_id:e.role_id,role_name:e.role_name,is_pos_only:e.is_pos_only,is_mobile:e.is_mobile}},computedStatusSelect:function(){var e=this;return this.statusSelect.filter(function(t){return"SP"!==e.userRole.role_id?t:"X"!==t.value?t:void 0})},visibleEdit:function(){return this.selectedStore.can_edit_complete_order&&"Z"===this.openOrderData.status?this.selectedStore.can_edit_complete_order:!(!this.selectedStore.can_edit_complete_order&&"Z"===this.openOrderData.status)||this.selectedStore.can_edit_complete_order},accessByStore:function(){return["cvsms","smsstore1","smsstore2"]},computedAccess:function(){if(this.accessByStore.includes(this.selectedStore.url_id)&&("ST"===this.selectedStore.role_id||"SS"===this.selectedStore.role_id))return!0},stageLevel:function(){return"sit"}},methods:{getRoute:function(e,t){if((0,r.default)(this.$route.query).includes("pathName")?this.routeName=this.$route.query.pathName:this.routeName=e,"Open Order Detail"===e){var a=(0,l.baseApi)(this.selectedStore.url_id,this.langId,"openorder/"+this.$route.params.id);this.getDetailData(a)}else{var s=(0,l.baseApi)(this.selectedStore.url_id,this.langId,"closeorder/"+this.$route.params.id);this.showEdit=!1,this.getDetailData(s)}},getDetailData:function(e){var t=this;this.loading=!0,void 0!==this.$route.query.rpt&&(this.repeat=!0);var a={Authorization:"Bearer "+this.token.access_token};(0,p.default)({method:"GET",url:e,headers:a}).then(function(e){t.openOrderData=e.data.data,t.labelDate=t.openOrderData.fshipping_date,t.switchValue=t.openOrderData.is_paid,t.statusOrder=t.openOrderData.status,t.loading=!1,t.splitDate(t.openOrderData.order_date,t.labelDate)}).catch(function(e){t.loading=!1,t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error})})},splitDate:function(e,t){var a=e.split(" ")[0];this.openOrderData.order_date=a,this.labelDate=(0,u.default)(t).format("DD MMMM YYYY")},handleDownload:function(e){var t={};0===e&&(t.url="pdf"),1===e&&(t.url="deliveryorderpdf"),2===e&&(t.url="deliveryorderpdf",t.no_image=1),3===e&&(t.url="invoicepdf"),4===e&&(t.url="packinglabelpdf"),5===e&&(t.url="packinglabelpdf",t.type=2),6===e&&(t.url="packinglabelpdf",t.type=3),this.download(t)},handleDownloadEdit:function(e){var t={};0===e&&(t.url="pdf"),1===e&&(t.url="deliveryorderpdf"),2===e&&(t.url="deliveryorderpdf",t.no_image=1),3===e&&(t.url="packinglabelpdf"),4===e&&(t.url="packinglabelpdf",t.type=2),5===e&&(t.url="packinglabelpdf",t.type=3),this.download(t)},download:function(e){var t=this;this.loading=!0,e.id=this.openOrderData.id;var a={Authorization:"Bearer "+this.token.access_token};(0,p.default)({url:(0,l.baseApi)(this.selectedStore.url_id,this.langId,"openorder/"+e.url),method:"GET",headers:a,responseType:"blob",params:e}).then(function(a){var s=t.openOrderData.order_no+"_"+e.id+".pdf",i=window.URL.createObjectURL(new Blob([a.data])),n=document.createElement("a");n.href=i,n.setAttribute("download",s),document.body.appendChild(n),n.click(),t.loading=!1}).catch(function(e){console.log(e);var a=e.response.data;t.fileReader(a).then(function(e){var a=JSON.parse(e);console.log("err",a.error.error),t.$notify({type:"warning",title:a.error.message,message:a.error.error})}),t.loading=!1})},fileReader:function(e){var t=new FileReader;return new n.default(function(a,s){t.onerror=function(){t.abort(),s(new Error("Problem parsing file"))},t.onload=function(){a(t.result)},t.readAsText(e)})},handleSwitchPayment:function(){var e=this;this.loading=!0;var t={Authorization:"Bearer "+this.token.access_token},a={status:this.switchValue,order_id:this.openOrderData.id};(0,p.default)({method:"POST",url:(0,l.baseApi)(this.selectedStore.url_id,this.langId,"openorder/updatepaymentstatus"),headers:t,params:a}).then(function(t){e.openOrderData=t.data.data,e.$message({message:"Success",type:"success"}),e.getDetailData(),e.loading=!1}).catch(function(t){e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error}),e.switchValue=e.openOrderData.is_paid,e.getDetailData(),e.loading=!1})},handleChangeStatus:function(e){"T"===e?this.openOrderData.shipping_date||this.openOrderData.shipping_track_no?this.handleUpdateStatus():(this.$message({message:this.lang.shipping_status+" "+this.lang.required,type:"error"}),this.statusOrder=this.openOrderData.status):this.handleUpdateStatus()},handleUpdateStatus:function(){var e=this;this.loading=!0;var t={Authorization:"Bearer "+this.token.access_token},a={status:this.statusOrder,order_id:this.openOrderData.id};(0,p.default)({method:"POST",url:(0,l.baseApi)(this.selectedStore.url_id,this.langId,"openorder/updatestatus"),headers:t,data:a}).then(function(t){e.openOrderData=t.data.data,e.$message({message:"Success",type:"success"}),e.loading=!1,e.getDetailData()}).catch(function(t){e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error}),e.loading=!1})},handleEdit:function(e){"customer"===e?(this.formCustomer.customerId=this.openOrderData.customer_id,this.formCustomer.customerName=this.openOrderData.customer_name,this.formCustomer.customerEmail=this.openOrderData.customer_email,this.formCustomer.customerPhone=this.openOrderData.customer_phone,this.isEditing.customer=!0):"shippingto"===e?(this.isEditing.shippingto=!0,this.getStateCountry(),this.getShippingCity(),this.getSubDistrict()):"status"===e?(this.formShippingStatus.dateShipping=this.openOrderData.shipping_date,this.formShippingStatus.noTracking=this.openOrderData.shipping_track_no,this.isEditing.status=!0):"dropship"===e?(this.formDropShip.dropShipName=this.openOrderData.drop_ship_store_name,this.formDropShip.dropShipSender=this.openOrderData.drop_ship_sender_name,this.formDropShip.dropShipPhone=this.openOrderData.drop_ship_contact_phone,this.isEditing.dropship=!0):"notes"===e?this.isEditing.notes=!0:"invoice"===e?this.isEditing.invoice=!0:"server"===e?this.isEditing.server=!0:"due_date"===e&&(this.isEditing.due_date=!0)},cancelEdit:function(e){"customer"===e?this.isEditing.customer=!1:"shippingto"===e?this.isEditing.shippingto=!1:"status"===e?this.isEditing.status=!1:"dropship"===e?this.isEditing.dropship=!1:"notes"===e?this.isEditing.notes=!1:"invoice"===e?this.isEditing.invoice=!1:"server"===e?this.isEditing.server=!1:"due_date"===e&&(this.isEditing.due_date=!1)},saveEdit:function(e){var t=this;if("customer"===e){var a=(0,l.baseApi)(this.selectedStore.url_id,this.langId,"openorder/updatecustomer"),s={customer_id:this.formCustomer.customerId,order_id:this.openOrderData.id};this.updateData(e,a,s)}else if("shippingto"===e){var i=(0,l.baseApi)(this.selectedStore.url_id,this.langId,"openorder/updateshippingaddress"),n={order_id:this.openOrderData.id,shipping_to:this.openOrderData.shipping_to,shipping_address:this.openOrderData.shipping_address,shipping_country_id:this.openOrderData.shipping_country_id,shipping_state_id:this.openOrderData.shipping_state_id,shipping_city_id:this.openOrderData.shipping_city_id,shipping_subdistrict_id:this.openOrderData.shipping_subdistrict_id,shipping_postal_code:this.openOrderData.shipping_postal_code,shipping_phone:this.openOrderData.shipping_phone};this.updateData(e,i,n)}else if("status"===e)this.$refs[e].validate(function(a){if(!a)return console.log("error submit!!"),!1;var s=(0,l.baseApi)(t.selectedStore.url_id,t.langId,"openorder/updateShippingStatus"),i={order_id:t.openOrderData.id,shipping_date:t.formShippingStatus.dateShipping,shipping_track_no:t.formShippingStatus.noTracking};t.updateData(e,s,i)});else if("dropship"===e){var r=(0,l.baseApi)(this.selectedStore.url_id,this.langId,"openorder/updateshippingaddress"),o={drop_ship_store_name:this.formDropShip.dropShipName,drop_ship_sender_name:this.formDropShip.dropShipSender,drop_ship_contact_phone:this.formDropShip.dropShipPhone,order_id:this.openOrderData.id,shipping_to:this.openOrderData.shipping_to,shipping_address:this.openOrderData.shipping_address,shipping_country_id:this.openOrderData.shipping_country_id,shipping_state_id:this.openOrderData.shipping_state_id,shipping_city_id:this.openOrderData.shipping_city_id,shipping_subdistrict_id:this.openOrderData.shipping_subdistrict_id,shipping_postal_code:this.openOrderData.shipping_postal_code,shipping_phone:this.openOrderData.shipping_phone};this.updateData(e,r,o)}else if("notes"===e){var d=(0,l.baseApi)(this.selectedStore.url_id,this.langId,"openorder/updateAttr"),p={order_id:this.openOrderData.id,name:"notes",value:this.openOrderData.notes};this.updateData(e,d,p)}else if("invoice"===e){var c=(0,l.baseApi)(this.selectedStore.url_id,this.langId,"openorder/updateAttr"),u={order_id:this.openOrderData.id,name:"invoice_notes",value:this.openOrderData.invoice_notes};this.updateData(e,c,u)}else if("server"===e){var h=(0,l.baseApi)(this.selectedStore.url_id,this.langId,"openorder/updateAttr"),_={order_id:this.openOrderData.id,name:"serve_by_id",value:this.openOrderData.serve_by_id};this.updateData(e,h,_)}else if("due_date"===e){var g=(0,l.baseApi)(this.selectedStore.url_id,this.langId,"openorder/updateAttr"),m={order_id:this.openOrderData.id,name:"payment_due_date",value:this.openOrderData.payment_due_date};this.updateData(e,g,m)}},editChangeCountry:function(e){this.openOrderData.shipping_country_id=e.id,this.openOrderData.shipping_country_name=e.name,"ID"===e.id?(this.openOrderData.shipping_state_name="",this.getStateCountry()):(this.openOrderData.shipping_city_id="",this.openOrderData.shipping_state_id="",this.openOrderData.shipping_subdistrict_id="",this.openOrderData.shipping_postal_code="")},getStateCountry:function(){var e=this;this.loading=!0;var t={Authorization:"Bearer "+this.token.access_token},a={search_column:"country_id",search_operator:"=",search_text:this.openOrderData.shipping_country_id,per_page:1e3};(0,p.default)({method:"GET",url:(0,l.baseApi)(this.selectedStore.url_id,this.langId,"state"),headers:t,params:a}).then(function(t){e.stateCountry=t.data.data,e.loading=!1}).catch(function(){e.stateCountry=[],e.loading=!1})},editProvince:function(e){this.openOrderData.shipping_state_id=e.id,this.openOrderData.shipping_state_name=e.name,this.openOrderData.shipping_city_name="",this.getShippingCity()},getShippingCity:function(){var e=this;this.loading=!0;var t={Authorization:"Bearer "+this.token.access_token},a={search_column:"state_id",search_operator:"=",search_text:this.openOrderData.shipping_state_id,per_page:1e3};(0,p.default)({method:"GET",url:(0,l.baseApi)(this.selectedStore.url_id,this.langId,"shippingcity"),headers:t,params:a}).then(function(t){e.shippingCity=t.data.data,e.loading=!1}).catch(function(){e.shippingCity=[],e.loading=!1})},editCity:function(e){this.openOrderData.shipping_city_id=e.id,this.openOrderData.shipping_city_name=e.city,this.openOrderData.shipping_subdistrict_name="",this.getSubDistrict()},getSubDistrict:function(){var e=this;this.loading=!0;var t={Authorization:"Bearer "+this.token.access_token},a={search_column:"city_id",search_operator:"=",search_text:this.openOrderData.shipping_city_id,per_page:100};(0,p.default)({method:"GET",url:(0,l.baseApi)(this.selectedStore.url_id,this.langId,"shippingcitysubdistrict"),headers:t,params:a}).then(function(t){e.subDistrict=t.data.data,e.loading=!1}).catch(function(){e.subDistrict=[],e.loading=!1})},editSubDistrict:function(e){this.openOrderData.shipping_subdistrict_id=e.id,this.openOrderData.shipping_subdistrict_name=e.name},updateData:function(e,t,a){var s=this;this.loading=!0;var i={Authorization:"Bearer "+this.token.access_token};(0,p.default)({method:"POST",url:t,headers:i,data:a}).then(function(t){s.openOrderData=t.data.data,s.labelDate=s.openOrderData.fshipping_date,s.$message({message:"Success",type:"success"}),s.loading=!1,s.cancelEdit(e),s.getDetailData()}).catch(function(e){s.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error}),s.loading=!1,s.getDetailData()})},changeDateHeader:function(e){var t=this;this.loading=!0;var a={Authorization:"Bearer "+this.token.access_token},s={order_id:this.openOrderData.id,name:"order_date",value:e};(0,p.default)({method:"POST",url:(0,l.baseApi)(this.selectedStore.url_id,this.langId,"openorder/updateAttr"),headers:a,data:s}).then(function(e){t.openOrderData=e.data.data,t.$message({message:"Success",type:"success"}),t.loading=!1,t.getDetailData()}).catch(function(e){t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error}),t.loading=!1})},timeChange:function(e){this.formShippingStatus.dateShipping=e},getCustomerSuggest:function(e,t){var a=this,s={Authorization:"Bearer "+this.token.access_token},n={search:e};(0,p.default)({method:"GET",url:(0,l.baseApi)(this.selectedStore.url_id,this.langId,"customer"),headers:s,params:n}).then(function(e){var s=!0,n=!1,r=void 0;try{for(var o,d=(0,i.default)(e.data.data);!(s=(o=d.next()).done);s=!0){var l=o.value;l.value=l.customer_text}}catch(e){n=!0,r=e}finally{try{!s&&d.return&&d.return()}finally{if(n)throw r}}a.suggestData=e.data.data,t(a.suggestData)}).catch(function(e){a.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error})})},handleSelectCustomer:function(e){this.formCustomer.customerId=e.id,this.formCustomer.customerEmail=e.email,this.formCustomer.customerPhone=e.phone,this.formCustomer.customerName=e.name},editHeaderButton:function(){this.selectedStore.can_edit_complete_order||"P"!==this.openOrderData.order_source||"Z"!==this.openOrderData.status?this.showEdit=!0:this.$notify({type:"warning",message:this.$lang[this.langId].note_block_edit_trx_pos})},backHandle:function(){this.repeat?"salesdetails"===this.$route.query.path?this.$router.push({path:"/reports/sales?path=salesdetails",query:{start_date:"15-01-2022",end_date:"15-01-2022"}}):"salesitemsbydate"===this.$route.query.path?this.$router.push({path:"/reports/sales?path=salesitemsbydate"}):"salesitemsbybrands"===this.$route.query.path?this.$router.push({path:"/reports/sales?path=salesitemsbybrands"}):"salesdetailsbydatetime"===this.$route.query.path?this.$router.push({path:"/reports/sales?path=salesdetailsbydatetime"}):"salesitemdiscountsbydate"===this.$route.query.path?this.$router.push({path:"/reports/sales?path=salesitemdiscountsbydate"}):"salesitemaddonsbydate"===this.$route.query.path?this.$router.push({path:"/reports/sales?path=salesitemaddonsbydate"}):"creditsalesdetails"===this.$route.query.path?this.$router.push({path:"/reports/sales?path=creditsalesdetails"}):"creditpayment"===this.$route.query.path?this.$router.push({path:"/reports/sales?path=creditpayment"}):"productsalesbycategory"===this.$route.query.path?this.$router.push({path:"/reports/products?path=productsalesbycategory"}):"salesdetailsbyshift"===this.$route.query.path?this.$router.push({path:"/reports/shifts?path=salesdetailsbyshift"}):"salesitemaddonsbydateshift"===this.$route.query.path?this.$router.push({path:"/reports/shifts?path=salesitemaddonsbydateshift"}):"outstandingpayment"===this.$route.query.path&&this.$router.push({path:"/reports/payments?path=outstandingpayment"}):"Open Order Detail"===this.routeName?this.$router.push({path:"/sales/openorder"}):"Complete Order Detail"===this.routeName?this.$router.push({path:"/sales/completeorder"}):"Integrate Jurnal.ID"===this.routeName&&this.$router.push({name:"Integrate Jurnal.ID",params:{lastParams:this.$route.query.lastParams,labelDate:this.$route.query.labelDate},query:{menu:"general",tab:this.$route.query.tab}})},updatePayment:function(e){this.openOrderData=e,this.openOrderData.is_paid=1,this.loading=!1;var t=(0,l.baseApi)(this.selectedStore.url_id,this.langId,"openorder/"+this.$route.params.id);this.getDetailData(t)},getEmailNotify:function(){var e=this,t={Authorization:"Bearer "+this.token.access_token};(0,p.default)({method:"GET",url:(0,l.baseApi)(this.selectedStore.url_id,this.langId,"emailnotify"),headers:t}).then(function(t){e.emailNotify=t.data.data}).catch(function(t){e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error})})},getSmsNotify:function(){var e=this,t={Authorization:"Bearer "+this.token.access_token};(0,p.default)({method:"GET",url:(0,l.baseApi)(this.selectedStore.url_id,this.langId,"smsnotify"),headers:t}).then(function(t){e.smsNotify=t.data.data}).catch(function(t){e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error})})},handleSentEmail:function(){var e=this,t={Authorization:"Bearer "+this.token.access_token},a={order_id:this.openOrderData.id,email_type_id:this.emailRadioValue,type:"O"};(0,p.default)({method:"POST",url:(0,l.baseApi)(this.selectedStore.url_id,this.langId,"allorder/sendemail"),headers:t,data:a}).then(function(t){e.emailDialog=!1,e.$notify({type:"success",message:t.data.message})}).catch(function(t){e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error})})},handleSentSms:function(){var e=this,t={Authorization:"Bearer "+this.token.access_token},a={order_id:this.openOrderData.id,sms_type_id:this.smsRadioValue};(0,p.default)({method:"POST",url:(0,l.baseApi)(this.selectedStore.url_id,this.langId,"openorder/sendsmsorder"),headers:t,data:a}).then(function(t){e.smsDialog=!1,e.$notify({type:"success",message:t.data.message})}).catch(function(t){e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error})})},handleSentWa:function(){var e=this,t={Authorization:"Bearer "+this.token.access_token},a={order_id:this.openOrderData.id,sms_type_id:this.waRadioValue};(0,p.default)({method:"POST",url:(0,l.baseApi)(this.selectedStore.url_id,this.langId,"openorder/sendwaorder"),headers:t,data:a}).then(function(t){e.waDialog=!1,e.$notify({type:"success",message:"Success"}),e.handleShowWA(t.data.data.link)}).catch(function(t){console.log(t),e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error})})},handleShiftEnter:function(e){console.log(e.type),13==e.keyCode&&e.shiftKey&&("keyup"==e.type&&this.saveEdit("notes"),e.preventDefault())},refreshData:function(e){this.openOrderData=(0,s.default)({},e),this.labelDate=this.openOrderData.fshipping_date,this.switchValue=this.openOrderData.is_paid,this.statusOrder=this.openOrderData.status,this.loading=!1,this.splitDate(this.openOrderData.order_date,this.labelDate)},handleShowWA:function(e){window.open(e)}},beforeMount:function(){console.log("permit",this.$route),this.$route.query||this.handleCustomPermissionSinglePage(this.customRPermis,"show")},mounted:function(){this.getRoute(this.selectRoute,this.selectedStore),this.getEmailNotify(),this.getSmsNotify()}}},tvGC:function(e,t,a){"use strict";a.r(t);var s=a("qDLJ"),i=a.n(s);for(var n in s)["default"].indexOf(n)<0&&function(e){a.d(t,e,function(){return s[e]})}(n);t.default=i.a}}]);