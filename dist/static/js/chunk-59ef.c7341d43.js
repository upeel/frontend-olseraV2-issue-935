(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-59ef"],{"/We2":function(t){t.exports=JSON.parse('[{"id":1,"name":"Trilith","total_customer":42,"edited":false},{"id":2,"name":"Yabox","total_customer":59,"edited":false},{"id":3,"name":"Roomm","total_customer":100,"edited":false},{"id":4,"name":"Topiczoom","total_customer":83,"edited":false},{"id":5,"name":"Meeveo","total_customer":77,"edited":false},{"id":6,"name":"Skalith","total_customer":72,"edited":false},{"id":7,"name":"Jaxbean","total_customer":26,"edited":false},{"id":8,"name":"Oba","total_customer":10,"edited":false},{"id":9,"name":"Jabberbean","total_customer":19,"edited":false},{"id":10,"name":"Fivespan","total_customer":52,"edited":false}]')},KKwr:function(t,e,a){"use strict";a.d(e,"a",function(){return s}),a.d(e,"b",function(){return o});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"box-card"},[a("div",{staticClass:"table-handler-flex",attrs:{slot:"header"},slot:"header"},[a("div",{staticStyle:{"flex-grow":"1"}},[a("h4",[t._v(t._s(t.$lang[t.langId].list)+" "+t._s(t.lang.customer_type))]),t._v(" "),t.showCustomerType?a("p",[t._v(t._s(t.total)+" "+t._s(t.lang.customer))]):a("p",[t._v("0 "+t._s(t.lang.customer))])]),t._v(" "),a("button-action-authenticated",{attrs:{permission:["customer/customertypes","store"],type:"success",icon:"el-icon-plus"},on:{click:t.showCreateDialog}},[t._v("\n        "+t._s(t.lang.add)+"\n      ")])],1),t._v(" "),a("div",{staticClass:"card-body"},[t.showCustomerType?a("div",t._l(t.customerTypeData,function(e,s){return a("div",{key:s},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"box box-banner-info"},[a("div",{staticClass:"box-header"},[t.rowState[s].edited?t._e():a("h3",{staticClass:"box-title"},[t._v(t._s(e.name))]),t._v(" "),t.rowState[s].edited?a("el-input",{staticClass:"mr-4",model:{value:t.formEdit.name,callback:function(e){t.$set(t.formEdit,"name",e)},expression:"formEdit.name"}}):t._e(),t._v(" "),t.rowState[s].edited?a("el-button",{staticClass:"mr-4",attrs:{type:"text"},on:{click:function(e){return t.cancelHandle(s)}}},[t._v(t._s(t.lang.cancel))]):t._e(),t._v(" "),t.rowState[s].edited?a("el-button",{attrs:{type:"success"},on:{click:function(e){return t.saveHandle(s)}}},[t._v(t._s(t.lang.save))]):t._e(),t._v(" "),t.rowState[s].edited?t._e():a("el-dropdown",{attrs:{trigger:"click"}},[a("el-button",{attrs:{type:"text"}},[a("svg-icon",{attrs:{"icon-class":"more-vertical"}})],1),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("button-action-authenticated",{staticClass:"delete-button btn-block text-left",attrs:{permission:["customer/customertypes","destroy"],type:"text"},on:{click:function(a){return t.showDeleteDialog(e)}}},[a("svg-icon",{attrs:{"icon-class":"trash"}}),t._v("\n                        "+t._s(t.rootLang.delete)+"\n                      ")],1)],1),t._v(" "),a("el-dropdown-item",[a("button-action-authenticated",{staticClass:"edit-button btn-block text-left",attrs:{permission:["customer/customertypes","edit"],type:"text"},on:{click:function(a){return t.editHandle(s,e)}}},[a("svg-icon",{attrs:{"icon-class":"edit"}}),t._v("\n                        "+t._s(t.lang.edit)+"\n                      ")],1)],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"box-body text-center pointer",on:{click:function(a){return t.handleShowCustomer(e)}}},[a("i",{staticClass:"dripicons-user"}),t._v(" "),a("span",[t._v(t._s(e.total_customer))])])])])])}),0):a("div",{staticClass:"no-product"},[a("p",[t._v(t._s(t.$lang[t.langId].no_data))]),t._v(" "),a("img",{attrs:{src:"/static/img/no-data.svg",alt:"No Data Picture"}})])])]),t._v(" "),a("el-dialog",{staticClass:"type-dialog",attrs:{title:t.lang.add,visible:t.createDialog,"close-on-click-modal":!1},on:{"update:visible":function(e){t.createDialog=e}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingAdd,expression:"loadingAdd"}]},[a("span",[t._v(t._s(t.lang.name+" "+t.lang.customer_type)+"?")]),t._v(" "),a("el-input",{nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.createTypeSave.apply(null,arguments)}},model:{value:t.formAdd.name,callback:function(e){t.$set(t.formAdd,"name",e)},expression:"formAdd.name"}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"cancel-button",attrs:{type:"text"},on:{click:function(e){t.createDialog=!1}}},[t._v(t._s(t.lang.cancel))]),t._v(" "),a("el-button",{staticClass:"save-button",attrs:{type:"text"},on:{"~click":function(e){return t.createTypeSave.apply(null,arguments)}}},[a("svg-icon",{staticStyle:{stroke:"#6EBE46"},attrs:{"icon-class":"save"}}),t._v("\n          "+t._s(t.lang.save)+"\n        ")],1)],1)],1)]),t._v(" "),a("el-dialog",{attrs:{visible:t.deleteDialog,"append-to-body":"",center:"","custom-class":"dialog-warning"},on:{"update:visible":function(e){t.deleteDialog=e}}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v("\n      "+t._s(t.lang.notif_warn)+"\n    ")]),t._v(" "),a("div",{staticClass:"text-center"},[a("p",[t._v(t._s(t.lang.are_you_sure_to_remove_this_data)+"?")]),t._v(" "),a("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.lang.customer_type)+": "+t._s(t.deleteData.name))])]),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelDeleteDialog}},[t._v(t._s(t.lang.cancel))]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:t.deleteHandle}},[t._v(t._s(t.$lang[t.langId].delete))])],1)])],1)},o=[]},L7NJ:function(t,e,a){"use strict";a.r(e);var s=a("gCuB"),o=a.n(s);for(var n in s)["default"].indexOf(n)<0&&function(t){a.d(e,t,function(){return s[t]})}(n);e.default=o.a},gCuB:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(a("m1cH")),o=a("xCek"),n=i(a("vDqi"));function i(t){return t&&t.__esModule?t:{default:t}}e.default={name:"CustomerTypeList",data:function(){return{loading:!1,customerTypeData:[],rowState:[],deleteData:{},showCustomerType:!1,total:0,createDialog:!1,deleteDialog:!1,formLabelWidth:"40%",form:{},formAdd:{name:""},formEdit:{id:"",name:""},loadingAdd:!1}},computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},langId:function(){return this.$store.state.userStores.langId},lang:function(){return this.$store.state.userStores.lang},rootLang:function(){return this.$lang[this.$store.state.userStores.langId]}},watch:{"$store.getters.selectedStore":function(){this.getCustomerType()}},methods:{getCustomerType:function(){var t=this;if([].concat((0,s.default)(document.getElementById("app").classList)).includes("dummy-page"))this.getMockupData();else{this.loading=!0;var e={Authorization:"Bearer "+this.token.access_token};(0,n.default)({method:"GET",url:(0,o.baseApi)(this.selectedStore.url_id,this.langId,"customertype"),params:{search_text:"",per_page:300},headers:e}).then(function(e){t.customerTypeData=e.data.data,t.rowState=t.customerTypeData.map(function(t){return{edited:!1}}),t.total=e.data.meta.total,t.showCustomerType=!0,t.loading=!1}).catch(function(e){404!==e.response.data.error.status_code&&t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error}),t.loading=!1})}},getMockupData:function(){var t=this;this.showCustomerType=!0,this.total=10,this.customerTypeData=a("/We2"),this.customerTypeData.map(function(){t.rowState.push({edited:!1})})},showCreateDialog:function(){this.formAdd.name="",this.createDialog=!0},createTypeSave:function(){var t=this;this.loading=!0,this.loadingAdd=!0;var e={Authorization:"Bearer "+this.token.access_token},a={name:this.formAdd.name};(0,n.default)({method:"POST",url:(0,o.baseApi)(this.selectedStore.url_id,this.langId,"customertype"),headers:e,data:a}).then(function(e){t.result=e.data,t.loading=!1,t.loadingAdd=!1,t.$message({message:"Success",type:"success"}),t.createDialog=!1,t.getCustomerType()}).catch(function(e){t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error}),t.loading=!1,t.loadingAdd=!1,t.createDialog=!1})},editHandle:function(t,e){this.formEdit.id=e.id,this.formEdit.name=e.name,this.rowState[t].edited=!0},cancelHandle:function(t){this.rowState[t].edited=!1,this.formEdit.id="",this.formEdit.name=""},saveHandle:function(t){var e=this;this.loading=!0;var a={Authorization:"Bearer "+this.token.access_token},s={pk:this.formEdit.id,name:"name",value:this.formEdit.name};(0,n.default)({method:"POST",url:(0,o.baseApi)(this.selectedStore.url_id,this.langId,"customertype/updateattr"),headers:a,data:s}).then(function(a){e.result=a.data,e.loading=!1,e.$message({message:"Success",type:"success"}),e.rowState[t].edited=!1,e.getCustomerType()}).catch(function(a){e.$notify({type:"warning",title:a.response.data.error.message,message:a.response.data.error.error}),e.loading=!1,e.rowState[t].edited=!1})},showDeleteDialog:function(t){this.deleteData=t,this.deleteDialog=!0},cancelDeleteDialog:function(){this.deleteData={},this.deleteDialog=!1},deleteHandle:function(){var t=this;this.loading=!0;var e={Authorization:"Bearer "+this.token.access_token},a=this.deleteData.id;(0,n.default)({method:"DELETE",url:(0,o.baseApi)(this.selectedStore.url_id,this.langId,"customertype/"+a),headers:e}).then(function(e){t.result=e.data,t.$message({message:"Success",type:"success"}),t.loading=!1,t.deleteDialog=!1,t.getCustomerType()}).catch(function(e){t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error}),t.loading=!1,t.deleteDialog=!1})},handleShowCustomer:function(t){this.$router.push({path:"/customersupplier/customer",query:{type:t.name}})}},mounted:function(){this.getCustomerType()}}},sGsb:function(t,e,a){"use strict";a.r(e);var s=a("KKwr"),o=a("L7NJ");for(var n in o)["default"].indexOf(n)<0&&function(t){a.d(e,t,function(){return o[t]})}(n);var i=a("KHd+"),r=Object(i.a)(o.default,s.a,s.b,!1,null,null,null);r.options.__file="CustomerTypeList.vue",e.default=r.exports}}]);