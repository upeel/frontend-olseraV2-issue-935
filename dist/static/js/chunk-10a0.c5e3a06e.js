(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-10a0"],{"78xL":function(t,e,a){"use strict";a.r(e);var s=a("c87V"),n=a("dAdd");for(var i in n)["default"].indexOf(i)<0&&function(t){a.d(e,t,function(){return n[t]})}(i);var o=a("KHd+"),r=Object(o.a)(n.default,s.a,s.b,!1,null,null,null);r.options.__file="StocksTable.vue",e.default=r.exports},"8AlA":function(t,e,a){"use strict";a.r(e);var s=a("OSdo"),n=a.n(s);for(var i in s)["default"].indexOf(i)<0&&function(t){a.d(e,t,function(){return s[t]})}(i);e.default=n.a},DChC:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(a("QbLZ")),n=i(a("Ljqw"));function i(t){return t&&t.__esModule?t:{default:t}}var o={mixins:[a("6y4V").checkCustomPermission],computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},langId:function(){return this.$store.state.userStores.langId},lang:function(){return this.$store.state.userStores?this.$store.state.userStores.lang:{}},userRole:function(){var t=this.$store.getters.selectedStore;return{role_id:t.role_id,role_name:t.role_name,is_pos_only:t.is_pos_only,is_mobile:t.is_mobile}},rootLang:function(){return this.$lang[this.langId]},headers:function(){var t=this.$store.getters.token;return this.$store.getters.webviewMode&&(t=this.$store.getters.webviewToken),{Authorization:"Bearer "+t.access_token}},baseURL:function(){return n.default},loggedInUser:function(){return this.$store.state.user.loggedInUser},stageLevel:function(){return"sit"},defaultAccessByStore:function(){return["setdemo1","allinolsera2"]},wejayafoodAccessByStore:function(){return["setdemo1","allinolsera2","ayammrotholpusat","ayammrotholdramaga"]},saveToAllAccessStore:function(){return["setdemo1","allinolsera2","siliwangidutagarden","barokahfrozenfood"]},outlets:function(){var t=[{name:this.$store.state.userStores.lang.all,store_id:0,url_id:"all"}],e=[];return this.$store.getters.stores.map(function(a){e.includes(a.store_id)||a.is_store_active&&(t.push((0,s.default)({},a)),e.push(a.store_id))}),t},tokopediaActiveStore:function(){return this.$store.state.tokopediaActiveStore},shopeeActiveStore:function(){return this.$store.state.shopeeActiveStore}}};e.default=o},Lig1:function(t,e,a){"use strict";a.r(e);var s=a("MIzs"),n=a("8AlA");for(var i in n)["default"].indexOf(i)<0&&function(t){a.d(e,t,function(){return n[t]})}(i);var o=a("KHd+"),r=Object(o.a)(n.default,s.a,s.b,!1,null,null,null);r.options.__file="Detail.vue",e.default=r.exports},MIzs:function(t,e,a){"use strict";a.d(e,"a",function(){return s}),a.d(e,"b",function(){return n});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("div",{staticClass:"color-info--bg flex-container radius-10 p-8 mb-24 mt-24"},[t._m(0),t._v(" "),a("div",{staticClass:"full-width"},[t._v("\n      "+t._s("Pastikan data sudah benar sebelum diposting. Setelah terposting, data tidak diperbolehkan diubah.")+"\n    ")])]),t._v(" "),t.data?[a("el-card",{staticClass:"box-card pos-relative card-body-inventory"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"inventory-status",class:t.classBasedOnStatus},["P"===t.data.status?[a("span",[a("i",{staticClass:"el-icon-circle-check"})]),t._v(t._s(t.data.status_desc)+"\n          ")]:t._e(),t._v(" "),"X"===t.data.status?[a("span",[a("i",{staticClass:"el-icon-error"})]),t._v(t._s(t.data.status_desc)+"\n          ")]:t._e(),t._v(" "),"D"===t.data.status?[a("span",[a("i",{staticClass:"el-icon-document"})]),t._v(t._s(t.data.status_desc)+"\n          ")]:t._e()],2),t._v(" "),a("div",{staticClass:"flex-container with-padding-left"},[a("div",[a("small",{staticStyle:{color:"#ccc"}},[t._v(t._s(t.lang.stock_opname_no))]),t._v(" "),t.data.trans_no?a("h4",[t._v(t._s(t.data.trans_no))]):a("h4",[t._v("-")])]),t._v(" "),a("div",{staticClass:"full-width text-right"},["D"!==t.data.status?a("el-button",{staticClass:"ml-4 btn-no-shadow",attrs:{icon:"el-icon-back",size:"small",type:"success",plain:""},on:{click:t.backHandle}},[t._v(t._s(t.lang.back))]):t._e(),t._v(" "),a("button-action-authenticated",{staticClass:"ml-4 btn-no-shadow",attrs:{permission:["inventory/stockopname","edit"],plain:!0,icon:"el-icon-printer",size:"small"},on:{click:function(e){return t.handlePrint()}}},[t._v(t._s(t.lang.print))]),t._v(" "),a("button-action-authenticated",{staticClass:"ml-4 mt-8 btn-no-shadow",attrs:{permission:["inventory/stockopname","edit"],plain:"",icon:"el-icon-download",size:"small"},on:{click:t.handleExcel}},[t._v("\n              "+t._s(t.$lang[t.langId].download_excel)+"\n            ")]),t._v(" "),"D"===t.data.status?a("button-action-authenticated",{staticClass:"ml-4 btn-no-shadow color-warning--bg color-white",attrs:{permission:["inventory/stockopname","edit"],icon:"el-icon-takeaway-box",size:"small"},on:{click:t.backHandle}},[t._v(t._s(t.$lang[t.langId].draft))]):t._e(),t._v(" "),t.wejayafoodAccessByStore.includes(t.selectedStore.url_id)?["D"===t.data.status?a("el-checkbox",{attrs:{label:t.$lang[t.langId].post_to_profitloss,border:""},model:{value:t.checkProfitLoss,callback:function(e){t.checkProfitLoss=e},expression:"checkProfitLoss"}}):t._e(),t._v(" "),"P"===t.data.status&&0===t.data.already_post_to_profitloss?a("el-button",{attrs:{type:"primary",loading:t.loadingPost},on:{click:t.postDataToProfitLoss}},[t._v(t._s(t.$lang[t.langId].post_to_profitloss))]):t._e()]:t._e(),t._v(" "),t.data.IsEditable?[a("button-action-authenticated",{staticClass:"ml-4 mt-8 btn-danger btn-no-shadow",attrs:{permission:["inventory/stockopname","edit"],icon:"el-icon-close",size:"small"},on:{click:function(e){return t.updateStatus("X")}}},[t._v("\n                "+t._s(t.$lang[t.langId].canceled)+"\n              ")]),t._v(" "),a("button-action-authenticated",{staticClass:"ml-4 mt-8 btn-no-shadow",attrs:{permission:["inventory/stockopname","edit"],icon:"el-icon-check",type:"success",size:"small"},on:{click:function(e){return t.updateStatus("P")}}},[t._v("\n                "+t._s(t.lang.post_now)+"\n              ")])]:t._e()],2)])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("strong",[t._v(t._s(t.lang.date))]),t._v(" "),t.data.IsEditable?a("div",{staticStyle:{float:"right"}},[t.isEditing.date?t._e():a("button-action-authenticated",{attrs:{permission:["inventory/stockopname","edit"],icon:"el-icon-edit",type:"primary",size:"mini"},on:{click:function(e){return t.editBlock("date")}}},[t._v("\n                "+t._s(t.lang.edit)+"\n              ")]),t._v(" "),t.isEditing.date?a("button-action-authenticated",{attrs:{permission:["inventory/stockopname","edit"],type:"text",size:"mini"},on:{click:function(e){return t.cancelEditBlock("date")}}},[t._v("\n                "+t._s(t.lang.cancel)+"\n              ")]):t._e(),t._v(" "),t.isEditing.date?a("button-action-authenticated",{attrs:{permission:["inventory/stockopname","edit"],icon:"el-icon-check",type:"success",size:"mini"},on:{click:function(e){return t.save("date")}}},[t._v("\n                "+t._s(t.lang.save)+"\n              ")]):t._e()],1):t._e()]),t._v(" "),a("div",{staticClass:"box-card-content"},[t.isEditing.date?[a("el-date-picker",{attrs:{type:"date",placeholder:this.$lang[t.langId].pick_a_day},model:{value:t.tmp.date,callback:function(e){t.$set(t.tmp,"date",e)},expression:"tmp.date"}})]:[t._v("\n              "+t._s(t.data.fdate)),a("br"),a("small",[t._v(t._s(t.data.created_by))])]],2)])],1),t._v(" "),a("div",{staticClass:"col-md-4"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("strong",[t._v(t._s(t.lang.notes))]),t._v(" "),t.data.IsEditable?a("div",{staticStyle:{float:"right"}},[t.isEditing.note?t._e():a("button-action-authenticated",{attrs:{permission:["inventory/stockopname","edit"],icon:"el-icon-edit",type:"primary",size:"mini"},on:{click:function(e){return t.editBlock("note")}}},[t._v("\n                "+t._s(t.lang.edit)+"\n              ")]),t._v(" "),t.isEditing.note?a("button-action-authenticated",{attrs:{permission:["inventory/stockopname","edit"],type:"text",size:"mini"},on:{click:function(e){return t.cancelEditBlock("note")}}},[t._v("\n                "+t._s(t.lang.cancel)+"\n              ")]):t._e(),t._v(" "),t.isEditing.note?a("button-action-authenticated",{attrs:{permission:["inventory/stockopname","edit"],icon:"el-icon-check",type:"success",size:"mini"},on:{click:function(e){return t.save("note")}}},[t._v("\n                "+t._s(t.lang.save)+"\n              ")]):t._e()],1):t._e()]),t._v(" "),a("div",{staticClass:"box-card-content"},[t.isEditing.note?[a("el-input",{attrs:{type:"textarea",autosize:""},model:{value:t.tmp.note,callback:function(e){t.$set(t.tmp,"note",e)},expression:"tmp.note"}})]:[t._v("\n              "+t._s(t.data.note)+"\n            ")]],2)])],1)]),t._v(" "),a("stocks-table",{key:t.tableKey,ref:"stocksTable",attrs:{editable:t.data.IsEditable,"is-item-added":t.itemAdded,"is-button-disabled":t.isButtonDisabled,"data-table":t.data.items},on:{itemadded:t.addItem,itemupdated:t.itemUpdated}}),t._v(" "),a("div",{staticStyle:{display:"none"},attrs:{id:"printView"}},[a("div",{staticClass:"box"},[a("div",{staticClass:"box-header with-padding-left with-border"},[a("div",{staticClass:"inventory-status",class:t.classBasedOnStatus,staticStyle:{"font-size":"22px","font-weight":"bold",width:"200px"}},["P"===t.data.status?[t._m(1),t._v(" "+t._s(t.data.status_desc)+"\n            ")]:t._e(),t._v(" "),"X"===t.data.status?[t._m(2),t._v(" "+t._s(t.data.status_desc)+"\n            ")]:t._e(),t._v(" "),"D"===t.data.status?[t._m(3),t._v(" "+t._s(t.data.status_desc)+"\n            ")]:t._e()],2),t._v(" "),a("div",{staticClass:"pull-right"},[a("small",{staticStyle:{color:"#ccc"}},[t._v(t._s(t.lang.incoming_stock_no))]),t._v(" "),t.data.trans_no?a("h4",[t._v(t._s(t.data.trans_no))]):a("h4",[t._v("-")])])]),t._v(" "),a("div",{staticClass:"row",staticStyle:{"margin-bottom":"10px"}},[a("div",{staticClass:"col-md-4"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("strong",[t._v(t._s(t.lang.date))])]),t._v(" "),a("div",{staticClass:"box-card-content"},[[t.data.fdate?a("div",[t._v("\n                    "+t._s(t.data.fdate)),a("br"),a("small",[t._v(t._s(t.data.created_by))])]):a("div",[t._v("-")])]],2)])],1),t._v(" "),a("div",{staticClass:"col-md-4"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("strong",[t._v(t._s(t.lang.notes))])]),t._v(" "),a("div",{staticClass:"box-card-content"},[[t.data.note?a("p",[t._v(t._s(t.data.note))]):a("p",[t._v("-")])]],2)])],1)]),t._v(" "),a("hr"),t._v(" "),a("el-table",{staticClass:"table-stocks",staticStyle:{width:"100%"},attrs:{data:t.data.items,stripe:""}},[a("el-table-column",{attrs:{label:t.lang.name,width:"350"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"pull-left",staticStyle:{"padding-right":"12px"}},[e.row.product_photo_md?[a("img",{staticClass:"table-image table-image-80",attrs:{src:e.row.product_photo_md,alt:e.row.product_photo_md}})]:t._e()],2),t._v(" "),a("div",{staticClass:"pull-left"},[a("strong",[t._v(t._s(e.row.product_name)+" - "+t._s(e.row.product_sku))]),t._v(" "),a("p",[t._v(t._s(e.row.product_variant_name)+" - "+t._s(e.row.product_variant_sku))])])])]}}],null,!1,1281762750)}),t._v(" "),a("el-table-column",{attrs:{label:t.lang.time,width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[[e.row.ftime?a("p",[t._v(t._s(e.row.ftime))]):a("p",[t._v("-")])]]}}],null,!1,2460075770)}),t._v(" "),a("el-table-column",{attrs:{label:t.lang.qty,width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[[e.row.qty?a("p",[t._v(t._s(e.row.qty))]):a("p",[t._v("-")])]]}}],null,!1,3154917338)}),t._v(" "),a("el-table-column",{attrs:{label:t.lang.qty_diff,width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[[a("p",[t._v(t._s(e.row.fqty_diff))])]]}}],null,!1,4168496308)})],1)],1)])]:t._e()],2)},n=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container-icon"},[e("i",{staticClass:"el-icon-warning-outline"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"el-icon-circle-check"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"el-icon-error"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"el-icon-document"})])}]},Mnrz:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=l(a("QbLZ")),n=l(a("P2sY")),i=a("xCek"),o=l(a("vDqi")),r=l(a("eWfT")),d=a("0dap");function l(t){return t&&t.__esModule?t:{default:t}}var c=a("wd/R");e.default={components:{InputAutocomplete:r.default},props:{dataTable:{default:null,type:Array},isButtonDisabled:{type:Boolean,default:!1},isItemAdded:{type:Boolean,default:!1},editable:{type:Boolean,default:!0}},data:function(){return{loading:!0,detailData:{},showTable:!1,addProductDialog:!1,deleteDialog:!1,deleteData:{},rowState:[],formAddProduct:{},searchData:[],tmp:{productSearchName:"",time:c().format("HH:mm"),qty:null,item:{}},isEditing:{},addingOrderItem:!1,isProgressing:!1,newData:!1,searchingItems:!1}},watch:{isItemAdded:function(t){!0===t&&(this.tmp.productSearchName="",this.tmp.time=c().format("HH:mm"),this.tmp.qty=null,this.tmp.item={})}},computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},langId:function(){return this.$store.state.userStores.langId},lang:function(){return this.$store.state.userStores.lang}},methods:{refreshTable:function(){var t=this;this.$nextTick(function(){t.$refs.stocksTable.doLayout()})},selectProduct:function(t){this.newData=!1,this.tmp.item=t},addDataTable:function(){this.newData=!0,this.$set(this.tmp,"product_ids",this.tmp.item.join(",")),this.$refs.InputAutocomplete.setFocus(),this.$refs.InputAutocomplete.resetKeyword(),this.$emit("itemadded",this.tmp)},setQueryString:function(t){var e=this;t?(0,d.debounce)(function(t){return e.getProductSearch(t)},"400ms")(t):this.searchData=[]},getProductSearch:function(t,e){var a=this;this.searchingItems=!0;var s={Authorization:"Bearer "+this.token.access_token},n={sort_column:"name",sort_type:"asc",search:t,search_column:"track_inventory",search_text:1,per_page:50};(0,o.default)({method:"GET",url:(0,i.baseApi)(this.selectedStore.url_id,this.langId,"productvariantsearch"),headers:s,params:n}).then(function(t){a.searchData=t.data.data,a.searchingItems=!1}).catch(function(){a.searchData=[],a.searchingItems=!1})},edit:function(t){var e=(0,n.default)({},t);e.time=c(e.time).format("HH:mm"),this.isEditing=e},save:function(t){var e=this;this.loading=!0,this.isProgressing=!0;var a={Authorization:"Bearer "+this.token.access_token},s={id:this.isEditing.opname_id,pk:this.isEditing.id,qty:this.isEditing.qty,time:this.isEditing.time};(0,o.default)({method:"POST",url:(0,i.baseApi)(this.selectedStore.url_id,this.langId,"stockopname/updateitem"),headers:a,params:s}).then(function(t){e.isProgressing=!1,e.$emit("itemupdated",t.data.data),e.cancel()}).catch(function(t){console.log(t),e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error}),e.isProgressing=!1})},removeDialog:function(t){this.deleteData=(0,s.default)({},t),this.deleteDialog=!0},deleteCancel:function(){this.deleteDialog=!1,this.deleteData={}},deleteSave:function(){var t=this,e=(0,s.default)({},this.deleteData);this.loading=!0,this.isProgressing=!0;var a={Authorization:"Bearer "+this.token.access_token},n={id:e.opname_id,pk:e.id};(0,o.default)({method:"POST",url:(0,i.baseApi)(this.selectedStore.url_id,this.langId,"stockopname/removeitem"),headers:a,params:n}).then(function(e){t.deleteCancel(),t.$emit("itemupdated",e.data.data),t.isProgressing=!1,t.$message({message:"Delete Success",type:"success"}),t.cancel()}).catch(function(e){t.deleteCancel(),t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error}),t.isProgressing=!1})},cancel:function(){this.isEditing={}}}}},OSdo:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=_(a("YDBu")),n=_(a("P2sY")),i=_(a("GQeE")),o=_(a("EJiy")),r=_(a("vDqi")),d=a("xCek"),l=_(a("DChC")),c=a("sFg5"),u=_(a("78xL"));function _(t){return t&&t.__esModule?t:{default:t}}var p=a("wd/R");e.default={data:function(){return{loading:!1,data:null,isButtonDisabled:!1,itemAdded:!1,isEditing:{date:!1,note:!1},tmp:{},tableKey:0,loadingPost:!1,checkProfitLoss:!1}},mixins:[l.default],components:{stocksTable:u.default},computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},langId:function(){return this.$store.state.userStores.langId},lang:function(){return this.$store.state.userStores.lang},classBasedOnStatus:function(){var t=void 0;return"P"===this.data.status?t="posted":"X"===this.data.status?t="canceled":"D"===this.data.status&&(t="draft"),t}},mounted:function(){this.loadData()},methods:{addItem:function(t){var e=this;this.isButtonDisabled=!0,this.itemAdded=!1;var a={id:this.$route.params.id,time:t.time,product_ids:t.product_ids,qty:t.qty},s={Authorization:"Bearer "+this.token.access_token};(0,r.default)({method:"POST",url:(0,d.baseApi)(this.selectedStore.url_id,this.selectedStore.lang_code,"stockopname/additem"),headers:s,data:a}).then(function(t){e.data.items=t.data.data.items,e.isButtonDisabled=!1,e.itemAdded=!0,e.$notify({type:"success",message:"Saved"})}).catch(function(t){e.isButtonDisabled=!1,e.itemAdded=!1;var a=t.response.data.error.error;if("object"===(0,o.default)(t.response.data.error.error)){var s=" ";(0,i.default)(a).forEach(function(t){s=s+" "+a[t]}),a=s}e.$notify({type:"warning",title:t.response.data.error.message,message:a})})},loadData:function(){var t=this;this.loading=!0;var e={Authorization:"Bearer "+this.token.access_token};(0,r.default)({method:"GET",url:(0,d.baseApi)(this.selectedStore.url_id,this.selectedStore.lang_code,"stockopname/"+this.$route.params.id),headers:e}).then(function(e){t.data=e.data.data,t.tmp=(0,n.default)({},t.data),t.tmp.date=new Date(t.tmp.date),t.loading=!1}).catch(function(e){t.loading=!1,t.data={},t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error})})},save:function(t){var e=this;this.loading=!0,this.isButtonDisabled=!0;var a="",n={id:(0,s.default)(this.$route.params.id,0)};"date"===t?(this.$set(n,"date",p(this.tmp.date).format("YYYY-MM-DD")),a=(0,d.baseApi)(this.selectedStore.url_id,this.selectedStore.lang_code,"stockopname/updateattr")):"note"===t&&(this.$set(n,"note",this.tmp.note),a=(0,d.baseApi)(this.selectedStore.url_id,this.selectedStore.lang_code,"stockopname/updateattr"));var i={Authorization:"Bearer "+this.token.access_token};(0,r.default)({method:"POST",url:a,headers:i,data:n}).then(function(a){"date"===t?(e.data.fdate=a.data.data.fdate,e.data.date=a.data.data.date,e.isEditing.date=!1):"note"===t&&(e.data.note=a.data.data.note,e.isEditing.note=!1),e.loading=!1,e.isButtonDisabled=!1,e.$message({message:"Saved",type:"success"})}).catch(function(t){e.loading=!1,e.isButtonDisabled=!1,e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error})})},initBlock:function(){this.isEditing.date=!1,this.isEditing.note=!1},editBlock:function(t){"date"===t?this.isEditing.date=!0:"note"===t&&(this.isEditing.note=!0)},cancelEditBlock:function(t){"date"===t?this.isEditing.date=!1:"note"===t&&(this.isEditing.note=!1)},updateStatus:function(t){var e=this;this.loading=!0;var a={Authorization:"Bearer "+this.token.access_token},s={id:this.data.id,record_to_report_profit_loss:this.checkProfitLoss?1:0,status:t};(0,r.default)({method:"POST",url:(0,d.baseApi)(this.selectedStore.url_id,this.selectedStore.lang_code,"stockopname/updatestatus"),headers:a,data:s}).then(function(a){e.data=a.data.data,e.tableKey=e.tableKey+1,e.$nextTick(function(){e.$refs.stocksTable.refreshTable()}),e.loading=!1,e.tmp=(0,n.default)({},e.data),e.tmp.date=new Date(e.tmp.date);var s="";s="X"===t?e.$lang[e.langId].success_cancelled:e.$lang[e.langId].success_posting,e.$notify({type:"success",message:s})}).catch(function(t){e.loading=!1,e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error})})},itemUpdated:function(t){this.data.items=t.items},backHandle:function(){this.$router.push({path:"/inventory/stocksopname/"})},handlePrint:function(){this.download("pdf","stockopname/")},handleExcel:function(){this.download("excel","stockopname/")},download:function(t,e){var a=this;this.loading=!0;var s={Authorization:"Bearer "+this.token.access_token},n="";"pdf"===t?n="pdf":"excel"===t&&(n="xls"),(0,r.default)({url:(0,d.baseApi)(this.selectedStore.url_id,this.langId,e+t),method:"GET",headers:s,responseType:"blob",params:{id:this.data.id}}).then(function(e){var s=a.data.trans_no+"_"+t+"."+n,i=window.URL.createObjectURL(new Blob([e.data])),o=document.createElement("a");o.href=i,o.setAttribute("download",s),document.body.appendChild(o),o.click(),a.loading=!1}).catch(function(t){a.loading=!1,a.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error})})},postDataToProfitLoss:function(){var t=this;this.loadingPost=!0,(0,c.postProfitloss)(this.data.id).then(function(e){t.loadData(),t.loadingPost=!1,t.$notify({type:"success",title:"Success",message:"Sukses post ke laba rugi"})}).catch(function(e){t.loadingPost=!1,404!==e.response.data.error.status_code&&t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error})})}}}},SUDN:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},"Wo/Y":function(t,e,a){var s=a("USwo"),n=a("d5R0");s(s.S+s.F*(Number.parseInt!=n),"Number",{parseInt:n})},YDBu:function(t,e,a){t.exports={default:a("vQzd"),__esModule:!0}},c87V:function(t,e,a){"use strict";a.d(e,"a",function(){return s}),a.d(e,"b",function(){return n});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.editable?a("el-card",{staticClass:"card-box",staticStyle:{"margin-top":"20px"}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("strong",[t._v(t._s(t.lang.add_product))])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5"},[a("input-autocomplete",{ref:"InputAutocomplete",attrs:{"fetch-suggestions":t.setQueryString,"searching-products":t.searchingItems,"search-result-products":t.searchData,"new-data":t.newData},on:{select:t.selectProduct}})],1),t._v(" "),a("div",{staticClass:"col-md-3"},[a("el-time-picker",{attrs:{"picker-options":{format:"HH:mm"},"value-format":"HH:mm",placeholder:t.lang.time},model:{value:t.tmp.time,callback:function(e){t.$set(t.tmp,"time",e)},expression:"tmp.time"}})],1),t._v(" "),a("div",{staticClass:"col-md-4"},[a("el-input-number",{nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addDataTable.apply(null,arguments)}},model:{value:t.tmp.qty,callback:function(e){t.$set(t.tmp,"qty",e)},expression:"tmp.qty"}}),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",disabled:t.isButtonDisabled},on:{click:t.addDataTable}})],1)])]):t._e(),t._v(" "),a("el-card",{staticClass:"card-box",staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"table-responsive"},[a("el-table",{ref:"stocksTable",staticStyle:{width:"100%"},attrs:{data:t.dataTable,stripe:""}},[a("el-table-column",{attrs:{type:"index",width:"50"}}),t._v(" "),a("el-table-column",{attrs:{label:t.lang.name},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{staticClass:"flex-container flex-container--wrap"},[e.row.product_photo_md?a("div",{staticClass:"mr-4"},[a("el-avatar",{attrs:{src:e.row.product_photo_md}})],1):t._e(),t._v(" "),null!==e.row.product_sku?a("div",[e.row.product_sku.length>0?a("strong",[t._v(t._s(e.row.product_name)+" - "+t._s(e.row.product_sku))]):a("strong",[t._v(t._s(e.row.product_name))]),t._v(" "),null!==e.row.product_variant_id?a("div",[null!==e.row.product_variant_sku?a("p",[t._v(t._s(e.row.product_variant_name)+" - "+t._s(e.row.product_variant_sku))]):a("p",[t._v(t._s(e.row.product_variant_name))])]):t._e()]):a("div",[a("strong",[t._v(t._s(e.row.product_name))]),t._v(" "),null!==e.row.product_variant_id?a("div",[null!==e.row.product_variant_sku?a("p",[t._v(t._s(e.row.product_variant_name)+" - "+t._s(e.row.product_variant_sku))]):a("p",[t._v(t._s(e.row.product_variant_name))])]):t._e()])])}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.lang.time,width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.isEditing.id===e.row.id?[a("el-time-picker",{attrs:{"picker-options":{format:"HH:mm"},"value-format":"HH:mm",placeholder:t.lang.time},model:{value:t.isEditing.time,callback:function(e){t.$set(t.isEditing,"time",e)},expression:"isEditing.time"}})]:[t._v("\n              "+t._s(e.row.ftime)+"\n            ")]]}}])}),t._v(" "),t.editable?a("el-table-column",{attrs:{label:t.lang.qty,width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.isEditing.id===e.row.id?[a("el-input",{attrs:{min:1,type:"number"},model:{value:t.isEditing.qty,callback:function(e){t.$set(t.isEditing,"qty",e)},expression:"isEditing.qty"}})]:[t._v("\n              "+t._s(e.row.qty)+" "+t._s(e.row.product_uom)+"\n            ")]]}}],null,!1,2369633415)}):t._e(),t._v(" "),!t.editable||"dev"!==t.stageLevel&&"sit"!==t.stageLevel?t._e():a("el-table-column",{attrs:{label:t.$lang[t.langId].qty_diff,width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.isEditing.id===e.row.id?[t._v("\n               "+t._s(e.row.qty_diff-e.row.fqty_system)+" \n            ")]:[t._v("\n              "+t._s(e.row.qty_diff-e.row.fqty_system)+" \n            ")]]}}],null,!1,4286378953)}),t._v(" "),t.editable?t._e():a("el-table-column",{attrs:{label:t.lang.system_qty,prop:"qty_sys",width:"120"}}),t._v(" "),t.editable?t._e():a("el-table-column",{attrs:{label:t.lang.actual_qty,prop:"qty",width:"120"}}),t._v(" "),t.editable?t._e():a("el-table-column",{attrs:{label:t.lang.difference,prop:"qty_diff",width:"120"}}),t._v(" "),t.editable?a("el-table-column",{attrs:{label:t.$lang[t.langId].action,width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{disabled:t.isProgressing,type:"text"},on:{click:function(a){return t.removeDialog(e.row)}}},[a("svg-icon",{attrs:{"icon-class":"trash"}})],1),t._v(" "),t.isEditing.id===e.row.id?[a("el-button",{attrs:{disabled:t.isProgressing,icon:"el-icon-check",type:"success",size:"mini"},on:{click:function(e){return t.save(t.isEditing)}}}),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:t.cancel}},[a("svg-icon",{attrs:{"icon-class":"x"}})],1)]:[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.edit(e.row)}}},[a("svg-icon",{attrs:{"icon-class":"edit-2"}})],1)]]}}],null,!1,164618854)}):t._e()],1)],1)]),t._v(" "),a("el-dialog",{attrs:{visible:t.deleteDialog,width:"50%",center:"","close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(e){t.deleteDialog=e}}},[a("span",{attrs:{slot:"title"},slot:"title"},[a("svg-icon",{staticStyle:{stroke:"#F44336"},attrs:{"icon-class":"alert-triangle"}}),t._v("\n      "+t._s(t.lang.notif_warn)+"\n    ")],1),t._v(" "),a("div",{staticClass:"text-center"},[a("p",[t._v(t._s(this.$lang[t.langId].are_you_want_remove)+" "+t._s(t.lang.product))]),t._v(" "),a("div",[a("img",{staticClass:"table-image table-image-80",attrs:{src:t.deleteData.product_photo_md,alt:t.deleteData.product_photo_md}}),t._v(" "),a("span",{staticStyle:{"margin-left":"10px"}},[a("strong",[t._v('"'+t._s(t.deleteData.product_name)+'"')])])])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.deleteCancel}},[t._v(t._s(t.lang.cancel))]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:t.deleteSave}},[t._v(t._s(t.$lang[t.langId].delete))])],1)])],1)},n=[]},d5R0:function(t,e,a){var s=a("7whZ").parseInt,n=a("jM5n").trim,i=a("SUDN"),o=/^[-+]?0[xX]/;t.exports=8!==s(i+"08")||22!==s(i+"0x16")?function(t,e){var a=n(String(t),3);return s(a,e>>>0||(o.test(a)?16:10))}:s},dAdd:function(t,e,a){"use strict";a.r(e);var s=a("Mnrz"),n=a.n(s);for(var i in s)["default"].indexOf(i)<0&&function(t){a.d(e,t,function(){return s[t]})}(i);e.default=n.a},jM5n:function(t,e,a){var s=a("USwo"),n=a("yQFZ"),i=a("S4vA"),o=a("SUDN"),r="["+o+"]",d=RegExp("^"+r+r+"*"),l=RegExp(r+r+"*$"),c=function(t,e,a){var n={},r=i(function(){return!!o[t]()||"​"!="​"[t]()}),d=n[t]=r?e(u):o[t];a&&(n[a]=d),s(s.P+s.F*r,"String",n)},u=c.trim=function(t,e){return t=String(n(t)),1&e&&(t=t.replace(d,"")),2&e&&(t=t.replace(l,"")),t};t.exports=c},sFg5:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.importTemplateOpname=function(t){return(0,s.service)({url:"/stockopname/templateimport",responseType:"blob",params:t})},e.postProfitloss=function(t){return(0,s.service)({url:"/stockopname/postprofitloss/"+t,method:"post"})};var s=a("xCek")},vQzd:function(t,e,a){a("Wo/Y"),t.exports=a("VSTI").Number.parseInt}}]);