(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-659c"],{"+NSn":function(t,e,a){"use strict";a.d(e,"a",function(){return s}),a.d(e,"b",function(){return n});var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{md:18}},[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"box-card",attrs:{shadow:"never"}},[a("div",{staticClass:"table-handler-flex",attrs:{slot:"header"},slot:"header"},[a("div",[a("h4",[t._v(t._s(t.$lang[t.langId].stock_alert))]),t._v(" "),a("p",[t._v(t._s(t.$lang[t.langId].info_alert_stock))])])]),t._v(" "),a("div",{staticClass:"card-body"},[a("h3",[t._v(t._s(t.$lang[t.langId].email_recipient))]),t._v(" "),t.data.stock_alert_to_emails&&t.data.stock_alert_to_emails.length?t._l(t.data.stock_alert_to_emails,function(e){return a("el-tag",{key:e,staticClass:"tag-samping-sampingan",attrs:{"disable-transitions":!1,closable:t.checkCustomPermission("inventory/emailstockalert","destroy"),size:"default",type:"success"},on:{close:function(a){return t.handleClose(e)}}},[t._v("\n              "+t._s(e)+"\n            ")])}):t._e(),t._v(" "),t.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm.apply(null,arguments)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):t._e(),t._v(" "),t.inputVisible?t._e():a("button-action-authenticated",{staticClass:"button-new-tag",attrs:{permission:["inventory/emailstockalert","store"],size:"small"},on:{click:t.showInput}},[t._v("\n            + "+t._s(t.lang.add)+"\n          ")])],2)])],1)],1)],1)},n=[]},"0Y2i":function(t,e,a){"use strict";a.r(e);var s=a("tJEt"),n=a.n(s);for(var i in s)["default"].indexOf(i)<0&&function(t){a.d(e,t,function(){return s[t]})}(i);e.default=n.a},"e//G":function(t,e,a){"use strict";a.r(e);var s=a("+NSn"),n=a("0Y2i");for(var i in n)["default"].indexOf(i)<0&&function(t){a.d(e,t,function(){return n[t]})}(i);var o=a("KHd+"),l=Object(o.a)(n.default,s.a,s.b,!1,null,null,null);l.options.__file="Index.vue",e.default=l.exports},tJEt:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=l(a("m1cH")),n=a("xCek"),i=l(a("vDqi")),o=a("6y4V");function l(t){return t&&t.__esModule?t:{default:t}}e.default={name:"StockAlert",mixins:[o.checkCustomPermission],data:function(){return{loading:!1,inputVisible:!1,inputValue:"",data:{}}},computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},langId:function(){return this.$store.state.userStores.langId},lang:function(){return this.$store.state.userStores.lang}},watch:{"$store.getters.selectedStore":function(){this.getData()}},methods:{getData:function(){var t=this;if(![].concat((0,s.default)(document.getElementById("app").classList)).includes("dummy-page")){this.loading=!0;var e={Authorization:"Bearer "+this.token.access_token};(0,i.default)({method:"GET",url:(0,n.baseApi)(this.selectedStore.url_id,this.langId,"emailstockalert"),params:this.params,headers:e}).then(function(e){t.data=e.data.data,t.data.stock_alert_to_emails?null===t.data.stock_alert_to_emails&&(t.data.stock_alert_to_emails=""):t.data.stock_alert_to_emails="",t.data.stock_alert_to_emails.length>0&&(t.data.stock_alert_to_emails=t.data.stock_alert_to_emails.split(",")),t.loading=!1}).catch(function(){t.loading=!1})}},save:function(){var t=this;this.loading=!0;var e={Authorization:"Bearer "+this.token.access_token},a={};a.stock_alert_to_emails=[].concat((0,s.default)(this.data.stock_alert_to_emails)),a.stock_alert_to_emails=a.stock_alert_to_emails.join(","),(0,i.default)({method:"POST",url:(0,n.baseApi)(this.selectedStore.url_id,this.langId,"emailstockalert"),headers:e,data:a}).then(function(e){0!==e.data.data.stock_alert_to_emails.length&&(t.data=e.data.data),t.data.stock_alert_to_emails||(t.data.stock_alert_to_emails=""),t.data.stock_alert_to_emails=t.data.stock_alert_to_emails.split(","),t.$message({type:"success",message:"Saved"}),t.loading=!1}).catch(function(e){t.getData(),t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error.stock_alert_to_emails[0]}),t.loading=!1})},handleClose:function(t){this.data.stock_alert_to_emails.splice(this.data.stock_alert_to_emails.indexOf(t),1),this.save()},showInput:function(){var t=this;this.inputVisible=!0,this.$nextTick(function(e){t.$refs.saveTagInput.$refs.input.focus()})},handleInputConfirm:function(){var t=this.inputValue;t&&(void 0!==this.data.stock_alert_to_emails&&"string"!=typeof this.data.stock_alert_to_emails?this.data.stock_alert_to_emails.push(t):this.data.stock_alert_to_emails=[t]),console.log("data1",this.data.stock_alert_to_emails),this.inputVisible=!1,this.inputValue="",this.save()}},mounted:function(){this.getData()}}}}]);