(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-42f7"],{BL5S:function(t,e,a){"use strict";a.r(e);var r=a("HzGV"),s=a("f6Ot");for(var n in s)["default"].indexOf(n)<0&&function(t){a.d(e,t,function(){return s[t]})}(n);var o=a("KHd+"),i=Object(o.a)(s.default,r.a,r.b,!1,null,null,null);i.options.__file="_table-salesreport.vue",e.default=i.exports},DChC:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(a("QbLZ")),s=n(a("Ljqw"));function n(t){return t&&t.__esModule?t:{default:t}}var o={mixins:[a("6y4V").checkCustomPermission],computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},langId:function(){return this.$store.state.userStores.langId},lang:function(){return this.$store.state.userStores?this.$store.state.userStores.lang:{}},userRole:function(){var t=this.$store.getters.selectedStore;return{role_id:t.role_id,role_name:t.role_name,is_pos_only:t.is_pos_only,is_mobile:t.is_mobile}},rootLang:function(){return this.$lang[this.langId]},headers:function(){var t=this.$store.getters.token;return this.$store.getters.webviewMode&&(t=this.$store.getters.webviewToken),{Authorization:"Bearer "+t.access_token}},baseURL:function(){return s.default},loggedInUser:function(){return this.$store.state.user.loggedInUser},stageLevel:function(){return"sit"},defaultAccessByStore:function(){return["setdemo1","allinolsera2"]},wejayafoodAccessByStore:function(){return["setdemo1","allinolsera2","ayammrotholpusat","ayammrotholdramaga"]},saveToAllAccessStore:function(){return["setdemo1","allinolsera2","siliwangidutagarden","barokahfrozenfood"]},outlets:function(){var t=[{name:this.$store.state.userStores.lang.all,store_id:0,url_id:"all"}],e=[];return this.$store.getters.stores.map(function(a){e.includes(a.store_id)||a.is_store_active&&(t.push((0,r.default)({},a)),e.push(a.store_id))}),t},tokopediaActiveStore:function(){return this.$store.state.tokopediaActiveStore},shopeeActiveStore:function(){return this.$store.state.shopeeActiveStore}}};e.default=o},HzGV:function(t,e,a){"use strict";a.d(e,"a",function(){return r}),a.d(e,"b",function(){return s});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("hr"),t._v(" "),a("bs-table",{attrs:{header:[t.lang.order_no,t.lang.date,t.lang.subtotal,t.lang.tax,t.lang.service_charge,t.rootLang.rounded,t.lang.paid_amount,t.lang.void]}},[t.data.length>0?t._l(t.data,function(e,r){return a("tr",{key:r},[a("td",[t._v(t._s(e.order_no))]),t._v(" "),a("td",[t._v(t._s(e.forder_time))]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(e.fsubtotal))]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(e.ftax))]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(e.fservice_charge))]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(e.frounding))]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(e.fpaid_amount))]),t._v(" "),a("td",{staticClass:"text-center"},[t._v(t._s(e.voided))])])}):[a("tr",{staticClass:"full-width text-center p-8",staticStyle:{height:"200px"}},[a("td",{attrs:{colspan:"7"}},[t._v(t._s(t.rootLang.no_data))])])]],2),t._v(" "),t.total>0?a("div",{staticClass:"table-handler-bottom"},[a("el-pagination",{attrs:{total:t.total,"page-sizes":[15,50,100],"page-size":t.params.per_page,"current-page":t.currentPage,background:"",layout:"sizes, prev, pager, next"},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"current-change":t.handleChangePage,"size-change":t.handleChangeSizePage}})],1):t._e()],1)},s=[]},JXN2:function(t,e,a){"use strict";a.d(e,"a",function(){return r}),a.d(e,"b",function(){return s});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"report-page"},[a("report-list",{attrs:{showlist:t.showlist,"selected-report-by-search":t.selectedReportBySearch,paths:t.paths},on:{"update:selectedReportBySearch":function(e){t.selectedReportBySearch=e},"update:selected-report-by-search":function(e){t.selectedReportBySearch=e},"show-report":t.showReport}}),t._v(" "),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"table-handler-flex",attrs:{slot:"header"},slot:"header"},[a("h4",{staticClass:"pointer",staticStyle:{"flex-grow":"1"},on:{click:t.toggleReportList}},[a("span",{staticClass:"trigger-open-report-list"},[a("svg-icon",{attrs:{"icon-class":"arrow-left"}})],1),t._v("\n        "+t._s(t.activeReport.label)+"\n      ")]),t._v(" "),a("div",[t.activeReport.withoutDate?t._e():a("date-range-picker",{attrs:{"init-date":t.initParamDate,size:"mini"},on:{picked:t.getDataFiltered}}),t._v(" "),a("el-button",{attrs:{loading:t.loadingDownloadPdf,size:"mini",icon:"el-icon-printer"},on:{click:function(e){return t.getPDF(t.activeReport.path)}}},[t._v("\n          PDF\n        ")]),t._v(" "),a("el-button",{attrs:{loading:t.loadingDownloadExcel,size:"mini",icon:"el-icon-document"},on:{click:function(e){return t.getExcel(t.activeReport.path)}}},[t._v("\n          EXCEL\n        ")])],1)]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"card-body"},[a(t.loadedComponent,{tag:"component",attrs:{data:t.data,summary:t.summary,lang:t.lang,"lang-id":t.langId,total:t.total,token:t.token,store:t.selectedStore,params:t.params,"current-page":t.params.page},on:{changePage:t.handleChangePage,changeSizePage:t.handleChangeSizePage}})],1)])],1)},s=[]},Sk6Z:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){return t&&t.__esModule?t:{default:t}}(a("DChC"));e.default={name:"TableSalesdetailsTaxRole",props:["data","lang","summary","langId","total","currentPage","params"],mixins:[r.default],methods:{showDetailData:function(t,e){this.$emit("showdetaildata",t,e)},handleChangePage:function(t){this.$emit("changePage",t),this.$emit("currentPage",this.currentPage)},handleChangeSizePage:function(t){this.currentPage=1,this.$emit("changeSizePage",t)}}}},f6Ot:function(t,e,a){"use strict";a.r(e);var r=a("Sk6Z"),s=a.n(r);for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,function(){return r[t]})}(n);e.default=s.a},fYnA:function(t,e,a){"use strict";a.r(e);var r=a("fmBH"),s=a.n(r);for(var n in r)["default"].indexOf(n)<0&&function(t){a.d(e,t,function(){return r[t]})}(n);e.default=s.a},fmBH:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=u(a("14Xm")),s=u(a("D3Ub")),n=u(a("QbLZ")),o=(a("xCek"),u(a("vDqi")),u(a("hogc"))),i=a("raKf"),l=u(a("BL5S")),d=u(a("5QMf")),c=u(a("lj28"));function u(t){return t&&t.__esModule?t:{default:t}}var p=a("wd/R");p().format("YYYY-MM-DD"),p().format("YYYY-MM-DD");e.default={name:"ReportSalesTaxRole",components:{dateRangePicker:o.default,TableSalesreport:l.default,ReportList:d.default},mixins:[c.default],data:function(){return{loading:!1,data:[],summary:[],showlist:!0,selectedReportBySearch:"salessummary",paths:[{path:"salesreport",label:this.$lang[this.$store.state.userStores.langId].sales_report,path_key:"sales_report",active:!0}],params:{start_date:"",end_date:"",per_page:15},date:{start_date:p().format("YYYY-MM-DD"),end_date:p().format("YYYY-MM-DD")},total:0,productstock_SortTypes:["name","category","stock_qty"],storeBranches:[],dataEmployee:[],loadingDownloadPdf:!1,loadingDownloadExcel:!1}},watch:{"$store.getters.selectedStore":function(){this.getData(this.activeReport.path)},lang:{handler:function(t){this.paths.map(function(t){console.log("pat",t.path_key)})},deep:!0,immediate:!0}},mounted:function(){},methods:{getData:function(t,e){var a=this;this.data=[],this.summary=[],this.loading=!0,(0,i.salesdetailtaxrole)(this.params).then(function(t){a.data=t.data.data,t.data.totaldata&&(a.summary=t.data.totaldata),t.data.meta&&(a.total=t.data.meta.total),a.loading=!1}).catch(function(t){a.loading=!1,404!==t.response.status&&(a.$notify({type:"error",title:"Error"+t.response.status,message:t.response.statusText}),a.loading=!1),a.data=[],a.total=0,a.loading=!1})},getFileMobile:function(t,e){this.setLocalStorageForBackAfterDownload();var a=this.activeReport.label+"-"+this.params.start_date+"__"+this.params.end_date+"."+e,r="?from="+this.params.start_date+"&to="+this.params.end_date+"&type="+e,s="/download/api/"+this.selectedStore.url_id+"/admin/v1/"+this.langId+"/salesreports/taxation/salesdetails/"+t;window.location.href=s+r+","+a},getPDF:function(t){var e=this;if(this.$store.getters.webviewMode)this.getFileMobile(t,"pdf");else{this.loadingDownloadPdf=!0;this.token.access_token;var a=(0,n.default)({},this.params);a.type="pdf",(0,i.downloadSalesdetailtaxrole)(a).then(function(t){e.loadingDownloadPdf=!1;var a=e.activeReport.label+"-"+e.params.start_date+"__"+e.params.end_date+".pdf",r=window.URL.createObjectURL(new Blob([t.data])),s=document.createElement("a");s.href=r,s.setAttribute("download",a),document.body.appendChild(s),s.click()}).catch(function(t){e.loadingDownloadPdf=!1})}},getExcel:function(t){var e=this;if(this.$store.getters.webviewMode)this.getFileMobile(t,"xlsx");else{this.loadingDownloadExcel=!0;this.token.access_token;var a=(0,n.default)({},this.params);a.type="xlsx",(0,i.downloadSalesdetailtaxrole)(a).then(function(t){var a=e.activeReport.label+"-"+e.params.start_date+"__"+e.params.end_date+".xlsx",r=window.URL.createObjectURL(new Blob([t.data])),s=document.createElement("a");s.href=r,s.setAttribute("download",a),document.body.appendChild(s),s.click(),e.loadingDownloadExcel=!1}).catch(function(t){e.loadingDownloadExcel=!1})}},showReport:function(t,e){var a=this;return(0,s.default)(r.default.mark(function e(){var s;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.paths.map(function(t){return t.active=!1,t});case 2:return a.paths=e.sent,e.next=5,a.paths.map(function(e){return e.path===t&&(e.active=!0),e});case 5:a.paths=e.sent,s="/reports/salestaxrole",a.$store.getters.webviewMode&&(s="/reports-mobile/salestaxrole"),a.params.start_date=p().format("YYYY-MM-DD"),a.params.end_date=p().format("YYYY-MM-DD"),a.$router.push({path:s,query:{path:t}}),a.getData(t);case 12:case"end":return e.stop()}},e,a)}))()},getDataFiltered:function(t){t?(this.date=t,this.params.end_date=this.date.end_date,this.params.start_date=this.date.start_date,this.getData(this.activeReport.path)):this.getData(this.activeReport.path)},handleChangePage:function(t){this.params.page=t;this.getData(this.activeReport.path,!0)},handleChangeSizePage:function(t){this.params.per_page=t,this.params.page=1;this.getData(this.activeReport.path,!0)},handleFilterbyEmployee:function(){this.params.page=1,this.getData()}},beforeRouteEnter:function(t,e,a){var n=this,o="summary";t.query.path&&(o=t.query.path),a(function(){var t=(0,s.default)(r.default.mark(function t(a){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.setDefaultParamsFromLocalStorage(a,e);case 2:a.paths&&(a.paths=a.paths.map(function(t){return t.path===o?t.active=!0:t.active=!1,t}));case 3:case"end":return t.stop()}},t,n)}));return function(e){return t.apply(this,arguments)}}())}}},qdJu:function(t,e,a){"use strict";a.r(e);var r=a("JXN2"),s=a("fYnA");for(var n in s)["default"].indexOf(n)<0&&function(t){a.d(e,t,function(){return s[t]})}(n);var o=a("KHd+"),i=Object(o.a)(s.default,r.a,r.b,!1,null,null,null);i.options.__file="Index.vue",e.default=i.exports},raKf:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.salesbysalesmanDetail=function(t){return(0,r.service)({url:"/salesreports/salesitemsbydate",params:t})},e.comissionbyserverDetail=function(t){return(0,r.service)({url:"/salesreports/salesitemsbydate",params:t})},e.salesdetail=function(t){return(0,r.service)({url:"/salesreports/salesdetails",params:t})},e.salesdetailtaxrole=function(t){return(0,r.service)({url:"/salesreports/taxation/salesdetails",method:"GET",params:t})},e.downloadSalesdetailtaxrole=function(t){return(0,r.service)({url:"/salesreports/taxation/salesdetails",method:"GET",params:t,responseType:"blob"})};var r=a("xCek")}}]);