(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-12f1","chunk-2563","chunk-25638"],{"1BPP":function(t,e,i){"use strict";
/**
 * Vue Currency Input 1.20.3
 * (c) 2018-2020 Matthias Stiller
 * @license MIT
 */
function a(t,e,i){var a=document.createEvent("CustomEvent");a.initCustomEvent(e,!0,!0,i),t.dispatchEvent(a)}i.r(e),i.d(e,"CurrencyDirective",function(){return S}),i.d(e,"CurrencyInput",function(){return D}),i.d(e,"parseCurrency",function(){return p}),i.d(e,"setValue",function(){return h});var s=function(t,e,i){return e&&null!=t?Number(t.toFixed(i).split(".").join("")):t},n=function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},o=function(t){return t.replace(/^0+(0$|[^0])/,"$1")},r=function(t,e){return(t.match(new RegExp(n(e),"g"))||[]).length},l=function(t,e){return t.substring(0,e.length)===e},c=function(t,e){return t.substring(0,t.indexOf(e))},d=[",",".","Ù«"],u=function(t){var e=t.currency,i=t.locale,a=t.precision,s=t.autoDecimalMode,n=t.valueAsInteger,o=new Intl.NumberFormat(i,"string"==typeof e?{currency:e,style:"currency"}:{minimumFractionDigits:1}),l=o.format(123456);this.locale=i,this.currency=e,this.digits=[0,1,2,3,4,5,6,7,8,9].map(function(t){return t.toLocaleString(i)}),this.decimalSymbol=r(l,this.digits[0])?l.substr(l.indexOf(this.digits[6])+1,1):void 0,this.groupingSymbol=l.substr(l.indexOf(this.digits[3])+1,1),this.minusSymbol=c(Number(-1).toLocaleString(i),this.digits[1]),void 0===this.decimalSymbol?this.minimumFractionDigits=this.maximumFractionDigits=0:"number"==typeof a?this.minimumFractionDigits=this.maximumFractionDigits=a:"object"!=typeof a||s||n?"string"==typeof e?(this.minimumFractionDigits=o.resolvedOptions().minimumFractionDigits,this.maximumFractionDigits=o.resolvedOptions().maximumFractionDigits):this.minimumFractionDigits=this.maximumFractionDigits=2:(this.minimumFractionDigits=a.min||0,this.maximumFractionDigits=void 0!==a.max?a.max:20),"string"==typeof e?(this.prefix=c(l,this.digits[1]),this.negativePrefix=c(o.format(-1),this.digits[1]),this.suffix=l.substring(l.lastIndexOf(this.decimalSymbol?this.digits[0]:this.digits[6])+1)):(this.prefix=(e||{}).prefix||"",this.negativePrefix=""+this.minusSymbol+this.prefix,this.suffix=(e||{}).suffix||"")};u.prototype.parse=function(t){var e=this.isNegative(t);t=this.normalizeDigits(t),t=this.stripCurrencySymbol(t),t=this.stripMinusSymbol(t);var i=this.decimalSymbol?"("+n(this.decimalSymbol)+"\\d*)?":"",a=t.match(new RegExp("^"+this.integerPattern()+i+"$"));return a?Number((e?"-":"")+this.onlyDigits(a[1])+"."+this.onlyDigits(a[3]||"")):null},u.prototype.format=function(t,e){return void 0===e&&(e={minimumFractionDigits:this.minimumFractionDigits,maximumFractionDigits:this.maximumFractionDigits}),"string"==typeof this.currency?t.toLocaleString(this.locale,Object.assign({},{style:"currency",currency:this.currency},e)):this.insertCurrencySymbol(Math.abs(t).toLocaleString(this.locale,e),t<0||0===t&&1/t<0)},u.prototype.integerPattern=function(){return"(0|[1-9]\\d{0,2}("+n(this.groupingSymbol)+"?\\d{3})*)"},u.prototype.toFraction=function(t){return""+this.digits[0]+this.decimalSymbol+this.onlyLocaleDigits(t.substr(1)).substr(0,this.maximumFractionDigits)},u.prototype.isFractionIncomplete=function(t){return!!this.normalizeDigits(t).match(new RegExp("^"+this.integerPattern()+n(this.decimalSymbol)+"$"))},u.prototype.isNegative=function(t){return l(t,this.negativePrefix)||l(t.replace("-",this.minusSymbol),this.minusSymbol)},u.prototype.insertCurrencySymbol=function(t,e){return""+(e?this.negativePrefix:this.prefix)+t+this.suffix},u.prototype.stripMinusSymbol=function(t){return t.replace("-",this.minusSymbol).replace(this.minusSymbol,"")},u.prototype.stripCurrencySymbol=function(t){return t.replace(this.negativePrefix,"").replace(this.prefix,"").replace(this.suffix,"")},u.prototype.normalizeDecimalSymbol=function(t,e){var i=this;return d.forEach(function(a){t=t.substr(0,e)+t.substr(e).replace(a,i.decimalSymbol)}),t},u.prototype.normalizeDigits=function(t){return"0"!==this.digits[0]&&this.digits.forEach(function(e,i){t=t.replace(new RegExp(e,"g"),i)}),t},u.prototype.onlyDigits=function(t){return this.normalizeDigits(t).replace(/\D+/g,"")},u.prototype.onlyLocaleDigits=function(t){return t.replace(new RegExp("[^"+this.digits.join("")+"]*","g"),"")};var m={locale:void 0,currency:"EUR",valueAsInteger:!1,distractionFree:!0,precision:void 0,autoDecimalMode:!1,valueRange:void 0,allowNegative:!0},p=function(t,e){var i=Object.assign({},m,e),a=new u(i);return s(a.parse(t),i.valueAsInteger,a.maximumFractionDigits)},h=function(t,e){return a(t,"format",{value:e})},v=function(t,e){return t.setSelectionRange(e,e)},_=function(t,e){if(t===e)return!0;if(!t||!e||"object"!=typeof t||"object"!=typeof e)return!1;var i=Object.keys(t);return i.length===Object.keys(e).length&&(!!i.every(Object.prototype.hasOwnProperty.bind(e))&&i.every(function(i){return _(t[i],e[i])}))},f=function(t){this.numberFormat=t};f.prototype.conformToMask=function(t,e){var i=this;void 0===e&&(e="");var a=this.numberFormat.isNegative(t),s=t;s=this.numberFormat.stripCurrencySymbol(s);var n=function(t){if(""===t&&a&&e!==i.numberFormat.negativePrefix)return"";if(i.numberFormat.maximumFractionDigits>0){if(i.numberFormat.isFractionIncomplete(t))return t;if(l(t,i.numberFormat.decimalSymbol))return i.numberFormat.toFraction(t)}return null}(s=this.numberFormat.stripMinusSymbol(s));if(null!=n)return this.numberFormat.insertCurrencySymbol(n,a);var r=s.split(this.numberFormat.decimalSymbol),c=r[0],d=r.slice(1),u=o(this.numberFormat.onlyDigits(c)),m=this.numberFormat.onlyDigits(d.join("")).substr(0,this.numberFormat.maximumFractionDigits),p=d.length>0&&0===m.length,h=""===u&&a&&(e===t.slice(0,-1)||e!==this.numberFormat.negativePrefix);return p||h?e:u.match(/\d+/)?{numberValue:Number((a?"-":"")+u+"."+m),fractionDigits:m}:""};var g=function(t){this.numberFormat=t};g.prototype.conformToMask=function(t){if(""===t)return"";var e=this.numberFormat.isNegative(t),i=""===this.numberFormat.stripMinusSymbol(t)?-0:Number((e?"-":"")+o(this.numberFormat.onlyDigits(t)))/Math.pow(10,this.numberFormat.minimumFractionDigits);return{numberValue:i,fractionDigits:i.toFixed(this.numberFormat.minimumFractionDigits).slice(-this.numberFormat.minimumFractionDigits)}};var y=Math.pow(2,53)-1,b=function(t,e,i){var a=i.$CI_DEFAULT_OPTIONS,s="input"===t.tagName.toLowerCase()?t:t.querySelector("input");if(!s)throw new Error("No input element found");var n=Object.assign({},a||m,e),o=n.distractionFree,r=n.autoDecimalMode,l=n.valueRange;"boolean"==typeof o&&(n.distractionFree={hideCurrencySymbol:o,hideNegligibleDecimalDigits:o,hideGroupingSymbol:o}),n.valueRange=l?{min:void 0!==l.min?Math.max(l.min,-y):-y,max:void 0!==l.max?Math.min(l.max,y):y}:{min:-y,max:y},r?(n.distractionFree.hideNegligibleDecimalDigits=!1,s.setAttribute("inputmode","numeric")):s.setAttribute("inputmode","decimal");var c=new u(n);return s.$ci=Object.assign({},s.$ci||{numberValue:null},{options:n,numberMask:n.autoDecimalMode?new g(c):new f(c),currencyFormat:c}),s},C=function(t,e){var i=t.$ci,n=i.numberValue,o=i.currencyFormat,r=i.options;a(t,e,{numberValue:n=s(n,r.valueAsInteger,o.maximumFractionDigits)})},k=function(t,e,i){void 0===i&&(i=!1);var a=t.$ci,s=a.currencyFormat,n=a.options;x(t,null!=e?s.format(function(t,e){return Math.min(Math.max(t,e.min),e.max)}(e,n.valueRange)):null),(e!==t.$ci.numberValue||i)&&C(t,"change")},x=function(t,e,i){void 0===i&&(i=!1),function(t,e,i){if(null!=e){var a=t.$ci,s=a.focus,n=a.decimalSymbolInsertedAt,o=a.options,r=a.numberMask,l=a.currencyFormat,c=a.previousConformedValue,d=o.allowNegative,u=o.distractionFree;void 0!==n&&(e=l.normalizeDecimalSymbol(e,n),t.$ci.decimalSymbolInsertedAt=void 0);var m,p=r.conformToMask(e,c);if("object"==typeof p){var h=p.numberValue,v=p.fractionDigits,_=l.maximumFractionDigits,f=l.minimumFractionDigits;s&&(f=_),f=i?v.replace(/0+$/,"").length:Math.min(f,v.length),m=h>y?c:l.format(h,{useGrouping:!(s&&u.hideGroupingSymbol),minimumFractionDigits:f,maximumFractionDigits:_})}else m=p;d||(m=m.replace(l.negativePrefix,l.prefix)),s&&u.hideCurrencySymbol&&(m=m.replace(l.negativePrefix,l.minusSymbol).replace(l.prefix,"").replace(l.suffix,"")),t.value=m,t.$ci.numberValue=l.parse(t.value)}else t.value=t.$ci.numberValue=null;t.$ci.previousConformedValue=t.value}(t,e,i),C(t,"input")},w=function(t){t.addEventListener("input",function(e){if(!e.detail){var i=t.value,a=t.selectionStart,s=t.$ci,n=s.currencyFormat,o=s.options;x(t,i),t.$ci.focus&&v(t,function(t,e,i,a,s){var n=a.prefix,o=a.suffix,l=a.decimalSymbol,c=a.maximumFractionDigits,d=a.groupingSymbol,u=e.indexOf(l)+1,m=e.length-i;return Math.abs(t.length-e.length)>1&&i<=u?t.indexOf(l)+1:t.substr(i,1)===d&&r(t,d)===r(e,d)+1?t.length-m-1:(!s.autoDecimalMode&&0!==u&&i>u&&a.onlyDigits(e.substr(u)).length-1===c&&(m-=1),s.distractionFree.hideCurrencySymbol?t.length-m:Math.max(t.length-Math.max(m,o.length),0===n.length?0:n.length+1))}(t.value,i,a,n,o))}},{capture:!0}),t.addEventListener("keypress",function(e){d.includes(e.key)&&(t.$ci.decimalSymbolInsertedAt=t.selectionStart)}),t.addEventListener("format",function(e){var i=t.$ci,a=i.currencyFormat,s=i.options,n=i.numberValue,o=function(t){return s.valueAsInteger&&null!=t?t/Math.pow(10,a.maximumFractionDigits):t}(e.detail.value);n!==o&&k(t,o)}),t.addEventListener("focus",function(){t.$ci.focus=!0;var e=t.$ci.options.distractionFree,i=e.hideCurrencySymbol,a=e.hideGroupingSymbol,s=e.hideNegligibleDecimalDigits;(i||a||s)&&setTimeout(function(){var e=t.value,i=t.selectionStart,a=t.selectionEnd;e&&x(t,e,s),Math.abs(i-a)>0?t.setSelectionRange(0,t.value.length):v(t,function(t,e,i,a){var s=a;return e.distractionFree.hideCurrencySymbol&&(s-=t.prefix.length),e.distractionFree.hideGroupingSymbol&&(s-=r(i.substring(0,a),t.groupingSymbol)),Math.max(0,s)}(t.$ci.currencyFormat,t.$ci.options,e,i))})}),t.addEventListener("blur",function(){t.$ci.focus=!1,null!=t.$ci.numberValue&&k(t,t.$ci.numberValue)}),t.addEventListener("change",function(e){e.detail||C(t,"change")})},S={bind:function(t,e,i){var a=e.value,s=i.context,n=b(t,a,s);w(n),h(n,n.$ci.currencyFormat.parse(n.value))},componentUpdated:function(t,e,i){var a=e.value,s=e.oldValue,n=i.context;if(!_(a,s)){var o=b(t,a,n);k(o,o.$ci.numberValue,!0)}}},D={render:function(t){var e=this;return t("input",{directives:[{name:"currency",value:this.options}],on:Object.assign({},this.$listeners,{change:function(t){t.detail&&e.$emit("change",t.detail.numberValue)},input:function(t){t.detail&&e.value!==t.detail.numberValue&&e.$emit("input",t.detail.numberValue)}})})},directives:{currency:S},name:"CurrencyInput",props:{value:{type:Number,default:null},locale:{type:String,default:void 0},currency:{type:[String,Object],default:void 0},distractionFree:{type:[Boolean,Object],default:void 0},precision:{type:[Number,Object],default:void 0},autoDecimalMode:{type:Boolean,default:void 0},valueAsInteger:{type:Boolean,default:void 0},valueRange:{type:Object,default:void 0},allowNegative:{type:Boolean,default:void 0}},mounted:function(){this.setValue(this.value)},computed:{options:function(){var t=this,e=Object.assign({},this.$CI_DEFAULT_OPTIONS||m);return Object.keys(m).forEach(function(i){void 0!==t[i]&&(e[i]=t[i])}),e}},watch:{value:"setValue"},methods:{setValue:function(t){h(this.$el,t)}}},F={install:function(t,e){void 0===e&&(e={});var i=e.componentName;void 0===i&&(i=D.name);var a=e.directiveName;void 0===a&&(a="currency");var s=e.globalOptions;void 0===s&&(s={}),t.prototype.$CI_DEFAULT_OPTIONS=Object.assign({},m,s),t.component(i,D),t.directive(a,S),t.prototype.$parseCurrency=function(t,e){return void 0===e&&(e={}),p(t,Object.assign({},s,e))}}};"undefined"!=typeof window&&window.Vue&&window.Vue.use(F),e.default=F},"8EUj":function(t,e,i){"use strict";i.r(e);var a=i("rfiO"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,function(){return a[t]})}(n);e.default=s.a},"8saP":function(t,e,i){"use strict";i.r(e);var a=i("A7DA"),s=i("8EUj");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,function(){return s[t]})}(n);var o=i("KHd+"),r=Object(o.a)(s.default,a.a,a.b,!1,null,null,null);r.options.__file="index-old.vue",e.default=r.exports},"8zz7":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=p(i("14Xm")),s=p(i("m1cH")),n=p(i("QbLZ")),o=p(i("D3Ub")),r=i("xCek"),l=p(i("vDqi")),c=p(i("Ckak")),d=p(i("XFEm")),u=p(i("DChC")),m=p(i("8saP"));function p(t){return t&&t.__esModule?t:{default:t}}e.default={components:{InputMoney:c.default,CloseEsc:d.default,LoyaltyPointOld:m.default},mixins:[u.default],data:function(){return{loading:!0,disabledForm:!1,isEditingCustomerTypes:!1,searchingCustomerTypes:!1,searchResultCustomerTypes:[],tmp:[],fresh:{valid_customer_types:[]},data:{with_lpoint:0,valid_customer_types:[],valid_all_customer_types:1},dialogEdit:!1,lpointType:"",show:!1,customerTypes:[],checkAll:0,loadingSave:!1,temp:{},tempValidCustomer:[],dataRedeem:[],tempRedeem:{},dialogEditRedeem:!1,discount_type:0,discount:0,searchingProducts:!1,searchResultProducts:[],dialogHandleAdd:!1,loadingDelete:!1,keywordCustomerType:"",pagination:{},params:{page:1,per_page:5,search:null},pages:[5,10,20]}},computed:{labelSelectedCustomerTypes:function(){var t=this,e=[],i=[];return this.customerTypes.map(function(a){t.temp.valid_customer_types&&t.temp.valid_customer_types.includes(a.id)&&e.push(a.name),t.data.valid_customer_types&&t.data.valid_customer_types.includes(a.id)&&i.push(a.name)}),{temp:this.temp.valid_all_customer_types?"All":e.join(","),saved:this.data.valid_all_customer_types?"All":i.join(",")}},filteredCustomerTypes:function(){var t=this;if(this.show)return this.keywordCustomerType?this.customerTypes.filter(function(e){return e.name.includes(t.keywordCustomerType)}):this.customerTypes}},watch:{"$store.getters.selectedStore":function(){this.refreshView()},data:{handler:function(t){1===t.with_lpoint?this.disabledForm=!1:this.disabledForm=!0},deep:!0,immediate:!0},discount:function(t){0!==this.discount_type&&t>100&&(this.discount=100)}},mounted:function(){this.refreshView()},methods:{refreshView:function(){this.getCustomerTypes(),this.getData(),this.getDataRedeem()},validateNoMinus:function(){this.discount<0&&(this.discount=1),this.tempRedeem.redeemed_points&&this.tempRedeem.redeemed_points<0&&(this.tempRedeem.redeemed_points=1),this.tempRedeem.qty<0&&(this.tempRedeem.qty=1)},getData:function(){var t=this;this.loading=!0;var e={Authorization:"Bearer "+this.token.access_token};(0,l.default)({method:"GET",url:(0,r.baseApi)(this.selectedStore.url_id,this.langId,"loyaltypoint"),headers:e}).then(function(){var e=(0,o.default)(a.default.mark(function e(i){var o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,n.default)({},i.data.data);case 2:if(t.data=e.sent,t.data.valid_customer_types=[],!(o=[].concat((0,s.default)(i.data.data.valid_customer_types))).length){e.next=8;break}return e.next=8,o.map(function(e){t.data.valid_customer_types.push(parseInt(e.id))});case 8:t.loading=!1;case 9:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}()).catch(function(){t.loading=!1})},getDataRedeem:function(){var t=this;this.loading=!0;var e={Authorization:"Bearer "+this.token.access_token};(0,l.default)({method:"GET",url:(0,r.baseApi)(this.selectedStore.url_id,this.langId,"loyaltypointredeem"),headers:e,params:this.params}).then(function(e){t.dataRedeem=e.data.data,t.pagination=e.data.meta,t.loading=!1}).catch(function(e){t.loading=!1,t.pagination={},t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error})})},handleSave:function(){var t=this;return(0,o.default)(a.default.mark(function e(){var i,o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingSave=!0,e.next=3,(0,n.default)({},t.temp);case 3:return i=e.sent,e.next=6,[].concat((0,s.default)(t.temp.valid_customer_types));case 6:i.valid_customer_types=e.sent,i.valid_customer_types.length&&(i.valid_customer_types=i.valid_customer_types.join(",")),o={Authorization:"Bearer "+t.token.access_token},(0,l.default)({method:"POST",url:(0,r.baseApi)(t.selectedStore.url_id,t.langId,"loyaltypoint/update"),headers:o,data:i}).then(function(e){t.getData(),t.loadingSave=!1,t.dialogEdit=!1,t.$message({type:"success",message:"Saved"})}).catch(function(e){t.loadingSave=!1,t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error})});case 10:case"end":return e.stop()}},e,t)}))()},getCustomerTypes:function(){var t=this,e={Authorization:"Bearer "+this.token.access_token};(0,l.default)({method:"GET",url:(0,r.baseApi)(this.selectedStore.url_id,this.langId,"customertype"),params:{per_page:500},headers:e}).then(function(e){t.customerTypes=e.data.data}).catch(function(){})},handleCheckAllChange:function(t){var e=this;this.tempValidCustomer=[],t&&this.customerTypes.map(function(t){e.tempValidCustomer.push(t.id)})},handleEdit:function(){this.temp=(0,n.default)({},this.data),this.dialogEdit=!0},handleCheckCustomerType:function(){this.tempValidCustomer.length!==this.customerTypes.length?this.checkAll=0:this.checkAll=1},editRedeem:function(t){this.tempRedeem=(0,n.default)({},t),parseFloat(this.tempRedeem.discount_amount)?parseFloat(this.tempRedeem.discount_rate)||(this.discount=parseFloat(this.tempRedeem.discount_amount),this.discount_type=0):(this.discount=parseFloat(this.tempRedeem.discount_rate),this.discount_type=1),this.tempRedeem.id&&"P"===this.tempRedeem.type&&this.searchProducts(this.tempRedeem.product_name),this.dialogEditRedeem=!0},searchProducts:function(t){var e=this;this.searchingProducts=!0;var i={Authorization:"Bearer "+this.token.access_token},a={search_column:"name",search_text:t,sort_column:"name",sort_type:"desc",per_page:50};t.length>0&&(0,l.default)({method:"GET",url:(0,r.baseApi)(this.selectedStore.url_id,this.langId,"productvariantsearch"),headers:i,params:a}).then(function(t){e.searchingProducts=!1,e.searchResultProducts=t.data.data.map(function(t){return t})}).catch(function(){e.searchingProducts=!1,e.searchResultProducts=[]})},setProduct:function(t){var e=this;this.searchResultProducts.map(function(i){i.product_id===t&&(e.tempRedeem.valid_product=i)})},handleSaveRedeem:function(){var t=this;this.loadingSave=!0;var e={},i="",a="";if("D"===this.tempRedeem.type&&(e.type="D",e.redeemed_points=this.tempRedeem.redeemed_points,0===this.discount_type?(e.discount_amount=this.discount,e.discount_rate=0):(e.discount_rate=this.discount,e.discount_amount=0)),"P"===this.tempRedeem.type){if("number"!=typeof this.tempRedeem.merge_product_id){var s=this.tempRedeem.merge_product_id.split("|");e.product_id=this.tempRedeem.merge_product_id,e.product_variant_id=s[1]}else e.product_id=this.tempRedeem.merge_product_id;e.type="P",e.redeemed_points=this.tempRedeem.redeemed_points,e.qty=this.tempRedeem.qty}void 0!==this.tempRedeem.id?(i="PUT",a=(0,r.baseApi)(this.selectedStore.url_id,this.langId,"loyaltypointredeem/"+this.tempRedeem.id)):(i="POST",a=(0,r.baseApi)(this.selectedStore.url_id,this.langId,"loyaltypointredeem/"));var n={Authorization:"Bearer "+this.token.access_token};(0,l.default)({method:i,url:a,headers:n,data:e}).then(function(e){t.getDataRedeem(),t.dialogEditRedeem=!1,t.loadingSave=!1}).catch(function(e){t.loadingSave=!1,t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error})})},handleDeleteRedeem:function(){var t=this;this.loadingDelete=!0;var e={Authorization:"Bearer "+this.token.access_token};(0,l.default)({method:"DELETE",url:(0,r.baseApi)(this.selectedStore.url_id,this.langId,"loyaltypointredeem/"+this.tempRedeem.id),headers:e}).then(function(e){t.getDataRedeem(),t.dialogEditRedeem=!1,t.loadingDelete=!1}).catch(function(e){t.loadingDelete=!1,t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error})})},handleAdd:function(t){var e={type:0===t?"D":"P",redeemed_points:0,discount_amount:0,discount_rate:0,product_id:0,product_variant_id:0,qty:0};this.dialogHandleAdd=!1,this.editRedeem(e)},handleEditValidCustomer:function(){var t=this;return(0,o.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.tempValidCustomer=[],!t.temp.valid_all_customer_types){e.next=7;break}return t.checkAll=t.temp.valid_all_customer_types,e.next=5,t.customerTypes.map(function(e){t.tempValidCustomer.push(e.id)});case 5:e.next=9;break;case 7:return e.next=9,t.temp.valid_customer_types.map(function(e){t.tempValidCustomer.push(e)});case 9:t.show=!0;case 10:case"end":return e.stop()}},e,t)}))()},handleDoneSelectCustomerTypes:function(){var t=this;return(0,o.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,[].concat((0,s.default)(t.tempValidCustomer));case 2:return t.temp.valid_customer_types=e.sent,e.next=5,t.checkAll;case 5:t.temp.valid_all_customer_types=e.sent,t.show=!1;case 7:case"end":return e.stop()}},e,t)}))()},handleToggleLPointActivation:function(){this.temp=(0,n.default)({},this.data),this.handleSave()},handleAccept:function(){this.$store.commit("SET_USE_NEW_LPOINT",1)},handleCancelEdit:function(){this.dialogEditRedeem=!1,this.tempRedeem={}},changeCurrentPage:function(t){this.params.currentPage=t,this.params.page=t,this.getDataRedeem()},changePageTable:function(t){this.params.per_page=t,this.getDataRedeem()},handleSearch:function(t){this.params.page=1,this.params.currentPage=1,this.params.search=t,this.getDataRedeem()},handleCloseDialogEdit:function(){this.show||(this.dialogEdit=!1,this.temp={})}}}},A7DA:function(t,e,i){"use strict";i.d(e,"a",function(){return a}),i.d(e,"b",function(){return s});var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("section",{staticClass:"content sales-list no-subpage"},[i("div",{staticClass:"color-warning--bg flex-container radius-10 mb-24 p-18 warning-onlineorder-dashboard",staticStyle:{height:"56px !important"}},[i("div",[i("svg-icon",{staticClass:"font-40",attrs:{"icon-class":"ico-warning-online-order"}})],1),t._v(" "),i("div",{staticClass:"color-white full-width"},[t._v("\n        Loyalty Point Baru â¨. â Tukar Point dengan Produk. â Atur hingga beberapa penukaran. Beralih ke versi baru sekarang!\n      ")]),t._v(" "),i("div",{staticClass:"text-right"},[i("el-button",{staticClass:"color-warning color-warning--soft--bg",on:{click:function(e){t.showWarning=!0}}},[t._v("Pelajari")])],1)]),t._v(" "),i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"card-body flex-container"},[i("div",{staticClass:"full-width font-18 font-bold"},[t._v("\n          Loyalty Point\n        ")]),t._v(" "),i("div",[i("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(e){return t.save(t.data)}},model:{value:t.data.with_lpoint,callback:function(e){t.$set(t.data,"with_lpoint",e)},expression:"data.with_lpoint"}})],1)])]),t._v(" "),i("el-alert",{staticClass:"oldgrey mb-24"},[i("svg-icon",{attrs:{"icon-class":"information-circle"}}),t._v("\n      Setelah diaktifkan, masukkan loyalty point untuk setiap produk. \n      Masa berlaku loyalty point adalah 1 tahun dari tanggal pembelian\n    ")],1),t._v(" "),i("el-card",{staticClass:"box-card"},[i("div",{attrs:{slot:"header"},slot:"header"},[i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{md:12}},[i("h4",[t._v("Konversi Penggunaan")])])],1)],1),t._v(" "),i("div",{staticClass:"card-body"},[i("el-form",{attrs:{"label-position":"top",disabled:t.disabledForm},model:{value:t.data,callback:function(e){t.data=e},expression:"data"}},[i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{md:12}},[i("el-form-item",[i("div",{staticClass:"font-12 text-left"},[t._v("Besar Point")]),t._v(" "),i("el-input",{attrs:{type:"number"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save(t.data)}},model:{value:t.data.lpoint_redeem_point,callback:function(e){t.$set(t.data,"lpoint_redeem_point",e)},expression:"data.lpoint_redeem_point"}},[i("template",{slot:"append"},[t._v("Points")])],2)],1)],1),t._v(" "),i("el-col",{attrs:{md:12}},[i("el-form-item",[i("div",{staticClass:"font-12 text-left"},[t._v("Diskon yang diperoleh")]),t._v(" "),i("el-input",{staticClass:"switch-discount",attrs:{type:"number"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.saveDiscount.apply(null,arguments)}},model:{value:t.discount,callback:function(e){t.discount=e},expression:"discount"}},[i("template",{slot:"append"},[i("el-radio-group",{staticClass:"flex-container",on:{change:t.changeDiscount},model:{value:t.discount_type,callback:function(e){t.discount_type=e},expression:"discount_type"}},[i("el-radio-button",{staticClass:"lpoint-type",attrs:{label:0}},[t._v("\n                        IDR\n                      ")]),t._v(" "),i("el-radio-button",{staticClass:"lpoint-type",attrs:{label:1}},[t._v("\n                        %\n                      ")])],1)],1)],2)],1)],1)],1)],1),t._v(" "),i("div",{attrs:{slot:"header"},slot:"header"},[i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{md:12}},[i("h4",[t._v("Customer")]),t._v(" "),1!==t.data.valid_all_customer_types&&t.data.valid_customer_types?[i("p",{staticClass:"size-12 oldgrey",staticStyle:{"margin-bottom":"0"}},[t._v("\n                "+t._s(t.data.valid_customer_types.length)+" customer type(s)\n              ")])]:t._e()],2),t._v(" "),i("el-col",{staticClass:"text-right",attrs:{md:12}},[t.isEditingCustomerTypes?[i("el-button",{attrs:{disabled:t.disabledSave,size:"small",type:"text"},on:{click:t.cancelEditCustomerTypes}},[t._v("\n                Cancel\n              ")]),t._v(" "),i("el-button",{attrs:{disabled:t.disabledSave,size:"small",icon:"el-icon-check",type:"success"},on:{click:t.saveEditCustomerTypes}},[t._v("\n                Save\n              ")])]:[i("el-button",{attrs:{disabled:t.disabledSave,size:"small",type:"primary",icon:"el-icon-edit"},on:{click:t.editCustomerTypes}},[t._v("\n                Edit\n              ")])]],2)],1)],1),t._v(" "),i("div",{staticClass:"card-body"},[t.isEditingCustomerTypes||0===t.data.valid_all_customer_types?[i("i",{staticClass:"el-icon-check"}),t._v(" Valid untuk tipe customer:\n        ")]:t._e(),t._v(" "),t.isEditingCustomerTypes||1!==t.data.valid_all_customer_types?t._e():i("div",[i("el-alert",{attrs:{title:"valid for all customer types",type:"success","show-icon":""}})],1),t._v(" "),t.isEditingCustomerTypes?i("ul",{staticClass:"list-unstyled list-stripped list-table"},t._l(t.tmp.valid_customer_types,function(e,a){return i("li",{key:a,staticClass:"list-item-relative"},[i("strong",[t._v(t._s(e.name))]),t._v(" "),i("span",{staticClass:"absolute-right"},[i("el-button",{attrs:{type:"text"},on:{click:function(e){return t.removeCustomerType(a)}}},[i("i",{staticClass:"el-icon-close"})])],1)])}),0):i("ul",{staticClass:"list-unstyled list-stripped list-table"},t._l(t.data.valid_customer_types,function(e,a){return i("li",{key:a,staticClass:"list-item-relative"},[i("strong",[t._v(t._s(e.name))])])}),0),t._v(" "),t.isEditingCustomerTypes?i("div",{staticClass:"add-discount-customer"},[i("el-select",{staticStyle:{width:"100%"},attrs:{multiple:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"Add customer types","remote-method":t.searchCustomerTypes,loading:t.searchingCustomerTypes},model:{value:t.fresh.valid_customer_types,callback:function(e){t.$set(t.fresh,"valid_customer_types",e)},expression:"fresh.valid_customer_types"}},t._l(t.searchResultCustomerTypes,function(t,e){return i("el-option",{key:e,attrs:{label:t.name,value:t.id}})}),1),t._v(" "),i("hr"),t._v(" "),i("p",{staticClass:"input-desc oldgrey size-12"},[t._v("Valid untuk semua tipe customer")]),t._v(" "),i("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.tmp.valid_all_customer_types,callback:function(e){t.$set(t.tmp,"valid_all_customer_types",e)},expression:"tmp.valid_all_customer_types"}})],1):t._e()],2)],1)])],1),t._v(" "),t.isHiddenByFeature(t.$store.getters.selectedStore.plan_type_id,"/settings/loyaltypoint")?t._e():i("el-dialog",{staticClass:"dialog-notif-online",attrs:{visible:t.showWarning,"before-close":function(){return t.showWarning=!1},width:"536px"},on:{"update:visible":function(e){t.showWarning=e}}},[i("div",{staticClass:"flex-container",attrs:{slot:"title"},slot:"title"},[i("h4",{staticClass:"dialog-title full-width"},[t._v("\n        Loyalty Point Baru â¨\n      ")])]),t._v(" "),i("div",{staticClass:"px-8 mb-24"},[i("div",{staticClass:"flex-container mb-16"},[i("div",[i("svg-icon",{staticClass:"font-24 mr-8",attrs:{"icon-class":"status_icon"}})],1),t._v(" "),i("div",[t._v("Tukar point dengan Diskon dan Gratis Produk, Baru!")])]),t._v(" "),i("div",{staticClass:"flex-container mb-16"},[i("div",[i("svg-icon",{staticClass:"font-24 mr-8",attrs:{"icon-class":"status_icon"}})],1),t._v(" "),i("div",[t._v("Sekarang Anda bisa mengatur beberapa penukaran point sekaligus")])]),t._v(" "),i("div",{staticClass:"flex-container mb-16"},[i("div",[i("svg-icon",{staticClass:"font-24 mr-8 color-warning",attrs:{"icon-class":"information-circle"}})],1),t._v(" "),i("div",[t._v("Jika telah memutuskan menggunakan versi Baru, Anda tidak dapat menggunakan versi Lama kembali.")])])]),t._v(" "),i("div",[i("el-button",{staticClass:"btn-block",attrs:{type:"primary"},on:{click:function(e){t.showAccept=!0}}},[t._v("Gunakan Loyalty Point Baru")]),t._v(" "),i("el-button",{staticClass:"btn-block",attrs:{type:"info"},on:{click:function(e){t.showWarning=!1}}},[t._v("Tentukan nanti")])],1)]),t._v(" "),t.isHiddenByFeature(t.$store.getters.selectedStore.plan_type_id,"/settings/loyaltypoint")?t._e():i("el-dialog",{attrs:{visible:t.showAccept,"before-close":t.closeAccept,"show-close":!1,width:"536px"},on:{"update:visible":function(e){t.showAccept=e}}},[i("div",{staticClass:"text-center font-18",attrs:{slot:"title"},slot:"title"},[t._v("\n      Apakah Anda yakin beralih menggunakan Loyalty Point Baru?\n    ")]),t._v(" "),i("div",[i("el-button",{staticClass:"btn-block",attrs:{type:"primary",loading:t.loadingAccept},on:{click:t.handleAccept}},[t._v(t._s(t.lang.yes))]),t._v(" "),i("el-button",{staticClass:"btn-block",attrs:{type:"info"},on:{click:function(e){t.showAccept=!1}}},[t._v(t._s(t.lang.back))])],1)])],1)},s=[]},DChC:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(i("QbLZ")),s=n(i("Ljqw"));function n(t){return t&&t.__esModule?t:{default:t}}var o={mixins:[i("6y4V").checkCustomPermission],computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},langId:function(){return this.$store.state.userStores.langId},lang:function(){return this.$store.state.userStores?this.$store.state.userStores.lang:{}},userRole:function(){var t=this.$store.getters.selectedStore;return{role_id:t.role_id,role_name:t.role_name,is_pos_only:t.is_pos_only,is_mobile:t.is_mobile}},rootLang:function(){return this.$lang[this.langId]},headers:function(){var t=this.$store.getters.token;return this.$store.getters.webviewMode&&(t=this.$store.getters.webviewToken),{Authorization:"Bearer "+t.access_token}},baseURL:function(){return s.default},loggedInUser:function(){return this.$store.state.user.loggedInUser},stageLevel:function(){return"sit"},defaultAccessByStore:function(){return["setdemo1","allinolsera2"]},wejayafoodAccessByStore:function(){return["setdemo1","allinolsera2","ayammrotholpusat","ayammrotholdramaga"]},saveToAllAccessStore:function(){return["setdemo1","allinolsera2","siliwangidutagarden","barokahfrozenfood"]},outlets:function(){var t=[{name:this.$store.state.userStores.lang.all,store_id:0,url_id:"all"}],e=[];return this.$store.getters.stores.map(function(i){e.includes(i.store_id)||i.is_store_active&&(t.push((0,a.default)({},i)),e.push(i.store_id))}),t},tokopediaActiveStore:function(){return this.$store.state.tokopediaActiveStore},shopeeActiveStore:function(){return this.$store.state.shopeeActiveStore}}};e.default=o},EIvj:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.useLpointRedeem=function(t){return(0,a.service)({url:"/loyaltypoint/uselpointredeem",method:"POST",data:t})};var a=i("xCek")},QG7c:function(t,e,i){"use strict";i.d(e,"a",function(){return a}),i.d(e,"b",function(){return s});var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"content-wrapper"},[t.data.use_new_version_lpoint||1===t.$store.state.useNewLPoint?i("section",{staticClass:"content sales-list no-subpage"},[i("el-alert",{staticClass:"color-primary mb-24",staticStyle:{background:"#E4F8FF"},attrs:{title:t.lang.info_for_pos_v2,closable:!1,"show-icon":""}}),t._v(" "),i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"card-body"},[i("div",{staticClass:"flex-container"},[i("div",{staticClass:"full-width font-18"},[t._v(t._s(t.lang.loyalty_point))]),t._v(" "),i("div",{staticClass:"text-right flex-container"},[t.data.with_lpoint?i("el-button",{staticClass:"mr-12",attrs:{type:"text"},on:{click:t.handleEdit}},[i("svg-icon",{attrs:{"icon-class":"settings"}})],1):i("el-button",{staticClass:"mr-12",attrs:{disabled:"",type:"text"}},[i("svg-icon",{attrs:{"icon-class":"settings"}})],1),t._v(" "),i("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:t.handleToggleLPointActivation},model:{value:t.data.with_lpoint,callback:function(e){t.$set(t.data,"with_lpoint",e)},expression:"data.with_lpoint"}})],1)]),t._v(" "),i("div",{staticClass:"flex-container mt-16"},[i("div",{staticClass:"full-width"},[t._v("Cara Mendapatkan Point")]),t._v(" "),i("div",{staticClass:"full-width text-right"},[t._v(t._s(0===t.data.lpoint_earn_by_order_amount?t.$lang[t.langId].product_purchase:t.$lang[t.langId].total_order))])])]),t._v(" "),i("div",{staticClass:"flex-container mt-16 color-grey--soft--bg customer-type-lpoint"},[i("div",{staticClass:"full-width"},[t._v("Tipe Pelanggan")]),t._v(" "),i("div",{staticClass:"full-width text-right"},[t._v(t._s(t.labelSelectedCustomerTypes.saved))])])]),t._v(" "),i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"flex-container",attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"full-width"},[i("h4",[t._v("Penukaran Point")])]),t._v(" "),i("div",[i("el-button",{staticClass:"btn-block",attrs:{type:"success"},on:{click:function(e){t.dialogHandleAdd=!0}}},[t._v("\n            "+t._s(t.lang.add)+"\n          ")])],1)]),t._v(" "),i("div",{staticClass:"table-handler-flex mb-16"},[i("div",{staticClass:"mb-4",staticStyle:{"flex-grow":"1"}},[i("el-select",{staticClass:"inline-form",attrs:{placeholder:t.lang.please_select,size:"small"},on:{change:t.changePageTable},model:{value:t.params.per_page,callback:function(e){t.$set(t.params,"per_page",e)},expression:"params.per_page"}},t._l(t.pages,function(e){return i("el-option",{key:e,attrs:{value:e,label:e+" "+t.lang.rows}})}),1)],1),t._v(" "),i("div",{staticClass:"mb-4"},[i("el-input",{staticClass:"inline-form input-search",attrs:{clearable:"",placeholder:t.lang.search+" "+t.lang.loyalty_point,"prefix-icon":"el-icon-search",size:"small"},on:{change:t.handleSearch},model:{value:t.params.search,callback:function(e){t.$set(t.params,"search",e)},expression:"params.search"}})],1)]),t._v(" "),0!==t.dataRedeem.length||t.loading?t._e():i("div",{staticClass:"card_close_date box-card"},[i("div",{staticClass:"no-data-wrapper"},[i("img",{staticClass:"no-data-image",attrs:{src:"/static/img/no-data-point.svg"}})])]),t._v(" "),t.dataRedeem.length||t.loading?i("div",{staticClass:"like-table-wrapper"},t._l(t.dataRedeem,function(e,a){return i("div",{key:a,staticClass:"like-table-wrapper--item"},[i("div",{staticStyle:{"flex-grow":"1"}},["D"===e.type?i("div",{staticClass:"flex-container"},[i("div",{staticClass:"mr-8 lh-1"},[i("el-avatar",{staticStyle:{background:"#FEE8E6"},attrs:{size:40}},[i("span",{staticClass:"color-danger"},[i("svg-icon",{attrs:{"icon-class":"icon-voucher"}})],1)])],1),t._v(" "),i("div",{staticClass:"lh-1"},[parseFloat(e.discount_amount)?i("div",{staticClass:"font-bold font-14"},[t._v(t._s(t.lang.discount)+" "+t._s(e.fdiscount_amount))]):i("div",{staticClass:"font-bold font-14"},[t._v(t._s(t.lang.discount)+" "+t._s(e.discount_rate)+"%")]),t._v(" "),i("div",{staticClass:"font-12 color-info"},[t._v(t._s(e.redeemed_points)+" point")])])]):t._e(),t._v(" "),"P"===e.type?i("div",{staticClass:"flex-container"},[i("div",{staticClass:"mr-8 lh-1"},[i("el-avatar",{staticStyle:{background:"#F2FFEC"},attrs:{size:40}},[i("span",{staticClass:"color-success",staticStyle:{"font-size":"38px"}},[i("svg-icon",{attrs:{"icon-class":"free-product"}})],1)])],1),t._v(" "),i("div",{staticClass:"lh-1"},[i("div",{staticClass:"font-bold font-14"},[t._v(t._s(t.rootLang.free)+" "+t._s(e.product_name))]),t._v(" "),i("div",{staticClass:"font-12 color-info"},[t._v(t._s(e.redeemed_points)+" point")])])]):t._e()]),t._v(" "),i("el-button",{attrs:{type:"text",circle:""},on:{click:function(i){return t.editRedeem(e)}}},[i("svg-icon",{staticClass:"pointer mr-12 color-primary",attrs:{"icon-class":"edit-2"}})],1)],1)}),0):t._e(),t._v(" "),i("div",{staticStyle:{"text-align":"center"}},[i("el-pagination",{attrs:{"current-page":t.pagination.current_page,"page-size":t.pagination.per_page,total:t.pagination.total,layout:"prev, pager, next, jumper"},on:{"update:currentPage":function(e){return t.$set(t.pagination,"current_page",e)},"update:current-page":function(e){return t.$set(t.pagination,"current_page",e)},"current-change":t.changeCurrentPage}})],1)]),t._v(" "),t.show?i("div",{staticClass:"offscreen-right-sidebar offscreen-right-sidebar--zindexplus"},[i("div",{staticClass:"offscreen-right-sidebar--wrapper"},[i("div",{staticClass:"offscreen-right-sidebar--header"},[t._v("\n          Tipe Pelanggan\n          "),i("close-esc",{on:{close:function(e){t.show=!1}}})],1),t._v(" "),i("div",{staticClass:"flex-container px-8",staticStyle:{height:"56px"}},[i("div",{staticClass:"full-width"},[t._v("Semua")]),t._v(" "),i("div",[i("el-checkbox",{attrs:{"true-label":1,"false-label":0,indeterminate:t.isIndeterminate},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}})],1)]),t._v(" "),i("div",[i("el-input",{staticClass:"mb-4",attrs:{"prefix-icon":"el-icon-search",placeholder:"cari"},model:{value:t.keywordCustomerType,callback:function(e){t.keywordCustomerType=e},expression:"keywordCustomerType"}})],1),t._v(" "),i("div",{staticClass:"offscreen-right-sidebar--scrollcontent",staticStyle:{"overflow-y":"hidden"}},[i("perfect-scrollbar",[i("el-checkbox-group",{staticClass:"checkbox-group-block",staticStyle:{"margin-bottom":"25%"},on:{change:t.handleCheckCustomerType},model:{value:t.tempValidCustomer,callback:function(e){t.tempValidCustomer=e},expression:"tempValidCustomer"}},t._l(t.filteredCustomerTypes,function(e,a){return i("el-checkbox",{key:a,attrs:{label:e.id}},[t._v("\n                "+t._s(e.name)+"\n              ")])}),1)],1)],1),t._v(" "),i("div",{staticClass:"offscreen-right-sidebar--footer"},[i("el-button",{staticClass:"btn-block",attrs:{type:"primary"},on:{click:t.handleDoneSelectCustomerTypes}},[t._v("\n            "+t._s(t.rootLang.complete)+"\n          ")])],1)])]):t._e(),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogEdit,"show-close":!1,"close-on-press-escape":!1,"close-on-click-modal":!1,"append-to-body":"","custom-class":"dialog-card"},on:{"update:visible":function(e){t.dialogEdit=e}}},[i("div",{staticClass:"flex-container",attrs:{slot:"title"},slot:"title"},[i("h4",{staticClass:"dialog-title full-width"},[t._v("\n          "+t._s(t.lang.loyalty_point)+"\n        ")]),t._v(" "),i("div",{staticClass:"btn_save_dialog full-width text-right"},[i("el-button",{attrs:{type:"info"},on:{click:t.handleCloseDialogEdit}},[t._v(t._s(t.lang.cancel))]),t._v(" "),i("el-button",{attrs:{loading:t.loadingSave,type:"success"},on:{click:t.handleSave}},[t._v(t._s(t.lang.save))])],1)]),t._v(" "),i("div",[i("div",{staticClass:"full-width"},[i("el-radio-group",{staticClass:"full-width flex-container border border--info",model:{value:t.temp.lpoint_earn_by_order_amount,callback:function(e){t.$set(t.temp,"lpoint_earn_by_order_amount",e)},expression:"temp.lpoint_earn_by_order_amount"}},[i("el-radio-button",{staticClass:"lpoint-type",attrs:{label:0}},[t._v("\n              "+t._s(t.$lang[t.langId].product_purchase)+"\n            ")]),t._v(" "),i("el-radio-button",{staticClass:"lpoint-type",attrs:{label:1}},[t._v("\n              "+t._s(t.$lang[t.langId].total_order)+"\n            ")])],1),t._v(" "),i("div",{staticClass:"flex-container color-grey--soft--bg p-16 radius-10 mb-24 mt-16"},[i("div",{staticClass:"mr-8",staticStyle:{color:"#AFB0AF"}},[i("svg-icon",{staticClass:"style-clock",staticStyle:{"font-size":"20px"},attrs:{"icon-class":"clock"}})],1),t._v(" "),0===t.data.lpoint_earn_by_order_amount?i("p",{staticClass:"input-desc"},[t._v("\n              Point akan diperoleh pelanggan saat membeli produk tertentu. Besar point yang diperoleh dapat diatur pada masing-masing produk\n            ")]):i("p",{staticClass:"input-desc"},[t._v("\n              Point akan diperoleh pelanggan saat membeli dengan minimal total pesanan tertentu sesuai dengan pengaturan berikut\n            ")])]),t._v(" "),1===t.temp.lpoint_earn_by_order_amount?i("div",{staticClass:"mb-16"},[i("div",{staticClass:"font-12 text-left mt-32"},[t._v("Min. Total Pesanan")]),t._v(" "),i("input-money",{model:{value:t.temp.lpoint_earn_spend_amount,callback:function(e){t.$set(t.temp,"lpoint_earn_spend_amount",e)},expression:"temp.lpoint_earn_spend_amount"}}),t._v(" "),i("div",{staticClass:"font-12 text-left mt-16"},[t._v("Point yang diperoleh")]),t._v(" "),i("el-input",{attrs:{type:"number"},model:{value:t.temp.lpoint_earn_points,callback:function(e){t.$set(t.temp,"lpoint_earn_points",e)},expression:"temp.lpoint_earn_points"}},[i("template",{slot:"append"},[t._v("Point")])],2),t._v(" "),i("div",{staticClass:"flex-container border border--grey pl-5 mt-16",staticStyle:{height:"40px"}},[i("div",{staticClass:"full-width font-bold"},[t._v("Berlaku kelipatan")]),t._v(" "),i("div",{staticClass:"text-right",staticStyle:{width:"20%"}},[1===t.temp.lpoint_earn_multipliable?i("span",{staticClass:"mr-12"},[t._v(t._s(t.lang.yes))]):i("span",{staticClass:"mr-12"},[t._v(t._s(t.lang.no))])]),t._v(" "),i("div",{staticClass:"flex-container text-right",staticStyle:{width:"15%"}},[i("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.temp.lpoint_earn_multipliable,callback:function(e){t.$set(t.temp,"lpoint_earn_multipliable",e)},expression:"temp.lpoint_earn_multipliable"}})],1)])],1):t._e(),t._v(" "),i("span",{staticClass:"font-12 mt-16"},[t._v("Berlaku untuk tipe pelanggan")]),t._v(" "),i("div",{staticClass:"flex-container border border--grey pl-5 color-grey--soft--bg pointer",on:{click:t.handleEditValidCustomer}},[i("div",{staticClass:"full-width font-bold p-8"},[t._v("\n              "+t._s(t.labelSelectedCustomerTypes.temp)+"\n            ")]),t._v(" "),i("div",[i("svg-icon",{staticClass:"pointer mr-12 color-primary",attrs:{"icon-class":"edit-2"}})],1)])],1)])]),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogHandleAdd,"show-close":!1,"close-on-press-escape":!1,"custom-class":"dialog-card"},on:{"update:visible":function(e){t.dialogHandleAdd=e}}},[i("div",{staticClass:"flex-container",attrs:{slot:"title"},slot:"title"},[i("h4",{staticClass:"dialog-title full-width"},[t._v("\n          "+t._s(t.rootLang.exchange_with_point)+"\n        ")])]),t._v(" "),i("div",{staticClass:"p-8 flex-container pointer box-shadow border border--info mb-8",on:{click:function(e){return t.handleAdd(0)}}},[i("div",{staticClass:"mr-8 font-24"},[i("svg-icon",{attrs:{"icon-class":"icon-voucher"}})],1),t._v(" "),i("h5",{staticClass:"full-width color-body font-semi-bold"},[t._v(t._s(t.lang.discount))]),t._v(" "),i("div",[i("i",{staticClass:"el-icon-arrow-right"})])]),t._v(" "),i("div",{staticClass:"p-8 flex-container pointer box-shadow border border--info",on:{click:function(e){return t.handleAdd(1)}}},[i("div",{staticClass:"mr-8 font-24"},[i("svg-icon",{attrs:{"icon-class":"icon-free-product"}})],1),t._v(" "),i("h5",{staticClass:"full-width color-body font-semi-bold"},[t._v(t._s(t.rootLang.free_product))]),t._v(" "),i("div",[i("i",{staticClass:"el-icon-arrow-right"})])])]),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogEditRedeem,"show-close":!1,"close-on-press-escape":!1,"custom-class":"dialog-card"},on:{"update:visible":function(e){t.dialogEditRedeem=e}}},[i("div",{staticClass:"flex-container",attrs:{slot:"title"},slot:"title"},["D"===t.tempRedeem.type?i("h4",{staticClass:"dialog-title full-width"},[t._v("\n          "+t._s(t.lang.discount)+"\n        ")]):t._e(),t._v(" "),"P"===t.tempRedeem.type?i("h4",{staticClass:"dialog-title full-width"},[t._v("\n          "+t._s(t.rootLang.free)+" "+t._s(t.lang.product)+"\n        ")]):t._e(),t._v(" "),i("div",{staticClass:"btn_save_dialog full-width text-right"},[i("el-button",{attrs:{type:"info"},on:{click:t.handleCancelEdit}},[t._v(t._s(t.lang.cancel))]),t._v(" "),i("el-button",{attrs:{loading:t.loadingSave,type:"success"},on:{click:t.handleSaveRedeem}},[t._v(t._s(t.lang.save))])],1)]),t._v(" "),i("el-form",{nativeOn:{submit:function(t){t.preventDefault()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSaveRedeem.apply(null,arguments)}}},["D"===t.tempRedeem.type?i("div",[i("div",{staticClass:"flex-container justify-center",staticStyle:{height:"150px",background:"#FEE8E6"}},[i("svg-icon",{staticStyle:{"font-size":"40"},attrs:{"icon-class":"icon-voucher"}})],1),t._v(" "),i("div",{staticClass:"font-12 text-left mt-32"},[t._v("Besar point")]),t._v(" "),i("el-input",{attrs:{type:"number"},on:{input:t.validateNoMinus},model:{value:t.tempRedeem.redeemed_points,callback:function(e){t.$set(t.tempRedeem,"redeemed_points",e)},expression:"tempRedeem.redeemed_points"}},[i("template",{slot:"append"},[t._v("point")])],2),t._v(" "),i("div",{staticClass:"font-12 text-left mt-32"},[t._v("Diskon yang diperoleh")]),t._v(" "),i("el-input",{staticClass:"switch-discount",attrs:{type:"number"},on:{input:function(e){return t.validateNoMinus(e,"discount")}},model:{value:t.discount,callback:function(e){t.discount=e},expression:"discount"}},[i("template",{slot:"append"},[i("el-radio-group",{staticClass:"flex-container",model:{value:t.discount_type,callback:function(e){t.discount_type=e},expression:"discount_type"}},[i("el-radio-button",{staticClass:"lpoint-type",attrs:{label:0}},[t._v("\n                  IDR\n                ")]),t._v(" "),i("el-radio-button",{staticClass:"lpoint-type",attrs:{label:1}},[t._v("\n                  %\n                ")])],1)],1)],2)],1):t._e(),t._v(" "),"P"===t.tempRedeem.type?i("div",[i("div",{staticClass:"flex-container justify-center",staticStyle:{height:"150px",background:"#F2FFEC"}},[i("svg-icon",{staticStyle:{"font-size":"120"},attrs:{"icon-class":"free-product"}})],1),t._v(" "),i("div",{staticClass:"font-12 text-left mt-32"},[t._v("Besar point")]),t._v(" "),i("el-input",{attrs:{type:"number"},on:{input:t.validateNoMinus},model:{value:t.tempRedeem.redeemed_points,callback:function(e){t.$set(t.tempRedeem,"redeemed_points",e)},expression:"tempRedeem.redeemed_points"}},[i("template",{slot:"append"},[t._v("point")])],2),t._v(" "),i("div",{staticClass:"font-12 text-left mt-32"},[t._v("Diskon yang diperoleh")]),t._v(" "),i("el-select",{staticStyle:{width:"100%"},attrs:{debounce:1e3,placeholder:t.lang.info_auto_complete_product,"remote-method":t.searchProducts,loading:t.searchingProducts,filterable:"",remote:"","reserve-keyword":""},on:{change:t.setProduct},model:{value:t.tempRedeem.merge_product_id,callback:function(e){t.$set(t.tempRedeem,"merge_product_id",e)},expression:"tempRedeem.merge_product_id"}},t._l(t.searchResultProducts,function(t){return i("el-option",{key:t.product_id,attrs:{label:t.name,value:t.product_id}})}),1),t._v(" "),i("div",{staticClass:"font-12 text-left mt-32"},[t._v("Qty Produk")]),t._v(" "),i("el-input",{attrs:{type:"number"},on:{input:t.validateNoMinus},model:{value:t.tempRedeem.qty,callback:function(e){t.$set(t.tempRedeem,"qty",e)},expression:"tempRedeem.qty"}})],1):t._e()]),t._v(" "),t.tempRedeem.id?i("el-button",{staticClass:"mt-24 full-width",attrs:{loading:t.loadingDelete,type:"danger"},on:{click:t.handleDeleteRedeem}},[i("svg-icon",{attrs:{"icon-class":"trash"}}),t._v("\n        "+t._s(t.$lang[t.langId].delete)+"\n      ")],1):t._e()],1)],1):i("section",[i("loyalty-point-old",{on:{accept:t.handleAccept}})],1)])},s=[]},q5ka:function(t,e,i){"use strict";i.r(e);var a=i("8zz7"),s=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,function(){return a[t]})}(n);e.default=s.a},rfiO:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=d(i("m1cH")),s=d(i("QbLZ")),n=i("xCek"),o=d(i("vDqi")),r=d(i("1/7n")),l=i("EIvj"),c=i("rOiX");function d(t){return t&&t.__esModule?t:{default:t}}e.default={components:{SvgIcon:r.default},data:function(){return{loading:!0,disabledSave:!1,disabledForm:!1,isEditingCustomerTypes:!1,searchingCustomerTypes:!1,searchResultCustomerTypes:[],tmp:{},fresh:{valid_customer_types:[]},data:{},discount_type:0,discount:0,showWarning:!1,showAccept:!1,loadingAccept:!1,isHiddenByFeature:c.isHiddenByFeature}},computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},lang:function(){return this.$store.state.userStores.lang}},watch:{"$store.getters.selectedStore":function(){this.getData()},data:{handler:function(t){1===t.with_lpoint?this.disabledForm=!1:this.disabledForm=!0},deep:!0,immediate:!0}},mounted:function(){this.getData(!0)},methods:{getData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loading=!0;var i={Authorization:"Bearer "+this.token.access_token};(0,o.default)({method:"GET",url:(0,n.baseApi)(this.selectedStore.url_id,"en","loyaltypoint"),headers:i}).then(function(i){t.data=i.data.data,t.data.lpoint_redeem_discount_pct&&0!==t.data.lpoint_redeem_discount_pct?(t.discount=t.data.lpoint_redeem_discount_pct,t.discount_type=1):(t.discount=t.data.lpoint_redeem_amount,t.discount_type=0),e&&(t.showWarning=!i.data.data.use_new_version_lpoint),t.loading=!1}).catch(function(e){t.data=[],t.loading=!1,t.$notify({type:"warning",title:"Error",message:e})})},save:function(t){var e=this;this.loading=!0,this.disabledSave=!0,1===t.valid_all_customer_types?this.$delete(t,"valid_customer_types"):(t.valid_customer_types=t.valid_customer_types.map(function(t){return t.id}),t.valid_customer_types=t.valid_customer_types.join(","));var i={Authorization:"Bearer "+this.token.access_token};(0,o.default)({method:"POST",url:(0,n.baseApi)(this.selectedStore.url_id,"en","loyaltypoint/update"),headers:i,data:t}).then(function(t){e.data=t.data.data,e.getData(),e.disabledSave=!1,e.loading=!1,e.$message({type:"success",message:"Saved"})}).catch(function(t){e.disabledSave=!1,e.loading=!1,e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error})})},saveCusomerTypes:function(t){var e=this;this.loading=!0,this.disabledSave=!0,this.searchResultCustomerTypes=[];var i={Authorization:"Bearer "+this.token.access_token};(0,o.default)({method:"POST",url:(0,n.baseApi)(this.selectedStore.url_id,"en","loyaltypoint/update"),headers:i,data:t}).then(function(t){e.isEditingCustomerTypes=!1,e.fresh.valid_customer_types=[],e.tmp=t.data.data,e.data=t.data.data,e.disabledSave=!1,e.loading=!1,e.$message({type:"success",message:"Saved"})}).catch(function(t){e.isEditingCustomerTypes=!1,e.fresh.valid_customer_types=[],e.tmp=(0,s.default)({},e.data),e.disabledSave=!1,e.loading=!1,e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error})})},searchCustomerTypes:function(t){var e=this;this.searchingCustomerTypes=!0;var i={Authorization:"Bearer "+this.token.access_token},a={search:t};t.length>0&&(0,o.default)({method:"GET",url:(0,n.baseApi)(this.selectedStore.url_id,"en","customertype"),headers:i,params:a}).then(function(t){e.searchingCustomerTypes=!1,e.searchResultCustomerTypes=t.data.data.map(function(t){return t})}).catch(function(){e.searchingCustomerTypes=!1,e.searchResultCustomerTypes=[]})},removeCustomerType:function(t){this.tmp.valid_customer_types.splice(t,1)},editCustomerTypes:function(){this.isEditingCustomerTypes=!0,this.tmp=(0,s.default)({},this.data),this.tmp.valid_customer_types=[].concat((0,a.default)(this.data.valid_customer_types))},cancelEditCustomerTypes:function(){this.isEditingCustomerTypes=!1,this.tmp={}},saveEditCustomerTypes:function(){var t=(0,s.default)({},this.tmp);if(t.valid_customer_types=[].concat((0,a.default)(this.tmp.valid_customer_types)),this.fresh.valid_customer_types.length>0||0===this.tmp.valid_all_customer_types){var e=this.fresh.valid_customer_types,i=[].concat((0,a.default)(this.tmp.valid_customer_types)),n=(i=i.map(function(t){return t.id})).concat(e),o=[].concat((0,a.default)(n));o=o.join(","),t.valid_customer_types=o,t.valid_all_customer_types=0}else 1===this.tmp.valid_all_customer_types&&this.$delete(t,"valid_customer_types");this.saveCusomerTypes(t)},changeDiscount:function(t){0===t?this.discount=this.data.lpoint_redeem_amount:1===t&&(this.discount=this.data.lpoint_redeem_discount_pct)},saveDiscount:function(){0===this.discount_type?(this.data.lpoint_redeem_amount=this.discount,this.data.lpoint_redeem_discount_pct=0):1===this.discount_type&&(this.data.lpoint_redeem_discount_pct=this.discount),this.save(this.data)},closeAccept:function(){this.showAccept=!1},handleAccept:function(){var t=this;this.loadingAccept=!0;(0,l.useLpointRedeem)({use_new_version_lpoint:1}).then(function(e){t.$emit("accept"),t.showWarning=!1,t.loadingAccept=!1}).catch(function(){t.showWarning=!1,t.loadingAccept=!1})}}}},sSZg:function(t,e,i){"use strict";i.r(e);var a=i("QG7c"),s=i("q5ka");for(var n in s)["default"].indexOf(n)<0&&function(t){i.d(e,t,function(){return s[t]})}(n);var o=i("KHd+"),r=Object(o.a)(s.default,a.a,a.b,!1,null,null,null);r.options.__file="Index.vue",e.default=r.exports}}]);