(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-04fe"],{"2xYm":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"StepProgress",props:{steps:{type:Array,default:function(){return[]},validator:function(t){return t&&t.length>0}},currentStep:{type:Number,default:0},iconClass:{type:String,default:"fa fa-check"},activeColor:{type:String,default:"#1685C7"},passiveColor:{type:String,default:"#AFB0AF"},activeThickness:{type:Number,default:2},passiveThickness:{type:Number,default:2},lineThickness:{type:Number,default:8}},computed:{scaleX:function(){var t=this.currentStep;return t<0?t=0:t>=this.steps.length&&(t=this.steps.length-1),t/(this.steps.length-1)},widthBar:function(){var t=this.steps.length;return"width: "+(t/6==1?100:100-100/t)+"% !important"}}}},"4bOP":function(t,e,s){"use strict";var a=s("g8Mk");s.n(a).a},"5VP8":function(t,e,s){"use strict";s.d(e,"a",function(){return a}),s.d(e,"b",function(){return i});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"step-progress__wrapper",style:t.widthBar},[s("div",{staticClass:"step-progress__wrapper-before",style:"background-color:"+t.passiveColor+"; height:"+t.lineThickness+"px"}),t._v(" "),s("div",{staticClass:"step-progress__bar"},t._l(t.steps,function(e,a){return s("div",{key:a,staticClass:"step-progress__step",class:"step-progress__step--active:"+a===t.currentStep+"; step-progress__step--valid:"+a<t.currentStep,style:"--activeColor :"+t.activeColor+"; --passiveColor :"+t.passiveColor+"; --activeBorder :"+t.activeThickness+"px; --passiveBorder :"+t.passiveThickness+"px"},[s("span",[s("svg-icon",{staticStyle:{color:"#fff"},attrs:{"icon-class":e.status}})],1),t._v(" "),s("div",{staticClass:"step-progress__step-icon"}),t._v(" "),s("div",{staticClass:"step-label-ojol"},[s("el-popover",{attrs:{placement:"top-start",title:"Status",width:"200",trigger:"hover","popper-class":"word-break text-left",content:e.label}},[s("el-button",{attrs:{slot:"reference",type:"text"},slot:"reference"},[s("div",{staticClass:"color-black pointer"},[t._v(t._s(e.status))])])],1)],1)])}),0),t._v(" "),s("div",{staticClass:"step-progress__wrapper-after",style:"transform: scaleX("+t.scaleX+") translateY(-50%) perspective(1000px); background-color:"+t.activeColor+"; height:"+t.lineThickness+"px"}),t._v(" "),s("div",{staticClass:"step-progress__wrapper-before",style:"background-color: "+t.activeColor+"; height:"+t.lineThickness+"px"})])},i=[]},"5ZxY":function(t,e,s){"use strict";s.r(e);var a=s("5VP8"),i=s("KQA1");for(var r in i)["default"].indexOf(r)<0&&function(t){s.d(e,t,function(){return i[t]})}(r);s("4bOP");var n=s("KHd+"),o=Object(n.a)(i.default,a.a,a.b,!1,null,null,null);o.options.__file="stepProgress.vue",e.default=o.exports},"Hi+m":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.openorder=function(t){return(0,a.service)({url:"openorder",method:"GET",params:t})},e.getOrderMarketplace=function(t){return(0,a.service)({url:"/marketplace/order/notification",method:"GET",params:t})},e.findDriver=function(t){return(0,a.service)({url:"/openorder/gosendorder/"+t,method:"GET"})},e.logsDriver=function(t){return(0,a.service)({url:"/openorder/gosendorder/history/"+t,method:"GET"})};var a=s("xCek")},KQA1:function(t,e,s){"use strict";s.r(e);var a=s("2xYm"),i=s.n(a);for(var r in a)["default"].indexOf(r)<0&&function(t){s.d(e,t,function(){return a[t]})}(r);e.default=i.a},Qflq:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.updateStatusOrder=function(t){return(0,a.service)({url:"/openorder/updatestatus",method:"POST",data:t})},e.updateCustomerOrder=function(t){return(0,a.service)({url:"openorder/updatecustomer/",method:"POST",data:t})};var a=s("xCek")},XPGB:function(t,e,s){"use strict";s.r(e);var a=s("kViR"),i=s("hEQs");for(var r in i)["default"].indexOf(r)<0&&function(t){s.d(e,t,function(){return i[t]})}(r);var n=s("KHd+"),o=Object(n.a)(i.default,a.a,a.b,!1,null,null,null);o.options.__file="DetailOrderV2.vue",e.default=o.exports},Yd2Z:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.customer=function(t){return(0,a.service)({url:"customer",method:"GET",params:t})},e.customerTemplate=function(t){return(0,a.service)({url:"customer/importfromcsv",method:"GET",params:t})},e.supplierTemplate=function(t){return(0,a.service)({url:"supplier/importfromcsv",method:"GET",params:t})},e.getCustomerDeposit=function(t){return(0,a.service)({url:"customerdeposittransaction/"+t.id,method:"GET",params:t})},e.getCustomerDetailDeposit=function(t){return(0,a.service)({url:"customerdeposittransaction/"+t.customer_id+"/"+t.id,method:"GET"})},e.getCustomerLoyalty=function(t){return(0,a.service)({url:"customerloyaltypoints/"+t.id,method:"GET",params:t})};var a=s("xCek")},g8Mk:function(t,e,s){},hEQs:function(t,e,s){"use strict";s.r(e);var a=s("zIzR"),i=s.n(a);for(var r in a)["default"].indexOf(r)<0&&function(t){s.d(e,t,function(){return a[t]})}(r);e.default=i.a},kViR:function(t,e,s){"use strict";s.d(e,"a",function(){return a}),s.d(e,"b",function(){return i});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"sales-detail"},[s("section",{staticClass:"order-detail"},[s("el-card",{staticClass:"box-card box-card--p-null"},[s("div",{staticClass:"px-16 flex-container",class:1===t.openOrderData.is_paid?"color-green--bg color-white":"color-info--bg"},[s("div",{staticClass:"full-width flex-container"},[s("div",{staticClass:"container-icon"},[s("svg-icon",{attrs:{"icon-class":1===t.openOrderData.is_paid?"check-circle":"x-circle"}})],1),t._v(" "),s("span",[t._v(t._s(1===t.openOrderData.is_paid?t.rootLang.already_paid:t.rootLang.not_yet_paid))])]),t._v(" "),s("div",{staticClass:"flex-container full-width flex-container--content-end"},[s("span",{staticClass:"mr-8"},[t._v(t._s(1===t.openOrderData.is_paid?t.openOrderData.fpayment_date:""))]),t._v(" "),t.checkCustomPermission(t.customRPermis,"edit")?s("el-switch",{attrs:{disabled:t.computedAccess,"active-value":1,"inactive-value":0},on:{change:t.handleSwitchPayment},model:{value:t.switchValue,callback:function(e){t.switchValue=e},expression:"switchValue"}}):t._e()],1)]),t._v(" "),s("div",{staticClass:"card-body with-back-button with-back-button--white-bg"},[s("el-button",{staticClass:"back-button",attrs:{icon:"el-icon-back"},on:{click:t.backHandle}}),t._v(" "),s("div",{staticClass:"flex-container"},[s("div",{staticClass:"mr-8",staticStyle:{"font-size":"40px"}},[s("svg-icon",{attrs:{"icon-class":"ico-olsera-segilima"}})],1),t._v(" "),s("div",{staticStyle:{"flex-grow":"1"}},[t.openOrderData.order_no?s("h4",{staticClass:"font-bold"},[t._v(t._s(t.openOrderData.order_no))]):s("h4",[t._v("-")]),t._v(" "),s("p",[t._v(t._s(t.lang.sales_by)+" "+t._s(t.openOrderData.sales_by_name))])]),t._v(" "),t.showEdit?s("div",[s("div",{staticClass:"flex-container flex-container--wrap"},[s("div",{staticClass:"mb-4 mr-4"},[s("el-dropdown",{staticClass:"drop-complete",on:{command:t.handleNotif}},[s("el-button",{staticClass:"el-dropdown-link",attrs:{icon:"el-icon-printer"}},[t._v("\n                    "+t._s(t.rootLang.notifications)+" "),s("i",{staticClass:"el-icon-arrow-down"})]),t._v(" "),t.checkCustomPermission(t.customRPermis,"edit")?s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.notifSelect,function(e,a){return s("el-dropdown-item",{key:a,attrs:{command:e.value}},["wa"!==e.value?s("i",{class:e.icon}):s("svg-icon",{attrs:{"icon-class":"ico-whatsapp"}}),t._v("\n                      "+t._s(e.label)+"\n                    ")],1)}),1):t._e()],1)],1),t._v(" "),s("div",{staticClass:"mb-4 mr-4"},[s("el-dropdown",{staticClass:"drop-complete",on:{command:t.handleDownload}},[s("el-button",{staticClass:"el-dropdown-link",attrs:{icon:"el-icon-printer"}},[t._v("\n                    "+t._s(t.lang.print)+" "),s("i",{staticClass:"el-icon-arrow-down"})]),t._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.downloadSelect,function(e,a){return s("el-dropdown-item",{key:a,attrs:{command:e.id}},[t._v("\n                      "+t._s(e.label)+"\n                    ")])}),1)],1)],1),t._v(" "),s("div",{staticClass:"mb-4 mr-4"},[t.checkCustomPermission(t.customRPermis,"edit")?s("el-select",{staticClass:"dropdown-select-status",attrs:{disabled:t.blockChangeStatus,placeholder:t.lang.status,"popper-class":"el-select-statusorder"},on:{change:function(e){return t.handleChangeStatus(t.statusOrder)}},model:{value:t.statusOrder,callback:function(e){t.statusOrder=e},expression:"statusOrder"}},t._l(t.statusSelect,function(e){return s("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}},[s("div",{staticClass:"flex-container"},[s("div",{staticClass:"radius-50 mr-8",style:"background:"+e.color+"; height: 12px; width: 12px"}),t._v("\n                    "+t._s(e.label)+"\n                  ")])])}),1):t._e()],1)])]):s("div",[s("div",{staticClass:"flex-container flex-container--wrap"},[s("el-date-picker",{staticClass:"date-complete mb-4 mr-4",staticStyle:{"max-width":"160px"},attrs:{placeholder:t.$lang[t.langId].pick_a_day,clearable:!1,type:"date",format:"dd-MM-yyyy","value-format":"yyyy-MM-dd",disabled:""},model:{value:t.openOrderData.order_date,callback:function(e){t.$set(t.openOrderData,"order_date",e)},expression:"openOrderData.order_date"}}),t._v(" "),t.checkCustomPermission(t.customRPermis,"edit")&&t.visibleEdit?s("el-button",{staticClass:"edit-header mb-4",attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.editHeaderButton}},[t._v("\n                "+t._s(t.lang.edit)+"\n              ")]):t._e()],1)]),t._v(" "),t.visibleEdit?t._e():s("div",[t.checkCustomPermission(t.customRPermis,"edit")?s("el-dropdown",{staticClass:"drop-complete",on:{command:t.handleDownloadEdit}},[s("el-button",{staticClass:"el-dropdown-link",attrs:{icon:"el-icon-printer"}},[t._v("\n                "+t._s(t.lang.print)+" "),s("i",{staticClass:"el-icon-arrow-down"})]),t._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.downloadSelectEdit,function(e,a){return s("el-dropdown-item",{key:a,attrs:{command:a}},[t._v("\n                  "+t._s(e.label)+"\n                ")])}),1)],1):t._e()],1)])],1),t._v(" "),"GSN"===t.openOrderData.shipping_courier_id&&"A"===t.openOrderData.status?s("div",{staticClass:"px-16 py-12 flex-container color-primary--soft--bg"},[null!==t.openOrderData.shipping_log.gosend.detail?s("div",{staticClass:"full-width flex-container"},[s("img",{attrs:{height:"40px",width:"40px",src:"/static/img/service-activation/grab/icon_pending_activation.png"}}),t._v(" "),s("div",[s("div",{staticClass:"font-bold font-14"},[t._v(t._s(t.openOrderData.shipping_courier_name))]),t._v(" "),s("div",{staticClass:"font-12"},[t._v(t._s(t.openOrderData.shipping_log.gosend.detail.booking_type))]),t._v(" "),s("div",{staticClass:"font-12"},[t._v(t._s(t.openOrderData.shipping_log.gosend.detail.order_no))])])]):t._e(),t._v(" "),s("div",{staticClass:"flex-container full-width flex-container--content-end"},[t.activeFindDriver?s("el-button",{staticClass:"color-grabfood--bg",attrs:{type:"primary",loading:t.loadingFindDriver},on:{click:t.handleFindDriver}},[t._v(t._s(t.rootLang.find_driver))]):t._e(),t._v(" "),t.activeFindDriver||"A"!==t.openOrderData.status||1!==t.openOrderData.is_paid?t._e():[null!==t.openOrderData.shipping_log.gosend.detail&&null!==t.openOrderData.shipping_log.gosend.detail.delivery_eta?s("div",{staticClass:"mr-12 flex-container"},[s("svg-icon",{staticClass:"font-20",attrs:{"icon-class":"clock"}}),t._v(" "),s("div",{staticClass:"px-8"},[s("div",{staticClass:"font-12"},[t._v("Estimasi pesanan sampai")]),t._v(" "),s("div",{staticClass:"font-16 font-bold"},[t._v(t._s(t.openOrderData.shipping_log.gosend.detail.fdelivery_eta_start)+" - "+t._s(t.openOrderData.shipping_log.gosend.detail.fdelivery_eta_end))])])],1):t._e(),t._v(" "),t.stillFinDriver||null===t.openOrderData.shipping_log.gosend.detail?[s("el-button",{staticClass:"color-grabfood--bg",attrs:{type:"primary",loading:!0}},[t._v(t._s(t.rootLang.find_driver))])]:s("div",{staticClass:"color-grabfood--bg flex-container p-8 radius-5"},[s("el-avatar",{staticStyle:{background:"#EEEEEE"},attrs:{alt:t.openOrderData.shipping_log.gosend.detail.driver_photo_url,src:null!==t.openOrderData.shipping_log.gosend.detail.driver_photo_url?t.openOrderData.shipping_log.gosend.detail.driver_photo_url:"/static/img/online-order/courier/gojek.png",size:32}}),t._v(" "),s("div",{staticClass:"ml-8"},[t._v(t._s(null!==t.openOrderData.shipping_log.gosend.detail.driver_name?t.openOrderData.shipping_log.gosend.detail.driver_name:"Gojek Driver"))]),t._v(" "),s("div",{staticClass:"mb-4"},[s("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleDropdownSection}},[s("span",{staticClass:"el-dropdown-link font-20 color-white"},[s("svg-icon",{attrs:{"icon-class":"more-vertical"}})],1),t._v(" "),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:"tracking"}},[t._v("\n                        Live tracking\n                      ")])],1)],1)],1)],1)]],2)]):t._e(),t._v(" "),"GSN"===t.openOrderData.shipping_courier_id&&"P"===t.openOrderData.status?s("div",{staticClass:"px-16 py-12 flex-container flex-container--content-end color-primary--soft--bg"},[s("div",{staticClass:"float-right"},[s("el-button",{staticClass:"color-blue-active--bg color-white",on:{click:function(e){return t.handleChangeStatus("btn")}}},[t._v(t._s(t.rootLang.confirm))])],1)]):t._e()]),t._v(" "),t._l(t.stepLogs,function(e,a){return s("div",{key:a,staticClass:"p-16 mb-24",staticStyle:{height:"100px"}},[s("step-progress",{attrs:{steps:e,"current-step":t.currentStep}})],1)}),t._v(" "),s("div",{staticClass:"flex-container",staticStyle:{"align-items":"unset","margin-top":"72px !important"}},[s("div",{staticClass:"full-width mr-8"},[s("el-card",{staticClass:"box-card",staticStyle:{height:"100%"}},[s("div",{staticClass:"flex-container flex-container--wrap",attrs:{slot:"header"},slot:"header"},[s("h3",{staticClass:"box-title"},[t._v(t._s(t.lang.customer))]),t._v(" "),t.showEdit?s("div",{staticClass:"pull-right"},[t.isEditing.customer?s("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.cancelEdit("customer")}}},[t._v(t._s(t.lang.cancel))]):t._e(),t._v(" "),t.isEditing.customer?s("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(e){return t.saveEdit("customer")}}},[t._v(t._s(t.lang.save))]):t._e(),t._v(" "),"K"===t.openOrderData.order_source&&"dev"===t.stageLevel?[t.isEditing.customer?t._e():s("button-action-authenticated",{attrs:{permission:[t.customRPermis,"edit"],size:"mini",type:"text",disabled:t.computedAccess},on:{click:function(e){return t.handleEditNew("customer")}}},[s("svg-icon",{staticClass:"font-20",attrs:{"icon-class":"edit-2"}})],1)]:[t.isEditing.customer?t._e():s("button-action-authenticated",{attrs:{permission:[t.customRPermis,"edit"],size:"mini",type:"text",disabled:t.computedAccess},on:{click:function(e){return t.handleEdit("customer")}}},[s("svg-icon",{staticClass:"font-20",attrs:{"icon-class":"edit-2"}})],1)]],2):t._e()]),t._v(" "),s("div",{staticClass:"card-body"},[s("div",{staticClass:"like-table-wrapper--item-border-bottom"},[s("div",{staticStyle:{width:"40%"}},[t._v(t._s(t.lang.name))]),t._v(" "),t.isEditing.customer?s("div",[s("el-autocomplete",{attrs:{"fetch-suggestions":t.getCustomerSuggest,debounce:t.autoCompleteStartOn,placeholder:t.lang.search+" "+t.lang.customer,clearable:""},on:{select:t.handleSelectCustomer},model:{value:t.formCustomer.customerName,callback:function(e){t.$set(t.formCustomer,"customerName",e)},expression:"formCustomer.customerName"}})],1):s("div",{staticClass:"full-width flex-container flex-container--content-end"},[t.openOrderData.customer_name?s("h5",[t._v(t._s(t.openOrderData.customer_name))]):s("h5",[t._v("-")])])]),t._v(" "),s("div",{staticClass:"like-table-wrapper--item-border-bottom"},[s("div",{staticStyle:{width:"40%"}},[t._v(t._s(t.lang.email))]),t._v(" "),t.isEditing.customer?s("div",[s("el-input",{attrs:{disabled:""},model:{value:t.formCustomer.customerEmail,callback:function(e){t.$set(t.formCustomer,"customerEmail",e)},expression:"formCustomer.customerEmail"}})],1):s("div",{staticClass:"full-width flex-container flex-container--content-end"},[t.openOrderData.customer_email?s("h5",[t._v(t._s(t.openOrderData.customer_email))]):s("h5",[t._v("-")])])]),t._v(" "),s("div",{staticClass:"like-table-wrapper--item-border-bottom"},[s("div",{staticStyle:{width:"40%"}},[t._v(t._s(t.lang.phone))]),t._v(" "),t.isEditing.customer?s("div",[s("el-input",{attrs:{disabled:""},model:{value:t.formCustomer.customerPhone,callback:function(e){t.$set(t.formCustomer,"customerPhone",e)},expression:"formCustomer.customerPhone"}})],1):s("div",{staticClass:"full-width flex-container flex-container--content-end"},[t.openOrderData.customer_phone?s("h5",[t._v(t._s(t.openOrderData.customer_phone))]):s("h5",[t._v("-")])])])])])],1),t._v(" "),s("div",{staticClass:"full-width ml-8"},[s("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingElement,expression:"loadingElement"}],staticClass:"box-card",staticStyle:{height:"100%"}},[s("div",{staticClass:"flex-container flex-container--wrap",attrs:{slot:"header"},slot:"header"},[s("h3",{staticClass:"box-title"},[t._v(t._s(t.lang.shipping_to))]),t._v(" "),t.showEdit?s("div",{staticClass:"pull-right"},[t.isEditing.shippingto?s("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.cancelEdit("shippingto")}}},[t._v(t._s(t.lang.cancel))]):t._e(),t._v(" "),t.isEditing.shippingto?s("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(e){return t.saveEdit("shippingto")}}},[t._v(t._s(t.lang.save))]):t._e(),t._v(" "),t.isEditing.shippingto?t._e():s("button-action-authenticated",{attrs:{permission:[t.customRPermis,"edit"],size:"mini",type:"text",disabled:t.computedAccess},on:{click:function(e){return t.handleEdit("shippingto")}}},[s("svg-icon",{staticClass:"font-20",attrs:{"icon-class":"edit-2"}})],1)],1):t._e()]),t._v(" "),s("div",{staticClass:"card-body"},[s("div",{staticClass:"like-table-wrapper--item-border-bottom"},[s("div",{staticStyle:{width:"40%"}},[t._v(t._s(t.lang.name))]),t._v(" "),t.isEditing.shippingto?s("div",{staticClass:"full-width flex-container flex-container--content-end"},[s("el-input",{staticClass:"inline-form",model:{value:t.openOrderData.shipping_to,callback:function(e){t.$set(t.openOrderData,"shipping_to",e)},expression:"openOrderData.shipping_to"}})],1):s("div",{staticClass:"full-width flex-container flex-container--content-end"},[t.openOrderData.shipping_to?s("h5",[t._v(t._s(t.openOrderData.shipping_to))]):s("h5",[t._v("-")])])]),t._v(" "),s("div",{staticClass:"like-table-wrapper--item-border-bottom",staticStyle:{"align-items":"flex-start"}},[s("div",{staticStyle:{width:"40%"}},[t._v(t._s(t.lang.address))]),t._v(" "),t.isEditing.shippingto?s("div",{staticClass:"full-width flex-container flex-container--content-end"},[s("el-input",{staticClass:"inline-form",attrs:{type:"textarea",placeholder:t.$lang[t.langId].please_input+t.lang.address},model:{value:t.openOrderData.shipping_address,callback:function(e){t.$set(t.openOrderData,"shipping_address",e)},expression:"openOrderData.shipping_address"}})],1):s("div",{staticClass:"full-width flex-container flex-container--content-end"},[t.openOrderData.shipping_address?s("div",{staticClass:"text-right",staticStyle:{"margin-top":"-8px"}},[s("h5",[t._v(t._s(t.openOrderData.shipping_address))]),t._v(" "),s("div",[t._v("\n                    "+t._s(t.openOrderData.shipping_city_district)+" "+t._s(t.openOrderData.shipping_city_name)+"\n                  ")]),t._v(" "),s("div",[t._v("\n                    "+t._s(t.openOrderData.shipping_state_name)+" "+t._s(t.openOrderData.shipping_postal_code)+"\n                  ")]),t._v(" "),s("div",[t._v("\n                    "+t._s(t.openOrderData.shipping_country_name)+"\n                  ")])]):s("h5",[t._v("-")])])]),t._v(" "),t.isEditing.shippingto?s("div",{staticClass:"like-table-wrapper--item-border-bottom",staticStyle:{"align-items":"flex-start"}},[s("div",{staticStyle:{width:"40%"}},[t._v(t._s(t.lang.country))]),t._v(" "),s("div",{staticClass:"full-width flex-container flex-container--content-end"},[s("el-select",{staticClass:"inline-form",attrs:{placeholder:t.lang.please_select,"value-key":"id",filterable:"",size:"small"},on:{change:t.editChangeCountry},model:{value:t.openOrderData.shipping_country_name,callback:function(e){t.$set(t.openOrderData,"shipping_country_name",e)},expression:"openOrderData.shipping_country_name"}},t._l(t.openOrderData.country,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t}})}),1)],1)]):t._e(),t._v(" "),"ID"===t.openOrderData.shipping_country_id?[t.isEditing.shippingto?s("div",{staticClass:"like-table-wrapper--item-border-bottom",staticStyle:{"align-items":"flex-start"}},[s("div",{staticStyle:{width:"40%"}},[t._v(t._s(t.lang.province))]),t._v(" "),s("div",{staticClass:"full-width flex-container flex-container--content-end"},[s("el-select",{staticClass:"inline-form",attrs:{placeholder:t.lang.please_select,"value-key":"id",filterable:"",size:"small"},on:{change:t.editProvince},model:{value:t.openOrderData.shipping_state_name,callback:function(e){t.$set(t.openOrderData,"shipping_state_name",e)},expression:"openOrderData.shipping_state_name"}},t._l(t.stateCountry,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t}})}),1)],1)]):t._e(),t._v(" "),t.isEditing.shippingto?s("div",{staticClass:"like-table-wrapper--item-border-bottom",staticStyle:{"align-items":"flex-start"}},[s("div",{staticStyle:{width:"40%"}},[t._v(t._s(t.lang.city))]),t._v(" "),s("div",{staticClass:"full-width flex-container flex-container--content-end"},[s("el-select",{staticClass:"inline-form",attrs:{placeholder:t.lang.please_select,"value-key":"id",filterable:"",size:"small"},on:{change:t.editCity},model:{value:t.openOrderData.shipping_city_name,callback:function(e){t.$set(t.openOrderData,"shipping_city_name",e)},expression:"openOrderData.shipping_city_name"}},t._l(t.shippingCity,function(t){return s("el-option",{key:t.id,attrs:{label:t.city,value:t}})}),1)],1)]):t._e(),t._v(" "),t.isEditing.shippingto?s("div",{staticClass:"like-table-wrapper--item-border-bottom",staticStyle:{"align-items":"flex-start"}},[s("div",{staticStyle:{width:"40%"}},[t._v(t._s(t.lang.district))]),t._v(" "),s("div",{staticClass:"full-width flex-container flex-container--content-end"},[s("el-select",{staticClass:"inline-form",attrs:{placeholder:t.lang.please_select,"value-key":"id",filterable:"",size:"small"},on:{change:t.editSubDistrict},model:{value:t.openOrderData.shipping_subdistrict_name,callback:function(e){t.$set(t.openOrderData,"shipping_subdistrict_name",e)},expression:"openOrderData.shipping_subdistrict_name"}},t._l(t.subDistrict,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t}})}),1)],1)]):t._e(),t._v(" "),t.isEditing.shippingto?s("div",{staticClass:"like-table-wrapper--item-border-bottom",staticStyle:{"align-items":"flex-start"}},[s("div",{staticStyle:{width:"40%"}},[t._v(t._s(t.lang.postal_code))]),t._v(" "),s("div",{staticClass:"full-width flex-container flex-container--content-end"},[s("el-input",{staticClass:"inline-form",attrs:{size:"small",type:"number",placeholder:t.$lang[t.langId].input_number},model:{value:t.openOrderData.shipping_postal_code,callback:function(e){t.$set(t.openOrderData,"shipping_postal_code",e)},expression:"openOrderData.shipping_postal_code"}})],1)]):t._e()]:t._e(),t._v(" "),s("div",{staticClass:"like-table-wrapper--item-border-bottom"},[s("div",{staticStyle:{width:"40%"}},[t._v(t._s(t.lang.phone))]),t._v(" "),t.isEditing.shippingto?s("div",{staticClass:"full-width flex-container flex-container--content-end"},[s("el-input",{staticClass:"inline-form",attrs:{placeholder:t.$lang[t.langId].input_number},model:{value:t.openOrderData.shipping_phone,callback:function(e){t.$set(t.openOrderData,"shipping_phone",e)},expression:"openOrderData.shipping_phone"}})],1):s("div",{staticClass:"full-width flex-container flex-container--content-end"},[t.openOrderData.shipping_phone?s("h5",[t._v(t._s(t.openOrderData.shipping_phone))]):s("h5",[t._v("-")])])])],2)])],1)]),t._v(" "),s("div",{staticClass:"flex-container mt-24",staticStyle:{"align-items":"unset"}},[s("div",{staticClass:"full-width mr-8"},[s("el-card",{staticClass:"box-card",staticStyle:{height:"100%"}},[s("div",{staticClass:"flex-container flex-container--wrap",attrs:{slot:"header"},slot:"header"},[s("h3",{staticClass:"box-title"},[t._v(t._s(t.lang.shipping_status))]),t._v(" "),t.showEdit?s("div",{staticClass:"pull-right"},[t.isEditing.status?s("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.cancelEdit("status")}}},[t._v(t._s(t.lang.cancel))]):t._e(),t._v(" "),t.isEditing.status?s("el-button",{attrs:{size:"mini",type:"success",disabled:t.loading},on:{click:function(e){return t.saveEdit("status")}}},[t.loading?s("loading-component",{staticStyle:{"text-align":"center"},attrs:{active:!0,color:"#1bb4e6",loader:"dots",width:32,height:10,backgroundColor:"#ffffff"}}):s("span",[t._v(t._s(t.lang.save))])],1):t._e(),t._v(" "),t.isEditing.status?t._e():s("button-action-authenticated",{attrs:{permission:[t.customRPermis,"edit"],size:"mini",type:"text",disabled:t.computedAccess},on:{click:function(e){return t.handleEdit("status")}}},[s("svg-icon",{staticClass:"font-20",attrs:{"icon-class":"edit-2"}})],1)],1):t._e()]),t._v(" "),s("div",{staticClass:"card-body"},[s("div",{staticClass:"like-table-wrapper--item-border-bottom"},[s("div",{staticClass:"full-width"},[t._v(t._s(t.lang.shipping_courier))]),t._v(" "),s("div",{staticClass:"full-width flex-container flex-container--content-end"},[t.openOrderData.shipping_courier_name?s("h5",[t._v(t._s(t.openOrderData.shipping_courier_name))]):s("h5",[t._v("-")])])]),t._v(" "),s("div",{staticClass:"like-table-wrapper--item-border-bottom"},[s("div",{staticClass:"full-width"},[t._v(t._s(t.lang.shipping_service_type))]),t._v(" "),s("div",{staticClass:"full-width flex-container flex-container--content-end"},[t.openOrderData.shipping_service_type?s("h5",[t._v(t._s(t.openOrderData.shipping_service_type))]):s("h5",[t._v("-")])])]),t._v(" "),s("el-form",{ref:"status",attrs:{model:t.formShippingStatus}},[s("div",{staticClass:"like-table-wrapper--item-border-bottom"},[s("div",{staticClass:"full-width"},[t._v(t._s(t.lang.shipping_date))]),t._v(" "),t.isEditing.status?s("div",[s("el-form-item",{staticStyle:{"margin-bottom":"unset"},attrs:{prop:"dateShipping",rules:[{required:!0,message:"Please input date",trigger:"change"}]}},[s("el-date-picker",{staticClass:"inline-form",attrs:{placeholder:t.$lang[t.langId].pick_a_day,clearable:!1,type:"date",format:"dd-MM-yyyy","value-format":"yyyy-MM-dd"},on:{change:t.timeChange},model:{value:t.formShippingStatus.dateShipping,callback:function(e){t.$set(t.formShippingStatus,"dateShipping",e)},expression:"formShippingStatus.dateShipping"}})],1)],1):s("div",{staticClass:"full-width flex-container flex-container--content-end"},[t.openOrderData.fshipping_date?s("h5",[t._v(t._s(t.labelDate))]):s("h5",[t._v("-")])])]),t._v(" "),s("div",{staticClass:"like-table-wrapper--item-border-bottom"},[s("div",{staticClass:"full-width"},[t._v(t._s(t.lang.tracking_no))]),t._v(" "),t.isEditing.status?s("div",[s("el-form-item",{staticStyle:{"margin-bottom":"unset"},attrs:{prop:"noTracking",rules:[{required:!0,message:"Please input no tracking",trigger:"blur"}]}},[s("el-input",{staticClass:"inline-form",attrs:{type:"text",placeholder:t.$lang[t.langId].input_code,clearable:""},model:{value:t.formShippingStatus.noTracking,callback:function(e){t.$set(t.formShippingStatus,"noTracking",e)},expression:"formShippingStatus.noTracking"}})],1)],1):s("div",{staticClass:"full-width flex-container flex-container--content-end"},[t.openOrderData.shipping_track_no?s("h5",[t._v(t._s(t.openOrderData.shipping_track_no))]):s("h5",[t._v("-")])])])])],1)])],1),t._v(" "),s("div",{staticClass:"full-width mr-8"},[s("el-card",{staticClass:"box-card",staticStyle:{height:"100%"}},[s("div",{staticClass:"flex-container flex-container--wrap",attrs:{slot:"header"},slot:"header"},[s("h3",{staticClass:"box-title"},[t._v(t._s(t.lang.drop_ship))]),t._v(" "),t.showEdit?s("div",{staticClass:"pull-right"},[t.isEditing.dropship?s("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.cancelEdit("dropship")}}},[t._v(t._s(t.lang.cancel))]):t._e(),t._v(" "),t.isEditing.dropship?s("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(e){return t.saveEdit("dropship")}}},[t._v(t._s(t.lang.save))]):t._e(),t._v(" "),t.isEditing.dropship?t._e():s("button-action-authenticated",{attrs:{permission:[t.customRPermis,"edit"],size:"mini",type:"text",disabled:t.computedAccess},on:{click:function(e){return t.handleEdit("dropship")}}},[s("svg-icon",{staticClass:"font-20",attrs:{"icon-class":"edit-2"}})],1)],1):t._e()]),t._v(" "),s("div",{staticClass:"like-table-wrapper--item-border-bottom"},[s("div",{staticClass:"full-width"},[t._v(t._s(t.lang.store_name))]),t._v(" "),t.isEditing.dropship?s("div",{staticClass:"full-width"},[s("el-input",{staticClass:"inline-form",model:{value:t.formDropShip.dropShipName,callback:function(e){t.$set(t.formDropShip,"dropShipName",e)},expression:"formDropShip.dropShipName"}})],1):s("div",{staticClass:"full-width flex-container flex-container--content-end"},[t.openOrderData.drop_ship_store_name?s("h5",[t._v(t._s(t.openOrderData.drop_ship_store_name))]):s("h5",[t._v("-")])])]),t._v(" "),s("div",{staticClass:"like-table-wrapper--item-border-bottom"},[s("div",{staticClass:"full-width"},[t._v(t._s(t.lang.sender))]),t._v(" "),t.isEditing.dropship?s("div",{staticClass:"full-width"},[s("el-input",{staticClass:"inline-form",model:{value:t.formDropShip.dropShipSender,callback:function(e){t.$set(t.formDropShip,"dropShipSender",e)},expression:"formDropShip.dropShipSender"}})],1):s("div",{staticClass:"full-width flex-container flex-container--content-end"},[t.openOrderData.drop_ship_sender_name?s("h5",[t._v(t._s(t.openOrderData.drop_ship_sender_name))]):s("h5",[t._v("-")])])]),t._v(" "),s("div",{staticClass:"like-table-wrapper--item-border-bottom"},[s("div",{staticClass:"full-width"},[t._v(t._s(t.lang.phone))]),t._v(" "),t.isEditing.dropship?s("div",{staticClass:"full-width"},[s("el-input",{staticClass:"inline-form",model:{value:t.formDropShip.dropShipPhone,callback:function(e){t.$set(t.formDropShip,"dropShipPhone",e)},expression:"formDropShip.dropShipPhone"}})],1):s("div",{staticClass:"full-width flex-container flex-container--content-end"},[t.openOrderData.drop_ship_contact_phone?s("h5",[t._v(t._s(t.openOrderData.drop_ship_contact_phone))]):s("h5",[t._v("-")])])])])],1)]),t._v(" "),s("order-table",{attrs:{"data-table":t.openOrderData,"edit-show":t.showEdit},on:{"save-payment":t.updatePayment,refresh:t.refreshData}}),t._v(" "),s("div",{staticClass:"flex-container mt-24",staticStyle:{"align-items":"unset"}},[s("div",{staticClass:"full-width mr-8"},[s("el-card",{staticClass:"box-card box-card--sales",class:t.openOrderData.serve_by_id?"":"color-grey--soft--bg",staticStyle:{height:"100%"}},[s("div",{staticClass:"flex-container flex-container--wrap color-white--bg",attrs:{slot:"header"},slot:"header"},[s("h3",{staticClass:"box-title"},[t._v(t._s(t.$lang[t.langId].server_pos))]),t._v(" "),t.showEdit?s("div",{staticClass:"pull-right"},[t.isEditing.server?s("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.cancelEdit("server")}}},[t._v(t._s(t.lang.cancel))]):t._e(),t._v(" "),t.isEditing.server?s("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(e){return t.saveEdit("server")}}},[t._v(t._s(t.lang.save))]):t._e(),t._v(" "),t.isEditing.server?t._e():s("button-action-authenticated",{attrs:{permission:[t.customRPermis,"edit"],type:"text",size:"mini",disabled:t.computedAccess},on:{click:function(e){return t.handleEdit("server")}}},[s("svg-icon",{staticClass:"font-20",attrs:{"icon-class":"edit-2"}})],1)],1):t._e()]),t._v(" "),s("div",[t.isEditing.server?s("div",{staticClass:"full-width"},[s("el-select",{attrs:{placeholder:t.$lang[t.langId].server_pos},model:{value:t.openOrderData.serve_by_id,callback:function(e){t.$set(t.openOrderData,"serve_by_id",e)},expression:"openOrderData.serve_by_id"}},t._l(t.openOrderData.serve_bys,function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}),1)],1):s("div",{staticClass:"full-width"},[t.openOrderData.serve_by_id?s("p",[t._v(t._s(t.openOrderData.serve_by_name))]):s("p",[t._v(" - ")])])])])],1),t._v(" "),s("div",{staticClass:"full-width ml-8"},[s("el-card",{staticClass:"box-card box-card--sales",class:t.openOrderData.payment_due_date?"":"color-grey--soft--bg",staticStyle:{height:"100%"}},[s("div",{staticClass:"flex-container flex-container--wrap color-white--bg",attrs:{slot:"header"},slot:"header"},[s("h3",{staticClass:"box-title"},[t._v(t._s(t.lang.payment_due_date))]),t._v(" "),t.showEdit?s("div",{staticClass:"pull-right"},[t.isEditing.due_date?s("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.cancelEdit("due_date")}}},[t._v(t._s(t.lang.cancel))]):t._e(),t._v(" "),t.isEditing.due_date?s("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(e){return t.saveEdit("due_date")}}},[t._v(t._s(t.lang.save))]):t._e(),t._v(" "),t.isEditing.due_date?t._e():s("button-action-authenticated",{attrs:{permission:[t.customRPermis,"edit"],type:"text",size:"mini",disabled:t.computedAccess},on:{click:function(e){return t.handleEdit("due_date")}}},[s("svg-icon",{staticClass:"font-20",attrs:{"icon-class":"edit-2"}})],1)],1):t._e()]),t._v(" "),s("div",[t.isEditing.due_date?s("div",[s("el-date-picker",{staticClass:"date-complete mb-4 mr-4",staticStyle:{"max-width":"160px"},attrs:{placeholder:t.$lang[t.langId].pick_a_day,clearable:!1,type:"date",format:"dd-MM-yyyy","value-format":"yyyy-MM-dd"},model:{value:t.openOrderData.payment_due_date,callback:function(e){t.$set(t.openOrderData,"payment_due_date",e)},expression:"openOrderData.payment_due_date"}})],1):s("div",{staticClass:"full-width flex-container"},[t.openOrderData.payment_due_date?s("p",{staticClass:"show-white-space"},[t._v(t._s(t.openOrderData.fpayment_due_date))]):s("p",[t._v("-")])])])])],1)]),t._v(" "),s("div",{staticClass:"flex-container mt-24",staticStyle:{"align-items":"unset"}},[s("div",{staticClass:"full-width mr-8"},[s("el-card",{staticClass:"box-card box-card--sales",class:t.openOrderData.notes?"":"color-grey--soft--bg",staticStyle:{height:"100%"}},[s("div",{staticClass:"flex-container flex-container--wrap color-white--bg",attrs:{slot:"header"},slot:"header"},[s("h3",{staticClass:"box-title"},[t._v(t._s(t.lang.notes))]),t._v(" "),t.showEdit?s("div",{staticClass:"pull-right"},[t.isEditing.notes?s("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.cancelEdit("notes")}}},[t._v(t._s(t.lang.cancel))]):t._e(),t._v(" "),t.isEditing.notes?s("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(e){return t.saveEdit("notes")}}},[t._v(t._s(t.lang.save))]):t._e(),t._v(" "),t.isEditing.notes?t._e():s("button-action-authenticated",{attrs:{permission:[t.customRPermis,"edit"],type:"text",size:"mini",disabled:t.computedAccess},on:{click:function(e){return t.handleEdit("notes")}}},[s("svg-icon",{staticClass:"font-20",attrs:{"icon-class":"edit-2"}})],1)],1):t._e()]),t._v(" "),s("div",{},[t.isEditing.notes?s("div",[s("el-input",{attrs:{type:"textarea",autosize:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleShiftEnter.apply(null,arguments)}},model:{value:t.openOrderData.notes,callback:function(e){t.$set(t.openOrderData,"notes",e)},expression:"openOrderData.notes"}})],1):s("div",{staticClass:"full-width flex-container"},[t.openOrderData.notes?s("p",{staticClass:"show-white-space"},[t._v(t._s(t.openOrderData.notes))]):s("p",{staticClass:"color-grey--placeholder"},[t._v(t._s(t.$lang[t.langId].there_is_no))])])])])],1),t._v(" "),s("div",{staticClass:"full-width ml-8"},[s("el-card",{staticClass:"box-card box-card--sales",class:t.openOrderData.invoice_notes?"":"color-grey--soft--bg",staticStyle:{height:"100%"}},[s("div",{staticClass:"flex-container flex-container--wrap color-white--bg",attrs:{slot:"header"},slot:"header"},[s("h3",{staticClass:"box-title"},[t._v(t._s(t.lang.invoice)+" "+t._s(t.lang.footer))]),t._v(" "),t.showEdit?s("div",{staticClass:"pull-right"},[t.isEditing.invoice?s("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.cancelEdit("invoice")}}},[t._v(t._s(t.lang.cancel))]):t._e(),t._v(" "),t.isEditing.invoice?s("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(e){return t.saveEdit("invoice")}}},[t._v(t._s(t.lang.save))]):t._e(),t._v(" "),t.isEditing.invoice?t._e():s("button-action-authenticated",{attrs:{permission:[t.customRPermis,"edit"],type:"text",size:"mini",disabled:t.computedAccess},on:{click:function(e){return t.handleEdit("invoice")}}},[s("svg-icon",{staticClass:"font-20",attrs:{"icon-class":"edit-2"}})],1)],1):t._e()]),t._v(" "),s("div",[t.isEditing.invoice?s("div",{staticClass:"show-white-space"},[s("el-input",{attrs:{type:"textarea",autosize:""},model:{value:t.openOrderData.invoice_notes,callback:function(e){t.$set(t.openOrderData,"invoice_notes",e)},expression:"openOrderData.invoice_notes"}})],1):s("div",{staticClass:"full-width flex-container"},[s("div",[t.openOrderData.invoice_notes?t._e():s("p",{staticClass:"color-grey--placeholder"},[t._v(t._s(t.$lang[t.langId].there_is_no))]),t._v(" "),s("p",{staticClass:"invoice show-white-space"},[t._v(t._s(t.openOrderData.invoice_notes))]),t._v(" "),s("div",{class:t.openOrderData.invoice_notes?"":"color-grey--placeholder"},[t._v(t._s(t.$lang[t.langId].info_cantact_our_support)+" ")])])])])])],1)]),t._v(" "),s("div",{staticClass:"mt-24"},[s("button-action-authenticated",{staticClass:"btn-block color-danger",attrs:{permission:["sales/cancelledorders","store"],type:"default"},on:{click:t.cancelStatusFromBtn}},[s("svg-icon",{attrs:{type:"trash",stroke:"#FF0000"}}),t._v("\n        "+t._s(t.lang.cancel_order)+"\n      ")],1)],1),t._v(" "),s("div",{staticClass:"flex-container mt-24",staticStyle:{"align-items":"unset"}},[s("div",{staticClass:"full-width mr-8"},[s("el-card",{staticClass:"box-card box-card--sales",staticStyle:{height:"100%"}},[s("div",{staticClass:"flex-container flex-container--wrap color-white--bg",attrs:{slot:"header"},slot:"header"},[s("h3",{staticClass:"box-title"},[t._v("Log")])]),t._v(" "),s("div",[s("div",{staticClass:"flex-container"},[s("div",{staticClass:"full-width"},[s("h5",[t._v(t._s(t.lang.last_modified))])]),t._v(" "),s("div",{staticClass:"full-width text-right"},[s("label",[t._v(t._s(t.openOrderData.modified_by)+", "+t._s(t.openOrderData.modified_time))])])]),t._v(" "),s("div",{staticClass:"flex-container"},[s("div",{staticClass:"full-width"},[s("h5",[t._v(t._s(t.lang.created_time))])]),t._v(" "),s("div",{staticClass:"full-width text-right"},[s("label",[t._v(t._s(t.openOrderData.created_by)+", "+t._s(t.openOrderData.order_time))])])]),t._v(" "),t.openOrderData.translogs?s("div",t._l(t.openOrderData.translogs,function(e){return s("div",{key:e.id,staticClass:"flex-container"},[s("div",{staticClass:"full-width"},[s("h5",[t._v(t._s(e.action))])]),t._v(" "),s("div",{staticClass:"full-width text-right"},[s("label",[t._v(t._s(e.created_by)+", "+t._s(e.action_time))])])])}),0):t._e()])])],1)])],2),t._v(" "),s("el-dialog",{staticClass:"email-dialog",attrs:{visible:t.emailDialog,"custom-class":"mw-420"},on:{"update:visible":function(e){t.emailDialog=e}}},[s("span",{attrs:{slot:"title"},slot:"title"},[s("svg-icon",{attrs:{"icon-class":"mail"}}),t._v("\n      "+t._s(t.lang.email)+"\n    ")],1),t._v(" "),s("p",[t._v(t._s(t.$lang[t.langId].send_notification_via_email))]),t._v(" "),s("ul",{staticClass:"list-unstyled"},t._l(t.emailNotify,function(e){return s("li",{key:e.id},[s("el-radio",{attrs:{label:e.id},model:{value:t.emailRadioValue,callback:function(e){t.emailRadioValue=e},expression:"emailRadioValue"}},[t._v(t._s(e.email_notify_type_name))])],1)}),0),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticStyle:{color:"#A5A5A5"},attrs:{type:"text"},on:{click:function(e){t.emailDialog=!1}}},[t._v(t._s(t.lang.cancel))]),t._v(" "),s("el-button",{attrs:{type:"success"},on:{click:t.handleSentEmail}},[t._v("\n        "+t._s(t.lang.submit)+"\n      ")])],1)]),t._v(" "),s("el-dialog",{staticClass:"sms-dialog",attrs:{visible:t.smsDialog,"custom-class":"mw-420"},on:{"update:visible":function(e){t.smsDialog=e}}},[s("span",{attrs:{slot:"title"},slot:"title"},[s("svg-icon",{attrs:{"icon-class":"smartphone"}}),t._v("\n      "+t._s(t.$lang[t.langId].sms)+"\n    ")],1),t._v(" "),s("p",[t._v(t._s(t.$lang[t.langId].send_notification_via_sms))]),t._v(" "),s("ul",{staticClass:"list-unstyled"},t._l(t.smsNotify,function(e){return s("li",{key:e.id},[s("el-radio",{attrs:{label:e.id},model:{value:t.smsRadioValue,callback:function(e){t.smsRadioValue=e},expression:"smsRadioValue"}},[t._v(t._s(e.sms_notify_type_name))])],1)}),0),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticStyle:{color:"#A5A5A5"},attrs:{type:"text"},on:{click:function(e){t.smsDialog=!1}}},[t._v(t._s(t.lang.cancel))]),t._v(" "),s("el-button",{attrs:{type:"success"},on:{click:t.handleSentSms}},[t._v("\n        "+t._s(t.lang.submit)+"\n      ")])],1)]),t._v(" "),s("el-dialog",{staticClass:"sms-dialog",attrs:{visible:t.waDialog,"custom-class":"mw-420"},on:{"update:visible":function(e){t.waDialog=e}}},[s("span",{attrs:{slot:"title"},slot:"title"},[s("svg-icon",{attrs:{"icon-class":"smartphone"}}),t._v("\n      "+t._s(t.$lang[t.langId].whatsapp)+"\n    ")],1),t._v(" "),s("p",[t._v(t._s(t.$lang[t.langId].send_notification_via_wa))]),t._v(" "),s("ul",{staticClass:"list-unstyled"},t._l(t.smsNotify,function(e){return s("li",{key:e.id},[s("el-radio",{attrs:{label:e.id},model:{value:t.waRadioValue,callback:function(e){t.waRadioValue=e},expression:"waRadioValue"}},[t._v(t._s(e.sms_notify_type_name))])],1)}),0),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{staticStyle:{color:"#A5A5A5"},attrs:{type:"text"},on:{click:function(e){t.waDialog=!1}}},[t._v(t._s(t.lang.cancel))]),t._v(" "),s("el-button",{attrs:{type:"success"},on:{click:t.handleSentWa}},[t._v("\n        "+t._s(t.lang.submit)+"\n      ")])],1)]),t._v(" "),s("el-dialog",{attrs:{visible:t.dialogEditCustomer,"show-close":!1,width:"536px"},on:{"update:visible":function(e){t.dialogEditCustomer=e}}},[s("div",{staticClass:"flex-container",attrs:{slot:"title"},slot:"title"},[s("span",{staticClass:"ml-8 font-20 full-width"},[t._v("Edit Customer")]),t._v(" "),s("div",{staticClass:"btn_save_dialog full-width text-right"},[s("el-button",{attrs:{type:"info"},on:{click:function(e){t.dialogEditCustomer=!1}}},[t._v(t._s(t.lang.cancel))]),t._v(" "),s("el-button",{attrs:{type:"success",loading:t.loading},on:{click:function(e){return t.saveEdit("customer")}}},[t._v(t._s(t.lang.save))])],1)]),t._v(" "),s("div",[s("div",{staticClass:"flex-container font-bold mb-16"},[s("div",{staticClass:"font-18 full-width"},[t._v(t._s(t.lang.customer))]),t._v(" "),s("div",{staticClass:"pointer",on:{click:function(e){t.visibleCustomerNew=!0}}},[s("i",{staticClass:"el-icon-plus font-20 font-bold"})])]),t._v(" "),s("el-select",{class:"full-width box-shadow-2",attrs:{loading:t.loadingCustomer,"remote-method":t.searchCustomer,"popper-append-to-body":!0,"popper-class":"dropdown-select-product","value-key":"id",remote:"",filterable:"",clearable:"","reserve-keyword":"",placeholder:t.rootLang.select+" "+t.lang.customer},on:{change:t.handleChangeCustomer},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},t._l(t.dataCustomer,function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e}},[s("div",{staticClass:"flex-container"},[s("div",[s("div",{staticClass:"font-bold font-14"},[t._v("\n                "+t._s(e.name)+"\n              ")])])])])}),1),t._v(" "),t.formCustomer&&t.formCustomer.customerId?s("div",{staticClass:"like-table-wrapper mt-16"},[s("div",{staticClass:"like-table-wrapper--item pointer"},[s("div",{staticClass:"mr-8"},[s("el-avatar",[t._v(t._s(t.labelAvatar(t.formCustomer.customerName)))])],1),t._v(" "),s("div",{staticClass:"mr-8",staticStyle:{"flex-grow":"1"}},[s("div",{staticClass:"font-bold font-14"},[t._v("\n              "+t._s(t.formCustomer.customerName)+"\n            ")]),t._v(" "),s("div",{staticClass:"color-info font-12"},[s("span",[t._v("\n                "+t._s(t.formCustomer.customerPhone)+"\n              ")])]),t._v(" "),s("div",{staticClass:"color-info font-12"},[s("span",[t._v("\n                "+t._s(t.formCustomer.customerEmail)+"\n              ")])])]),t._v(" "),s("el-button",{attrs:{type:"text"},on:{click:function(e){return t.removeItemCustomer()}}},[s("i",{staticClass:"el-icon-close",staticStyle:{color:"#F44336"}})])],1)]):t._e()],1),t._v(" "),s("transition",{attrs:{name:"el-zoom-in-center"}},[t.visibleCustomerNew?s("div",{staticClass:"offscreen-right-sidebar"},[s("div",{staticClass:"offscreen-right-sidebar--wrapper"},[s("div",{staticClass:"offscreen-right-sidebar--header text-left"},[t._v("\n            Pelanggan Baru\n            "),s("close-esc",{on:{close:function(e){t.visibleCustomerNew=!1}}})],1),t._v(" "),s("div",[s("div",{staticClass:"full-width"},[s("span",{staticClass:"font-12"},[t._v(t._s(t.lang.name))]),t._v(" "),s("div",[s("el-input",{model:{value:t.tempCustomer.customer_name,callback:function(e){t.$set(t.tempCustomer,"customer_name",e)},expression:"tempCustomer.customer_name"}})],1)]),t._v(" "),s("div",{staticClass:"full-width mt-16"},[s("span",{staticClass:"font-12"},[t._v(t._s(t.lang.customer_type))]),t._v(" "),s("div",[s("el-autocomplete",{staticStyle:{width:"100%"},attrs:{"fetch-suggestions":t.searchCustomerTypes,placeholder:t.lang.search},on:{select:t.handleSelected},model:{value:t.tempCustomer.customer_type_name,callback:function(e){t.$set(t.tempCustomer,"customer_type_name",e)},expression:"tempCustomer.customer_type_name"}})],1)]),t._v(" "),s("div",{staticClass:"full-width mt-16"},[s("span",{staticClass:"font-12"},[t._v(t._s(t.lang.email))]),t._v(" "),s("div",[s("el-input",{model:{value:t.tempCustomer.customer_email,callback:function(e){t.$set(t.tempCustomer,"customer_email",e)},expression:"tempCustomer.customer_email"}})],1)]),t._v(" "),s("div",{staticClass:"full-width mt-16"},[s("span",{staticClass:"font-12"},[t._v(t._s(t.lang.phone))]),t._v(" "),s("div",[s("phone-number-input",{staticClass:"field-register",attrs:{translations:{countrySelectorLabel:"",countrySelectorError:"",phoneNumberLabel:"",example:""},"only-countries":["ID","SG"],"default-country-code":"ID"},on:{update:t.getPhone},model:{value:t.tempCustomer.customer_phone_format,callback:function(e){t.$set(t.tempCustomer,"customer_phone_format",e)},expression:"tempCustomer.customer_phone_format"}})],1)])])]),t._v(" "),s("div",{staticClass:"offscreen-right-sidebar--footer"},[s("el-button",{staticClass:"btn-block",attrs:{type:"success",loading:t.loadingUpdateCustomer},on:{click:t.handleAddNewCustomer}},[t._v(t._s(t.lang.save))])],1)]):t._e()])],1)],1)},i=[]},zIzR:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=b(s("QbLZ")),i=b(s("FyfS")),r=b(s("4d7F")),n=b(s("GQeE")),o=b(s("5ZxY")),l=s("Hi+m"),d=b(s("DChC")),c=s("xCek"),p=b(s("vDqi")),u=b(s("Zi58")),h=b(s("wd/R")),_=b(s("kGIl")),m=b(s("XFEm")),g=s("Yd2Z"),v=s("Qflq"),f=b(s("o3dS"));function b(t){return t&&t.__esModule?t:{default:t}}e.default={name:"DetailOrderV2",components:{OrderTable:u.default,LoadingComponent:_.default,StepProgress:o.default,CloseEsc:m.default,ButtonActionAuthenticated:f.default},mixins:[d.default],watch:{openOrderData:function(t){var e=this;t.shipping_courier_id&&"GSN"===t.shipping_courier_id&&null!==t.shipping_log.gosend.detail&&t.shipping_log.gosend.detail.logs.map(function(t){e.steps.push({label:t.fstatus,status:t.status})})}},data:function(){return{loading:!0,loadingElement:!1,openOrderData:{},showTable:!1,downloadValue:null,emailDialog:!1,smsDialog:!1,emailRadioValue:1,smsRadioValue:1,statusSelect:[{value:"P",label:this.$lang[this.$store.state.userStores.langId].pending,disabled:!1,color:"#AFB0AF"},{value:"A",label:this.$lang[this.$store.state.userStores.langId].has_confirm,disabled:!1,color:"#2BC5F4"},{value:"S",label:this.$lang[this.$store.state.userStores.langId].being_sent,disabled:!1,color:"#2BC5F4"},{value:"T",label:this.$lang[this.$store.state.userStores.langId].delivered,disabled:!1,color:"#6EBE46"},{value:"Z",label:this.$lang[this.$store.state.userStores.langId].complete,disabled:!this.checkCustomPermission("sales/closedorders","store"),color:"#6EBE46"},{value:"X",label:this.$lang[this.$store.state.userStores.langId].cancel,disabled:!this.checkCustomPermission("sales/cancelledorders","store"),color:"#F44336"}],downloadSelect:[{id:0,value:"pdf",label:this.$store.state.userStores.lang.download_pdf},{id:1,value:"pdf",label:this.$lang[this.$store.state.userStores.langId].delivery_order},{id:2,value:"pdf",label:this.$lang[this.$store.state.userStores.langId].delivery_order+" "+this.$lang[this.$store.state.userStores.langId].no_image},{id:3,value:"invoicepdf",label:this.$store.state.userStores.lang.invoice},{id:4,value:"packinglabelpdf",label:this.$store.state.userStores.lang.packing_label},{id:6,value:"packinglabelpdf",label:this.$store.state.userStores.lang.packing_label+" 1/2W"},{id:8,value:"packinglabelpdf",label:this.$store.state.userStores.lang.packing_label+"+ Weight 1/2W"},{id:5,value:"packinglabelpdf",label:this.$store.state.userStores.lang.packing_label+" + Logo"},{id:7,value:"packinglabelpdf",label:this.$store.state.userStores.lang.packing_label+" 1/2W + Logo"},{id:9,value:"packinglabelpdf",label:this.$store.state.userStores.lang.packing_label+"+ Weight 1/2W + Logo"}],downloadSelectEdit:[{value:"pdf",label:this.$store.state.userStores.lang.download_pdf},{value:"pdf",label:this.$lang[this.$store.state.userStores.langId].delivery_order},{value:"pdf",label:this.$lang[this.$store.state.userStores.langId].delivery_order+" "+this.$lang[this.$store.state.userStores.langId].no_image},{value:"packinglabelpdf",label:this.$store.state.userStores.lang.packing_label},{value:"packinglabelpdf",label:this.$store.state.userStores.lang.packing_label+" 1/2W"},{value:"packinglabelpdf",label:this.$store.state.userStores.lang.packing_label+"+ Weight 1/2W"}],notifSelect:[{value:"email",label:this.$store.state.userStores.lang.email,icon:"el-icon-message"},{value:"sms",label:this.$lang[this.$store.state.userStores.langId].sms,icon:"el-icon-mobile-phone"},{value:"wa",label:this.$lang[this.$store.state.userStores.langId].whatsapp,icon:"ico-whatsapp"}],isEditing:{customer:!1,shippingto:!1,status:!1,dropship:!1,notes:!1,invoice:!1,server:!1,due_date:!1},stateCountry:[],shippingCity:[],subDistrict:[],formShippingStatus:{dateShipping:"",noTracking:""},labelDate:"",suggestData:[],autoCompleteStartOn:300,formCustomer:{customerName:"",customerId:"",customerEmail:"",customerPhone:""},formDropShip:{dropShipName:"",dropShipSender:"",dropShipPhone:""},showEdit:!0,switchValue:0,routeName:"",statusOrder:"",repeat:!1,emailNotify:[],smsNotify:[],waDialog:!1,waRadioValue:1,dataProgress:50,steps:[],setep:[{status:"confirmed",status_desc:"Pemesanan diterima"},{status:"Finding Driver",status_desc:"Mencari pengemudi"},{status:"no_driver",status_desc:"Pengemudi tidak ditemukan"},{status:"allocated",status_desc:"Pengemudi ditemukan"},{status:"out_for_pickup",status_desc:"Pengemudi sedang dalam perjalanan ke lokasi penjemputan"},{status:"picked",status_desc:"Barang berhasil diambil oleh driver"},{status:"out_for_delivery",status_desc:"Pengemudi sedang dalam perjalanan untuk mengantarkan barang"},{status:"on_hold",status_desc:"Pengiriman tertunda karena alasan penerima tidak bisa dihubungi, demonstrasi, cuaca, dll"},{status:"cancelled",status_desc:"Pemesanan dibatalkan"},{status:"delivered",status_desc:"Barang berhasil dikirim ke penerima"},{status:"rejected",status_desc:"Pengemudi mengembalikan barang kepada pengirim karena penerima tidak dapat menerima barang tersebut"}],currentStep:2,dialogEditCustomer:!1,keyword:"",loadingCustomer:!1,dataCustomer:[],visibleCustomerNew:!1,tempCustomer:{customer_name:"",customer_type_name:"",customer_type_id:"",customer_email:"",customer_phone:"",customer_phone_format:""},loadingUpdateCustomer:!1,customRPermis:"sales/openorders"}},computed:{selectedStore:function(){return this.$store.getters.selectedStore},selectRoute:function(){return this.$route.name},token:function(){return this.$store.state.user.token},langId:function(){return this.$store.state.userStores.langId},lang:function(){return this.$store.state.userStores.lang},userRole:function(){var t=this.$store.getters.selectedStore;return{role_id:t.role_id,role_name:t.role_name,is_pos_only:t.is_pos_only,is_mobile:t.is_mobile}},computedStatusSelect:function(){var t=this;return this.statusSelect.filter(function(e){return"SP"!==t.userRole.role_id?e:"X"!==e.value?e:void 0})},visibleEdit:function(){return this.selectedStore.can_edit_complete_order&&"Z"===this.openOrderData.status?this.selectedStore.can_edit_complete_order:!(!this.selectedStore.can_edit_complete_order&&"Z"===this.openOrderData.status)||this.selectedStore.can_edit_complete_order},accessByStore:function(){return["cvsms","smsstore1","smsstore2"]},computedAccess:function(){if(this.accessByStore.includes(this.selectedStore.url_id)&&("ST"===this.selectedStore.role_id||"SS"===this.selectedStore.role_id))return!0},stageLevel:function(){return"sit"},progressClasses:function(){var t="progress ";return this.currentStep&&"complete"===this.currentStep.label?t+"progress--complete":t+"progress--"+(this.steps.indexOf(this.currentStep)+1)},stepLogs:function(){var t=[];if(this.steps.length)for(;this.steps.length>0;)t.push(this.steps.splice(0,6));return t},stepLogsV2:function(){var t=[];for(this.setep.length,Math.ceil(this.setep/6);this.setep.length>0;)t.push(this.setep.splice(0,6));return t},activeFindDriver:function(){return"GSN"===this.openOrderData.shipping_courier_id&&1===this.openOrderData.shipping_log.gosend.can_booking?"A"===this.openOrderData.status&&1===this.openOrderData.is_paid:("GSN"!==this.openOrderData.shipping_courier_id||0!==this.openOrderData.shipping_log.gosend.can_booking)&&void 0},stillFinDriver:function(){return!(!this.openOrderData||"GSN"!==this.openOrderData.shipping_courier_id||0!==this.openOrderData.shipping_log.gosend.can_booking||null===this.openOrderData.shipping_log.gosend.detail||"Finding Driver"!==this.openOrderData.shipping_log.gosend.detail.status)},loadingFindDriver:function(){return(!this.openOrderData||"GSN"!==this.openOrderData.shipping_courier_id||1!==this.openOrderData.shipping_log.gosend.can_booking)&&(!(!this.openOrderData||"GSN"!==this.openOrderData.shipping_courier_id||0!==this.openOrderData.shipping_log.gosend.can_booking||null!==this.openOrderData.shipping_log.gosend.detail.driver_name)||void 0)},blockChangeStatus:function(){return"GSN"===this.openOrderData.shipping_courier_id&&0===this.openOrderData.shipping_log.gosend.can_booking}},methods:{getRoute:function(t,e){if((0,n.default)(this.$route.query).includes("pathName")?this.routeName=this.$route.query.pathName:this.routeName=t,"Open Order Detail"===t){var s=(0,c.baseApi)(this.selectedStore.url_id,this.langId,"openorder/"+this.$route.params.id);this.getDetailData(s)}else{var a=(0,c.baseApi)(this.selectedStore.url_id,this.langId,"closeorder/"+this.$route.params.id);this.showEdit=!1,this.getDetailData(a)}},getDetailData:function(t){var e=this;this.loading=!0,void 0!==this.$route.query.rpt&&(this.repeat=!0);var s={Authorization:"Bearer "+this.token.access_token};(0,p.default)({method:"GET",url:t,headers:s}).then(function(t){e.openOrderData=t.data.data,e.labelDate=e.openOrderData.fshipping_date,e.switchValue=e.openOrderData.is_paid,e.statusOrder=e.openOrderData.status,e.loading=!1,e.splitDate(e.openOrderData.order_date,e.labelDate)}).catch(function(t){e.loading=!1,e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error})})},splitDate:function(t,e){var s=t.split(" ")[0];this.openOrderData.order_date=s,this.labelDate=(0,h.default)(e).format("DD MMMM YYYY")},handleDownload:function(t){var e={};0===t&&(e.url="pdf"),1===t&&(e.url="deliveryorderpdf"),2===t&&(e.url="deliveryorderpdf",e.no_image=1),3===t&&(e.url="invoicepdf"),4===t&&(e.url="packinglabelpdf"),5===t&&(e.url="packinglabelpdf",e.with_header=1),6===t&&(e.url="packinglabelpdf",e.type=2),7===t&&(e.url="packinglabelpdf",e.type=2,e.with_header=1),8===t&&(e.url="packinglabelpdf",e.type=3),9===t&&(e.url="packinglabelpdf",e.type=3,e.with_header=1),this.download(e)},handleDownloadEdit:function(t){var e={};0===t&&(e.url="pdf"),1===t&&(e.url="deliveryorderpdf"),2===t&&(e.url="deliveryorderpdf",e.no_image=1),3===t&&(e.url="packinglabelpdf"),4===t&&(e.url="packinglabelpdf",e.type=2),5===t&&(e.url="packinglabelpdf",e.type=3),this.download(e)},handleNotif:function(t){"sms"===t&&(this.smsDialog=!0),"email"===t&&(this.emailDialog=!0),"wa"===t&&(this.waDialog=!0)},download:function(t){var e=this;this.loading=!0,t.id=this.openOrderData.id;var s={Authorization:"Bearer "+this.token.access_token};(0,p.default)({url:(0,c.baseApi)(this.selectedStore.url_id,this.langId,"openorder/"+t.url),method:"GET",headers:s,responseType:"blob",params:t}).then(function(s){var a=e.openOrderData.order_no+"_"+t.id+".pdf",i=window.URL.createObjectURL(new Blob([s.data])),r=document.createElement("a");r.href=i,r.setAttribute("download",a),document.body.appendChild(r),r.click(),e.loading=!1}).catch(function(t){console.log(t);var s=t.response.data;e.fileReader(s).then(function(t){var s=JSON.parse(t);console.log("err",s.error.error),e.$notify({type:"warning",title:s.error.message,message:s.error.error})}),e.loading=!1})},fileReader:function(t){var e=new FileReader;return new r.default(function(s,a){e.onerror=function(){e.abort(),a(new Error("Problem parsing file"))},e.onload=function(){s(e.result)},e.readAsText(t)})},handleSwitchPayment:function(){var t=this;this.loading=!0;var e={Authorization:"Bearer "+this.token.access_token},s={status:this.switchValue,order_id:this.openOrderData.id};(0,p.default)({method:"POST",url:(0,c.baseApi)(this.selectedStore.url_id,this.langId,"openorder/updatepaymentstatus"),headers:e,params:s}).then(function(e){t.openOrderData=e.data.data,t.$message({message:"Success",type:"success"}),t.getDetailData(),t.loading=!1}).catch(function(e){t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error}),t.switchValue=t.openOrderData.is_paid,t.getDetailData(),t.loading=!1})},handleChangeStatus:function(t){"btn"===t&&(this.statusOrder="A",this.handleUpdateStatus()),"T"===t?this.openOrderData.shipping_date||this.openOrderData.shipping_track_no?this.handleUpdateStatus():(this.$message({message:this.lang.shipping_status+" "+this.lang.required,type:"error"}),this.statusOrder=this.openOrderData.status):this.handleUpdateStatus()},handleUpdateStatus:function(){var t=this;this.loading=!0;var e={Authorization:"Bearer "+this.token.access_token},s={status:this.statusOrder,order_id:this.openOrderData.id};(0,p.default)({method:"POST",url:(0,c.baseApi)(this.selectedStore.url_id,this.langId,"openorder/updatestatus"),headers:e,data:s}).then(function(e){t.openOrderData=e.data.data,t.$message({message:"Success",type:"success"}),t.loading=!1,t.getDetailData()}).catch(function(e){t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error}),t.statusOrder=t.openOrderData.status,t.loading=!1})},handleEditNew:function(t){"customer"===t&&(this.formCustomer.customerId=this.openOrderData.customer_id,this.formCustomer.customerName=this.openOrderData.customer_name,this.formCustomer.customerEmail=this.openOrderData.customer_email,this.formCustomer.customerPhone=this.openOrderData.customer_phone,this.dialogEditCustomer=!0)},handleEdit:function(t){"customer"===t?(this.formCustomer.customerId=this.openOrderData.customer_id,this.formCustomer.customerName=this.openOrderData.customer_name,this.formCustomer.customerEmail=this.openOrderData.customer_email,this.formCustomer.customerPhone=this.openOrderData.customer_phone,this.isEditing.customer=!0):"shippingto"===t?(this.isEditing.shippingto=!0,this.getStateCountry(),this.getShippingCity(),this.getSubDistrict()):"status"===t?(this.formShippingStatus.dateShipping=this.openOrderData.shipping_date,this.formShippingStatus.noTracking=this.openOrderData.shipping_track_no,this.isEditing.status=!0):"dropship"===t?(this.formDropShip.dropShipName=this.openOrderData.drop_ship_store_name,this.formDropShip.dropShipSender=this.openOrderData.drop_ship_sender_name,this.formDropShip.dropShipPhone=this.openOrderData.drop_ship_contact_phone,this.isEditing.dropship=!0):"notes"===t?this.isEditing.notes=!0:"invoice"===t?this.isEditing.invoice=!0:"server"===t?this.isEditing.server=!0:"due_date"===t&&(this.isEditing.due_date=!0)},cancelEdit:function(t){"customer"===t?(this.isEditing.customer=!1,this.dialogEditCustomer=!1):"shippingto"===t?this.isEditing.shippingto=!1:"status"===t?this.isEditing.status=!1:"dropship"===t?this.isEditing.dropship=!1:"notes"===t?this.isEditing.notes=!1:"invoice"===t?this.isEditing.invoice=!1:"server"===t?this.isEditing.server=!1:"due_date"===t&&(this.isEditing.due_date=!1)},saveEdit:function(t){var e=this;if("customer"===t){var s=(0,c.baseApi)(this.selectedStore.url_id,this.langId,"openorder/updatecustomer"),a={customer_id:this.formCustomer.customerId,order_id:this.openOrderData.id};this.updateData(t,s,a)}else if("shippingto"===t){var i=(0,c.baseApi)(this.selectedStore.url_id,this.langId,"openorder/updateshippingaddress"),r={order_id:this.openOrderData.id,shipping_to:this.openOrderData.shipping_to,shipping_address:this.openOrderData.shipping_address,shipping_country_id:this.openOrderData.shipping_country_id,shipping_state_id:this.openOrderData.shipping_state_id,shipping_city_id:this.openOrderData.shipping_city_id,shipping_subdistrict_id:this.openOrderData.shipping_subdistrict_id,shipping_postal_code:this.openOrderData.shipping_postal_code,shipping_phone:this.openOrderData.shipping_phone};this.updateData(t,i,r)}else if("status"===t)this.$refs[t].validate(function(s){if(!s)return console.log("error submit!!"),!1;var a=(0,c.baseApi)(e.selectedStore.url_id,e.langId,"openorder/updateShippingStatus"),i={order_id:e.openOrderData.id,shipping_date:e.formShippingStatus.dateShipping,shipping_track_no:e.formShippingStatus.noTracking};e.updateData(t,a,i)});else if("dropship"===t){var n=(0,c.baseApi)(this.selectedStore.url_id,this.langId,"openorder/updateshippingaddress"),o={drop_ship_store_name:this.formDropShip.dropShipName,drop_ship_sender_name:this.formDropShip.dropShipSender,drop_ship_contact_phone:this.formDropShip.dropShipPhone,order_id:this.openOrderData.id,shipping_to:this.openOrderData.shipping_to,shipping_address:this.openOrderData.shipping_address,shipping_country_id:this.openOrderData.shipping_country_id,shipping_state_id:this.openOrderData.shipping_state_id,shipping_city_id:this.openOrderData.shipping_city_id,shipping_subdistrict_id:this.openOrderData.shipping_subdistrict_id,shipping_postal_code:this.openOrderData.shipping_postal_code,shipping_phone:this.openOrderData.shipping_phone};this.updateData(t,n,o)}else if("notes"===t){var l=(0,c.baseApi)(this.selectedStore.url_id,this.langId,"openorder/updateAttr"),d={order_id:this.openOrderData.id,name:"notes",value:this.openOrderData.notes};this.updateData(t,l,d)}else if("invoice"===t){var p=(0,c.baseApi)(this.selectedStore.url_id,this.langId,"openorder/updateAttr"),u={order_id:this.openOrderData.id,name:"invoice_notes",value:this.openOrderData.invoice_notes};this.updateData(t,p,u)}else if("server"===t){var h=(0,c.baseApi)(this.selectedStore.url_id,this.langId,"openorder/updateAttr"),_={order_id:this.openOrderData.id,name:"serve_by_id",value:this.openOrderData.serve_by_id};this.updateData(t,h,_)}else if("due_date"===t){var m=(0,c.baseApi)(this.selectedStore.url_id,this.langId,"openorder/updateAttr"),g={order_id:this.openOrderData.id,name:"payment_due_date",value:this.openOrderData.payment_due_date};this.updateData(t,m,g)}},editChangeCountry:function(t){this.openOrderData.shipping_country_id=t.id,this.openOrderData.shipping_country_name=t.name,"ID"===t.id?(this.openOrderData.shipping_state_name="",this.getStateCountry()):(this.openOrderData.shipping_city_id="",this.openOrderData.shipping_state_id="",this.openOrderData.shipping_subdistrict_id="",this.openOrderData.shipping_postal_code="")},getStateCountry:function(){var t=this;this.loading=!0;var e={Authorization:"Bearer "+this.token.access_token},s={search_column:"country_id",search_operator:"=",search_text:this.openOrderData.shipping_country_id,per_page:1e3};(0,p.default)({method:"GET",url:(0,c.baseApi)(this.selectedStore.url_id,this.langId,"state"),headers:e,params:s}).then(function(e){t.stateCountry=e.data.data,t.loading=!1}).catch(function(){t.stateCountry=[],t.loading=!1})},editProvince:function(t){this.openOrderData.shipping_state_id=t.id,this.openOrderData.shipping_state_name=t.name,this.openOrderData.shipping_city_name="",this.getShippingCity()},getShippingCity:function(){var t=this;this.loading=!0;var e={Authorization:"Bearer "+this.token.access_token},s={search_column:"state_id",search_operator:"=",search_text:this.openOrderData.shipping_state_id,per_page:1e3};(0,p.default)({method:"GET",url:(0,c.baseApi)(this.selectedStore.url_id,this.langId,"shippingcity"),headers:e,params:s}).then(function(e){t.shippingCity=e.data.data,t.loading=!1}).catch(function(){t.shippingCity=[],t.loading=!1})},editCity:function(t){this.openOrderData.shipping_city_id=t.id,this.openOrderData.shipping_city_name=t.city,this.openOrderData.shipping_subdistrict_name="",this.getSubDistrict()},getSubDistrict:function(){var t=this;this.loading=!0;var e={Authorization:"Bearer "+this.token.access_token},s={search_column:"city_id",search_operator:"=",search_text:this.openOrderData.shipping_city_id,per_page:100};(0,p.default)({method:"GET",url:(0,c.baseApi)(this.selectedStore.url_id,this.langId,"shippingcitysubdistrict"),headers:e,params:s}).then(function(e){t.subDistrict=e.data.data,t.loading=!1}).catch(function(){t.subDistrict=[],t.loading=!1})},editSubDistrict:function(t){this.openOrderData.shipping_subdistrict_id=t.id,this.openOrderData.shipping_subdistrict_name=t.name},updateData:function(t,e,s){var a=this;this.loading=!0;var i={Authorization:"Bearer "+this.token.access_token};(0,p.default)({method:"POST",url:e,headers:i,data:s}).then(function(e){a.openOrderData=e.data.data,a.labelDate=a.openOrderData.fshipping_date,a.$message({message:"Success",type:"success"}),a.loading=!1,a.cancelEdit(t),a.getDetailData()}).catch(function(t){a.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error}),a.loading=!1,a.getDetailData()})},changeDateHeader:function(t){var e=this;this.loading=!0;var s={Authorization:"Bearer "+this.token.access_token},a={order_id:this.openOrderData.id,name:"order_date",value:t};(0,p.default)({method:"POST",url:(0,c.baseApi)(this.selectedStore.url_id,this.langId,"openorder/updateAttr"),headers:s,data:a}).then(function(t){e.openOrderData=t.data.data,e.$message({message:"Success",type:"success"}),e.loading=!1,e.getDetailData()}).catch(function(t){e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error}),e.loading=!1})},timeChange:function(t){this.formShippingStatus.dateShipping=t},getCustomerSuggest:function(t,e){var s=this,a={Authorization:"Bearer "+this.token.access_token},r={search:t};(0,p.default)({method:"GET",url:(0,c.baseApi)(this.selectedStore.url_id,this.langId,"customer"),headers:a,params:r}).then(function(t){var a=!0,r=!1,n=void 0;try{for(var o,l=(0,i.default)(t.data.data);!(a=(o=l.next()).done);a=!0){var d=o.value;d.value=d.customer_text}}catch(t){r=!0,n=t}finally{try{!a&&l.return&&l.return()}finally{if(r)throw n}}s.suggestData=t.data.data,e(s.suggestData)}).catch(function(t){s.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error})})},handleSelectCustomer:function(t){this.formCustomer.customerId=t.id,this.formCustomer.customerEmail=t.email,this.formCustomer.customerPhone=t.phone,this.formCustomer.customerName=t.name},editHeaderButton:function(){this.selectedStore.can_edit_complete_order||"P"!==this.openOrderData.order_source||"Z"!==this.openOrderData.status?this.showEdit=!0:this.$notify({type:"warning",message:this.$lang[this.langId].note_block_edit_trx_pos})},backHandle:function(){this.repeat?"salesdetails"===this.$route.query.path?this.$router.push({path:"/reports/sales?path=salesdetails"}):"salesitemsbydate"===this.$route.query.path?this.$router.push({path:"/reports/sales?path=salesitemsbydate"}):"salesitemsbybrands"===this.$route.query.path?this.$router.push({path:"/reports/sales?path=salesitemsbybrands"}):"salesdetailsbydatetime"===this.$route.query.path?this.$router.push({path:"/reports/sales?path=salesdetailsbydatetime"}):"salesitemdiscountsbydate"===this.$route.query.path?this.$router.push({path:"/reports/sales?path=salesitemdiscountsbydate"}):"salesitemaddonsbydate"===this.$route.query.path?this.$router.push({path:"/reports/sales?path=salesitemaddonsbydate"}):"creditsalesdetails"===this.$route.query.path?this.$router.push({path:"/reports/sales?path=creditsalesdetails"}):"creditpayment"===this.$route.query.path?this.$router.push({path:"/reports/sales?path=creditpayment"}):"productsalesbycategory"===this.$route.query.path?this.$router.push({path:"/reports/products?path=productsalesbycategory"}):"salesdetailsbyshift"===this.$route.query.path?this.$router.push({path:"/reports/shifts?path=salesdetailsbyshift"}):"salesitemaddonsbydateshift"===this.$route.query.path?this.$router.push({path:"/reports/shifts?path=salesitemaddonsbydateshift"}):"outstandingpayment"===this.$route.query.path&&this.$router.push({path:"/reports/payments?path=outstandingpayment"}):"Open Order Detail"===this.routeName?this.$router.push({path:"/sales/openorder"}):"Complete Order Detail"===this.routeName?this.$router.push({path:"/sales/completeorder"}):"Integrate Jurnal.ID"===this.routeName&&this.$router.push({name:"Integrate Jurnal.ID",params:{lastParams:this.$route.query.lastParams,labelDate:this.$route.query.labelDate},query:{menu:"general",tab:this.$route.query.tab}})},updatePayment:function(t){this.openOrderData=t,this.openOrderData.is_paid=1,this.loading=!1;var e=(0,c.baseApi)(this.selectedStore.url_id,this.langId,"openorder/"+this.$route.params.id);this.getDetailData(e)},getEmailNotify:function(){var t=this,e={Authorization:"Bearer "+this.token.access_token};(0,p.default)({method:"GET",url:(0,c.baseApi)(this.selectedStore.url_id,this.langId,"emailnotify"),headers:e}).then(function(e){t.emailNotify=e.data.data}).catch(function(e){t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error})})},getSmsNotify:function(){var t=this,e={Authorization:"Bearer "+this.token.access_token};(0,p.default)({method:"GET",url:(0,c.baseApi)(this.selectedStore.url_id,this.langId,"smsnotify"),headers:e}).then(function(e){t.smsNotify=e.data.data}).catch(function(e){t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error})})},handleSentEmail:function(){var t=this,e={Authorization:"Bearer "+this.token.access_token},s={order_id:this.openOrderData.id,email_type_id:this.emailRadioValue,type:"O"};(0,p.default)({method:"POST",url:(0,c.baseApi)(this.selectedStore.url_id,this.langId,"allorder/sendemail"),headers:e,data:s}).then(function(e){t.emailDialog=!1,t.$notify({type:"success",message:e.data.message})}).catch(function(e){t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error})})},handleSentSms:function(){var t=this,e={Authorization:"Bearer "+this.token.access_token},s={order_id:this.openOrderData.id,sms_type_id:this.smsRadioValue};(0,p.default)({method:"POST",url:(0,c.baseApi)(this.selectedStore.url_id,this.langId,"openorder/sendsmsorder"),headers:e,data:s}).then(function(e){t.smsDialog=!1,t.$notify({type:"success",message:e.data.message})}).catch(function(e){t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error})})},handleSentWa:function(){var t=this,e={Authorization:"Bearer "+this.token.access_token},s={order_id:this.openOrderData.id,sms_type_id:this.waRadioValue};(0,p.default)({method:"POST",url:(0,c.baseApi)(this.selectedStore.url_id,this.langId,"openorder/sendwaorder"),headers:e,data:s}).then(function(e){t.waDialog=!1,t.$notify({type:"success",message:"Success"}),t.handleShowWA(e.data.data.link)}).catch(function(e){console.log(e),t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error})})},handleShiftEnter:function(t){console.log(t.type),13==t.keyCode&&t.shiftKey&&("keyup"==t.type&&this.saveEdit("notes"),t.preventDefault())},refreshData:function(t){this.openOrderData=(0,a.default)({},t),this.labelDate=this.openOrderData.fshipping_date,this.switchValue=this.openOrderData.is_paid,this.statusOrder=this.openOrderData.status,this.loading=!1,this.splitDate(this.openOrderData.order_date,this.labelDate)},handleShowWA:function(t){window.open(t),type="default"},cancelStatusFromBtn:function(){this.statusOrder="X",this.handleUpdateStatus()},stepClasses:function(t){var e="progress__step progress__step--"+(t+1)+" ";return this.currentStep&&"complete"===this.currentStep.label||t<this.steps.indexOf(this.currentStep)?e+"progress__step--complete":t===this.steps.indexOf(this.currentStep)?e+"progress__step--active":e},nextStep:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.currentStep<this.setep.length?this.currentStep++:this.currentStep=0},handleFindDriver:function(){var t=this,e=this.openOrderData.id;(0,l.findDriver)(e).then(function(e){t.$notify({type:"success",message:"Success"});var s=(0,c.baseApi)(t.selectedStore.url_id,t.langId,"openorder/"+t.$route.params.id);t.getDetailData(s)}).catch(function(e){console.log(e),t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error})})},handleLogsDriver:function(){var t=this,e=this.openOrderData.id;(0,l.logsDriver)(e).then(function(e){t.steps=[],e.data.data.map(function(e){t.steps.push({label:e.fstatus,icon:"icon-truck-new-white"})})}).catch(function(e){console.log(e),t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error})})},handleDropdownSection:function(t){"tracking"===t&&window.open(this.openOrderData.shipping_log.gosend.detail.live_tracking_url)},refreshOrderGosend:function(){if(console.log("gosend",this.openOrderData.shipping_courier_id),this.openOrderData&&"GSN"===this.openOrderData.shipping_courier_id&&0===this.openOrderData.shipping_log.gosend.can_booking){var t=(0,c.baseApi)(this.selectedStore.url_id,this.langId,"openorder/"+this.$route.params.id);this.getDetailData(t)}},searchCustomer:function(t){var e=this,s={search:t};this.loadingCustomer=!0,(0,g.customer)(s).then(function(t){e.dataCustomer=t.data.data,e.loadingCustomer=!1}).catch(function(t){e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error})})},handleChangeCustomer:function(t){console.log("customer",t),t&&t.id&&(this.formCustomer={customerEmail:t.email,customerName:t.name,customerId:t.id,customerPhone:t.phone})},removeItemCustomer:function(){this.formCustomer={customerName:"",customerId:null,customerEmail:"",customerPhone:""}},searchCustomerTypes:function(t,e){var s=this;this.searchingCustomerTypes=!0;var a={Authorization:"Bearer "+this.token.access_token},r={search:t};t.length>0&&(0,p.default)({method:"GET",url:(0,c.baseApi)(this.selectedStore.url_id,this.langId,"customertype"),headers:a,params:r}).then(function(t){var a=!0,r=!1,n=void 0;try{for(var o,l=(0,i.default)(t.data.data);!(a=(o=l.next()).done);a=!0){var d=o.value;d.value=d.name,d.id=d.id}}catch(t){r=!0,n=t}finally{try{!a&&l.return&&l.return()}finally{if(r)throw n}}s.searchResultCustomerTypes=t.data.data,e(s.searchResultCustomerTypes),s.searchingCustomerTypes=!1}).catch(function(){s.searchingCustomerTypes=!1,s.searchResultCustomerTypes=[]})},handleSelected:function(t){this.tempCustomer.customer_type_id=t.id},labelAvatar:function(t){return t.match(/(^\S\S?|\b\S)?/g).join("").match(/(^\S|\S$)?/g).join("").toUpperCase()},getPhone:function(t){this.tempCustomer.customer_phone=t.formattedNumber},handleAddNewCustomer:function(){var t=this;this.loadingUpdateCustomer=!0,this.tempCustomer.order_id=this.openOrderData.id,(0,v.updateCustomerOrder)(this.tempCustomer).then(function(e){t.openOrderData=e.data.data,t.labelDate=t.openOrderData.fshipping_date,t.loadingUpdateCustomer=!1,t.visibleCustomerNew=!1,t.dialogEditCustomer=!1,t.getDetailData()}).catch(function(e){t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error}),t.loadingUpdateCustomer=!1})},getEstimationGosenDeliver:function(t){var e=t.split("-")[0],s=t.split("-")[1];return h.default.unix(e).format("HH:mm:ss")+" - "+h.default.unix(s).format("HH:mm:ss")}},beforeMount:function(){this.$route.query||this.handleCustomPermissionSinglePage(this.customRPermis,"show")},mounted:function(){var t=this;"Complete Order Detail"===this.$route.name?this.customRPermis="sales/closedorders":"Return Order Detail"===this.$route.name?this.customRPermis="sales/salesreturns":"Cancel Order Detail"===this.$route.name&&(this.customRPermis="sales/cancelledorders"),this.getRoute(this.selectRoute,this.selectedStore),this.getEmailNotify(),this.getSmsNotify(),setInterval(function(){"Z"!==t.openOrderData.status&&"GSN"===t.openOrderData.shipping_courier_id&&0===t.openOrderData.shipping_log.gosend.can_booking&&t.refreshOrderGosend()},35e3)}}}}]);