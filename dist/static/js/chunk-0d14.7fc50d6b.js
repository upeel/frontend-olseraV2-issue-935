(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-0d14"],{"0jhR":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=h(a("14Xm")),s=h(a("D3Ub")),i=h(a("m1cH")),o=h(a("FyfS")),l=h(a("4d7F")),r=h(a("P2sY")),d=a("xCek"),c=h(a("vDqi")),u=a("Lpiz"),p=h(a("Ckak")),m=h(a("kGIl")),_=h(a("DChC"));function h(t){return t&&t.__esModule?t:{default:t}}e.default={name:"PurchaseTable",mixins:[_.default],props:{dataTable:{default:null,type:Object},editShow:{default:!0,type:Boolean}},components:{InputMoney:p.default,LoadingComponent:m.default},data:function(){return{loading:!0,searchQuery:"",detailData:{},deleteRowData:{},showEdit:!0,showTable:!1,addProductDialog:!1,deleteRowProduct:!1,dialogDiscount:!1,dialogShipping:!1,dialogPayment:!1,waitingPayment:!1,dialogTaxPayment:!1,rowState:[],formAddProduct:{products:[]},searchData:[],addingOrderItem:!1,formLabelWidth:"30%",formPayment:{paymentDate:"",paymentReference:"",paymentTotal:"",payment_account_name_id:""},formShipping:{totalShipCost:""},formTaxPayment:{totalTax:"",isPercentage:1,totalTaxPercentage:""},formDiscount:{price:0,percent:0},editTable:{noSerial:"",qty:"",price:""},discountValue:1,dataPaymentJurnal:[],loadingPaymentJurnal:!1}},watch:{dataTable:function(){this.getData()},editShow:function(){this.showEditForm()}},computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},langId:function(){return this.$store.state.userStores.langId},lang:function(){return this.$store.state.userStores.lang},rootLang:function(){return this.$lang[this.$store.state.userStores.langId]},disableButtonAddProduct:function(){return!this.formAddProduct.products.length||!this.formAddProduct.qty},userRole:function(){var t=this.$store.getters.selectedStore;return{role_id:t.role_id,role_name:t.role_name,is_pos_only:t.is_pos_only,is_mobile:t.is_mobile}},computedHeaderTable:function(){var t=["",this.lang.description,this.lang.qty,this.lang.price+"("+this.detailData.currency_id+")",this.lang.total_price+"("+this.detailData.currency_id+")",this.$lang[this.langId].action],e=["",this.lang.description,this.lang.qty,this.$lang[this.langId].action],a=!this.selectedStore.is_hide_buy_price_purchase;return{header:a?t:e,variabel:a}},accessByStore:function(){return["cvsms","smsstore1","smsstore2"]},computedAccess:function(){return!(!this.accessByStore.includes(this.selectedStore.url_id)||"PT"!==this.selectedStore.role_id)}},methods:{showEditForm:function(){this.showEdit=this.editShow},getData:function(){this.detailData=(0,r.default)({},this.dataTable),this.deleteRowData=(0,r.default)({},this.dataTable),this.refreshTable()},refreshTable:function(){var t=this;(this.loading=!0,this.detailData.purchaseitems.length>0)?new l.default(function(e){t.detailData.purchaseitems.map(function(a,n,s){t.$set(a,"edited",!1),t.rowState.push(a),n===s.length-1&&e()})}).then(function(){t.loading=!1,t.showTable=!0}):(this.loading=!1,this.showTable=!1)},getProductSearch:function(t,e){var a=this;this.loading=!0;var n={Authorization:"Bearer "+this.token.access_token},s={sort_column:"name",sort_type:"asc",search:t,per_page:50};(0,c.default)({method:"GET",url:(0,d.baseApi)(this.selectedStore.url_id,this.langId,"productvariantsearch"),headers:n,params:s}).then(function(t){var n=!0,s=!1,i=void 0;try{for(var l,r=(0,o.default)(t.data.data);!(n=(l=r.next()).done);n=!0){var d=l.value;d.value=d.name}}catch(t){s=!0,i=t}finally{try{!n&&r.return&&r.return()}finally{if(s)throw i}}a.searchData=t.data.data,e(a.searchData)}).catch(function(){a.searchData=[]})},getProductSelect:function(t){this.formAddProduct.products.filter(function(e){return t.product_id===e.product_id}).length||(this.searchQuery="",this.formAddProduct.products.push(t),this.formAddProduct.price=t.buy_price)},createNewProduct:function(){var t=this;this.addingOrderItem=!0;var e={Authorization:"Bearer "+this.token.access_token},a={id:this.dataTable.id,product_ids:[].concat((0,i.default)(this.formAddProduct.products)).map(function(t){return t.product_id}).join(","),price:null===this.formAddProduct.price?0:parseFloat(this.formAddProduct.price),amount:null===this.formAddProduct.amount?0:parseFloat(this.formAddProduct.amount),qty:parseFloat(this.formAddProduct.qty)};(0,c.default)({method:"POST",url:(0,d.baseApi)(this.selectedStore.url_id,this.langId,"openpurchase/additem"),headers:e,data:a}).then(function(e){t.detailData=e.data.data,t.$message({message:"Success",type:"success"}),t.addingOrderItem=!1,t.addProductDialog=!1,t.searchQuery="",t.refreshTable()}).catch(function(e){t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error}),t.addingOrderItem=!1,t.addProductDialog=!0})},showProductDialog:function(){this.searchData=[],this.formAddProduct={products:[],price:"",qty:""},this.addProductDialog=!0},handleEditRow:function(t,e){var a=this;return(0,s.default)(n.default.mark(function s(){return n.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a.rowState.map(function(t){return t.edited=!1,t});case 2:a.editTable.qty=e.qty,a.editTable.price=e.price,a.rowState[t].edited=!0;case 5:case"end":return n.stop()}},s,a)}))()},handleSimpanRow:function(t,e){var a=this;this.loading=!0;var n={Authorization:"Bearer "+this.token.access_token},s={id:this.dataTable.id,pk:e.id,qty:this.editTable.qty,price:this.editTable.price};(0,c.default)({method:"POST",url:(0,d.baseApi)(this.selectedStore.url_id,this.langId,"openpurchase/updateitem"),headers:n,data:s}).then(function(e){a.detailData=e.data.data,a.$message({message:"Success",type:"success"}),a.loading=!1,a.rowState[t].edited=!1,a.refreshTable()}).catch(function(e){a.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error}),a.loading=!1,a.rowState[t].edited=!1})},handleCancelRow:function(t){this.editTable.qty="",this.editTable.price="",this.rowState[t].edited=!1},handleDeleteRow:function(t,e){this.deleteRowData=e,this.deleteRowProduct=!0},saveDeleteRow:function(t){var e=this;this.loading=!0;var a={Authorization:"Bearer "+this.token.access_token},n={id:this.dataTable.id,pk:t,qty:0};(0,c.default)({method:"POST",url:(0,d.baseApi)(this.selectedStore.url_id,this.langId,"openpurchase/updateitem"),headers:a,data:n}).then(function(t){e.detailData=t.data.data,e.$message({message:"Success",type:"success"}),e.loading=!1,e.refreshTable(),e.deleteRowProduct=!1}).catch(function(t){e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error}),e.loading=!1,e.deleteRowProduct=!1})},setDiscount:function(){this.formDiscount.price=this.detailData.discount_amount,this.formDiscount.percent=parseFloat(this.detailData.fdiscount_percent),this.dialogDiscount=!0},saveDiscount:function(t){var e=this;this.loading=!0;var a={Authorization:"Bearer "+this.token.access_token},n={discount_amount:0};if(1===t){var s=parseFloat(this.formDiscount.percent),i=parseFloat(this.detailData.subtotal);n.discount_amount=s*i/100}else n.discount_amount=this.formDiscount.price;(0,c.default)({method:"PUT",url:(0,d.baseApi)(this.selectedStore.url_id,this.langId,"openpurchase/"+this.$route.params.id),headers:a,data:n}).then(function(t){e.detailData=t.data.data,e.$message({message:"Success",type:"success"}),e.loading=!1,e.dialogDiscount=!1,e.refreshTable()}).catch(function(t){e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error}),e.dialogDiscount=!1,e.loading=!1})},setPayment:function(){this.formPayment.paymentDate="",this.formPayment.paymentReference="","Parsial"!==this.detailData.is_paid_desc?this.formPayment.paymentTotal=parseFloat(this.detailData.total_amount):this.formPayment.paymentTotal=parseFloat(this.detailData.outstanding_amount),this.getPaymentJurnal(),this.dialogPayment=!0},setShippingPayment:function(){this.formShipping.totalShipCost=this.detailData.shipping_cost,this.dialogShipping=!0},saveShipping:function(){var t=this;this.loading=!0;var e={Authorization:"Bearer "+this.token.access_token},a={shipping_cost:this.formShipping.totalShipCost};(0,c.default)({method:"PUT",url:(0,d.baseApi)(this.selectedStore.url_id,this.langId,"openpurchase/"+this.$route.params.id),headers:e,data:a}).then(function(e){t.detailData=e.data.data,t.$message({message:"Success",type:"success"}),t.loading=!1,t.dialogShipping=!1,t.refreshTable()}).catch(function(e){t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error}),t.dialogShipping=!1,t.loading=!1})},savePayment:function(){var t=this;1===this.detailData.jurnal_posted_transaction&&(this.waitingPayment=!0),this.loading=!0;var e={Authorization:"Bearer "+this.token.access_token},a={id:this.dataTable.id,payment_date:this.formPayment.paymentDate,payment_ref:this.formPayment.paymentReference,payment_amount:this.formPayment.paymentTotal,payment_account_name_id:this.formPayment.payment_account_name_id};(0,c.default)({method:"POST",url:(0,d.baseApi)(this.selectedStore.url_id,this.langId,"openpurchase/updatepayment"),headers:e,data:a}).then(function(e){t.detailData=e.data.data,t.$emit("changePayment",t.detailData),t.$message({message:"Success",type:"success"}),(t.dataTable.jurnal_posted_transaction=1)&&(t.waitingPayment=!1),t.loading=!1,t.dialogPayment=!1,t.refreshTable()}).catch(function(e){t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error}),(t.dataTable.jurnal_posted_transaction=1)&&(t.waitingPayment=!1),t.loading=!1,t.dialogPayment=!1})},setTaxPayment:function(){var t=parseInt(this.detailData.subtotal);this.formTaxPayment.totalTax=this.detailData.tax_amount,this.formTaxPayment.totalTaxPercentage=0===parseInt(this.detailData.tax_amount)?0:parseInt(this.detailData.tax_amount)/parseInt(t)*100,this.dialogTaxPayment=!0},saveTaxPayment:function(){var t=this;this.loading=!0;var e={Authorization:"Bearer "+this.token.access_token},a={tax_amount:this.formTaxPayment.totalTax};(0,c.default)({method:"PUT",url:(0,d.baseApi)(this.selectedStore.url_id,this.langId,"openpurchase/"+this.$route.params.id),headers:e,data:a}).then(function(e){t.detailData=e.data.data,t.$message({message:"Success",type:"success"}),t.loading=!1,t.dialogTaxPayment=!1,t.refreshTable()}).catch(function(e){t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error}),t.dialogTaxPayment=!1,t.loading=!1})},handleCurrencyDiscount:function(t){t<0&&(this.formDiscount.totalDiscount=0)},handleCurrencyTax:function(t){t<0&&(this.formTaxPayment.totalTax=0)},handleCurrencyShipping:function(t){t<0&&(this.formShipping.totalShipCost=0)},handleCurrencyPayment:function(t){t<0&&(this.formPayment.paymentTotal=0)},handleDeletePayment:function(t){var e=this;this.loading=!0;var a={Authorization:"Bearer "+this.token.access_token},n={pk:t.id,id:t.purchase_order_id};(0,c.default)({method:"POST",url:(0,d.baseApi)(this.selectedStore.url_id,this.langId,"openpurchase/removepayment/"),headers:a,data:n}).then(function(t){e.detailData=t.data.data,e.$message({message:"Success",type:"success"}),e.loading=!1,e.refreshTable()}).catch(function(t){e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error}),e.loading=!1})},handlePrice:function(t){this.formDiscount.price>parseInt(this.detailData.subtotal)&&(this.formDiscount.price=this.detailData.subtotal)},handleRadioDiscount:function(){},handlePercent:function(t){this.formDiscount.percent>100&&(this.formDiscount.percent=100)},getPaymentJurnal:function(){var t=this;return(0,s.default)(n.default.mark(function e(){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.loadingPaymentJurnal=!0,e.next=3,(0,u.fetchPaymentFromJurnal)().then(function(e){t.dataPaymentJurnal=e.data.data,t.formPayment.payment_account_name_id=t.dataPaymentJurnal[0].id,t.loadingPaymentJurnal=!1}).catch(function(e){t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error}),t.loadingPaymentJurnal=!1,t.dataPaymentJurnal=[]});case 3:case"end":return e.stop()}},e,t)}))()},handleMatchPercentage:function(){var t=0,e=parseInt(this.detailData.subtotal);1===this.formTaxPayment.isPercentage&&(t=this.formTaxPayment.totalTax/e*100,this.formTaxPayment.totalTaxPercentage=t),0===this.formTaxPayment.isPercentage&&(t=this.formTaxPayment.totalTaxPercentage/100*e,this.formTaxPayment.totalTax=t)},handleSetTaxFromPercentage:function(){var t=0,e=parseInt(this.detailData.subtotal);1===this.formTaxPayment.isPercentage&&(t=this.formTaxPayment.totalTaxPercentage/100*e,this.formTaxPayment.totalTax=t)},resetTaxPayment:function(){var t=parseInt(this.detailData.subtotal);this.formTaxPayment.totalTax=this.detailData.tax_amount,this.formTaxPayment.totalTaxPercentage=0===parseInt(this.detailData.tax_amount)?0:this.detailData.tax_amount/100*t,this.formTaxPayment.isPercentage=1,this.dialogTaxPayment=!1}}}},DChC:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(a("QbLZ")),s=i(a("Ljqw"));function i(t){return t&&t.__esModule?t:{default:t}}var o={mixins:[a("6y4V").checkCustomPermission],computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},langId:function(){return this.$store.state.userStores.langId},lang:function(){return this.$store.state.userStores?this.$store.state.userStores.lang:{}},userRole:function(){var t=this.$store.getters.selectedStore;return{role_id:t.role_id,role_name:t.role_name,is_pos_only:t.is_pos_only,is_mobile:t.is_mobile}},rootLang:function(){return this.$lang[this.langId]},headers:function(){var t=this.$store.getters.token;return this.$store.getters.webviewMode&&(t=this.$store.getters.webviewToken),{Authorization:"Bearer "+t.access_token}},baseURL:function(){return s.default},loggedInUser:function(){return this.$store.state.user.loggedInUser},stageLevel:function(){return"sit"},defaultAccessByStore:function(){return["setdemo1","allinolsera2"]},wejayafoodAccessByStore:function(){return["setdemo1","allinolsera2","ayammrotholpusat","ayammrotholdramaga"]},saveToAllAccessStore:function(){return["setdemo1","allinolsera2","siliwangidutagarden","barokahfrozenfood"]},outlets:function(){var t=[{name:this.$store.state.userStores.lang.all,store_id:0,url_id:"all"}],e=[];return this.$store.getters.stores.map(function(a){e.includes(a.store_id)||a.is_store_active&&(t.push((0,n.default)({},a)),e.push(a.store_id))}),t},tokopediaActiveStore:function(){return this.$store.state.tokopediaActiveStore},shopeeActiveStore:function(){return this.$store.state.shopeeActiveStore}}};e.default=o},Lpiz:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fetchPaymentFromJurnal=function(t){return(0,n.service)({url:"openpurchase/paymentjurnal",params:t})};var n=a("xCek")},SOyq:function(t,e,a){"use strict";a.r(e);var n=a("jpWw"),s=a("fivT");for(var i in s)["default"].indexOf(i)<0&&function(t){a.d(e,t,function(){return s[t]})}(i);var o=a("KHd+"),l=Object(o.a)(s.default,n.a,n.b,!1,null,null,null);l.options.__file="DetailTablePurchase.vue",e.default=l.exports},fivT:function(t,e,a){"use strict";a.r(e);var n=a("0jhR"),s=a.n(n);for(var i in n)["default"].indexOf(i)<0&&function(t){a.d(e,t,function(){return n[t]})}(i);e.default=s.a},jpWw:function(t,e,a){"use strict";a.d(e,"a",function(){return n}),a.d(e,"b",function(){return s});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"flex-container flex-container--wrap",attrs:{slot:"header"},slot:"header"},[a("h3",{staticClass:"box-title"},[t._v(t._s(t.lang.order_item))]),t._v(" "),t.showEdit&&"P"===t.detailData.status&&0==t.detailData.is_paid?a("div",[a("el-button",{attrs:{type:"info",size:"small",icon:"el-icon-plus"},on:{click:t.showProductDialog}},[t._v("\n        "+t._s(t.lang.product)+"\n      ")])],1):t._e()]),t._v(" "),a("div",{staticClass:"card-body"},[t.showTable?a("div",[a("div",{staticClass:"table-responsive"},[a("bs-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"box-shadow-2",attrs:{header:t.computedHeaderTable.header}},[t._l(t.detailData.purchaseitems,function(e,n){return a("tr",{key:n},[a("td",[t._v(t._s(n+1))]),t._v(" "),a("td",[a("div",{staticClass:"flex-container"},[e.product_photo_md?a("el-avatar",{staticClass:"mr-4",attrs:{src:e.product_photo_md}}):t._e(),t._v(" "),a("div",[t._v("\n                    "+t._s(e.product_name)+" - "+t._s(e.product_variant_name)+"\n                  ")]),t._v(" "),e.product_sku?a("span",[t._v("("+t._s(e.product_sku)+")")]):t._e()],1)]),t._v(" "),a("td",{attrs:{valign:"middle",align:"left"}},[t.rowState[n].edited?a("div",["P"===t.detailData.status?a("el-input",{attrs:{type:"number"},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.handleSimpanRow(n,e)}},model:{value:t.editTable.qty,callback:function(e){t.$set(t.editTable,"qty",e)},expression:"editTable.qty"}}):a("el-input",{attrs:{disabled:""},model:{value:e.qty,callback:function(a){t.$set(e,"qty",a)},expression:"item.qty"}})],1):a("div",[t._v(" "+t._s(e.qty)+" "+t._s(e.product_uom)+" ")])]),t._v(" "),t.computedHeaderTable.variabel?a("td",{attrs:{valign:"middle",align:"left"}},[t.rowState[n].edited?a("div",[a("input-money",{nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.handleSimpanRow(n,e)}},model:{value:t.editTable.price,callback:function(e){t.$set(t.editTable,"price",e)},expression:"editTable.price"}})],1):a("div",[t._v(" "+t._s(e.fprice)+" ")])]):t._e(),t._v(" "),t.computedHeaderTable.variabel?a("td",{attrs:{valign:"middle",align:"left"}},[t._v(t._s(e.famount))]):t._e(),t._v(" "),t.showEdit&&t.computedHeaderTable.variabel&&("P"===t.detailData.status||"S"===t.detailData.status||"T"===t.detailData.status)?a("td",[t.rowState[n].edited||t.computedAccess?t._e():a("el-button",{staticStyle:{color:"#0286CD"},attrs:{size:"small",type:"text",icon:"el-icon-edit"},on:{click:function(a){return t.handleEditRow(n,e)}}},[t._v("\n                  "+t._s(t.lang.edit)+"\n                ")]),t._v(" "),t.rowState[n].edited||"P"!==t.detailData.status||t.computedAccess?t._e():a("el-button",{staticStyle:{color:"#F55246"},attrs:{size:"small",type:"text",icon:"el-icon-delete"},on:{click:function(a){return t.handleDeleteRow(n,e)}}},[t._v("\n                  "+t._s(t.$lang[t.langId].delete)+"\n                ")]),t._v(" "),t.rowState[n].edited?a("el-button",{staticStyle:{color:"#595959"},attrs:{size:"small",type:"text",icon:"el-icon-close"},on:{click:function(e){return t.handleCancelRow(n)}}},[t._v("\n                  "+t._s(t.lang.cancel)+"\n                ")]):t._e(),t._v(" "),t.rowState[n].edited?a("el-button",{staticStyle:{color:"#6EBE46"},attrs:{size:"small",type:"text",icon:"el-icon-check"},on:{click:function(a){return t.handleSimpanRow(n,e)}}},[t._v("\n                  "+t._s(t.lang.save)+"\n                ")]):t._e()],1):t.computedHeaderTable.variabel?a("td"):t.showEdit&&!t.computedHeaderTable.variabel&&"P"===t.detailData.status?a("td",[t.rowState[n].edited?t._e():a("el-button",{staticStyle:{color:"#0286CD"},attrs:{size:"small",type:"text",icon:"el-icon-edit"},on:{click:function(a){return t.handleEditRow(n,e)}}},[t._v("\n                  "+t._s(t.lang.edit)+"\n                ")]),t._v(" "),t.rowState[n].edited||"P"!==t.detailData.status?t._e():a("el-button",{staticStyle:{color:"#F55246"},attrs:{size:"small",type:"text",icon:"el-icon-delete"},on:{click:function(a){return t.handleDeleteRow(n,e)}}},[t._v("\n                  "+t._s(t.$lang[t.langId].delete)+"\n                ")]),t._v(" "),t.rowState[n].edited?a("el-button",{staticStyle:{color:"#595959"},attrs:{size:"small",type:"text",icon:"el-icon-close"},on:{click:function(e){return t.handleCancelRow(n)}}},[t._v("\n                  "+t._s(t.lang.cancel)+"\n                ")]):t._e(),t._v(" "),t.rowState[n].edited?a("el-button",{staticStyle:{color:"#6EBE46"},attrs:{size:"small",type:"text",icon:"el-icon-check"},on:{click:function(a){return t.handleSimpanRow(n,e)}}},[t._v("\n                  "+t._s(t.lang.save)+"\n                ")]):t._e()],1):t._e()])}),t._v(" "),t.computedHeaderTable.variabel?a("tr",[a("td",{staticStyle:{"border-bottom":"1px solid #000",padding:"0 0 0 0"},attrs:{colspan:"12"}})]):t._e(),t._v(" "),t.computedHeaderTable.variabel?a("tr",[a("td"),t._v(" "),a("td",{staticClass:"ipad-style",staticStyle:{"text-align":"right"}},[t._v(t._s(t.lang.order_amount))]),t._v(" "),a("th",[t._v(t._s(t.detailData.total_item_qty))]),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("td")]):t._e(),t._v(" "),t.computedHeaderTable.variabel?a("tr",[a("td"),t._v(" "),a("td",{staticClass:"ipad-style",staticStyle:{"text-align":"right"}},[t._v(t._s(t.lang.subtotal))]),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("th",[t._v(t._s(t.detailData.fsubtotal))]),t._v(" "),a("td")]):t._e(),t._v(" "),t.computedHeaderTable.variabel?a("tr",[a("td"),t._v(" "),a("td",{staticClass:"ipad-style",staticStyle:{"text-align":"right"}},[t._v(t._s(t.lang.discount))]),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("th",[t._v(t._s(t.detailData.fdiscount_amount))]),t._v(" "),t.showEdit?a("td",[t.computedAccess?t._e():a("el-button",{attrs:{size:"small",type:"text",icon:"el-icon-setting"},on:{click:t.setDiscount}},[t._v("\n                    "+t._s(t.lang.discount)+"\n                  ")])],1):a("td")]):t._e(),t._v(" "),t.computedHeaderTable.variabel?a("tr",[a("td"),t._v(" "),a("td",{staticClass:"ipad-style",staticStyle:{"text-align":"right"}},[t._v(t._s(t.lang.tax))]),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("th",[t._v(t._s(t.detailData.ftax_amount))]),t._v(" "),t.showEdit?a("td",[t.computedAccess?t._e():a("el-button",{attrs:{size:"small",type:"text",icon:"el-icon-setting"},on:{click:t.setTaxPayment}},[t._v("\n                    "+t._s(t.lang.tax)+"\n                  ")])],1):a("td")]):t._e(),t._v(" "),t.computedHeaderTable.variabel?a("tr",[a("td"),t._v(" "),a("td",{staticClass:"ipad-style",staticStyle:{"text-align":"right"}},[t._v(t._s(t.lang.shipping_cost))]),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("th",[t._v(t._s(t.detailData.fshipping_cost))]),t._v(" "),t.showEdit?a("td",[t.computedAccess?t._e():a("el-button",{attrs:{size:"small",type:"text",icon:"el-icon-setting"},on:{click:t.setShippingPayment}},[t._v("\n                    "+t._s(t.lang.shipping)+"\n                  ")])],1):a("td")]):t._e(),t._v(" "),t.computedHeaderTable.variabel?a("tr",[a("td",{staticStyle:{padding:"0 0 0 0"},attrs:{colspan:"12"}})]):t._e(),t._v(" "),t.computedHeaderTable.variabel?a("tr",{staticStyle:{"background-color":"#fff"}},[a("td"),t._v(" "),a("td",{staticClass:"ipad-style",staticStyle:{"text-align":"right"}},[t._v(t._s(t.lang.total_due))]),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("th",[t._v(t._s(t.detailData.ftotal_amount))]),t._v(" "),a("td")]):t._e(),t._v(" "),t.computedHeaderTable.variabel?a("tr",[a("td"),t._v(" "),a("td",{staticClass:"ipad-style",staticStyle:{"text-align":"right"}},[t._v(t._s(t.lang.paid_amount))]),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("th",[t._v(t._s(t.detailData.fpaid_amount))]),t._v(" "),a("td")]):t._e(),t._v(" "),t._l(t.detailData.payments,function(e,n){return a("tr",{key:n},[t.computedHeaderTable.variabel?[a("td"),t._v(" "),a("td",{staticClass:"ipad-style",staticStyle:{"text-align":"right"}},[t._v(t._s(t.lang.payment))]),t._v(" "),a("th",[a("div",[t._v(t._s(e.fpayment_date))]),t._v(" "),a("span",{staticClass:"font-normal"},[t._v("* "+t._s(e.payment_ref))])]),t._v(" "),a("td"),t._v(" "),a("th",[t._v(t._s(e.fpayment_amount))]),t._v(" "),a("th",["P"===t.detailData.status?a("el-button",{staticStyle:{color:"#F55246","margin-top":"-10px"},attrs:{size:"small",type:"text",icon:"el-icon-delete"},on:{click:function(a){return t.handleDeletePayment(e)}}},[t._v("\n                      "+t._s(t.$lang[t.langId].delete)+"\n                    ")]):t._e()],1),t._v(" "),a("td")]:t._e()],2)}),t._v(" "),!t.detailData.is_paid&&t.computedHeaderTable.variabel?a("tr",[a("td"),t._v(" "),a("td",{staticClass:"ipad-style",staticStyle:{"text-align":"right"}},[t._v(t._s(t.lang.outstanding_payment))]),t._v(" "),a("td"),t._v(" "),a("td"),t._v(" "),a("th",[t._v(t._s(t.detailData.foutstanding_amount))]),t._v(" "),t.detailData.is_paid?a("td"):a("td",[t.computedAccess?t._e():a("el-button",{attrs:{size:"small",type:"text",icon:"el-icon-setting"},on:{click:t.setPayment}},[t._v("\n                    "+t._s(t.lang.payment)+"\n                  ")])],1)]):t._e()],2)],1)]):a("div",{staticClass:"no-product text-center"},[a("p",[t._v(t._s(t.$lang[t.langId].no_product))]),t._v(" "),a("img",{attrs:{src:"/static/img/no-data.svg",alt:"No Data Picture"}})])]),t._v(" "),a("el-dialog",{attrs:{title:t.lang.add_product,visible:t.addProductDialog,"close-on-click-modal":!1,"custom-class":"mw-760"},on:{"update:visible":function(e){t.addProductDialog=e}}},[a("el-form",{nativeOn:{submit:function(t){t.preventDefault()}}},[a("div",{staticClass:"row add-product mb-8"},[a("div",{staticClass:"col-md-3 text-right"},[a("label",[t._v(t._s(t.lang.product))])]),t._v(" "),a("div",{staticClass:"col-md-9"},[a("div",{staticClass:"mb-4"},[a("el-autocomplete",{staticClass:"w-fit",attrs:{"fetch-suggestions":t.getProductSearch,placeholder:t.lang.info_auto_complete_product},on:{select:t.getProductSelect},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}})],1),t._v(" "),t._l(t.formAddProduct.products,function(e,n){return a("el-tag",{key:n,staticClass:"mr-4 mb-4",attrs:{closable:""},on:{close:function(e){return t.formAddProduct.products.splice(n,1)}}},[t._v("\n            "+t._s(e.name)+"\n          ")])})],2)]),t._v(" "),a("div",{staticClass:"row mb-8"},[a("div",{staticClass:"col-md-3 text-right"},[a("label",[t._v(t._s(t.lang.buy_price))])]),t._v(" "),a("div",{staticClass:"col-md-9"},[a("div",{staticClass:"el-input"},[a("input-money",{nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.createNewProduct.apply(null,arguments)}},model:{value:t.formAddProduct.price,callback:function(e){t.$set(t.formAddProduct,"price",e)},expression:"formAddProduct.price"}})],1)])]),t._v(" "),a("div",{staticClass:"row mb-8"},[a("div",{staticClass:"col-md-3 text-right"},[a("label",[t._v(t._s(t.lang.or)+" "+t._s(t.lang.total_price))])]),t._v(" "),a("div",{staticClass:"col-md-9"},[a("div",{staticClass:"el-input"},[a("input-money",{nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.createNewProduct.apply(null,arguments)}},model:{value:t.formAddProduct.amount,callback:function(e){t.$set(t.formAddProduct,"amount",e)},expression:"formAddProduct.amount"}})],1)])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3 text-right"},[a("label",[t._v(t._s(t.lang.qty))])]),t._v(" "),a("div",{staticClass:"col-md-9"},[a("el-input",{attrs:{placeholder:t.$lang[t.langId].input_number,type:"number"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.createNewProduct.apply(null,arguments)}},model:{value:t.formAddProduct.qty,callback:function(e){t.$set(t.formAddProduct,"qty",e)},expression:"formAddProduct.qty"}})],1)])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"text"},on:{click:function(e){t.addProductDialog=!1}}},[t._v(t._s(t.lang.cancel))]),t._v(" "),a("el-button",{attrs:{loading:t.addingOrderItem,disabled:t.disableButtonAddProduct,type:"success",icon:"el-icon-plus"},on:{click:t.createNewProduct}},[t._v("\n        "+t._s(t.lang.add)+"\n      ")])],1)],1),t._v(" "),a("el-dialog",{attrs:{visible:t.deleteRowProduct,"close-on-click-modal":!1,title:"Alert","custom-class":"mw-348"},on:{"update:visible":function(e){t.deleteRowProduct=e}}},[a("el-form",{nativeOn:{submit:function(t){t.preventDefault()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.saveDeleteRow(t.deleteRowData.id)}}},[a("h3",{staticClass:"font-16 font-bold"},[t._v("\n        "+t._s(t.lang.are_you_sure_to_remove_this_data)+"?\n      ")]),t._v(" "),a("div",{staticClass:"flex-container",attrs:{data:t.deleteRowData}},[a("div",{staticClass:"mr-8"},[a("el-avatar",{attrs:{src:t.deleteRowData.product_photo_md,alt:t.deleteRowData.product_name}})],1),t._v(" "),a("div",[a("p",[t._v(t._s(t.deleteRowData.product_name))]),t._v(" "),a("p",[t._v(t._s(t.deleteRowData.product_sku))]),t._v(" "),a("p",[t._v(t._s(t.deleteRowData.product_variant_name))])])])]),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"color-danger",attrs:{type:"text"},on:{click:function(e){return t.saveDeleteRow(t.deleteRowData.id)}}},[t._v("\n        "+t._s(t.$lang[t.langId].delete)+"\n      ")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.deleteRowProduct=!1}}},[t._v("\n        "+t._s(t.lang.cancel)+"\n      ")])],1)],1),t._v(" "),a("el-dialog",{staticClass:"discount",attrs:{title:t.lang.discount,visible:t.dialogDiscount,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogDiscount=e}}},[a("div",[a("div",{staticClass:"text-left"},[a("label",[t._v(t._s(t.$lang[t.langId].please_input)+t._s(t.lang.discount))])]),t._v(" "),a("el-radio-group",{attrs:{size:"mini"},on:{change:t.handleRadioDiscount},model:{value:t.discountValue,callback:function(e){t.discountValue=e},expression:"discountValue"}},[a("el-radio-button",{attrs:{label:1}},[a("span",{staticStyle:{"font-size":"18px","margin-right":"10px"}},[t._v("%")]),t._v("\n          "+t._s(t.lang.discount)+"\n        ")]),t._v(" "),a("el-radio-button",{attrs:{label:2}},[a("span",{staticStyle:{"font-size":"18px","margin-right":"10px"}},[t._v("$")]),t._v("\n          "+t._s(t.$lang[t.langId].nominal)+"\n        ")])],1),t._v(" "),1===t.discountValue?a("el-input",{attrs:{type:"number",min:0,max:100},nativeOn:{keyup:function(e){return t.handlePercent.apply(null,arguments)}},model:{value:t.formDiscount.percent,callback:function(e){t.$set(t.formDiscount,"percent",e)},expression:"formDiscount.percent"}},[a("template",{slot:"append"},[t._v("%")])],2):t._e(),t._v(" "),2===t.discountValue?a("input-money",{nativeOn:{keyup:function(e){return t.handlePrice.apply(null,arguments)}},model:{value:t.formDiscount.price,callback:function(e){t.$set(t.formDiscount,"price",e)},expression:"formDiscount.price"}}):t._e()],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{color:"#F44336"},attrs:{type:"text"},on:{click:function(e){t.dialogDiscount=!1}}},[t._v(t._s(t.lang.cancel))]),t._v(" "),a("el-button",{attrs:{type:"success"},on:{click:function(e){return t.saveDiscount(t.discountValue)}}},[t._v(t._s(t.lang.save))])],1)]),t._v(" "),a("el-dialog",{staticClass:"tax",attrs:{title:t.lang.tax,visible:t.dialogTaxPayment,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogTaxPayment=e}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3 text-right"},[a("label",[t._v(t._s(t.$lang[t.langId].please_input)+t._s(t.lang.tax))])]),t._v(" "),a("div",{staticClass:"flex-container",staticStyle:{width:"300px"}},[a("div",{staticStyle:{width:"60%"}},[0===t.formTaxPayment.isPercentage?a("input-money",{staticClass:"switch-discount--money border border--grey-border",staticStyle:{width:"100%"},model:{value:t.formTaxPayment.totalTax,callback:function(e){t.$set(t.formTaxPayment,"totalTax",e)},expression:"formTaxPayment.totalTax"}}):t._e(),t._v(" "),1===t.formTaxPayment.isPercentage?a("el-input",{staticClass:"switch-discount--money border border--grey-border",staticStyle:{width:"100%"},on:{input:t.handleSetTaxFromPercentage},model:{value:t.formTaxPayment.totalTaxPercentage,callback:function(e){t.$set(t.formTaxPayment,"totalTaxPercentage",e)},expression:"formTaxPayment.totalTaxPercentage"}},[a("template",{slot:"append"},[t._v("%")])],2):t._e()],1),t._v(" "),a("div",{staticStyle:{width:"40%"}},[a("el-radio-group",{staticClass:"flex-container",on:{change:t.handleMatchPercentage},model:{value:t.formTaxPayment.isPercentage,callback:function(e){t.$set(t.formTaxPayment,"isPercentage",e)},expression:"formTaxPayment.isPercentage"}},[a("el-radio-button",{staticClass:"lpoint-type",staticStyle:{width:"50%"},attrs:{label:0}},[t._v("IDR")]),t._v(" "),a("el-radio-button",{staticClass:"lpoint-type",staticStyle:{width:"50%"},attrs:{label:1}},[t._v("%")])],1)],1)])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"text"},on:{click:t.resetTaxPayment}},[t._v(t._s(t.lang.cancel))]),t._v(" "),a("el-button",{attrs:{type:"success"},on:{click:t.saveTaxPayment}},[t._v("\n        "+t._s(t.lang.save)+"\n      ")])],1)]),t._v(" "),a("el-dialog",{staticClass:"shipping-price",attrs:{title:t.lang.shipping_cost,visible:t.dialogShipping,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogShipping=e}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-3 text-right"},[a("label",[t._v(t._s(t.$lang[t.langId].please_input)+t._s(t.lang.shipping_cost))])]),t._v(" "),a("div",{staticClass:"col-md-9"},[a("input-money",{model:{value:t.formShipping.totalShipCost,callback:function(e){t.$set(t.formShipping,"totalShipCost",e)},expression:"formShipping.totalShipCost"}})],1)]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"text"},on:{click:function(e){t.dialogShipping=!1}}},[t._v(t._s(t.lang.cancel))]),t._v(" "),a("el-button",{attrs:{type:"success"},on:{click:t.saveShipping}},[t._v(t._s(t.lang.save))])],1)]),t._v(" "),a("el-dialog",{staticClass:"payment",attrs:{title:t.lang.payment,visible:t.dialogPayment,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogPayment=e}}},[a("div",[a("div",{staticClass:"flex-container"},[a("div",{staticClass:"full-width text-left"},[a("h4",[t._v(t._s(t.lang.payment_date))])]),t._v(" "),a("div",{staticClass:"full-width"},[a("el-date-picker",{staticClass:"full-width",attrs:{type:"date",placeholder:t.$lang[t.langId].pick_a_day,format:"dd-MM-yyyy","value-format":"yyyy-MM-dd"},model:{value:t.formPayment.paymentDate,callback:function(e){t.$set(t.formPayment,"paymentDate",e)},expression:"formPayment.paymentDate"}})],1)]),t._v(" "),a("div",{staticClass:"flex-container"},[a("div",{staticClass:"full-width text-left"},[a("h4",[t._v(t._s(t.lang.payment_ref))]),t._v(" "),a("div",{staticClass:"font-12 word-break",staticStyle:{"margin-top":"-10px"}},[t._v(t._s(t.lang.info_payment_ref))])]),t._v(" "),a("div",{staticClass:"full-width"},[a("el-input",{attrs:{placeholder:t.$lang[t.langId].please_input+t.lang.payment_ref},model:{value:t.formPayment.paymentReference,callback:function(e){t.$set(t.formPayment,"paymentReference",e)},expression:"formPayment.paymentReference"}})],1)]),t._v(" "),a("div",{staticClass:"flex-container"},[a("div",{staticClass:"full-width text-left"},[a("h4",[t._v(t._s(t.$lang[t.langId].payment_jurnal))])]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingPaymentJurnal,expression:"loadingPaymentJurnal"}],staticClass:"full-width"},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",remote:"","reserve-keyword":""},model:{value:t.formPayment.payment_account_name_id,callback:function(e){t.$set(t.formPayment,"payment_account_name_id",e)},expression:"formPayment.payment_account_name_id"}},t._l(t.dataPaymentJurnal,function(t){return a("el-option",{key:t.id,attrs:{label:t.account_no+" "+t.account_name,value:t.id}})}),1)],1)]),t._v(" "),a("div",{staticClass:"flex-container"},[a("div",{staticClass:"full-width text-left"},[a("h4",[t._v(t._s(t.lang.payment_amount))])]),t._v(" "),a("div",{staticClass:"full-width"},[a("input-money",{model:{value:t.formPayment.paymentTotal,callback:function(e){t.$set(t.formPayment,"paymentTotal",e)},expression:"formPayment.paymentTotal"}})],1)])]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"text"},on:{click:function(e){t.dialogPayment=!1}}},[t._v(t._s(t.lang.cancel))]),t._v(" "),a("el-button",{attrs:{type:"success"},on:{click:t.savePayment}},[t._v(t._s(t.lang.save))])],1),t._v(" "),a("el-dialog",{attrs:{width:"30%",title:t.$lang[t.langId].accounting_3rd_party_process,visible:t.waitingPayment,"show-close":!1,"close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(e){t.waitingPayment=e}}},[a("div",{attrs:{align:"center"}},[t._v(t._s(t.$lang[t.langId].jurnal_please_wait))]),t._v(" "),a("loading-component",{staticStyle:{"text-align":"center"},attrs:{active:!0,color:"#1bb4e6",loader:"bars",width:64,height:64,backgroundColor:"#ffffff"}})],1)],1)],1)},s=[]}}]);