(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-39cd"],{"/Rco":function(t,e,a){"use strict";a.r(e);var r=a("35cK"),o=a.n(r);for(var s in r)["default"].indexOf(s)<0&&function(t){a.d(e,t,function(){return r[t]})}(s);e.default=o.a},"0EuQ":function(t,e,a){"use strict";a.d(e,"a",function(){return r}),a.d(e,"b",function(){return o});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"box-card"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{md:12}},[a("h4",[t._v(t._s(t.lang.manage)+" "+t._s(t.lang.group)+" - "+t._s(t.data.name))])]),t._v(" "),a("el-col",{staticClass:"text-right",attrs:{md:12}},[a("el-button",{attrs:{size:"small",type:"info"},on:{click:t.cancel}},[t._v("\n            "+t._s(t.lang.cancel)+"\n          ")]),t._v(" "),t.data.group_ids<1?a("el-button",{attrs:{disabled:t.disabledSave,size:"small",type:"success",icon:"el-icon-check"},on:{click:t.save}},[t._v("\n            "+t._s(t.lang.save)+"\n          ")]):a("el-button",{attrs:{disabled:t.disabledSave,size:"small",type:"success",icon:"el-icon-check"},on:{click:t.update}},[t._v("\n            "+t._s(t.lang.save)+"\n          ")])],1)],1)],1),t._v(" "),a("div",{staticClass:"card-body"},[a("el-form",{attrs:{"label-width":"140px"},model:{value:t.data,callback:function(e){t.data=e},expression:"data"}},[a("el-form-item",{attrs:{label:t.lang.product_group,required:!0}},[t.data.group_ids&&t.data.group_ids.length>0?a("div",{staticStyle:{"margin-bottom":"12px"}},t._l(t.data.group_ids,function(e,r){return a("el-tag",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingEL,expression:"loadingEL"}],key:r,attrs:{type:"info",closable:""},on:{close:function(a){return t.remove(e,r)}}},[t._v("\n              "+t._s(e.product_group_name)+"\n            ")])}),1):t._e(),t._v(" "),t.data.group_ids<1?a("el-select",{key:"selectGroup",staticStyle:{width:"100%"},attrs:{filterable:"",remote:"",multiple:"",placeholder:t.lang.info_auto_complete_product_group,"reserve-keyword":"",loading:t.control.searchingProductGroups,"remote-method":t.searchProductGroups},model:{value:t.fresh.group_ids,callback:function(e){t.$set(t.fresh,"group_ids",e)},expression:"fresh.group_ids"}},t._l(t.productgroups,function(t,e){return a("el-option",{key:e,attrs:{label:t.name,value:t.id}})}),1):t._e(),t._v(" "),t.data.group_ids<1?a("p",{staticClass:"input-desc size-12 oldgrey"},[t._v("\n            "+t._s(t.lang.desc_can_add_other_groups)+"\n          ")]):t._e()],1),t._v(" "),a("el-form-item",{attrs:{label:t.lang.discount,required:!0}},[a("el-input",{attrs:{type:"number",placeholder:this.$lang[t.langId].input_number},model:{value:t.data.discount,callback:function(e){t.$set(t.data,"discount",e)},expression:"data.discount"}},[a("template",{slot:"append"},[t._v("%")])],2),t._v(" "),a("p",{staticClass:"input-desc size-12 oldgrey"},[t._v("\n            "+t._s(t.lang.desc_price_cut_for_reseller)+"\n          ")])],1)],1)],1)])],1)},o=[]},"35cK":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(a("m1cH")),o=i(a("QbLZ")),s=a("xCek"),n=i(a("vDqi"));function i(t){return t&&t.__esModule?t:{default:t}}e.default={props:["saved","loading","formData"],data:function(){return{loadingEL:!1,disabledSave:!0,dialogVisible:!1,data:{},fresh:{},control:{searchingProductGroups:!1},productgroups:[]}},computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},langId:function(){return this.$store.state.userStores.langId},lang:function(){return this.$store.state.userStores.lang}},watch:{data:{handler:function(t){t.group_ids&&""!==t.group_ids&&t.discount&&""!==t.discount?this.disabledSave=!1:this.disabledSave=!0},deep:!0},saved:{handler:function(t){!0===t&&(this.data={},this.disabledSave=!0)},deep:!0},formData:{handler:function(t){this.data=t,this.data.group_ids=t.group_ids},deep:!0,immediate:!0}},methods:{searchProductGroups:function(t){var e=this;this.control.searchingProductGroups=!0;var a={Authorization:"Bearer "+this.token.access_token};(0,n.default)({method:"GET",url:(0,s.baseApi)(this.selectedStore.url_id,this.langId,"productgroup"),params:{search_column:"name",search_text:t},headers:a}).then(function(t){e.productgroups=t.data.data,e.control.searchingProductGroups=!1}).catch(function(){e.control.searchingProductGroups=!1,e.productgroups=[]})},cancel:function(){this.data={},this.$emit("cancel")},save:function(){this.disabledSave=!0;var t=(0,o.default)({},this.data);this.fresh.group_ids&&this.fresh.group_ids.length>0&&(t.group_ids=[].concat((0,r.default)(this.fresh.group_ids))),t.group_ids=t.group_ids.join(","),this.$emit("save",t)},update:function(){this.disabledSave=!0;var t=(0,o.default)({},this.data);t.group_ids=t.group_ids.map(function(t){return t.product_group_id}),t.group_ids=t.group_ids.join(","),this.$emit("updategroups",t)},remove:function(t,e){var a=this;this.loadingEL=!0;var r={Authorization:"Bearer "+this.token.access_token};(0,n.default)({method:"DELETE",url:(0,s.baseApi)(this.selectedStore.url_id,this.langId,"reseller/type/deleteproductgroup/"+t.id),headers:r}).then(function(t){a.data.group_ids.splice(e,1),a.$emit("group-removed"),a.loadingEL=!1,a.$message({type:"success",message:"Success"}),a.data.group_ids.length<1&&a.cancel()}).catch(function(t){a.loadingEL=!1,a.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error})})}}}},I089:function(t,e,a){"use strict";a.r(e);var r=a("g1Mb"),o=a.n(r);for(var s in r)["default"].indexOf(s)<0&&function(t){a.d(e,t,function(){return r[t]})}(s);e.default=o.a},g1Mb:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=d(a("4d7F")),o=d(a("m1cH")),s=a("xCek"),n=d(a("vDqi")),i=d(a("giYT"));function d(t){return t&&t.__esModule?t:{default:t}}e.default={components:{FormGroup:i.default},data:function(){return{loading:!1,formLoading:!1,formSaved:!1,disabledSave:!0,dialogVisible:!1,groupRemoved:!1,data:[],showForm:!1,editingGroups:{}}},computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},langId:function(){return this.$store.state.userStores.langId},lang:function(){return this.$store.state.userStores.lang},rootLang:function(){return this.$lang[this.$store.state.userStores.langId]}},methods:{getData:function(){var t=this;this.loading=!0;var e={Authorization:"Bearer "+this.token.access_token};(0,n.default)({method:"GET",url:(0,s.baseApi)(this.selectedStore.url_id,this.langId,"reseller/type/"+this.$route.params.id),headers:e}).then(function(e){t.data=e.data.data,t.loading=!1}).catch(function(e){t.loading=!1,t.$notify({type:"warning",title:"Error",message:e.response.data.error.error})})},edit:function(t){var e=t.discount,a=[];[].concat((0,o.default)(this.data.group)).map(function(t){t.discount===e&&a.push(t)}),this.editingGroups={discount:e,group_ids:[].concat(a),name:this.data.name,id:this.data.id},this.showForm=!0},add:function(){this.editingGroups={discount:"",group_ids:[],name:this.data.name,id:this.data.id},this.showForm=!0},cancelEditGroup:function(){this.getData(),this.editingGroups={},this.showForm=!1},back:function(){this.$router.push({path:"/website/reseller/resellertypes"})},save:function(t){var e=this;this.formLoading=!0;var a={Authorization:"Bearer "+this.token.access_token};(0,n.default)({method:"POST",url:(0,s.baseApi)(this.selectedStore.url_id,this.langId,"reseller/type/addproductgroup/"+this.data.id),headers:a,data:t}).then(function(t){e.formSaved=!0,e.cancelEditGroup(),e.data=t.data.data,e.formLoading=!1}).catch(function(t){e.formLoading=!1,e.$notify({type:"warning",title:"Error",message:t.response.data.error.error})})},updateProductGroup:function(t){var e=this;this.formLoading=!0;var a={Authorization:"Bearer "+this.token.access_token};new r.default(function(r,o){(0,n.default)({method:"PUT",url:(0,s.baseApi)(e.selectedStore.url_id,e.langId,"reseller/type/updateproductgroup/"+t.id),headers:a,data:t}).then(function(t){r(t)}).catch(function(t){o(t)})}).then(function(t){e.getData(),e.formLoading=!1,e.showForm=!1,e.saved=!0}).catch(function(t){e.formLoading=!1,e.$notify({type:"warning",title:"Error",message:t.response.data.error.error})})},remove:function(t){var e=this,a={Authorization:"Bearer "+this.token.access_token};(0,n.default)({method:"DELETE",url:(0,s.baseApi)(this.selectedStore.url_id,this.langId,"reseller/type/deleteproductgroup/"+t.id),headers:a}).then(function(a){e.editingGroups.splice(e.editingGroups.indexOf(t.key),1),e.$message({type:"success",message:a.data.data})}).catch(function(t){e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error})})}},mounted:function(){this.getData()}}},giYT:function(t,e,a){"use strict";a.r(e);var r=a("0EuQ"),o=a("/Rco");for(var s in o)["default"].indexOf(s)<0&&function(t){a.d(e,t,function(){return o[t]})}(s);var n=a("KHd+"),i=Object(n.a)(o.default,r.a,r.b,!1,null,null,null);i.options.__file="FormGroup.vue",e.default=i.exports},o0G5:function(t,e,a){"use strict";a.r(e);var r=a("z0Kz"),o=a("I089");for(var s in o)["default"].indexOf(s)<0&&function(t){a.d(e,t,function(){return o[t]})}(s);var n=a("KHd+"),i=Object(n.a)(o.default,r.a,r.b,!1,null,null,null);i.options.__file="TableGroups.vue",e.default=i.exports},z0Kz:function(t,e,a){"use strict";a.d(e,"a",function(){return r}),a.d(e,"b",function(){return o});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{md:16}},[t.showForm?t._e():a("el-card",{staticClass:"box-card"},[a("div",{attrs:{slot:"header"},slot:"header"},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{md:8}},[a("h4",[t._v(t._s(t.lang.add_reseller_type)+": "+t._s(t.data.name))]),a("br"),t._v(" "),t.data.group?a("p",[t._v(t._s(t.data.group.length)+" "+t._s(t.lang.items))]):t._e()]),t._v(" "),a("el-col",{staticClass:"text-right",attrs:{md:16}},[a("el-button",{attrs:{size:"small",icon:"el-icon-back",type:"text"},on:{click:t.back}},[t._v("\n                "+t._s(t.lang.back)+"\n              ")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"success",icon:"el-icon-plus"},on:{click:t.add}},[t._v("\n                "+t._s(t.lang.add)+"\n              ")])],1)],1)],1),t._v(" "),a("div",{staticClass:"card-body"},[a("el-table",{attrs:{data:t.data.group,stripe:""}},[a("el-table-column",{attrs:{label:t.lang.product_groups,prop:"product_group_name"}}),t._v(" "),a("el-table-column",{attrs:{label:t.lang.discount_percent,prop:"discount"}}),t._v(" "),a("el-table-column",{attrs:{label:this.$lang[t.langId].action},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.rootLang.discount_bulk_edit,placement:"top-start"}},[a("el-button",{staticClass:"btn-plain",attrs:{size:"mini",type:"info",icon:"el-icon-edit"},on:{click:function(a){return t.edit(e.row)}}})],1)]}}],null,!1,1298482834)})],1)],1)]),t._v(" "),t.showForm?a("form-group",{attrs:{loading:t.formLoading,"form-data":t.editingGroups,saved:t.formSaved},on:{remove:t.remove,cancel:t.cancelEditGroup,save:t.save,updategroups:t.updateProductGroup}}):t._e()],1)],1)],1)},o=[]}}]);