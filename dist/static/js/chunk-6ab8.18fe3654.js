(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6ab8"],{"1BPP":function(t,e,i){"use strict";
/**
 * Vue Currency Input 1.20.3
 * (c) 2018-2020 Matthias Stiller
 * @license MIT
 */
function n(t,e,i){var n=document.createEvent("CustomEvent");n.initCustomEvent(e,!0,!0,i),t.dispatchEvent(n)}i.r(e),i.d(e,"CurrencyDirective",function(){return D}),i.d(e,"CurrencyInput",function(){return E}),i.d(e,"parseCurrency",function(){return m}),i.d(e,"setValue",function(){return _});var a=function(t,e,i){return e&&null!=t?Number(t.toFixed(i).split(".").join("")):t},s=function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},r=function(t){return t.replace(/^0+(0$|[^0])/,"$1")},o=function(t,e){return(t.match(new RegExp(s(e),"g"))||[]).length},l=function(t,e){return t.substring(0,e.length)===e},c=function(t,e){return t.substring(0,t.indexOf(e))},u=[",",".","٫"],d=function(t){var e=t.currency,i=t.locale,n=t.precision,a=t.autoDecimalMode,s=t.valueAsInteger,r=new Intl.NumberFormat(i,"string"==typeof e?{currency:e,style:"currency"}:{minimumFractionDigits:1}),l=r.format(123456);this.locale=i,this.currency=e,this.digits=[0,1,2,3,4,5,6,7,8,9].map(function(t){return t.toLocaleString(i)}),this.decimalSymbol=o(l,this.digits[0])?l.substr(l.indexOf(this.digits[6])+1,1):void 0,this.groupingSymbol=l.substr(l.indexOf(this.digits[3])+1,1),this.minusSymbol=c(Number(-1).toLocaleString(i),this.digits[1]),void 0===this.decimalSymbol?this.minimumFractionDigits=this.maximumFractionDigits=0:"number"==typeof n?this.minimumFractionDigits=this.maximumFractionDigits=n:"object"!=typeof n||a||s?"string"==typeof e?(this.minimumFractionDigits=r.resolvedOptions().minimumFractionDigits,this.maximumFractionDigits=r.resolvedOptions().maximumFractionDigits):this.minimumFractionDigits=this.maximumFractionDigits=2:(this.minimumFractionDigits=n.min||0,this.maximumFractionDigits=void 0!==n.max?n.max:20),"string"==typeof e?(this.prefix=c(l,this.digits[1]),this.negativePrefix=c(r.format(-1),this.digits[1]),this.suffix=l.substring(l.lastIndexOf(this.decimalSymbol?this.digits[0]:this.digits[6])+1)):(this.prefix=(e||{}).prefix||"",this.negativePrefix=""+this.minusSymbol+this.prefix,this.suffix=(e||{}).suffix||"")};d.prototype.parse=function(t){var e=this.isNegative(t);t=this.normalizeDigits(t),t=this.stripCurrencySymbol(t),t=this.stripMinusSymbol(t);var i=this.decimalSymbol?"("+s(this.decimalSymbol)+"\\d*)?":"",n=t.match(new RegExp("^"+this.integerPattern()+i+"$"));return n?Number((e?"-":"")+this.onlyDigits(n[1])+"."+this.onlyDigits(n[3]||"")):null},d.prototype.format=function(t,e){return void 0===e&&(e={minimumFractionDigits:this.minimumFractionDigits,maximumFractionDigits:this.maximumFractionDigits}),"string"==typeof this.currency?t.toLocaleString(this.locale,Object.assign({},{style:"currency",currency:this.currency},e)):this.insertCurrencySymbol(Math.abs(t).toLocaleString(this.locale,e),t<0||0===t&&1/t<0)},d.prototype.integerPattern=function(){return"(0|[1-9]\\d{0,2}("+s(this.groupingSymbol)+"?\\d{3})*)"},d.prototype.toFraction=function(t){return""+this.digits[0]+this.decimalSymbol+this.onlyLocaleDigits(t.substr(1)).substr(0,this.maximumFractionDigits)},d.prototype.isFractionIncomplete=function(t){return!!this.normalizeDigits(t).match(new RegExp("^"+this.integerPattern()+s(this.decimalSymbol)+"$"))},d.prototype.isNegative=function(t){return l(t,this.negativePrefix)||l(t.replace("-",this.minusSymbol),this.minusSymbol)},d.prototype.insertCurrencySymbol=function(t,e){return""+(e?this.negativePrefix:this.prefix)+t+this.suffix},d.prototype.stripMinusSymbol=function(t){return t.replace("-",this.minusSymbol).replace(this.minusSymbol,"")},d.prototype.stripCurrencySymbol=function(t){return t.replace(this.negativePrefix,"").replace(this.prefix,"").replace(this.suffix,"")},d.prototype.normalizeDecimalSymbol=function(t,e){var i=this;return u.forEach(function(n){t=t.substr(0,e)+t.substr(e).replace(n,i.decimalSymbol)}),t},d.prototype.normalizeDigits=function(t){return"0"!==this.digits[0]&&this.digits.forEach(function(e,i){t=t.replace(new RegExp(e,"g"),i)}),t},d.prototype.onlyDigits=function(t){return this.normalizeDigits(t).replace(/\D+/g,"")},d.prototype.onlyLocaleDigits=function(t){return t.replace(new RegExp("[^"+this.digits.join("")+"]*","g"),"")};var p={locale:void 0,currency:"EUR",valueAsInteger:!1,distractionFree:!0,precision:void 0,autoDecimalMode:!1,valueRange:void 0,allowNegative:!0},m=function(t,e){var i=Object.assign({},p,e),n=new d(i);return a(n.parse(t),i.valueAsInteger,n.maximumFractionDigits)},_=function(t,e){return n(t,"format",{value:e})},v=function(t,e){return t.setSelectionRange(e,e)},h=function(t,e){if(t===e)return!0;if(!t||!e||"object"!=typeof t||"object"!=typeof e)return!1;var i=Object.keys(t);return i.length===Object.keys(e).length&&(!!i.every(Object.prototype.hasOwnProperty.bind(e))&&i.every(function(i){return h(t[i],e[i])}))},g=function(t){this.numberFormat=t};g.prototype.conformToMask=function(t,e){var i=this;void 0===e&&(e="");var n=this.numberFormat.isNegative(t),a=t;a=this.numberFormat.stripCurrencySymbol(a);var s=function(t){if(""===t&&n&&e!==i.numberFormat.negativePrefix)return"";if(i.numberFormat.maximumFractionDigits>0){if(i.numberFormat.isFractionIncomplete(t))return t;if(l(t,i.numberFormat.decimalSymbol))return i.numberFormat.toFraction(t)}return null}(a=this.numberFormat.stripMinusSymbol(a));if(null!=s)return this.numberFormat.insertCurrencySymbol(s,n);var o=a.split(this.numberFormat.decimalSymbol),c=o[0],u=o.slice(1),d=r(this.numberFormat.onlyDigits(c)),p=this.numberFormat.onlyDigits(u.join("")).substr(0,this.numberFormat.maximumFractionDigits),m=u.length>0&&0===p.length,_=""===d&&n&&(e===t.slice(0,-1)||e!==this.numberFormat.negativePrefix);return m||_?e:d.match(/\d+/)?{numberValue:Number((n?"-":"")+d+"."+p),fractionDigits:p}:""};var f=function(t){this.numberFormat=t};f.prototype.conformToMask=function(t){if(""===t)return"";var e=this.numberFormat.isNegative(t),i=""===this.numberFormat.stripMinusSymbol(t)?-0:Number((e?"-":"")+r(this.numberFormat.onlyDigits(t)))/Math.pow(10,this.numberFormat.minimumFractionDigits);return{numberValue:i,fractionDigits:i.toFixed(this.numberFormat.minimumFractionDigits).slice(-this.numberFormat.minimumFractionDigits)}};var b=Math.pow(2,53)-1,y=function(t,e,i){var n=i.$CI_DEFAULT_OPTIONS,a="input"===t.tagName.toLowerCase()?t:t.querySelector("input");if(!a)throw new Error("No input element found");var s=Object.assign({},n||p,e),r=s.distractionFree,o=s.autoDecimalMode,l=s.valueRange;"boolean"==typeof r&&(s.distractionFree={hideCurrencySymbol:r,hideNegligibleDecimalDigits:r,hideGroupingSymbol:r}),s.valueRange=l?{min:void 0!==l.min?Math.max(l.min,-b):-b,max:void 0!==l.max?Math.min(l.max,b):b}:{min:-b,max:b},o?(s.distractionFree.hideNegligibleDecimalDigits=!1,a.setAttribute("inputmode","numeric")):a.setAttribute("inputmode","decimal");var c=new d(s);return a.$ci=Object.assign({},a.$ci||{numberValue:null},{options:s,numberMask:s.autoDecimalMode?new f(c):new g(c),currencyFormat:c}),a},k=function(t,e){var i=t.$ci,s=i.numberValue,r=i.currencyFormat,o=i.options;n(t,e,{numberValue:s=a(s,o.valueAsInteger,r.maximumFractionDigits)})},S=function(t,e,i){void 0===i&&(i=!1);var n=t.$ci,a=n.currencyFormat,s=n.options;x(t,null!=e?a.format(function(t,e){return Math.min(Math.max(t,e.min),e.max)}(e,s.valueRange)):null),(e!==t.$ci.numberValue||i)&&k(t,"change")},x=function(t,e,i){void 0===i&&(i=!1),function(t,e,i){if(null!=e){var n=t.$ci,a=n.focus,s=n.decimalSymbolInsertedAt,r=n.options,o=n.numberMask,l=n.currencyFormat,c=n.previousConformedValue,u=r.allowNegative,d=r.distractionFree;void 0!==s&&(e=l.normalizeDecimalSymbol(e,s),t.$ci.decimalSymbolInsertedAt=void 0);var p,m=o.conformToMask(e,c);if("object"==typeof m){var _=m.numberValue,v=m.fractionDigits,h=l.maximumFractionDigits,g=l.minimumFractionDigits;a&&(g=h),g=i?v.replace(/0+$/,"").length:Math.min(g,v.length),p=_>b?c:l.format(_,{useGrouping:!(a&&d.hideGroupingSymbol),minimumFractionDigits:g,maximumFractionDigits:h})}else p=m;u||(p=p.replace(l.negativePrefix,l.prefix)),a&&d.hideCurrencySymbol&&(p=p.replace(l.negativePrefix,l.minusSymbol).replace(l.prefix,"").replace(l.suffix,"")),t.value=p,t.$ci.numberValue=l.parse(t.value)}else t.value=t.$ci.numberValue=null;t.$ci.previousConformedValue=t.value}(t,e,i),k(t,"input")},w=function(t){t.addEventListener("input",function(e){if(!e.detail){var i=t.value,n=t.selectionStart,a=t.$ci,s=a.currencyFormat,r=a.options;x(t,i),t.$ci.focus&&v(t,function(t,e,i,n,a){var s=n.prefix,r=n.suffix,l=n.decimalSymbol,c=n.maximumFractionDigits,u=n.groupingSymbol,d=e.indexOf(l)+1,p=e.length-i;return Math.abs(t.length-e.length)>1&&i<=d?t.indexOf(l)+1:t.substr(i,1)===u&&o(t,u)===o(e,u)+1?t.length-p-1:(!a.autoDecimalMode&&0!==d&&i>d&&n.onlyDigits(e.substr(d)).length-1===c&&(p-=1),a.distractionFree.hideCurrencySymbol?t.length-p:Math.max(t.length-Math.max(p,r.length),0===s.length?0:s.length+1))}(t.value,i,n,s,r))}},{capture:!0}),t.addEventListener("keypress",function(e){u.includes(e.key)&&(t.$ci.decimalSymbolInsertedAt=t.selectionStart)}),t.addEventListener("format",function(e){var i=t.$ci,n=i.currencyFormat,a=i.options,s=i.numberValue,r=function(t){return a.valueAsInteger&&null!=t?t/Math.pow(10,n.maximumFractionDigits):t}(e.detail.value);s!==r&&S(t,r)}),t.addEventListener("focus",function(){t.$ci.focus=!0;var e=t.$ci.options.distractionFree,i=e.hideCurrencySymbol,n=e.hideGroupingSymbol,a=e.hideNegligibleDecimalDigits;(i||n||a)&&setTimeout(function(){var e=t.value,i=t.selectionStart,n=t.selectionEnd;e&&x(t,e,a),Math.abs(i-n)>0?t.setSelectionRange(0,t.value.length):v(t,function(t,e,i,n){var a=n;return e.distractionFree.hideCurrencySymbol&&(a-=t.prefix.length),e.distractionFree.hideGroupingSymbol&&(a-=o(i.substring(0,n),t.groupingSymbol)),Math.max(0,a)}(t.$ci.currencyFormat,t.$ci.options,e,i))})}),t.addEventListener("blur",function(){t.$ci.focus=!1,null!=t.$ci.numberValue&&S(t,t.$ci.numberValue)}),t.addEventListener("change",function(e){e.detail||k(t,"change")})},D={bind:function(t,e,i){var n=e.value,a=i.context,s=y(t,n,a);w(s),_(s,s.$ci.currencyFormat.parse(s.value))},componentUpdated:function(t,e,i){var n=e.value,a=e.oldValue,s=i.context;if(!h(n,a)){var r=y(t,n,s);S(r,r.$ci.numberValue,!0)}}},E={render:function(t){var e=this;return t("input",{directives:[{name:"currency",value:this.options}],on:Object.assign({},this.$listeners,{change:function(t){t.detail&&e.$emit("change",t.detail.numberValue)},input:function(t){t.detail&&e.value!==t.detail.numberValue&&e.$emit("input",t.detail.numberValue)}})})},directives:{currency:D},name:"CurrencyInput",props:{value:{type:Number,default:null},locale:{type:String,default:void 0},currency:{type:[String,Object],default:void 0},distractionFree:{type:[Boolean,Object],default:void 0},precision:{type:[Number,Object],default:void 0},autoDecimalMode:{type:Boolean,default:void 0},valueAsInteger:{type:Boolean,default:void 0},valueRange:{type:Object,default:void 0},allowNegative:{type:Boolean,default:void 0}},mounted:function(){this.setValue(this.value)},computed:{options:function(){var t=this,e=Object.assign({},this.$CI_DEFAULT_OPTIONS||p);return Object.keys(p).forEach(function(i){void 0!==t[i]&&(e[i]=t[i])}),e}},watch:{value:"setValue"},methods:{setValue:function(t){_(this.$el,t)}}},C={install:function(t,e){void 0===e&&(e={});var i=e.componentName;void 0===i&&(i=E.name);var n=e.directiveName;void 0===n&&(n="currency");var a=e.globalOptions;void 0===a&&(a={}),t.prototype.$CI_DEFAULT_OPTIONS=Object.assign({},p,a),t.component(i,E),t.directive(n,D),t.prototype.$parseCurrency=function(t,e){return void 0===e&&(e={}),m(t,Object.assign({},a,e))}}};"undefined"!=typeof window&&window.Vue&&window.Vue.use(C),e.default=C},E7sC:function(t,e,i){"use strict";i.r(e);var n=i("nJJH"),a=i.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,function(){return n[t]})}(s);e.default=a.a},FyfS:function(t,e,i){t.exports={default:i("fUKC"),__esModule:!0}},GNlb:function(t,e,i){i("J+ij"),t.exports=i("VSTI").Number.parseFloat},GPnm:function(t,e,i){"use strict";i.r(e);var n=i("NDNx"),a=i("xqN7");for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,function(){return a[t]})}(s);var r=i("KHd+"),o=Object(r.a)(a.default,n.a,n.b,!1,null,null,null);o.options.__file="Detail.vue",e.default=o.exports},"J+ij":function(t,e,i){var n=i("USwo"),a=i("oaw4");n(n.S+n.F*(Number.parseFloat!=a),"Number",{parseFloat:a})},NDNx:function(t,e,i){"use strict";i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a});var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[i("div",{staticClass:"color-info--bg flex-container radius-10 p-8 mb-24 mt-24"},[t._m(0),t._v(" "),i("div",{staticClass:"full-width"},[t._v("\n      "+t._s("Pastikan data sudah benar sebelum diposting. Setelah terposting, data tidak diperbolehkan diubah.")+"\n    ")])]),t._v(" "),t.data?[i("el-card",{staticClass:"box-card pos-relative card-body-inventory"},[i("div",{staticClass:"card-body"},[i("div",{staticClass:"inventory-status",class:t.classBasedOnStatus},["P"===t.data.status?[i("span",[i("i",{staticClass:"el-icon-circle-check"})]),t._v(t._s(t.data.status_desc)+"\n          ")]:t._e(),t._v(" "),"X"===t.data.status?[i("span",[i("i",{staticClass:"el-icon-error"})]),t._v(t._s(t.data.status_desc)+"\n          ")]:t._e(),t._v(" "),"D"===t.data.status?[i("span",[i("i",{staticClass:"el-icon-document"})]),t._v(t._s(t.data.status_desc)+"\n          ")]:t._e()],2),t._v(" "),i("div",{staticClass:"flex-container with-padding-left"},[i("div",[i("small",{staticClass:"color-info"},[t._v(t._s(t.lang.incoming_stock_no))]),t._v(" "),t.data.trans_no?i("h4",{staticClass:"font-bold"},[t._v(t._s(t.data.trans_no))]):i("h4",[t._v("-")])]),t._v(" "),i("div",{staticClass:"full-width text-right"},["D"!==t.data.status?i("button-action-authenticated",{staticClass:"ml-8",attrs:{permission:["inventory/stockincomings","edit"],icon:"el-icon-back",size:"small",type:"success",plain:""},on:{click:t.backHandle}},[t._v(t._s(t.lang.back))]):t._e(),t._v(" "),i("button-action-authenticated",{staticClass:"ml-4 btn-no-shadow",attrs:{permission:["inventory/stockincomings","edit"],icon:"el-icon-printer",size:"small"},on:{click:function(e){return t.handlePrint()}}},[t._v(t._s(t.lang.print))]),t._v(" "),"D"===t.data.status?i("button-action-authenticated",{staticClass:"ml-4 btn-no-shadow color-warning--bg color-white",attrs:{permission:["inventory/stockincomings","edit"],icon:"el-icon-takeaway-box",size:"small"},on:{click:t.backHandle}},[t._v(t._s(t.$lang[t.langId].draft))]):t._e(),t._v(" "),t.data.IsEditable?[i("button-action-authenticated",{staticClass:"ml-4 mt-8 btn-danger btn-no-shadow",attrs:{permission:["inventory/stockincomings","edit"],icon:"el-icon-close",size:"small"},on:{click:function(e){return t.updateStatus("X")}}},[t._v("\n                "+t._s(t.$lang[t.langId].canceled)+"\n              ")]),t._v(" "),i("button-action-authenticated",{staticClass:"ml-4 mt-8 btn-no-shadow",attrs:{permission:["inventory/stockincomings","edit"],icon:"el-icon-check",type:"success",size:"small"},on:{click:function(e){return t.updateStatus("P")}}},[t._v("\n                "+t._s(t.$lang[t.langId].post_now)+"\n              ")])]:t._e()],2)])])]),t._v(" "),i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-4"},[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("strong",[t._v(t._s(t.lang.date))]),t._v(" "),i("div",{staticStyle:{float:"right"}},[!0===t.data.IsEditable?[t.isEditing.date?t._e():i("button-action-authenticated",{attrs:{permission:["inventory/stockincomings","edit"],type:"primary",size:"mini"},on:{click:function(e){return t.editBlock("date")}}},[i("svg-icon",{attrs:{"icon-class":"edit-2"}}),t._v("\n                  "+t._s(t.lang.edit)+"\n                ")],1)]:t._e(),t._v(" "),t.isEditing.date?i("button-action-authenticated",{attrs:{permission:["inventory/stockincomings","edit"],type:"text",size:"mini"},on:{click:function(e){return t.cancelEditBlock("date")}}},[t._v("\n                "+t._s(t.lang.cancel)+"\n              ")]):t._e(),t._v(" "),t.isEditing.date?i("button-action-authenticated",{attrs:{permission:["inventory/stockincomings","edit"],disabled:t.isButtonDisabled,icon:"el-icon-check",type:"success",size:"mini"},on:{click:function(e){return t.save("date")}}},[t._v("\n                "+t._s(t.lang.save)+"\n              ")]):t._e()],2)]),t._v(" "),i("div",{staticClass:"box-card-content"},[t.isEditing.date?[i("el-date-picker",{attrs:{type:"date",placeholder:t.$lang[t.langId].pick_a_day},model:{value:t.tmp.date,callback:function(e){t.$set(t.tmp,"date",e)},expression:"tmp.date"}})]:[t._v("\n              "+t._s(t.data.fdate)),i("br"),i("small",[t._v(t._s(t.data.created_by))])]],2)])],1),t._v(" "),i("div",{staticClass:"col-md-4"},[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("strong",[t._v(t._s(t.lang.supplier))]),t._v(" "),i("div",{staticStyle:{float:"right"}},[!0===t.data.IsEditable?[t.isEditing.supplier?t._e():i("button-action-authenticated",{attrs:{permission:["inventory/stockincomings","edit"],type:"primary",size:"mini"},on:{click:function(e){return t.editBlock("supplier")}}},[i("svg-icon",{attrs:{"icon-class":"edit-2"}}),t._v("\n                  "+t._s(t.lang.edit)+"\n                ")],1)]:t._e(),t._v(" "),t.isEditing.supplier?i("button-action-authenticated",{attrs:{permission:["inventory/stockincomings","edit"],type:"text",size:"mini"},on:{click:function(e){return t.cancelEditBlock("supplier")}}},[t._v("\n                "+t._s(t.lang.cancel)+"\n              ")]):t._e(),t._v(" "),t.isEditing.supplier?i("button-action-authenticated",{attrs:{permission:["inventory/stockincomings","edit"],disabled:t.isButtonDisabledSuplier,icon:"el-icon-check",type:"success",size:"mini"},on:{click:function(e){return t.save("supplier")}}},[t._v("\n                "+t._s(t.lang.save)+"\n              ")]):t._e()],2)]),t._v(" "),i("div",{staticClass:"box-card-content"},[t.isEditing.supplier?i("el-form",{attrs:{model:t.data},nativeOn:{submit:function(e){return e.preventDefault(),t.save("supplier")}}},[i("el-form-item",{attrs:{prop:"supplier"}},[i("el-autocomplete",{staticStyle:{width:"100%"},attrs:{"fetch-suggestions":t.getSuppliers,placeholder:t.lang.info_auto_complete_product},on:{select:t.selectSupplier},model:{value:t.data.supplier,callback:function(e){t.$set(t.data,"supplier",e)},expression:"data.supplier"}})],1)],1):[t._v("\n              "+t._s(t.data.supplier_name)+"\n            ")]],2)])],1),t._v(" "),i("div",{staticClass:"col-md-4"},[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("strong",[t._v(t._s(t.lang.notes))]),t._v(" "),i("div",{staticStyle:{float:"right"}},[!0===t.data.IsEditable?[t.isEditing.note?t._e():i("button-action-authenticated",{attrs:{permission:["inventory/stockincomings","edit"],type:"primary",size:"mini"},on:{click:function(e){return t.editBlock("note")}}},[i("svg-icon",{attrs:{"icon-class":"edit-2"}}),t._v("\n                  "+t._s(t.lang.edit)+"\n                ")],1)]:t._e(),t._v(" "),t.isEditing.note?i("button-action-authenticated",{attrs:{permission:["inventory/stockincomings","edit"],type:"text",size:"mini"},on:{click:function(e){return t.cancelEditBlock("note")}}},[t._v("\n                "+t._s(t.lang.cancel)+"\n              ")]):t._e(),t._v(" "),t.isEditing.note?i("button-action-authenticated",{attrs:{permission:["inventory/stockincomings","edit"],disabled:t.isButtonDisabled,icon:"el-icon-check",type:"success",size:"mini"},on:{click:function(e){return t.save("note")}}},[t._v("\n                "+t._s(t.lang.save)+"\n              ")]):t._e()],2)]),t._v(" "),i("div",{staticClass:"box-card-content"},[t.isEditing.note?[i("el-input",{attrs:{type:"text"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save("note")}},model:{value:t.tmp.note,callback:function(e){t.$set(t.tmp,"note",e)},expression:"tmp.note"}})]:[t._v("\n              "+t._s(t.data.note)+"\n            ")]],2)])],1)]),t._v(" "),i("stocks-table",{attrs:{editable:t.data.IsEditable,"is-item-added":t.itemAdded,"is-button-disabled":t.isButtonDisabled,"data-table":t.data.items,"data-stock":t.data},on:{itemadded:t.addItem,itemupdated:t.itemUpdated}}),t._v(" "),i("div",{staticStyle:{display:"none"},attrs:{id:"printView"}},[i("el-card",{staticClass:"box-card"},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"inventory-status",class:t.classBasedOnStatus,staticStyle:{"font-size":"22px","font-weight":"bold",width:"200px"}},["P"===t.data.status?[i("span",[i("i",{staticClass:"el-icon-circle-check"})]),t._v(" "+t._s(t.data.status_desc)+"\n            ")]:t._e(),t._v(" "),"X"===t.data.status?[i("span",[i("i",{staticClass:"el-icon-error"})]),t._v(" "+t._s(t.data.status_desc)+"\n            ")]:t._e(),t._v(" "),"D"===t.data.status?[i("span",[i("i",{staticClass:"el-icon-document"})]),t._v(" "+t._s(t.data.status_desc)+"\n            ")]:t._e()],2),t._v(" "),i("div",{staticClass:"pull-right"},[i("small",{staticStyle:{color:"#ccc"}},[t._v(t._s(t.lang.incoming_stock_no))]),t._v(" "),t.data.trans_no?i("h4",[t._v(t._s(t.data.trans_no))]):i("h4",[t._v("-")])])]),t._v(" "),i("div",{staticClass:"row",staticStyle:{"margin-bottom":"10px"}},[i("div",{staticClass:"col-md-4"},[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("strong",[t._v(t._s(t.lang.date))])]),t._v(" "),i("div",{staticClass:"box-card-content"},[[t.data.fdate?i("div",[t._v("\n                    "+t._s(t.data.fdate)),i("br"),i("small",[t._v(t._s(t.data.created_by))])]):i("div",[t._v("-")])]],2)])],1),t._v(" "),i("div",{staticClass:"col-md-4"},[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("strong",[t._v(t._s(t.lang.supplier))])]),t._v(" "),i("div",{staticClass:"box-card-content"},[[t.data.supplier_name?i("p",[t._v("\n                    "+t._s(t.data.supplier_name)+"\n                  ")]):i("p",[t._v("-")])]],2)])],1),t._v(" "),i("div",{staticClass:"col-md-4"},[i("el-card",{staticClass:"box-card"},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("strong",[t._v(t._s(t.lang.notes))])]),t._v(" "),i("div",{staticClass:"box-card-content"},[[t.data.note?i("p",[t._v(t._s(t.data.note))]):i("p",[t._v("-")])]],2)])],1)]),t._v(" "),i("hr"),t._v(" "),i("el-table",{staticClass:"table-stocks",staticStyle:{width:"100%"},attrs:{data:t.data.items,stripe:""}},[i("el-table-column",{attrs:{label:t.lang.name,width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"clearfix"},[i("div",{staticClass:"pull-left",staticStyle:{"padding-right":"12px"}},[e.row.product_photo_md?[i("img",{staticClass:"table-image table-image-80",attrs:{src:e.row.product_photo_md,alt:e.row.product_photo_md}})]:t._e()],2),t._v(" "),i("div",{staticClass:"pull-left"},[i("strong",[t._v(t._s(e.row.product_name)+" - "+t._s(e.row.product_sku))]),t._v(" "),i("p",[t._v(t._s(e.row.product_variant_name)+" - "+t._s(e.row.product_variant_sku))])])])]}}],null,!1,1281762750)}),t._v(" "),"ST"!==t.userRole.role_id&&"SS"!==t.userRole.role_id?i("el-table-column",{attrs:{prop:"fnew_buy_price",label:t.lang.buy_price,width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[[e.row.fnew_buy_price?i("p",[t._v(t._s(e.row.fnew_buy_price))]):i("p",[t._v("-")])]]}}],null,!1,2154587994)}):t._e(),t._v(" "),i("el-table-column",{attrs:{label:t.lang.qty,width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[[e.row.qty?i("p",[t._v(t._s(e.row.qty))]):i("p",[t._v("-")])]]}}],null,!1,3154917338)}),t._v(" "),i("el-table-column",{attrs:{label:t.lang.qty_diff,width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[[i("p",[t._v(t._s(e.row.fqty_diff))])]]}}],null,!1,4168496308)}),t._v(" "),"ST"===t.userRole.role_id||"SS"===t.userRole.role_id||t.selectedStore.is_hide_buy_price?t._e():i("el-table-column",{attrs:{prop:"favg_buy_price",label:t.lang.avg_buy_price,width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.favg_buy_price?i("p",[t._v(t._s(e.row.favg_buy_price))]):i("p",[t._v("-")])]}}],null,!1,2591985180)}),t._v(" "),i("el-table-column",{attrs:{prop:"fnew_buy_amount",label:t.lang.total,width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.fnew_buy_amount?i("p",[t._v(t._s(e.row.fnew_buy_amount))]):i("p",[t._v("-")])]}}],null,!1,2785950876)})],1)],1)],1)]:t._e()],2)},a=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container-icon"},[e("i",{staticClass:"el-icon-warning-outline"})])}]},SUDN:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},"Wo/Y":function(t,e,i){var n=i("USwo"),a=i("d5R0");n(n.S+n.F*(Number.parseInt!=a),"Number",{parseInt:a})},XKp5:function(t,e,i){"use strict";i.r(e);var n=i("rAzm"),a=i("E7sC");for(var s in a)["default"].indexOf(s)<0&&function(t){i.d(e,t,function(){return a[t]})}(s);var r=i("KHd+"),o=Object(r.a)(a.default,n.a,n.b,!1,null,null,null);o.options.__file="StocksTable.vue",e.default=o.exports},YDBu:function(t,e,i){t.exports={default:i("vQzd"),__esModule:!0}},d5R0:function(t,e,i){var n=i("7whZ").parseInt,a=i("jM5n").trim,s=i("SUDN"),r=/^[-+]?0[xX]/;t.exports=8!==n(s+"08")||22!==n(s+"0x16")?function(t,e){var i=a(String(t),3);return n(i,e>>>0||(r.test(i)?16:10))}:n},fUKC:function(t,e,i){i("ZY/g"),i("C5kU"),t.exports=i("sbOA")},jM5n:function(t,e,i){var n=i("USwo"),a=i("yQFZ"),s=i("S4vA"),r=i("SUDN"),o="["+r+"]",l=RegExp("^"+o+o+"*"),c=RegExp(o+o+"*$"),u=function(t,e,i){var a={},o=s(function(){return!!r[t]()||"​"!="​"[t]()}),l=a[t]=o?e(d):r[t];i&&(a[i]=l),n(n.P+n.F*o,"String",a)},d=u.trim=function(t,e){return t=String(a(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(c,"")),t};t.exports=u},nJJH:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=d(i("QbLZ")),a=d(i("P2sY")),s=d(i("r8UP")),r=i("xCek"),o=d(i("Ckak")),l=d(i("vDqi")),c=d(i("eWfT")),u=i("0dap");function d(t){return t&&t.__esModule?t:{default:t}}e.default={components:{InputMoney:o.default,InputAutocomplete:c.default},props:{dataTable:{default:null,type:Array},dataStock:{default:null,type:Object},isButtonDisabled:{type:Boolean,default:!1},isItemAdded:{type:Boolean,default:!1},editable:{type:Boolean,default:!0}},data:function(){return{loading:!1,detailData:{},showTable:!1,addProductDialog:!1,deleteDialog:!1,rowState:[],formAddProduct:{},searchData:[],searchingItems:!1,tmp:{productSearchName:"",new_buy_price:"",qty:null,item:[],type:"I"},isEditing:{},newDataTable:[],deleteData:{},addingOrderItem:!1,isProgressing:!1,tempSerial:{}}},watch:{isItemAdded:function(t){!0===t&&(this.tmp.productSearchName="",this.tmp.new_buy_price="",this.tmp.qty=null,this.tmp.item={})}},computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},langId:function(){return this.$store.state.userStores.langId},lang:function(){return this.$store.state.userStores.lang},userRole:function(){var t=this.$store.getters.selectedStore;return{role_id:t.role_id,role_name:t.role_name,is_pos_only:t.is_pos_only,is_mobile:t.is_mobile}},accessByStore:function(){return["adhikitchenwareinovation"]},computedHeaderTable:function(){var t=["",this.lang.name,this.lang.buy_price,this.lang.qty,this.lang.avg_buy_price,this.lang.total,this.$lang[this.langId].action],e=["",this.lang.name,this.lang.qty,this.$lang[this.langId].action],i=!1;return this.selectedStore.access_buy_price?i=!this.accessByStore.includes(this.selectedStore.url_id)||"LW"!==this.userRole.role_id:"ST"===this.userRole.role_id||"SS"===this.userRole.role_id||"LW"===this.userRole.role_id||this.selectedStore.is_hide_buy_price||(i=!0),this.editable||(i?t.splice(t.length-1,1):e.splice(e.length-1,1)),{header:i?t:e,variabel:i}}},methods:{addDataTable:function(){this.tmp.new_buy_price=parseFloat(this.tmp.new_buy_price).toFixed(2),this.$set(this.tmp,"product_ids",this.tmp.item.join(",")),this.$refs.InputAutocomplete.setFocus(),this.$refs.InputAutocomplete.resetKeyword(),this.$emit("itemadded",this.tmp)},selectProduct:function(t){var e=this;this.tmp.item=t,this.searchData.map(function(i){i.product_id===t[t.length-1]&&(e.tmp.new_buy_price=i.buy_price)})},setQueryString:function(t){var e=this;t?(0,u.debounce)(function(t){return e.getProductSearch(t)},"400ms")(t):this.searchData=[]},getProductSearch:function(t,e){var i=this;this.searchingItems=!0;var n={Authorization:"Bearer "+this.token.access_token},a={sort_column:"name",sort_type:"asc",search:t,search_column:"track_inventory",search_text:1,per_page:1e3};(0,l.default)({method:"GET",url:(0,r.baseApi)(this.selectedStore.url_id,this.langId,"productvariantonlysearch"),headers:n,params:a}).then(function(t){i.searchData=t.data.data.map(function(t){return t}),i.searchingItems=!1}).catch(function(){i.searchData=[],i.searchingItems=!1})},edit:function(t){t.new_buy_price=(0,s.default)(t.new_buy_price,0),this.isEditing=(0,a.default)({},t)},save:function(t){var e=this;this.loading=!0,this.isProgressing=!0;var i=!1;1===this.isEditing.order_with_serial&&(this.isEditing.serials.split("\n").map(function(t){t.length<=1&&(i=!0)}),console.log("bloc",i),i?(this.loading=!1,this.isProgressing=!1,this.$notify({type:"warning",message:"Serial harus lebih dari 1 digit"})):this.saveSerial(t));if(!i){var n={Authorization:"Bearer "+this.token.access_token},a={pk:this.isEditing.in_out_id,id:this.isEditing.id,qty:this.isEditing.qty,serials:this.isEditing.serials,new_buy_price:this.isEditing.new_buy_price};(0,l.default)({method:"POST",url:(0,r.baseApi)(this.selectedStore.url_id,this.langId,"stockinouts/updateitemqty"),headers:n,params:a}).then(function(t){e.loading=!1,e.isProgressing=!1,e.$emit("itemupdated",t.data.data),e.cancel()}).catch(function(t){e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error}),e.loading=!1,e.isProgressing=!1})}},saveSerial:function(t){var e=this;this.loading=!0,this.isProgressing=!0;var i={Authorization:"Bearer "+this.token.access_token},n={name:"serials",pk:this.isEditing.id,value:this.isEditing.serials};(0,l.default)({method:"POST",url:(0,r.baseApi)(this.selectedStore.url_id,this.langId,"stockinout/updateitemserials/"+this.isEditing.in_out_id),headers:i,data:n}).then(function(t){e.loading=!1,e.isProgressing=!1,e.dataTable=t.data.data.items,e.$message({message:"Saved",type:"success"});var i=t.data.data;i.items.map(function(t){null!==t.serials&&(t.fserials=t.serials.split("\n"))}),e.$emit("itemupdated",i),e.cancel()}).catch(function(t){e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error}),e.loading=!1,e.isProgressing=!1})},removeDialog:function(t){this.deleteData=(0,n.default)({},t),this.deleteDialog=!0},deleteCancel:function(){this.deleteDialog=!1,this.deleteData={}},deleteSave:function(){var t=this,e=(0,n.default)({},this.deleteData);this.loading=!0,this.isProgressing=!0;var i={Authorization:"Bearer "+this.token.access_token},a={pk:e.in_out_id,id:e.id};(0,l.default)({method:"POST",url:(0,r.baseApi)(this.selectedStore.url_id,this.langId,"stockinouts/removeitem"),headers:i,params:a}).then(function(e){t.deleteCancel(),t.$emit("itemupdated",e.data.data),t.isProgressing=!1,t.loading=!1,t.$message({message:"Delete Success",type:"success"}),t.cancel()}).catch(function(e){t.deleteCancel(),t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error}),t.loading=!1,t.isProgressing=!1})},cancel:function(){this.isEditing={}}}}},oaw4:function(t,e,i){var n=i("7whZ").parseFloat,a=i("jM5n").trim;t.exports=1/n(i("SUDN")+"-0")!=-1/0?function(t){var e=a(String(t),3),i=n(e);return 0===i&&"-"==e.charAt(0)?-0:i}:n},r8UP:function(t,e,i){t.exports={default:i("GNlb"),__esModule:!0}},rAzm:function(t,e,i){"use strict";i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a});var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.editable?i("el-card",{staticClass:"card-box",staticStyle:{"margin-top":"20px"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("strong",[t._v(t._s(t.lang.add_product))])]),t._v(" "),i("div",{staticClass:"row"},[i("el-form",{attrs:{model:t.tmp,"label-position":"top"},nativeOn:{submit:function(e){return e.preventDefault(),t.addDataTable.apply(null,arguments)}}},[i("div",{staticClass:"col-md-5"},[i("el-form-item",{attrs:{label:t.lang.product}},[i("input-autocomplete",{ref:"InputAutocomplete",attrs:{"fetch-suggestions":t.setQueryString,"searching-products":t.searchingItems,"search-result-products":t.searchData},on:{select:t.selectProduct}})],1)],1),t._v(" "),t.computedHeaderTable.variabel?i("div",{staticClass:"col-md-3"},[i("el-form-item",{attrs:{label:t.lang.buy_price,prop:"new_buy_price"}},[i("input-money",{nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addDataTable.apply(null,arguments)}},model:{value:t.tmp.new_buy_price,callback:function(e){t.$set(t.tmp,"new_buy_price",e)},expression:"tmp.new_buy_price"}})],1)],1):t._e(),t._v(" "),i("div",{staticClass:"col-md-4"},[i("el-form-item",{attrs:{label:t.lang.qty,prop:"qty"}},[i("el-input-number",{nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addDataTable.apply(null,arguments)}},model:{value:t.tmp.qty,callback:function(e){t.$set(t.tmp,"qty",e)},expression:"tmp.qty"}}),t._v(" "),i("button-action-authenticated",{attrs:{permission:["inventory/stockincomings","edit"],type:"primary",icon:"el-icon-plus",disabled:t.isButtonDisabled},on:{click:t.addDataTable}})],1)],1)])],1)]):t._e(),t._v(" "),i("bs-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"box-shadow-2",attrs:{header:t.computedHeaderTable.header}},[t._l(t.dataTable,function(e,n){return i("tr",{key:n},[i("td",[t._v(t._s(n+1))]),t._v(" "),i("td",[i("div",{staticClass:"flex-container flex-container--wrap"},[e.product_photo_md?i("div",{staticClass:"mr-4"},[i("el-avatar",{attrs:{src:e.product_photo_md}})],1):t._e(),t._v(" "),null!==e.product_sku?i("div",[e.product_sku.length>0?i("strong",[t._v(t._s(e.product_name)+" - "+t._s(e.product_sku))]):i("strong",[t._v(t._s(e.product_name))]),t._v(" "),null!==e.product_variant_id?i("div",[null!==e.product_variant_sku?i("p",[t._v(t._s(e.product_variant_name)+" - "+t._s(e.product_variant_sku))]):i("p",[t._v(t._s(e.product_variant_name))])]):t._e()]):i("div",[i("strong",[t._v(t._s(e.product_name))]),t._v(" "),null!==e.product_variant_id?i("div",[null!==e.product_variant_sku?i("p",[t._v(t._s(e.product_variant_name)+" - "+t._s(e.product_variant_sku))]):i("p",[t._v(t._s(e.product_variant_name))])]):t._e()])]),t._v(" "),1===e.order_with_serial?i("div",[t._v("\n          "+t._s(t.$lang[t.langId].serial_product_note)+"\n          "),t.isEditing.id===e.id?[i("el-input",{attrs:{type:"textarea",size:"small"},model:{value:t.isEditing.serials,callback:function(e){t.$set(t.isEditing,"serials",e)},expression:"isEditing.serials"}})]:[void 0===e.serials?i("span",[t._v("Empty")]):i("div",{staticStyle:{display:"flex","flex-direction":"column"}},t._l(e.fserials,function(e){return i("span",{key:e},[t._v(t._s(e))])}),0)]],2):t._e()]),t._v(" "),t.computedHeaderTable.variabel?i("td",[t.isEditing.id===e.id?[i("div",{staticClass:"el-input el-input--small"},[i("input-money",{attrs:{disabled:t.isProgressing},nativeOn:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.cancel.apply(null,arguments)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save(t.isEditing)}]},model:{value:t.isEditing.new_buy_price,callback:function(e){t.$set(t.isEditing,"new_buy_price",e)},expression:"isEditing.new_buy_price"}})],1)]:[t._v("\n          "+t._s(e.fnew_buy_price)+"\n        ")]],2):t._e(),t._v(" "),i("td",[t.isEditing.id===e.id?[i("el-input",{attrs:{disabled:t.isProgressing,min:1,type:"number"},nativeOn:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.cancel.apply(null,arguments)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save(t.isEditing)}]},model:{value:t.isEditing.qty,callback:function(e){t.$set(t.isEditing,"qty",e)},expression:"isEditing.qty"}})]:[t._v("\n          "+t._s(e.qty)+" "+t._s(e.product_uom)+"\n        ")]],2),t._v(" "),t.computedHeaderTable.variabel?i("td",[t._v("\n          "+t._s(e.favg_buy_price)+"\n      ")]):t._e(),t._v(" "),t.computedHeaderTable.variabel?i("td",[t._v("\n          "+t._s(e.fnew_buy_amount)+"\n      ")]):t._e(),t._v(" "),t.editable?i("td",[i("button-action-authenticated",{attrs:{permission:["inventory/stockincomings","edit"],disabled:t.isProgressing,type:"text"},on:{click:function(i){return t.removeDialog(e)}}},[i("svg-icon",{attrs:{"icon-class":"trash"}})],1),t._v(" "),t.isEditing.id===e.id?[i("button-action-authenticated",{attrs:{permission:["inventory/stockincomings","edit"],disabled:t.isProgressing,icon:"el-icon-check",type:"success",size:"mini"},on:{click:function(e){return t.save(t.isEditing)}}}),t._v(" "),i("button-action-authenticated",{attrs:{permission:["inventory/stockincomings","edit"],type:"info",size:"mini",icon:"el-icon-close"},on:{click:t.cancel}})]:[i("button-action-authenticated",{attrs:{permission:["inventory/stockincomings","edit"],type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(i){return t.edit(e)}}})]],2):t._e()])}),t._v(" "),"P"===t.dataStock.status&&t.computedHeaderTable.variabel?i("tr",[i("td"),t._v(" "),i("td",{attrs:{colspan:"2"}},[t._v("\n        Total\n      ")]),t._v(" "),i("td",[t._v(t._s(t.dataStock.ftotal_qty))]),t._v(" "),i("td"),t._v(" "),i("td",[t._v(t._s(t.dataStock.fnew_buy_total_amount))])]):t._e()],2),t._v(" "),i("el-dialog",{attrs:{visible:t.deleteDialog,"show-close":!1,"custom-class":"mw-420"},on:{"update:visible":function(e){t.deleteDialog=e}}},[i("span",{attrs:{slot:"title"},slot:"title"},[i("svg-icon",{staticStyle:{stroke:"#F44336"},attrs:{"icon-class":"alert-triangle"}}),t._v("\n      "+t._s(t.lang.notif_warn)+"\n    ")],1),t._v(" "),i("div",{staticClass:"text-center"},[i("p",[t._v(t._s(t.$lang[t.langId].are_you_want_remove)+" "+t._s(t.lang.product))]),t._v(" "),i("div",[i("el-avatar",{attrs:{src:t.deleteData.product_photo_md,alt:t.deleteData.product_photo_md}}),t._v(" "),i("span",{staticStyle:{"margin-left":"10px"}},[i("strong",[t._v('"'+t._s(t.deleteData.product_name)+'"')])])],1)]),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("button-action-authenticated",{attrs:{permission:["inventory/stockincomings","edit"]},on:{click:t.deleteCancel}},[t._v(t._s(t.lang.cancel))]),t._v(" "),i("button-action-authenticated",{attrs:{permission:["inventory/stockincomings","edit"],type:"danger"},on:{click:t.deleteSave}},[t._v(t._s(t.$lang[t.langId].delete))])],1)])],1)},a=[]},sbOA:function(t,e,i){var n=i("d+lc"),a=i("I90/");t.exports=i("VSTI").getIterator=function(t){var e=a(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return n(e.call(t))}},upYI:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=p(i("YDBu")),a=p(i("FyfS")),s=p(i("P2sY")),r=p(i("GQeE")),o=p(i("EJiy")),l=p(i("vDqi")),c=i("xCek"),u=p(i("XKp5")),d=i("6y4V");function p(t){return t&&t.__esModule?t:{default:t}}var m=i("wd/R");e.default={mixins:[d.checkCustomPermission],data:function(){return{loading:!1,printData:!1,data:null,isEditing:{date:!1,supplier:!1,note:!1},isButtonDisabled:!1,isButtonDisabledSuplier:!0,supplierParams:{search:""},tmp:{},suppliers:[],itemAdded:!0,isEditingSerial:[]}},components:{stocksTable:u.default},computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},langId:function(){return this.$store.state.userStores.langId},lang:function(){return this.$store.state.userStores.lang},classBasedOnStatus:function(){var t=void 0;return"P"===this.data.status?t="posted":"X"===this.data.status?t="canceled":"D"===this.data.status&&(t="draft"),t},userRole:function(){var t=this.$store.getters.selectedStore;return{role_id:t.role_id,role_name:t.role_name,is_pos_only:t.is_pos_only,is_mobile:t.is_mobile}}},methods:{addItem:function(t){var e=this;this.isButtonDisabled=!0,this.itemAdded=!1;var i={pk:this.$route.params.id,product_ids:t.product_ids,qty:t.qty,new_buy_price:t.new_buy_price,type:"I"},n={Authorization:"Bearer "+this.token.access_token};(0,l.default)({method:"POST",url:(0,c.baseApi)(this.selectedStore.url_id,this.langId,"stockinouts/additem"),headers:n,data:i}).then(function(t){e.data.items=t.data.data.items,e.isButtonDisabled=!1,e.itemAdded=!0;var i=[];t.data.data.items.map(function(t){i.push(!1)}),e.isEditingSerial=i,e.$message({type:"success",message:"saved"})}).catch(function(t){e.isButtonDisabled=!1,e.itemAdded=!1;var i=t.response.data.error.error;if("object"===(0,o.default)(t.response.data.error.error)){var n=" ";(0,r.default)(i).forEach(function(t){n=n+" "+i[t]}),i=n}e.$notify({type:"warning",title:t.response.data.error.message,message:i})})},loadData:function(){var t=this;this.loading=!0;var e={Authorization:"Bearer "+this.token.access_token};(0,l.default)({method:"GET",url:(0,c.baseApi)(this.selectedStore.url_id,this.langId,"stockinouts/"+this.$route.params.id),headers:e}).then(function(e){t.data=e.data.data,t.data.items.map(function(t){null!==t.serials&&(t.fserials=t.serials.split("\n"))}),t.tmp=(0,s.default)({},t.data),t.tmp.date=new Date(t.tmp.date);var i=[];e.data.data.items.map(function(t){i.push(!1)}),t.isEditingSerial=i,t.loading=!1}).catch(function(e){t.loading=!1,t.data={},t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error})})},getSuppliers:function(t,e){var i=this,n={Authorization:"Bearer "+this.token.access_token};(0,l.default)({method:"GET",url:(0,c.baseApi)(this.selectedStore.url_id,this.langId,"suppliersearchable/"),headers:n,params:{search:t}}).then(function(t){var n=!0,s=!1,r=void 0;try{for(var o,l=(0,a.default)(t.data.data);!(n=(o=l.next()).done);n=!0){var c=o.value;c.value=c.name,c.id=c.id}}catch(t){s=!0,r=t}finally{try{!n&&l.return&&l.return()}finally{if(s)throw r}}i.suppliers=t.data.data,e(i.suppliers)}).catch(function(t){i.suppliers=[],e(i.suppliers),i.loading=!1})},selectSupplier:function(t){this.tmp.supplier_id=(0,n.default)(t.id,0),this.isButtonDisabledSuplier=!1},save:function(t){var e=this;this.loading=!0,this.isButtonDisabled=!0;var i="",a={pk:(0,n.default)(this.$route.params.id,0),name:t};"date"===t?(this.$set(a,"value",m(this.tmp.date).format("YYYY-MM-DD")),i=(0,c.baseApi)(this.selectedStore.url_id,this.langId,"stockinouts/updateattr")):"supplier"===t?(this.$set(a,"supplier_id",this.tmp.supplier_id),i=(0,c.baseApi)(this.selectedStore.url_id,this.langId,"stockinouts/updatesupplier")):"note"===t&&(this.$set(a,"value",this.tmp.note),i=(0,c.baseApi)(this.selectedStore.url_id,this.langId,"stockinouts/updateattr"));var s={Authorization:"Bearer "+this.token.access_token};(0,l.default)({method:"POST",url:i,headers:s,data:a}).then(function(i){"date"===t?(e.data.fdate=i.data.data.fdate,e.data.date=i.data.data.date,e.isEditing.date=!1):"supplier"===t?(e.data.supplier_name=i.data.data.supplier_name,e.data.supplier_id=i.data.data.supplier_id,e.isEditing.supplier=!1):"note"===t&&(e.data.note=i.data.data.note,e.isEditing.note=!1),e.loading=!1,e.isButtonDisabled=!1,e.$message({message:"Saved",type:"success"})}).catch(function(t){e.loading=!1,e.isButtonDisabled=!1,e.$notify({type:"warning",title:t.message,message:t.string})})},updateStatus:function(t){var e=this;this.loading=!0;var i={Authorization:"Bearer "+this.token.access_token};(0,l.default)({method:"POST",url:(0,c.baseApi)(this.selectedStore.url_id,this.langId,"stockinouts/updatestatus"),headers:i,data:{pk:this.data.id,status:t}}).then(function(t){e.data=t.data.data,e.data.items.map(function(t){null!==t.serials&&(t.fserials=t.serials.split("\n"))}),e.loading=!1,e.tmp=(0,s.default)({},e.data),e.tmp.date=new Date(e.tmp.date),e.$notify({type:"success",title:"Succes Update Data"})}).catch(function(t){e.loading=!1,e.$notify({type:"warning",title:t.message,message:t.string})})},initBlock:function(){this.isEditing.date=!1,this.isEditing.supplier=!1,this.isEditing.note=!1},editBlock:function(t){"date"===t?this.isEditing.date=!0:"supplier"===t?this.isEditing.supplier=!0:"note"===t&&(this.isEditing.note=!0)},cancelEditBlock:function(t){"date"===t?this.isEditing.date=!1:"supplier"===t?this.isEditing.supplier=!1:"note"===t&&(this.isEditing.note=!1)},itemUpdated:function(t){this.data.items=t.items,this.data.items.map(function(t){null!==t.serials&&(t.fserials=t.serials.split("\n"))});var e=[];t.items.map(function(t){e.push(!1)}),this.isEditingSerial=e},backHandle:function(){this.$router.push({path:"/inventory/stocksincoming"})},handlePrint:function(){this.download("pdf","stockinouts/")},download:function(t,e){var i=this;this.loading=!0;var n={Authorization:"Bearer "+this.token.access_token};(0,l.default)({url:(0,c.baseApi)(this.selectedStore.url_id,this.langId,e+t),method:"GET",headers:n,responseType:"blob",params:{id:this.data.id}}).then(function(e){var n=i.data.trans_no+"_"+t+".pdf",a=window.URL.createObjectURL(new Blob([e.data])),s=document.createElement("a");s.href=a,s.setAttribute("download",n),document.body.appendChild(s),s.click(),i.loading=!1}).catch(function(t){i.loading=!1,i.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error})})}},beforeMount:function(){this.handleCustomPermissionSinglePage("inventory/stockincomings","show")},mounted:function(){this.loadData()}}},vQzd:function(t,e,i){i("Wo/Y"),t.exports=i("VSTI").Number.parseInt},xqN7:function(t,e,i){"use strict";i.r(e);var n=i("upYI"),a=i.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,function(){return n[t]})}(s);e.default=a.a}}]);