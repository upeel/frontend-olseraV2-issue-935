(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-109c"],{"/7Kk":function(t,e,s){"use strict";s.d(e,"a",function(){return a}),s.d(e,"b",function(){return i});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[s("div",{staticClass:"color-info--bg flex-container radius-10 p-8 mb-24 mt-24"},[t._m(0),t._v(" "),s("div",{staticClass:"full-width"},[t._v("\n      "+t._s("Pastikan data sudah benar sebelum diposting. Setelah terposting, data tidak diperbolehkan diubah.")+"\n    ")])]),t._v(" "),t.data?[s("el-card",{staticClass:"box-card pos-relative card-body-inventory"},[s("div",{staticClass:"card-body"},[s("div",{staticClass:"inventory-status",class:t.classBasedOnStatus},["P"===t.data.status?[s("span",[s("i",{staticClass:"el-icon-circle-check"})]),t._v(t._s(t.data.status_desc)+"\n          ")]:t._e(),t._v(" "),"X"===t.data.status?[s("span",[s("i",{staticClass:"el-icon-error"})]),t._v(t._s(t.data.status_desc)+"\n          ")]:t._e(),t._v(" "),"D"===t.data.status?[s("span",[s("i",{staticClass:"el-icon-document"})]),t._v(t._s(t.data.status_desc)+"\n          ")]:t._e()],2),t._v(" "),s("div",{staticClass:"flex-container with-padding-left"},[s("div",[s("small",{staticClass:"color-info"},[t._v(t._s(t.lang.outgoing_stock_no))]),t._v(" "),t.data.trans_no?s("h4",{staticClass:"font-bold"},[t._v(t._s(t.data.trans_no))]):s("h4",[t._v("-")])]),t._v(" "),s("div",{staticClass:"full-width text-right"},["D"!==t.data.status?s("el-button",{staticClass:"ml-4 btn-no-shadow",attrs:{icon:"el-icon-back",size:"small",type:"success",plain:""},on:{click:t.backHandle}},[t._v(t._s(t.lang.back))]):t._e(),t._v(" "),s("el-button",{staticClass:"ml-4 btn-no-shadow",attrs:{icon:"el-icon-printer",size:"small"},on:{click:function(e){return t.handlePrint()}}},[t._v(t._s(t.lang.print))]),t._v(" "),t.wejayafoodAccessByStore.includes(t.selectedStore.url_id)&&"D"===t.data.status?s("el-checkbox",{attrs:{label:"Post ke laba rugi",border:""},on:{change:t.handleLaba},model:{value:t.checkProfitLoss,callback:function(e){t.checkProfitLoss=e},expression:"checkProfitLoss"}}):t._e(),t._v(" "),"D"===t.data.status?s("el-button",{staticClass:"ml-4 btn-no-shadow color-warning--bg color-white",attrs:{icon:"el-icon-takeaway-box",size:"small"},on:{click:t.backHandle}},[t._v(t._s(t.$lang[t.langId].draft))]):t._e(),t._v(" "),t.wejayafoodAccessByStore.includes(t.selectedStore.url_id)&&"P"===t.data.status&&0===t.data.already_post_to_profitloss?s("el-button",{attrs:{type:"primary",loading:t.loadingPost},on:{click:t.postDataToProfitLoss}},[t._v("Post ke laba rugi")]):t._e(),t._v(" "),t.data.IsEditable?[s("el-button",{staticClass:"ml-4 mt-8 btn-danger btn-no-shadow",attrs:{icon:"el-icon-close",size:"small"},on:{click:function(e){return t.updateStatus("X")}}},[t._v(t._s(this.$lang[t.langId].canceled))]),t._v(" "),s("el-button",{staticClass:"ml-4 mt-8 btn-no-shadow",attrs:{icon:"el-icon-check",type:"success",size:"small"},on:{click:function(e){return t.updateStatus("P")}}},[t._v(t._s(t.lang.post_now))])]:t._e()],2)])])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-4"},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("strong",[t._v(t._s(t.lang.date))]),t._v(" "),!0===t.data.IsEditable?s("div",{staticStyle:{float:"right"}},[t.isEditing.date?t._e():s("el-button",{attrs:{icon:"el-icon-edit",type:"primary",size:"mini"},on:{click:function(e){return t.editBlock("date")}}},[t._v("\n                "+t._s(t.lang.edit)+"\n              ")]),t._v(" "),t.isEditing.date?s("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.cancelEditBlock("date")}}},[t._v("\n                "+t._s(t.lang.cancel)+"\n              ")]):t._e(),t._v(" "),t.isEditing.date?s("el-button",{attrs:{disabled:t.isButtonDisabled,icon:"el-icon-check",type:"success",size:"mini"},on:{click:function(e){return t.save("date")}}},[t._v("\n                "+t._s(t.lang.save)+"\n              ")]):t._e()],1):t._e()]),t._v(" "),s("div",{staticClass:"box-card-content"},[t.isEditing.date?[s("el-date-picker",{attrs:{type:"date",placeholder:t.$lang[t.langId].pick_a_day},model:{value:t.tmp.date,callback:function(e){t.$set(t.tmp,"date",e)},expression:"tmp.date"}})]:[t._v("\n              "+t._s(t.data.fdate)),s("br"),s("small",[t._v(t._s(t.data.created_by))])]],2)])],1),t._v(" "),s("div",{staticClass:"col-md-4"},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("strong",[t._v(t._s(t.lang.notes))]),t._v(" "),!0===t.data.IsEditable?s("div",{staticStyle:{float:"right"}},[t.isEditing.note?t._e():s("el-button",{attrs:{icon:"el-icon-edit",type:"primary",size:"mini"},on:{click:function(e){return t.editBlock("note")}}},[t._v("\n                "+t._s(t.lang.edit)+"\n              ")]),t._v(" "),t.isEditing.note?s("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(e){return t.cancelEditBlock("note")}}},[t._v("\n                "+t._s(t.lang.cancel)+"\n              ")]):t._e(),t._v(" "),t.isEditing.note?s("el-button",{attrs:{disabled:t.isButtonDisabled,icon:"el-icon-check",type:"success",size:"mini"},on:{click:function(e){return t.save("note")}}},[t._v("\n                "+t._s(t.lang.save)+"\n              ")]):t._e()],1):t._e()]),t._v(" "),s("div",{staticClass:"box-card-content"},[t.isEditing.note?[s("el-input",{attrs:{type:"textarea",autosize:""},model:{value:t.tmp.note,callback:function(e){t.$set(t.tmp,"note",e)},expression:"tmp.note"}})]:[t._v("\n              "+t._s(t.data.note)+"\n            ")]],2)])],1),t._v(" "),s("div",{staticClass:"col-md-4"},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("strong",[t._v(t._s(t.lang.transfer_to))])]),t._v(" "),s("div",{staticClass:"box-card-content"},[t.isEditing.to_store_id?[s("el-select",{attrs:{placeholder:t.lang.please_select},model:{value:t.tmp.to_store_id,callback:function(e){t.$set(t.tmp,"to_store_id",e)},expression:"tmp.to_store_id"}},t._l(t.userStores,function(t){return s("el-option",{key:t.store_id,staticStyle:{width:"100%"},attrs:{label:t.name,value:t.store_id}})}),1)]:t._e(),t._v(" "),""!==t.data.to_store_name&&t.data.to_store_name?[t._v(t._s(t.data.to_store_name))]:[t._v("-")]],2)])],1)]),t._v(" "),s("stocks-table",{attrs:{editable:t.data.IsEditable,"is-item-added":t.itemAdded,"is-button-disabled":t.isButtonDisabled,"data-table":t.data.items,"data-stock":t.data,"to-store":t.data.to_store_id},on:{itemadded:t.addItem,itemupdated:t.itemUpdated}}),t._v(" "),s("div",{staticStyle:{display:"none"},attrs:{id:"printView"}},[s("div",{staticClass:"box"},[s("div",{staticClass:"box-header with-padding-left with-border"},[s("div",{staticClass:"inventory-status",class:t.classBasedOnStatus,staticStyle:{"font-size":"22px","font-weight":"bold",width:"200px"}},["P"===t.data.status?[t._m(1),t._v(" "+t._s(t.data.status_desc)+"\n            ")]:t._e(),t._v(" "),"X"===t.data.status?[t._m(2),t._v(" "+t._s(t.data.status_desc)+"\n            ")]:t._e(),t._v(" "),"D"===t.data.status?[t._m(3),t._v(" "+t._s(t.data.status_desc)+"\n            ")]:t._e()],2),t._v(" "),s("div",{staticClass:"pull-right"},[s("small",{staticStyle:{color:"#ccc"}},[t._v(t._s(t.lang.incoming_stock_no))]),t._v(" "),t.data.trans_no?s("h4",[t._v(t._s(t.data.trans_no))]):s("h4",[t._v("-")])])]),t._v(" "),s("div",{staticClass:"row",staticStyle:{"margin-bottom":"10px"}},[s("div",{staticClass:"col-md-4"},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("strong",[t._v(t._s(t.lang.date))])]),t._v(" "),s("div",{staticClass:"box-card-content"},[[t.data.fdate?s("div",[t._v("\n                    "+t._s(t.data.fdate)),s("br"),s("small",[t._v(t._s(t.data.created_by))])]):s("div",[t._v("-")])]],2)])],1),t._v(" "),s("div",{staticClass:"col-md-4"},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("strong",[t._v(t._s(t.lang.notes))])]),t._v(" "),s("div",{staticClass:"box-card-content"},[[t.data.note?s("p",[t._v(t._s(t.data.note))]):s("p",[t._v("-")])]],2)])],1),t._v(" "),s("div",{staticClass:"col-md-4"},[s("el-card",{staticClass:"box-card"},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("strong",[t._v(t._s(t.lang.transfer_to))])]),t._v(" "),s("div",{staticClass:"box-card-content"},[[t.data.to_store_name?s("p",[t._v("\n                    "+t._s(t.data.to_store_name)+"\n                  ")]):s("p",[t._v("-")])]],2)])],1)]),t._v(" "),s("hr"),t._v(" "),s("el-table",{staticClass:"table-stocks",staticStyle:{width:"100%"},attrs:{data:t.data.items,stripe:""}},[s("el-table-column",{attrs:{label:t.lang.name,width:"500"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"clearfix"},[s("div",{staticClass:"pull-left",staticStyle:{"padding-right":"12px"}},[e.row.product_photo_md?[s("img",{staticClass:"table-image table-image-80",attrs:{src:e.row.product_photo_md,alt:e.row.product_photo_md}})]:t._e()],2),t._v(" "),s("div",{staticClass:"pull-left"},[s("strong",[t._v(t._s(e.row.product_name)+" - "+t._s(e.row.product_sku))]),t._v(" "),s("p",[t._v(t._s(e.row.product_variant_name)+" - "+t._s(e.row.product_variant_sku))])])])]}}],null,!1,1281762750)}),t._v(" "),s("el-table-column",{attrs:{label:t.lang.qty,width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[[e.row.qty?s("p",[t._v(t._s(e.row.qty))]):s("p",[t._v("-")])]]}}],null,!1,3154917338)}),t._v(" "),s("el-table-column",{attrs:{label:t.lang.qty_diff,width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[[s("p",[t._v(t._s(e.row.fqty_diff))])]]}}],null,!1,4168496308)})],1)],1)])]:t._e()],2)},i=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container-icon"},[e("i",{staticClass:"el-icon-warning-outline"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"el-icon-circle-check"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"el-icon-error"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"el-icon-document"})])}]},DChC:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(s("QbLZ")),i=n(s("Ljqw"));function n(t){return t&&t.__esModule?t:{default:t}}var o={mixins:[s("6y4V").checkCustomPermission],computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},langId:function(){return this.$store.state.userStores.langId},lang:function(){return this.$store.state.userStores?this.$store.state.userStores.lang:{}},userRole:function(){var t=this.$store.getters.selectedStore;return{role_id:t.role_id,role_name:t.role_name,is_pos_only:t.is_pos_only,is_mobile:t.is_mobile}},rootLang:function(){return this.$lang[this.langId]},headers:function(){var t=this.$store.getters.token;return this.$store.getters.webviewMode&&(t=this.$store.getters.webviewToken),{Authorization:"Bearer "+t.access_token}},baseURL:function(){return i.default},loggedInUser:function(){return this.$store.state.user.loggedInUser},stageLevel:function(){return"sit"},defaultAccessByStore:function(){return["setdemo1","allinolsera2"]},wejayafoodAccessByStore:function(){return["setdemo1","allinolsera2","ayammrotholpusat","ayammrotholdramaga"]},saveToAllAccessStore:function(){return["setdemo1","allinolsera2","siliwangidutagarden","barokahfrozenfood"]},outlets:function(){var t=[{name:this.$store.state.userStores.lang.all,store_id:0,url_id:"all"}],e=[];return this.$store.getters.stores.map(function(s){e.includes(s.store_id)||s.is_store_active&&(t.push((0,a.default)({},s)),e.push(s.store_id))}),t},tokopediaActiveStore:function(){return this.$store.state.tokopediaActiveStore},shopeeActiveStore:function(){return this.$store.state.shopeeActiveStore}}};e.default=o},FMyf:function(t,e,s){"use strict";s.r(e);var a=s("UMxo"),i=s.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){s.d(e,t,function(){return a[t]})}(n);e.default=i.a},SUDN:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},UMxo:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=c(s("QbLZ")),i=c(s("YDBu")),n=c(s("P2sY")),o=s("xCek"),r=c(s("vDqi")),d=c(s("eWfT")),l=s("0dap");function c(t){return t&&t.__esModule?t:{default:t}}e.default={components:{InputAutocomplete:d.default},props:{dataTable:{default:null,type:Array},dataStock:{default:null,type:Array},isButtonDisabled:{type:Boolean,default:!1},isItemAdded:{type:Boolean,default:!1},editable:{type:Boolean,default:!0},toStore:{type:Number,default:null}},data:function(){return{loading:!0,detailData:{},showTable:!1,addProductDialog:!1,deleteDialog:!1,rowState:[],formAddProduct:{},deleteData:{},searchData:[],isEditing:{},tmp:{productSearchName:"",qty:null,item:{}},addingOrderItem:!1,isProgressing:!1,newData:!1,searchingItems:!1}},watch:{isItemAdded:function(t){!0===t&&(this.tmp.productSearchName="",this.tmp.qty=null,this.tmp.item={})}},computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},langId:function(){return this.$store.state.userStores.langId},lang:function(){return this.$store.state.userStores.lang},computedHeaderTable:function(){var t=["",this.lang.name,this.lang.qty,this.$lang[this.langId].action];return this.editable||t.splice(t.length-1,1),t}},methods:{addDataTable:function(){this.newData=!0,this.$set(this.tmp,"product_ids",this.tmp.item.join(",")),this.$refs.InputAutocomplete.setFocus(),this.$refs.InputAutocomplete.resetKeyword(),this.$emit("itemadded",this.tmp)},selectProduct:function(t){this.newData=!1,this.tmp.item=t},setQueryString:function(t){var e=this;t?(0,l.debounce)(function(t){return e.getProductSearch(t)},"400ms")(t):this.searchData=[]},getProductSearch:function(t,e){var s=this;this.searchingItems=!0;var a={Authorization:"Bearer "+this.token.access_token},i={sort_column:"name",sort_type:"asc",search:t,store:this.toStore,search_column:"track_inventory",search_text:1,per_page:1e3};(0,r.default)({method:"GET",url:(0,o.baseApi)(this.selectedStore.url_id,this.langId,"productvariantonlysearch"),headers:a,params:i}).then(function(t){s.searchData=t.data.data.map(function(t){return t}),s.searchingItems=!1}).catch(function(){s.searchData=[],s.searchingItems=!1})},edit:function(t){var e=(0,n.default)({},t);e.new_buy_price=(0,i.default)(e.new_buy_price,0),this.isEditing=(0,n.default)({},e)},save:function(t){var e=this;this.isProgressing=!0,this.loading=!0;var s=!1;1===this.isEditing.order_with_serial&&(this.isEditing.serials.split("\n").map(function(t){t.length<=1&&(s=!0)}),console.log("bloc",s),s?(this.loading=!1,this.isProgressing=!1,this.$notify({type:"warning",message:"Serial harus lebih dari 1 digit"})):this.saveSerial(t));if(!s){var a={Authorization:"Bearer "+this.token.access_token},i={pk:this.isEditing.in_out_id,id:this.isEditing.id,qty:this.isEditing.qty,serials:this.isEditing.serials};(0,r.default)({method:"POST",url:(0,o.baseApi)(this.selectedStore.url_id,this.langId,"stockinouts/updateitemqty"),headers:a,params:i}).then(function(t){e.$emit("itemupdated",t.data.data),e.isProgressing=!1,e.cancel()}).catch(function(t){e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error}),e.isProgressing=!1})}},saveSerial:function(t){var e=this;this.loading=!0,this.isProgressing=!0;var s={Authorization:"Bearer "+this.token.access_token},a={name:"serials",pk:this.isEditing.id,value:this.isEditing.serials};(0,r.default)({method:"POST",url:(0,o.baseApi)(this.selectedStore.url_id,this.langId,"stockinout/updateitemserials/"+this.isEditing.in_out_id),headers:s,data:a}).then(function(t){e.loading=!1,e.isProgressing=!1,e.dataTable=t.data.data.items,e.$message({message:"Saved",type:"success"});var s=t.data.data;s.items.map(function(t){null!==t.serials&&(t.fserials=t.serials.split("\n"),console.log("serial",t.fserials))}),e.$emit("itemupdated",s),e.cancel()}).catch(function(t){e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error}),e.loading=!1,e.isProgressing=!1})},removeDialog:function(t){this.deleteData=(0,a.default)({},t),this.deleteDialog=!0},deleteCancel:function(){this.deleteDialog=!1,this.deleteData={}},deleteSave:function(){var t=this,e=(0,a.default)({},this.deleteData);this.loading=!0,this.isProgressing=!0;var s={Authorization:"Bearer "+this.token.access_token},i={pk:e.in_out_id,id:e.id};(0,r.default)({method:"POST",url:(0,o.baseApi)(this.selectedStore.url_id,this.langId,"stockinouts/removeitem"),headers:s,params:i}).then(function(e){t.deleteCancel(),t.$emit("itemupdated",e.data.data),t.isProgressing=!1,t.$message({message:"Delete Success",type:"success"}),t.cancel()}).catch(function(e){t.deleteCancel(),t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error}),t.isProgressing=!1})},cancel:function(){this.isEditing={}}}}},VSdM:function(t,e,s){"use strict";s.r(e);var a=s("exWo"),i=s.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){s.d(e,t,function(){return a[t]})}(n);e.default=i.a},"Wo/Y":function(t,e,s){var a=s("USwo"),i=s("d5R0");a(a.S+a.F*(Number.parseInt!=i),"Number",{parseInt:i})},YDBu:function(t,e,s){t.exports={default:s("vQzd"),__esModule:!0}},d5R0:function(t,e,s){var a=s("7whZ").parseInt,i=s("jM5n").trim,n=s("SUDN"),o=/^[-+]?0[xX]/;t.exports=8!==a(n+"08")||22!==a(n+"0x16")?function(t,e){var s=i(String(t),3);return a(s,e>>>0||(o.test(s)?16:10))}:a},exWo:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=_(s("YDBu")),i=_(s("P2sY")),n=_(s("GQeE")),o=_(s("EJiy")),r=_(s("vDqi")),d=s("xCek"),l=_(s("DChC")),c=s("hYqn"),u=_(s("zKMQ"));function _(t){return t&&t.__esModule?t:{default:t}}var p=s("wd/R");e.default={data:function(){return{loading:!1,data:null,isEditing:{date:!1,to_store_id:!1,note:!1},isButtonDisabled:!1,tmp:{},loadingPost:!1,checkProfitLoss:!1}},mixins:[l.default],components:{stocksTable:u.default},computed:{selectedStore:function(){return this.$store.getters.selectedStore},userStores:function(){return this.$store.state.userStores},token:function(){return this.$store.state.user.token},classBasedOnStatus:function(){var t=void 0;return"P"===this.data.status?t="posted":"X"===this.data.status?t="canceled":"D"===this.data.status&&(t="draft"),t},langId:function(){return this.$store.state.userStores.langId},lang:function(){return this.$store.state.userStores.lang}},methods:{addItem:function(t){var e=this;this.isButtonDisabled=!0,this.itemAdded=!1;var s={pk:this.$route.params.id,product_ids:t.product_ids,qty:t.qty,type:"O"},a={Authorization:"Bearer "+this.token.access_token};(0,r.default)({method:"POST",url:(0,d.baseApi)(this.selectedStore.url_id,this.langId,"stockinouts/additem"),headers:a,data:s}).then(function(t){e.data.items=t.data.data.items,e.isButtonDisabled=!1,e.itemAdded=!0,e.$notify({type:"success",message:"Saved"})}).catch(function(t){e.isButtonDisabled=!1,e.itemAdded=!1;var s=t.response.data.error.error;if("object"===(0,o.default)(t.response.data.error.error)){var a=" ";(0,n.default)(s).forEach(function(t){a=a+" "+s[t]}),s=a}e.$notify({type:"warning",title:t.response.data.error.message,message:s})})},loadData:function(){var t=this;this.loading=!0;var e={Authorization:"Bearer "+this.token.access_token};(0,r.default)({method:"GET",url:(0,d.baseApi)(this.selectedStore.url_id,this.langId,"stockinouts/"+this.$route.params.id),headers:e}).then(function(e){t.data=e.data.data,t.data.items.map(function(t){null!==t.serials&&(t.fserials=t.serials.split("\n"))}),t.loading=!1,t.tmp=(0,i.default)({},t.data),t.tmp.date=new Date(t.tmp.date)}).catch(function(e){t.loading=!1,t.data={},t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error})})},save:function(t){var e=this;this.loading=!0,this.isButtonDisabled=!0;var s="",i={pk:(0,a.default)(this.$route.params.id,0),name:t};"date"===t?(this.$set(i,"value",p(this.tmp.date).format("YYYY-MM-DD")),s=(0,d.baseApi)(this.selectedStore.url_id,this.langId,"stockinouts/updateattr")):"to_store_id"===t?(this.$set(i,"value",this.tmp.to_store_id),s=(0,d.baseApi)(this.selectedStore.url_id,this.langId,"stockinouts/updateattr")):"note"===t&&(this.$set(i,"value",this.tmp.note),s=(0,d.baseApi)(this.selectedStore.url_id,this.langId,"stockinouts/updateattr"));var n={Authorization:"Bearer "+this.token.access_token};(0,r.default)({method:"POST",url:s,headers:n,data:i}).then(function(s){"date"===t?(e.data.fdate=s.data.data.fdate,e.data.date=s.data.data.date,e.isEditing.date=!1):"to_store_id"===t?(e.data.to_store_id=s.data.data.to_store_id,e.data.to_store_name=s.data.data.to_store_name,e.isEditing.to_store_id=!1):"note"===t&&(e.data.note=s.data.data.note,e.isEditing.note=!1),e.loading=!1,e.isButtonDisabled=!1,e.$message({type:"success",message:"saved"})}).catch(function(t){e.loading=!1,e.isButtonDisabled=!1,e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error})})},updateStatus:function(t){var e=this;console.log(t),this.loading=!0;var s={Authorization:"Bearer "+this.token.access_token},a={pk:this.data.id,record_to_report_profit_loss:this.checkProfitLoss?1:0,status:t};(0,r.default)({method:"POST",url:(0,d.baseApi)(this.selectedStore.url_id,this.langId,"stockinouts/updatestatus"),headers:s,data:a}).then(function(t){e.data=t.data.data,e.data.items.map(function(t){null!==t.serials&&(t.fserials=t.serials.split("\n"))}),e.loading=!1,e.tmp=(0,i.default)({},e.data),e.tmp.date=new Date(e.tmp.date),e.$notify({type:"success",title:"Succes Update Data"})}).catch(function(t){e.loading=!1,e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error})})},initBlock:function(){this.isEditing.date=!1,this.isEditing.note=!1,this.isEditing.to_store_id=!1},editBlock:function(t){"date"===t?this.isEditing.date=!0:"to_store_id"===t?this.isEditing.to_store_id=!0:"note"===t&&(this.isEditing.note=!0)},cancelEditBlock:function(t){"date"===t?this.isEditing.date=!1:"to_store_id"===t?this.isEditing.to_store_id=!1:"note"===t&&(this.isEditing.note=!1)},itemUpdated:function(t){console.log("seraial",t),this.data.items=t.items,this.data.items.map(function(t){null!==t.serials&&(t.fserials=t.serials.split("\n"),console.log("serial",t.fserials))})},backHandle:function(){this.$router.push({path:"/inventory/stocksoutgoing/"})},handlePrint:function(){this.download("pdf","stockinouts/")},download:function(t,e){var s=this;this.loading=!0;var a={Authorization:"Bearer "+this.token.access_token};(0,r.default)({url:(0,d.baseApi)(this.selectedStore.url_id,this.langId,e+t),method:"GET",headers:a,responseType:"blob",params:{id:this.data.id}}).then(function(t){var e=s.data.trans_no+"_.pdf",a=window.URL.createObjectURL(new Blob([t.data])),i=document.createElement("a");i.href=a,i.setAttribute("download",e),document.body.appendChild(i),i.click(),s.loading=!1}).catch(function(t){s.loading=!1,s.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error})})},handleLaba:function(t){var e=this;console.log(t),this.loadingPost=!0,(0,c.postProfitloss)(this.data.id).then(function(t){e.loadData(),e.loadingPost=!1,e.$notify({type:"success",title:"Success",message:"Sukses post ke laba rugi"})}).catch(function(t){e.loadingPost=!1,404!==t.response.data.error.status_code&&e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error})})},postDataToProfitLoss:function(){var t=this;console.log("zczxczxczxczxczxczxczx"),this.loadingPost=!0,(0,c.postProfitloss)(this.data.id).then(function(e){t.loadData(),t.loadingPost=!1,t.$notify({type:"success",title:"Success",message:"Sukses post ke laba rugi"})}).catch(function(e){t.loadingPost=!1,404!==e.response.data.error.status_code&&t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error})})}},mounted:function(){this.loadData()}}},hYqn:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.postProfitloss=function(t){return(0,a.service)({url:"/stockinouts/postprofitloss/"+t,method:"post"})};var a=s("xCek")},jM5n:function(t,e,s){var a=s("USwo"),i=s("yQFZ"),n=s("S4vA"),o=s("SUDN"),r="["+o+"]",d=RegExp("^"+r+r+"*"),l=RegExp(r+r+"*$"),c=function(t,e,s){var i={},r=n(function(){return!!o[t]()||"​"!="​"[t]()}),d=i[t]=r?e(u):o[t];s&&(i[s]=d),a(a.P+a.F*r,"String",i)},u=c.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(d,"")),2&e&&(t=t.replace(l,"")),t};t.exports=c},vQzd:function(t,e,s){s("Wo/Y"),t.exports=s("VSTI").Number.parseInt},"vo+9":function(t,e,s){"use strict";s.d(e,"a",function(){return a}),s.d(e,"b",function(){return i});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.editable?s("el-card",{staticClass:"card-box",staticStyle:{"margin-top":"20px"}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("strong",[t._v(t._s(t.lang.add_product))])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-8"},[s("input-autocomplete",{ref:"InputAutocomplete",attrs:{"fetch-suggestions":t.setQueryString,"searching-products":t.searchingItems,"search-result-products":t.searchData,"new-data":t.newData},on:{select:t.selectProduct}})],1),t._v(" "),s("div",{staticClass:"col-md-4"},[s("el-input-number",{nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addDataTable.apply(null,arguments)}},model:{value:t.tmp.qty,callback:function(e){t.$set(t.tmp,"qty",e)},expression:"tmp.qty"}}),t._v(" "),s("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.addDataTable}})],1)])]):t._e(),t._v(" "),s("bs-table",{staticClass:"box-shadow-2",attrs:{header:t.computedHeaderTable}},[t._l(t.dataTable,function(e,a){return s("tr",{key:a},[s("td",[t._v(t._s(a+1))]),t._v(" "),s("td",[s("div",{staticClass:"flex-container flex-container--wrap"},[e.product_photo_md?s("div",{staticClass:"mr-4"},[s("el-avatar",{attrs:{src:e.product_photo_md}})],1):t._e(),t._v(" "),null!==e.product_sku?s("div",[e.product_sku.length>0?s("strong",[t._v(t._s(e.product_name)+" - "+t._s(e.product_sku))]):s("strong",[t._v(t._s(e.product_name))]),t._v(" "),null!==e.product_variant_id?s("div",[null!==e.product_variant_sku?s("p",[t._v(t._s(e.product_variant_name)+" - "+t._s(e.product_variant_sku))]):s("p",[t._v(t._s(e.product_variant_name))])]):t._e()]):s("div",[s("strong",[t._v(t._s(e.product_name))]),t._v(" "),null!==e.product_variant_id?s("div",[null!==e.product_variant_sku?s("p",[t._v(t._s(e.product_variant_name)+" - "+t._s(e.product_variant_sku))]):s("p",[t._v(t._s(e.product_variant_name))])]):t._e()])]),t._v(" "),1===e.order_with_serial?s("div",[t._v("\n          "+t._s(t.$lang[t.langId].serial_product_note)+"\n          "),t.isEditing.id===e.id?[s("el-input",{attrs:{type:"textarea",size:"small"},model:{value:t.isEditing.serials,callback:function(e){t.$set(t.isEditing,"serials",e)},expression:"isEditing.serials"}})]:[void 0===e.serials?s("span",[t._v("Empty")]):s("div",{staticStyle:{display:"flex","flex-direction":"column"}},t._l(e.fserials,function(e){return s("span",{key:e},[t._v(t._s(e))])}),0)]],2):t._e()]),t._v(" "),s("td",[t.isEditing.id===e.id?[s("el-input",{attrs:{disabled:t.isProgressing,min:1,type:"number"},nativeOn:{keyup:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.cancel.apply(null,arguments)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save(t.isEditing)}]},model:{value:t.isEditing.qty,callback:function(e){t.$set(t.isEditing,"qty",e)},expression:"isEditing.qty"}})]:[t._v("\n          "+t._s(e.qty)+" "+t._s(e.product_uom)+"\n        ")]],2),t._v(" "),t.editable?s("td",[s("el-button",{attrs:{disabled:t.isProgressing,type:"text"},on:{click:function(s){return t.removeDialog(e)}}},[s("svg-icon",{attrs:{"icon-class":"trash"}})],1),t._v(" "),t.isEditing.id===e.id?[s("el-button",{attrs:{disabled:t.isProgressing,icon:"el-icon-check",type:"success",size:"mini"},on:{click:function(e){return t.save(t.isEditing)}}}),t._v(" "),s("el-button",{attrs:{type:"info",size:"mini",icon:"el-icon-close"},on:{click:t.cancel}})]:[s("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(s){return t.edit(e)}}})]],2):t._e()])}),t._v(" "),"P"===t.dataStock.status?s("tr",[s("td"),t._v(" "),s("td",[t._v("\n        Total\n      ")]),t._v(" "),s("td",[t._v(t._s(t.dataStock.ftotal_qty))])]):t._e()],2),t._v(" "),s("el-dialog",{attrs:{visible:t.deleteDialog,width:"50%",center:"","close-on-click-modal":!1,"show-close":!1},on:{"update:visible":function(e){t.deleteDialog=e}}},[s("span",{attrs:{slot:"title"},slot:"title"},[s("svg-icon",{staticStyle:{stroke:"#F44336"},attrs:{"icon-class":"alert-triangle"}}),t._v("\n      "+t._s(t.lang.notif_warn)+"\n    ")],1),t._v(" "),s("div",{staticClass:"text-center"},[s("p",[t._v(t._s(this.$lang[t.langId].are_you_want_remove)+" "+t._s(t.lang.product))]),t._v(" "),s("div",[s("img",{staticClass:"table-image table-image-80",attrs:{src:t.deleteData.product_photo_md,alt:t.deleteData.product_photo_md}}),t._v(" "),s("span",{staticStyle:{"margin-left":"10px"}},[s("strong",[t._v('"'+t._s(t.deleteData.product_name)+'"')])])])]),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:t.deleteCancel}},[t._v(t._s(t.lang.cancel))]),t._v(" "),s("el-button",{attrs:{type:"danger"},on:{click:t.deleteSave}},[t._v(t._s(this.$lang[t.langId].delete))])],1)])],1)},i=[]},wVDB:function(t,e,s){"use strict";s.r(e);var a=s("/7Kk"),i=s("VSdM");for(var n in i)["default"].indexOf(n)<0&&function(t){s.d(e,t,function(){return i[t]})}(n);var o=s("KHd+"),r=Object(o.a)(i.default,a.a,a.b,!1,null,null,null);r.options.__file="Detail.vue",e.default=r.exports},zKMQ:function(t,e,s){"use strict";s.r(e);var a=s("vo+9"),i=s("FMyf");for(var n in i)["default"].indexOf(n)<0&&function(t){s.d(e,t,function(){return i[t]})}(n);var o=s("KHd+"),r=Object(o.a)(i.default,a.a,a.b,!1,null,null,null);r.options.__file="StocksTable.vue",e.default=r.exports}}]);