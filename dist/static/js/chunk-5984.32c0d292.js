(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5984"],{CPWV:function(t,e,a){"use strict";a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"shippings"},[a("div",{staticClass:"table-handler-flex mb-16 test"},[a("div",{staticClass:"mr-8",staticStyle:{"flex-grow":"1"}},[a("el-input",{staticClass:"mb-4 input-search",attrs:{"prefix-icon":"el-icon-search",placeholder:"cari"},on:{input:t.handleSearch},model:{value:t.params.search_text,callback:function(e){t.$set(t.params,"search_text",e)},expression:"params.search_text"}})],1),t._v(" "),a("el-button",{staticClass:"mb-4",attrs:{type:"info"},on:{click:t.handleAdd}},[t._v("\n      Tambah\n    ")])],1),t._v(" "),t.dataEmployee.length||t.loading?t._e():a("data-empty",{attrs:{image:"/static/img/no-data-staff.png",desc:"Belum ada pegawai<br/> Tambah baru untuk tetapkan pegawai yang harus absen"}}),t._v(" "),t.dataEmployee.length||t.loading?a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"like-table-wrapper"},[t._l(t.dataEmployee,function(e,n){return a("div",{key:n,staticClass:"like-table-wrapper--item"},[a("div",{staticClass:"flex-container mr-16",staticStyle:{width:"280px"}},[a("div",{staticClass:"mr-8 lh-1"},[a("el-avatar",{attrs:{src:e.photo,alt:e.name,size:40}})],1),t._v(" "),a("div",{staticClass:"lh-1"},[a("div",{staticClass:"font-bold font-14"},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"font-12 color-info"},[t._v(t._s(e.department))])])]),t._v(" "),e.face_photos&&e.face_photos.length&&t.hasAccessFaceRecog?a("div",[a("icons-multiple",{attrs:{items:e.face_photos,"photo-object":"url_photo_md"}})],1):t._e(),t._v(" "),a("div",{staticClass:"flex-grow-1"}),t._v(" "),a("el-button",{attrs:{type:"text",icon:"el-icon-edit",circle:""},on:{click:function(a){return t.editEmploye(e)}}})],1)}),t._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("el-pagination",{attrs:{"current-page":t.pagination.current_page,"page-size":t.pagination.per_page,total:t.pagination.total,layout:"prev, pager, next"},on:{"update:currentPage":function(e){return t.$set(t.pagination,"current_page",e)},"update:current-page":function(e){return t.$set(t.pagination,"current_page",e)},"current-change":t.changeCurrentPage}})],1)],2):t._e(),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogEdit,"show-close":!1,"custom-class":"mw-512"},on:{"update:visible":function(e){t.dialogEdit=e}}},[a("div",{staticClass:"flex-container",attrs:{slot:"title"},slot:"title"},[a("h4",{staticClass:"dialog-title full-width"},[t._v("\n        "+t._s(t.computedDialogTitle)+"\n      ")]),t._v(" "),a("div",{staticClass:"btn_save_dialog full-width text-right"},[a("el-button",{attrs:{type:"info"},on:{click:t.handleCancelAdd}},[t._v(t._s(t.lang.cancel))]),t._v(" "),a("el-button",{attrs:{loading:t.loadingSave,type:"success"},on:{click:t.handleSave}},[t._v(t._s(t.lang.save))])],1)]),t._v(" "),a("div",{staticClass:"text-center"},[a("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:t.uploading,expression:"uploading"}],staticClass:"new-avatar-uploader",attrs:{action:t.uploadUrl,"on-progress":t.handleUploadProcess,"on-error":t.handleUploadError,"show-file-list":!1,headers:{Authorization:"Bearer "+t.token.access_token},"on-success":t.handleAvatarSuccess}},[a("div",{staticClass:"new-avatar-uploader--inner"},[t.tempEmploye.photo?a("el-avatar",{attrs:{src:t.tempEmploye.photo}}):t._e(),t._v(" "),t.tempEmploye.photo?t._e():a("i",{staticClass:"el-icon-camera avatar-uploader-icon"})],1)]),t._v(" "),a("div",{staticClass:"font-12 text-left mt-32"},[t._v(t._s(t.lang.name))]),t._v(" "),a("el-input",{model:{value:t.tempEmploye.name,callback:function(e){t.$set(t.tempEmploye,"name",e)},expression:"tempEmploye.name"}}),t._v(" "),a("div",{staticClass:"font-12 text-left mt-32"},[t._v("Department")]),t._v(" "),a("el-input",{model:{value:t.tempEmploye.department,callback:function(e){t.$set(t.tempEmploye,"department",e)},expression:"tempEmploye.department"}}),t._v(" "),a("div",{staticClass:"font-12 text-left mt-32"},[t._v("Pin Absensi")]),t._v(" "),a("div",{staticClass:"flex-container full-width border border--form color-info--bg"},[t._l(t.dataPin,function(e,n){return a("div",{key:n,staticClass:"font-bold font-16",staticStyle:{flex:"50%"}},[t._v(t._s(e))])}),t._v(" "),a("div",{staticStyle:{flex:"50%"}},[a("el-button",{staticClass:"box-shadow-null color-black",attrs:{type:"text",icon:"el-icon-refresh"},on:{click:t.refreshCode}})],1)],2),t._v(" "),t.hasAccessFaceRecog?a("div",[a("div",{staticClass:"text-left mt-16 mb-16"},[a("div",{staticClass:"font-20 font-bold"},[t._v("\n            Foto Wajah\n          ")]),t._v(" "),a("div",{staticClass:"font-12 color-info"},[t._v("\n            Foto wajah ini akan digunakan untuk Face Recognition pada aplikasi Absensi Olsera\n          ")])]),t._v(" "),a("el-row",{staticClass:"mt-16",attrs:{gutter:16}},t._l(Object.keys(t.employeePhotos),function(e){return a("el-col",{key:e,staticClass:"mb-8 mt-8",attrs:{sm:8}},[a("upload-avatar",{attrs:{token:t.token.access_token,photo:t.employeePhotos[e],paramData:{angle:e,employee_id:t.tempEmploye.id},"upload-url":t.tempEmploye.id?"face/upload":"attendance/employee/uploadonly",shape:"square"},on:{"upload-success":function(a){return t.handleUploadEmployeePhotoSuccess(e,a)}},scopedSlots:t._u([{key:"no-photo",fn:function(){return[t.employeePhotos[e]?t._e():a("img",{staticClass:"pt-24",staticStyle:{width:"50%"},attrs:{src:"/static/img/attendance/sampleFace-"+e+".png",alt:""}}),t._v(" "),a("div",{staticClass:"pt-8"},[t._v(t._s(t.rootLang["face_"+e]))])]},proxy:!0}],null,!0)})],1)}),1)],1):t._e(),t._v(" "),a("div",{staticClass:"text-left"},[a("div",{staticClass:"flex-container mt-24 text-left"},[a("div",{staticClass:"full-width"},[t._v(t._s(t.rootLang.advance_shift))]),t._v(" "),a("div",[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.tempEmploye.use_advance_shift,callback:function(e){t.$set(t.tempEmploye,"use_advance_shift",e)},expression:"tempEmploye.use_advance_shift"}})],1)]),t._v(" "),a("div",{staticClass:"mt-4 font-12"},[t._v(t._s(t.rootLang.advance_shift_note))]),t._v(" "),t.tempEmploye.use_advance_shift?a("div",{staticClass:"like-table-wrapper mt-16"},t._l(t.tempEmploye.advance_shift,function(e){return a("div",{key:e.day_id,staticClass:"like-table-wrapper--item"},[a("div",{staticClass:"flex-container full-width"},[a("div",{staticStyle:{width:"30%"}},[t._v(t._s(e.day_name))]),t._v(" "),a("div",{staticClass:"full-width text-right"},[e.shift.length?t._l(e.shift,function(e){return a("el-tag",{key:e.shift_id,staticClass:"mr-4"},[t._v(t._s(e.name))])}):a("el-tag",{attrs:{type:"info"}},[t._v("Otomatis")])],2),t._v(" "),a("div",{staticClass:"pointer ml-4 container-icon",on:{click:function(a){return t.handleEditAdvanceShift(e)}}},[a("svg-icon",{staticClass:"color-primary",attrs:{"icon-class":"edit-2"}})],1)])])}),0):t._e()]),t._v(" "),a("offscreen-advance-shift",{attrs:{show:t.showSelectShift,"data-shift":t.dataShift,"day-data":t.dayData,"data-checked":t.dataChecked},on:{cancel:t.handleCloseAdvanceShift,save:t.handleSaveAdvanceShift}})],1),t._v(" "),t.tempEmploye.id?a("el-button",{staticClass:"mt-24 full-width",staticStyle:{color:"#F44336"},on:{click:function(e){t.dialogDelete=!0}}},[a("svg-icon",{attrs:{"icon-class":"trash"}}),t._v("\n      "+t._s(t.$lang[t.langId].delete)+"\n    ")],1):t._e()],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogDelete,"show-close":!1,"custom-class":"dialog-card",width:"536px"},on:{"update:visible":function(e){t.dialogDelete=e}}},[a("div",{staticClass:"text-center"},[a("span",[t._v(t._s(t.$lang[t.langId].are_you_sure))]),t._v(" "),a("el-button",{staticClass:"full-width btn-danger mt-24",on:{click:t.deleteRow}},[t._v(t._s(t.$lang[t.langId].delete))]),t._v(" "),a("el-button",{staticClass:"full-width btn-info mt-8",on:{click:function(e){t.dialogDelete=!1}}},[t._v(t._s(t.lang.cancel))])],1)])],1)},i=[]},"D+VR":function(t,e,a){"use strict";a.r(e);var n=a("IfeR"),i=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,function(){return n[t]})}(s);e.default=i.a},DChC:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(a("QbLZ")),i=s(a("Ljqw"));function s(t){return t&&t.__esModule?t:{default:t}}var o={mixins:[a("6y4V").checkCustomPermission],computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},langId:function(){return this.$store.state.userStores.langId},lang:function(){return this.$store.state.userStores?this.$store.state.userStores.lang:{}},userRole:function(){var t=this.$store.getters.selectedStore;return{role_id:t.role_id,role_name:t.role_name,is_pos_only:t.is_pos_only,is_mobile:t.is_mobile}},rootLang:function(){return this.$lang[this.langId]},headers:function(){var t=this.$store.getters.token;return this.$store.getters.webviewMode&&(t=this.$store.getters.webviewToken),{Authorization:"Bearer "+t.access_token}},baseURL:function(){return i.default},loggedInUser:function(){return this.$store.state.user.loggedInUser},stageLevel:function(){return"sit"},defaultAccessByStore:function(){return["setdemo1","allinolsera2"]},wejayafoodAccessByStore:function(){return["setdemo1","allinolsera2","ayammrotholpusat","ayammrotholdramaga"]},saveToAllAccessStore:function(){return["setdemo1","allinolsera2","siliwangidutagarden","barokahfrozenfood"]},outlets:function(){var t=[{name:this.$store.state.userStores.lang.all,store_id:0,url_id:"all"}],e=[];return this.$store.getters.stores.map(function(a){e.includes(a.store_id)||a.is_store_active&&(t.push((0,n.default)({},a)),e.push(a.store_id))}),t},tokopediaActiveStore:function(){return this.$store.state.tokopediaActiveStore},shopeeActiveStore:function(){return this.$store.state.shopeeActiveStore}}};e.default=o},F2f4:function(t,e,a){"use strict";var n=a("HsI7");a.n(n).a},GVWh:function(t){t.exports=JSON.parse('[{"id":1,"photo":"http://dummyimage.com/203x100.png/ff4444/ffffff","name":"Brittney Scullion","department":"Health"},{"id":2,"photo":"http://dummyimage.com/174x100.png/dddddd/000000","name":"Eugine Bartolomeazzi","department":"Books"},{"id":3,"photo":"http://dummyimage.com/166x100.png/cc0000/ffffff","name":"Adolpho Rassell","department":"Baby"},{"id":4,"photo":"http://dummyimage.com/124x100.png/ff4444/ffffff","name":"Evan McCathy","department":"Toys"},{"id":5,"photo":"http://dummyimage.com/216x100.png/ff4444/ffffff","name":"Matteo Freyn","department":"Books"},{"id":6,"photo":"http://dummyimage.com/188x100.png/cc0000/ffffff","name":"Waring Marnes","department":"Automotive"},{"id":7,"photo":"http://dummyimage.com/163x100.png/dddddd/000000","name":"Shannen Dinis","department":"Music"},{"id":8,"photo":"http://dummyimage.com/215x100.png/cc0000/ffffff","name":"Haley Hansana","department":"Toys"},{"id":9,"photo":"http://dummyimage.com/120x100.png/cc0000/ffffff","name":"Tybalt Beek","department":"Outdoors"},{"id":10,"photo":"http://dummyimage.com/110x100.png/5fa2dd/ffffff","name":"Elladine Broddle","department":"Electronics"}]')},HsI7:function(t,e,a){},IOSR:function(t,e,a){"use strict";a.r(e);var n=a("r375"),i=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,function(){return n[t]})}(s);e.default=i.a},IfeR:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{items:{type:Array,default:function(){return[]}},photoObject:{type:String,default:""}}}},LreO:function(t,e,a){"use strict";a.r(e);var n=a("c71B"),i=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,function(){return n[t]})}(s);e.default=i.a},NMGU:function(t,e,a){"use strict";a.r(e);var n=a("PGcw"),i=a("LreO");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,function(){return i[t]})}(s);var o=a("KHd+"),r=Object(o.a)(i.default,n.a,n.b,!1,null,null,null);r.options.__file="offscreenAdvanceShift.vue",e.default=r.exports},OW3Q:function(t,e,a){},PGcw:function(t,e,a){"use strict";a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"el-zoom-in-center"}},[t.show?a("div",{staticClass:"offscreen-right-sidebar px-null"},[a("div",{staticClass:"offscreen-right-sidebar--wrapper"},[a("div",{staticClass:"offscreen-right-sidebar--header color-white--bg",staticStyle:{"z-index":"10"}},[t._v("\n        Shift\n        "),a("close-esc",{attrs:{hideEsc:!0},on:{close:function(e){return t.$emit("cancel")}}})],1),t._v(" "),t.dataShift.length?a("div",{staticClass:"p-24 text-left"},[a("div",[a("span",[t._v("Pilih shift berlaku untuk hari "),a("span",{staticClass:"font-bold"},[t._v(t._s(t.dayData.day_name))])]),t._v(" "),a("div",{staticClass:"like-table-wrapper mt-16 text-left"},t._l(t.dataAdvanceShift,function(e){return a("div",{key:e.id,staticClass:"like-table-wrapper--item"},[a("div",{staticClass:"flex-container full-width"},[a("div",{staticClass:"full-width"},[t._v(t._s(e.name))]),t._v(" "),a("div",{staticStyle:{width:"35%"}},[t._v("\n                  "+t._s(e.start_time)+" - "+t._s(e.end_time)+"\n                ")]),t._v(" "),a("div",{staticClass:"pointer ml-4 "},[a("el-checkbox",{on:{change:function(a){return t.handleCheck(e)}},model:{value:e.checked,callback:function(a){t.$set(e,"checked",a)},expression:"item.checked"}})],1)])])}),0)]),t._v(" "),a("div",{staticClass:"color-info--bg radius-10 p-8 mt-16 flex-container justify-center"},[a("div",{staticClass:"container-icon"},[a("svg-icon",{staticClass:"color-info",attrs:{"icon-class":"information-circle"}})],1),t._v(" "),a("div",{staticClass:"word-break ml-4"},[t._v("\n            Jika jam absen pegawai berada di luar spesifik shift yang ditentukan, sistem akan otomatis menggunakan shift lain yang sesuai dengan jam absen\n          ")])])]):a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingAddon,expression:"loadingAddon"}],staticClass:"no-data-wrapper p-32 align-center",staticStyle:{display:"flex","flex-direction":"column"}},[a("img",{staticClass:"no-data-image",attrs:{src:"/static/img/no_data_addon_product.svg"}}),t._v(" "),a("div",{staticClass:"text-center word-break",staticStyle:{width:"360px"}},[t._v("Duh, Shift belum tersedia, silahkan buat shift terlebih dahulu")])]),t._v(" "),a("div",{staticClass:"offscreen-right-sidebar--footer"},[a("el-button",{staticClass:"btn-block mt-24",attrs:{type:"success"},on:{click:t.saveShift}},[t._v("\n          "+t._s(t.rootLang.save)+"\n        ")])],1)])]):t._e()])},i=[]},SoGW:function(t,e,a){"use strict";a.r(e);var n=a("hVMv"),i=a.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){a.d(e,t,function(){return n[t]})}(s);e.default=i.a},"U/yo":function(t,e,a){"use strict";a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-upload",{directives:[{name:"loading",rawName:"v-loading",value:t.uploading,expression:"uploading"}],staticClass:"glob-upload-avatar",attrs:{action:t.action,accept:"image/jpeg,image/gif,image/png","before-upload":t.onUploadFace,data:t.paramData,"on-progress":t.handleUploadProcess,"on-error":t.handleUploadError,"show-file-list":!1,headers:{Authorization:"Bearer "+t.token},"on-success":t.handleAvatarSuccess}},[a("div",{staticClass:"glob-upload-avatar__inner"},[t.photo?a("el-image",{class:t.avatarClass,attrs:{src:t.photo}}):t._e(),t._v(" "),t.photo?t._e():a("div",{staticClass:"glob-upload-avatar__no-photo"},[t._t("no-photo",function(){return[a("i",{staticClass:"el-icon-camera avatar-uploader-icon"})]})],2)],1)])},i=[]},"Vwf+":function(t,e,a){"use strict";a.d(e,"a",function(){return n}),a.d(e,"b",function(){return i});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"icons-multiple"},t._l(t.items,function(e,n){return a("el-avatar",{key:n,staticClass:"icons-multiple__item",attrs:{src:e[t.photoObject]}})}),1)},i=[]},aTG8:function(t,e,a){"use strict";a.r(e);var n=a("CPWV"),i=a("IOSR");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,function(){return i[t]})}(s);var o=a("KHd+"),r=Object(o.a)(i.default,n.a,n.b,!1,null,null,null);r.options.__file="employee.vue",e.default=r.exports},c71B:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=o(a("QbLZ")),i=o(a("DChC")),s=o(a("XFEm"));function o(t){return t&&t.__esModule?t:{default:t}}e.default={components:{CloseEsc:s.default},mixins:[i.default],props:{show:{type:Boolean,default:!1},dataShift:{type:Array,default:[]},dayData:{type:Object,default:null},dataChecked:{type:Array,default:[]}},data:function(){return{loadingAddon:!1}},watch:{},computed:{dataAdvanceShift:function(){var t=this;return this.dataShift.map(function(e){return e.checked=!1,t.dataChecked.length>0&&t.dataChecked.map(function(t){e.id===t.shift_id&&(e.checked=!0)}),e})}},mounted:function(){},methods:{handleCheck:function(t){var e=this,a=this.dataChecked.some(function(e){return e.shift_id===t.id});console.log("aaa",a),a?this.dataChecked.map(function(a,n){a.shift_id===t.id&&e.dataChecked.splice(n,1)}):this.dataChecked.push({shift_id:t.id,name:t.name,end_time:t.end_time,start_time:t.start_time})},saveShift:function(){var t=(0,n.default)({},this.dayData);this.dataChecked.length?t.shift=this.dataChecked:t.shift=[],this.$emit("save",t)}}}},fvWX:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.mixins={computed:{hasAccessFaceRecog:function(){return["P"].includes(this.$store.getters.selectedStore.plan_type_id)}}}},hVMv:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("xCek");e.default={props:{uploadUrl:{type:String,default:null},token:{type:String,default:null},avatarClass:{type:String,default:""},shape:{type:String,default:"circle"},paramData:{type:Object,default:null},photo:{type:String,default:""}},data:function(){return{uploading:!1}},computed:{selectedStore:function(){return this.$store.getters.selectedStore},langId:function(){return this.$store.state.userStores.langId},action:function(){return(0,n.baseApi)(this.selectedStore.url_id,this.langId,this.uploadUrl)}},methods:{handleUploadProcess:function(){this.uploading=!0},handleUploadError:function(t){this.uploading=!1,this.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error})},handleAvatarSuccess:function(t,e){this.uploading=!1,this.$emit("upload-success",t)},onUploadFace:function(t){return!!(t.size/1024/1024<1)||(this.$message({type:"info",message:"Format .JPG .JPEG .PNG .GIF max 1 MB"}),!1)}}}},kuVz:function(t,e,a){"use strict";var n=a("OW3Q");a.n(n).a},lVaQ:function(t,e,a){"use strict";a.r(e);var n=a("U/yo"),i=a("SoGW");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,function(){return i[t]})}(s);a("kuVz");var o=a("KHd+"),r=Object(o.a)(i.default,n.a,n.b,!1,null,null,null);r.options.__file="UploadAvatar.vue",e.default=r.exports},r375:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=g(a("GQeE")),i=g(a("m1cH")),s=g(a("rfXi")),o=a("xCek"),r=g(a("vDqi")),l=a("0dap"),d=a("L9QE"),c=g(a("DChC")),u=g(a("NMGU")),p=g(a("NalT")),f=g(a("yBP9")),h=g(a("lVaQ")),m=a("fvWX");function g(t){return t&&t.__esModule?t:{default:t}}e.default={name:"Employee",components:{offscreenAdvanceShift:u.default,DataEmpty:p.default,IconsMultiple:f.default,UploadAvatar:h.default},mixins:[c.default,m.mixins],data:function(){return{dialogEdit:!1,loading:!1,dataEmployee:[],tempEmploye:{name:"",department:"",pin:this.randomString(6),file_name:"",use_advance_shift:0},params:{search_column:"name",search_text:"",page:1,per_page:15},dialogDelete:!1,uploading:!1,loadingSave:!1,pagination:{},showSelectShift:!1,dataShift:[],dayData:{},dataChecked:[],employeePhotos:{front:"",right:"",left:"",above:"",below:""},employeeAddPhoto:{front:{},right:{},left:{},above:{},below:{}}}},computed:{lang:function(){return this.$store.state.userStores.lang},token:function(){return this.$store.state.user.token},selectedStore:function(){return this.$store.getters.selectedStore},langId:function(){return this.$store.state.userStores.langId},uploadUrl:function(){return(0,o.baseApi)(this.selectedStore.url_id,this.langId,"attendance/employee/uploadonly")},computedDialogTitle:function(){return this.tempEmploye.id?this.lang.edit+" "+this.$lang[this.langId].employee:this.lang.add+" "+this.$lang[this.langId].employee},computedShiftNull:function(){var t=[];return this.tempEmploye&&this.tempEmploye.advance_shift.map(function(e){e.shift.length||t.push(e)}),7===t.length},dataPin:function(){var t=[];return this.tempEmploye&&this.tempEmploye.pin&&(t=(0,s.default)(this.tempEmploye.pin)),t}},watch:{"$store.getters.selectedStore":function(){1===this.$store.getters.selectedStore.pos_freemium?this.$router.push("/online-order/delivery"):this.getEmployee()}},mounted:function(){this.getEmployee()},methods:{getEmployee:function(t){var e=this;if([].concat((0,i.default)(document.getElementById("app").classList)).includes("dummy-page"))this.getMockupData();else{this.loading=!0;var a=this.params;t?(this.$delete(a,"page"),a.search_column="name"):(this.$delete(a,"search_text"),this.$delete(a,"search_column")),a.search_text&&""!==a.search_text||this.$delete(a,"search_column");var n={Authorization:"Bearer "+this.token.access_token};(0,r.default)({method:"GET",url:(0,o.baseApi)(this.selectedStore.url_id,this.langId,"attendance/employee"),headers:n,params:a}).then(function(t){e.dataEmployee=t.data.data,e.pagination=t.data.meta,e.loading=!1}).catch(function(t){404!==t.response.data.error.status_code&&e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error}),e.dataEmployee=[],e.loading=!1})}},getMockupData:function(){this.dataEmployee=a("GVWh")},refreshCode:function(){this.tempEmploye.pin=this.randomString(6)},randomString:function(t,e){e=e||"0123456789";for(var a="",n=0;n<t;n++){var i=Math.floor(Math.random()*e.length);a+=e.substring(i,i+1)}return a},addEmployee:function(){var t=this;this.loadingSave=!0;var e={Authorization:"Bearer "+this.token.access_token},a=[];this.tempEmploye.advance_shift.filter(function(t){if(t.shift.length){var e=[];t.shift.map(function(t){e.push(t.shift_id)}),a.push({day_id:t.day_id,shift_id:e})}}),this.tempEmploye.advance_shift=[].concat(a);var i=this.tempEmploye;i.face_files=[],(0,n.default)(this.employeeAddPhoto).map(function(e){0!==(0,n.default)(t.employeeAddPhoto[e]).length&&i.face_files.push(t.employeeAddPhoto[e])}),(0,r.default)({method:"POST",url:(0,o.baseApi)(this.selectedStore.url_id,this.langId,"attendance/employee"),headers:e,data:i}).then(function(e){t.dialogEdit=!1,t.resetEmployeePhotos(),t.getEmployee(),t.tempEmploye={name:"",department:"",pin:t.randomString(6)},t.loadingSave=!1}).catch(function(e){404!==e.response.data.error.status_code&&t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error}),t.tempEmploye={name:"",department:"",pin:t.randomString(6)},t.dialogEdit=!1,t.loadingSave=!1})},updateEmployee:function(){var t=this;this.loadingSave=!0;var e={Authorization:"Bearer "+this.token.access_token},a=[];this.tempEmploye.advance_shift.filter(function(t){if(t.shift.length){var e=[];t.shift.map(function(t){e.push(t.shift_id)}),a.push({day_id:t.day_id,shift_id:e})}}),this.computedShiftNull?(console.log("data",a),this.tempEmploye.advance_shift=[]):a.length&&(this.tempEmploye.advance_shift=[].concat(a)),(0,r.default)({method:"PUT",url:(0,o.baseApi)(this.selectedStore.url_id,this.langId,"attendance/employee/"+this.tempEmploye.id),headers:e,data:this.tempEmploye}).then(function(e){t.dialogEdit=!1,t.getEmployee(),t.tempEmploye={name:"",department:"",pin:t.randomString(6)},t.loadingSave=!1}).catch(function(e){404!==e.response.data.error.status_code&&t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error}),t.tempEmploye={name:"",department:"",pin:t.randomString(6)},t.dialogEdit=!1,t.loadingSave=!1})},handleCancelAdd:function(){this.dialogEdit=!1,this.tempEmploye={}},handleSearch:function(t){var e=this;t?(0,l.debounce)(function(t){return e.getEmployee(!0)},"400ms")(t):this.getEmployee()},handleSave:function(){this.tempEmploye.id?this.updateEmployee():this.addEmployee()},handleUploadProcess:function(){this.uploading=!0},handleUploadError:function(t){this.loading=!1,this.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error})},handleAvatarSuccess:function(t,e){this.tempEmploye.photo=t.data[0].photo_,this.tempEmploye.file_name=t.data[0].file_name,this.uploading=!1},deleteRow:function(){var t=this;this.loading=!0;var e={Authorization:"Bearer "+this.token.access_token};(0,r.default)({method:"delete",url:(0,o.baseApi)(this.selectedStore.url_id,this.langId,"attendance/employee/"+this.tempEmploye.id),headers:e}).then(function(e){t.searchQuery="",t.getEmployee(),t.dialogDelete=!1,t.dialogEdit=!1,t.tempEmploye={},t.loading=!1}).catch(function(e){404!==e.response.data.error.status_code&&t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error}),t.dialogDelete=!1,t.dialogEdit=!1,t.tempDelete={},t.loading=!1})},handleAdd:function(){this.tempEmploye={name:"",department:"",pin:this.randomString(6),file_name:"",use_advance_shift:0},this.resetEmployeePhotos(),this.getDays(),this.getShift(),this.dialogEdit=!0},changeCurrentPage:function(t){this.params.currentPage=t,this.params.page=t,this.getEmployee()},editEmploye:function(t){var e=this;this.loading=!0;var a={Authorization:"Bearer "+this.token.access_token};(0,r.default)({method:"GET",url:(0,o.baseApi)(this.selectedStore.url_id,this.langId,"attendance/employee/"+t.id),headers:a}).then(function(t){e.resetEmployeePhotos(),e.tempEmploye=t.data.data,t.data.data.face_photos&&t.data.data.face_photos.length&&t.data.data.face_photos.map(function(t){t.id&&(e.employeePhotos[t.angle]=t.url_photo)}),e.dialogEdit=!0,e.getShift(),e.loading=!1}).catch(function(t){404!==t.response.data.error.status_code&&e.$notify({type:"warning",title:t.response.data.error.message,message:t.response.data.error.error}),e.tempEmploye=[],e.loading=!1})},handleEditAdvanceShift:function(t){this.showSelectShift=!0,this.dayData=t,this.dataChecked=[].concat((0,i.default)(t.shift))},handleCloseAdvanceShift:function(){this.showSelectShift=!1,this.dayData={}},getShift:function(){var t=this,e={Authorization:"Bearer "+this.token.access_token};(0,r.default)({method:"GET",url:(0,o.baseApi)(this.selectedStore.url_id,this.langId,"attendance/shift"),headers:e,params:{per_page:100}}).then(function(e){t.dataShift=e.data.data}).catch(function(e){404!==e.response.data.error.status_code&&t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error}),t.dataShift=[]})},handleSaveAdvanceShift:function(t){this.tempEmploye.advance_shift.map(function(e){e.day_id===t.day_id&&(e.shift=[].concat((0,i.default)(t.shift)))}),this.showSelectShift=!1},getDays:function(){var t=this;this.loading=!0,(0,d.getDays)().then(function(e){var a=[].concat((0,i.default)(e.data.data));a.map(function(t){t.day_id=t.id,t.day_name=t.name,t.shift=[]}),t.tempEmploye.advance_shift=a,t.loading=!1}).catch(function(e){404!==e.response.data.error.status_code&&t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error}),t.loading=!1})},handleUploadEmployeePhotoSuccess:function(t,e){this.tempEmploye.id?(this.employeePhotos[t]=e.data.url_file,this.$message({type:"success",message:this.rootLang.success_update})):(this.employeePhotos[t]=e.data[0].photo_,this.employeeAddPhoto[t]={file_name:e.data[0].file_name,angle:t,width:e.data[0].width,height:e.data[0].height})},resetEmployeePhotos:function(){this.employeePhotos={front:"",right:"",left:"",above:"",below:""},this.employeeAddPhoto={front:{},right:{},left:{},above:{},below:{}}}}}},yBP9:function(t,e,a){"use strict";a.r(e);var n=a("Vwf+"),i=a("D+VR");for(var s in i)["default"].indexOf(s)<0&&function(t){a.d(e,t,function(){return i[t]})}(s);a("F2f4");var o=a("KHd+"),r=Object(o.a)(i.default,n.a,n.b,!1,null,"7e0872ae",null);r.options.__file="IconsMultiple.vue",e.default=r.exports}}]);