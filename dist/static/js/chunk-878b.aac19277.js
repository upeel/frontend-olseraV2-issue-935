(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-878b"],{"+GYI":function(t,e,i){"use strict";i.r(e);var a=i("o0Np"),r=i("WmNZ");for(var n in r)["default"].indexOf(n)<0&&function(t){i.d(e,t,function(){return r[t]})}(n);var o=i("KHd+"),s=Object(o.a)(r.default,a.a,a.b,!1,null,null,null);s.options.__file="EditMode.vue",e.default=s.exports},"1BPP":function(t,e,i){"use strict";
/**
 * Vue Currency Input 1.20.3
 * (c) 2018-2020 Matthias Stiller
 * @license MIT
 */
function a(t,e,i){var a=document.createEvent("CustomEvent");a.initCustomEvent(e,!0,!0,i),t.dispatchEvent(a)}i.r(e),i.d(e,"CurrencyDirective",function(){return $}),i.d(e,"CurrencyInput",function(){return k}),i.d(e,"parseCurrency",function(){return p}),i.d(e,"setValue",function(){return f});var r=function(t,e,i){return e&&null!=t?Number(t.toFixed(i).split(".").join("")):t},n=function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},o=function(t){return t.replace(/^0+(0$|[^0])/,"$1")},s=function(t,e){return(t.match(new RegExp(n(e),"g"))||[]).length},u=function(t,e){return t.substring(0,e.length)===e},c=function(t,e){return t.substring(0,t.indexOf(e))},l=[",",".","Ù«"],d=function(t){var e=t.currency,i=t.locale,a=t.precision,r=t.autoDecimalMode,n=t.valueAsInteger,o=new Intl.NumberFormat(i,"string"==typeof e?{currency:e,style:"currency"}:{minimumFractionDigits:1}),u=o.format(123456);this.locale=i,this.currency=e,this.digits=[0,1,2,3,4,5,6,7,8,9].map(function(t){return t.toLocaleString(i)}),this.decimalSymbol=s(u,this.digits[0])?u.substr(u.indexOf(this.digits[6])+1,1):void 0,this.groupingSymbol=u.substr(u.indexOf(this.digits[3])+1,1),this.minusSymbol=c(Number(-1).toLocaleString(i),this.digits[1]),void 0===this.decimalSymbol?this.minimumFractionDigits=this.maximumFractionDigits=0:"number"==typeof a?this.minimumFractionDigits=this.maximumFractionDigits=a:"object"!=typeof a||r||n?"string"==typeof e?(this.minimumFractionDigits=o.resolvedOptions().minimumFractionDigits,this.maximumFractionDigits=o.resolvedOptions().maximumFractionDigits):this.minimumFractionDigits=this.maximumFractionDigits=2:(this.minimumFractionDigits=a.min||0,this.maximumFractionDigits=void 0!==a.max?a.max:20),"string"==typeof e?(this.prefix=c(u,this.digits[1]),this.negativePrefix=c(o.format(-1),this.digits[1]),this.suffix=u.substring(u.lastIndexOf(this.decimalSymbol?this.digits[0]:this.digits[6])+1)):(this.prefix=(e||{}).prefix||"",this.negativePrefix=""+this.minusSymbol+this.prefix,this.suffix=(e||{}).suffix||"")};d.prototype.parse=function(t){var e=this.isNegative(t);t=this.normalizeDigits(t),t=this.stripCurrencySymbol(t),t=this.stripMinusSymbol(t);var i=this.decimalSymbol?"("+n(this.decimalSymbol)+"\\d*)?":"",a=t.match(new RegExp("^"+this.integerPattern()+i+"$"));return a?Number((e?"-":"")+this.onlyDigits(a[1])+"."+this.onlyDigits(a[3]||"")):null},d.prototype.format=function(t,e){return void 0===e&&(e={minimumFractionDigits:this.minimumFractionDigits,maximumFractionDigits:this.maximumFractionDigits}),"string"==typeof this.currency?t.toLocaleString(this.locale,Object.assign({},{style:"currency",currency:this.currency},e)):this.insertCurrencySymbol(Math.abs(t).toLocaleString(this.locale,e),t<0||0===t&&1/t<0)},d.prototype.integerPattern=function(){return"(0|[1-9]\\d{0,2}("+n(this.groupingSymbol)+"?\\d{3})*)"},d.prototype.toFraction=function(t){return""+this.digits[0]+this.decimalSymbol+this.onlyLocaleDigits(t.substr(1)).substr(0,this.maximumFractionDigits)},d.prototype.isFractionIncomplete=function(t){return!!this.normalizeDigits(t).match(new RegExp("^"+this.integerPattern()+n(this.decimalSymbol)+"$"))},d.prototype.isNegative=function(t){return u(t,this.negativePrefix)||u(t.replace("-",this.minusSymbol),this.minusSymbol)},d.prototype.insertCurrencySymbol=function(t,e){return""+(e?this.negativePrefix:this.prefix)+t+this.suffix},d.prototype.stripMinusSymbol=function(t){return t.replace("-",this.minusSymbol).replace(this.minusSymbol,"")},d.prototype.stripCurrencySymbol=function(t){return t.replace(this.negativePrefix,"").replace(this.prefix,"").replace(this.suffix,"")},d.prototype.normalizeDecimalSymbol=function(t,e){var i=this;return l.forEach(function(a){t=t.substr(0,e)+t.substr(e).replace(a,i.decimalSymbol)}),t},d.prototype.normalizeDigits=function(t){return"0"!==this.digits[0]&&this.digits.forEach(function(e,i){t=t.replace(new RegExp(e,"g"),i)}),t},d.prototype.onlyDigits=function(t){return this.normalizeDigits(t).replace(/\D+/g,"")},d.prototype.onlyLocaleDigits=function(t){return t.replace(new RegExp("[^"+this.digits.join("")+"]*","g"),"")};var m={locale:void 0,currency:"EUR",valueAsInteger:!1,distractionFree:!0,precision:void 0,autoDecimalMode:!1,valueRange:void 0,allowNegative:!0},p=function(t,e){var i=Object.assign({},m,e),a=new d(i);return r(a.parse(t),i.valueAsInteger,a.maximumFractionDigits)},f=function(t,e){return a(t,"format",{value:e})},v=function(t,e){return t.setSelectionRange(e,e)},h=function(t,e){if(t===e)return!0;if(!t||!e||"object"!=typeof t||"object"!=typeof e)return!1;var i=Object.keys(t);return i.length===Object.keys(e).length&&(!!i.every(Object.prototype.hasOwnProperty.bind(e))&&i.every(function(i){return h(t[i],e[i])}))},g=function(t){this.numberFormat=t};g.prototype.conformToMask=function(t,e){var i=this;void 0===e&&(e="");var a=this.numberFormat.isNegative(t),r=t;r=this.numberFormat.stripCurrencySymbol(r);var n=function(t){if(""===t&&a&&e!==i.numberFormat.negativePrefix)return"";if(i.numberFormat.maximumFractionDigits>0){if(i.numberFormat.isFractionIncomplete(t))return t;if(u(t,i.numberFormat.decimalSymbol))return i.numberFormat.toFraction(t)}return null}(r=this.numberFormat.stripMinusSymbol(r));if(null!=n)return this.numberFormat.insertCurrencySymbol(n,a);var s=r.split(this.numberFormat.decimalSymbol),c=s[0],l=s.slice(1),d=o(this.numberFormat.onlyDigits(c)),m=this.numberFormat.onlyDigits(l.join("")).substr(0,this.numberFormat.maximumFractionDigits),p=l.length>0&&0===m.length,f=""===d&&a&&(e===t.slice(0,-1)||e!==this.numberFormat.negativePrefix);return p||f?e:d.match(/\d+/)?{numberValue:Number((a?"-":"")+d+"."+m),fractionDigits:m}:""};var _=function(t){this.numberFormat=t};_.prototype.conformToMask=function(t){if(""===t)return"";var e=this.numberFormat.isNegative(t),i=""===this.numberFormat.stripMinusSymbol(t)?-0:Number((e?"-":"")+o(this.numberFormat.onlyDigits(t)))/Math.pow(10,this.numberFormat.minimumFractionDigits);return{numberValue:i,fractionDigits:i.toFixed(this.numberFormat.minimumFractionDigits).slice(-this.numberFormat.minimumFractionDigits)}};var b=Math.pow(2,53)-1,y=function(t,e,i){var a=i.$CI_DEFAULT_OPTIONS,r="input"===t.tagName.toLowerCase()?t:t.querySelector("input");if(!r)throw new Error("No input element found");var n=Object.assign({},a||m,e),o=n.distractionFree,s=n.autoDecimalMode,u=n.valueRange;"boolean"==typeof o&&(n.distractionFree={hideCurrencySymbol:o,hideNegligibleDecimalDigits:o,hideGroupingSymbol:o}),n.valueRange=u?{min:void 0!==u.min?Math.max(u.min,-b):-b,max:void 0!==u.max?Math.min(u.max,b):b}:{min:-b,max:b},s?(n.distractionFree.hideNegligibleDecimalDigits=!1,r.setAttribute("inputmode","numeric")):r.setAttribute("inputmode","decimal");var c=new d(n);return r.$ci=Object.assign({},r.$ci||{numberValue:null},{options:n,numberMask:n.autoDecimalMode?new _(c):new g(c),currencyFormat:c}),r},D=function(t,e){var i=t.$ci,n=i.numberValue,o=i.currencyFormat,s=i.options;a(t,e,{numberValue:n=r(n,s.valueAsInteger,o.maximumFractionDigits)})},x=function(t,e,i){void 0===i&&(i=!1);var a=t.$ci,r=a.currencyFormat,n=a.options;S(t,null!=e?r.format(function(t,e){return Math.min(Math.max(t,e.min),e.max)}(e,n.valueRange)):null),(e!==t.$ci.numberValue||i)&&D(t,"change")},S=function(t,e,i){void 0===i&&(i=!1),function(t,e,i){if(null!=e){var a=t.$ci,r=a.focus,n=a.decimalSymbolInsertedAt,o=a.options,s=a.numberMask,u=a.currencyFormat,c=a.previousConformedValue,l=o.allowNegative,d=o.distractionFree;void 0!==n&&(e=u.normalizeDecimalSymbol(e,n),t.$ci.decimalSymbolInsertedAt=void 0);var m,p=s.conformToMask(e,c);if("object"==typeof p){var f=p.numberValue,v=p.fractionDigits,h=u.maximumFractionDigits,g=u.minimumFractionDigits;r&&(g=h),g=i?v.replace(/0+$/,"").length:Math.min(g,v.length),m=f>b?c:u.format(f,{useGrouping:!(r&&d.hideGroupingSymbol),minimumFractionDigits:g,maximumFractionDigits:h})}else m=p;l||(m=m.replace(u.negativePrefix,u.prefix)),r&&d.hideCurrencySymbol&&(m=m.replace(u.negativePrefix,u.minusSymbol).replace(u.prefix,"").replace(u.suffix,"")),t.value=m,t.$ci.numberValue=u.parse(t.value)}else t.value=t.$ci.numberValue=null;t.$ci.previousConformedValue=t.value}(t,e,i),D(t,"input")},F=function(t){t.addEventListener("input",function(e){if(!e.detail){var i=t.value,a=t.selectionStart,r=t.$ci,n=r.currencyFormat,o=r.options;S(t,i),t.$ci.focus&&v(t,function(t,e,i,a,r){var n=a.prefix,o=a.suffix,u=a.decimalSymbol,c=a.maximumFractionDigits,l=a.groupingSymbol,d=e.indexOf(u)+1,m=e.length-i;return Math.abs(t.length-e.length)>1&&i<=d?t.indexOf(u)+1:t.substr(i,1)===l&&s(t,l)===s(e,l)+1?t.length-m-1:(!r.autoDecimalMode&&0!==d&&i>d&&a.onlyDigits(e.substr(d)).length-1===c&&(m-=1),r.distractionFree.hideCurrencySymbol?t.length-m:Math.max(t.length-Math.max(m,o.length),0===n.length?0:n.length+1))}(t.value,i,a,n,o))}},{capture:!0}),t.addEventListener("keypress",function(e){l.includes(e.key)&&(t.$ci.decimalSymbolInsertedAt=t.selectionStart)}),t.addEventListener("format",function(e){var i=t.$ci,a=i.currencyFormat,r=i.options,n=i.numberValue,o=function(t){return r.valueAsInteger&&null!=t?t/Math.pow(10,a.maximumFractionDigits):t}(e.detail.value);n!==o&&x(t,o)}),t.addEventListener("focus",function(){t.$ci.focus=!0;var e=t.$ci.options.distractionFree,i=e.hideCurrencySymbol,a=e.hideGroupingSymbol,r=e.hideNegligibleDecimalDigits;(i||a||r)&&setTimeout(function(){var e=t.value,i=t.selectionStart,a=t.selectionEnd;e&&S(t,e,r),Math.abs(i-a)>0?t.setSelectionRange(0,t.value.length):v(t,function(t,e,i,a){var r=a;return e.distractionFree.hideCurrencySymbol&&(r-=t.prefix.length),e.distractionFree.hideGroupingSymbol&&(r-=s(i.substring(0,a),t.groupingSymbol)),Math.max(0,r)}(t.$ci.currencyFormat,t.$ci.options,e,i))})}),t.addEventListener("blur",function(){t.$ci.focus=!1,null!=t.$ci.numberValue&&x(t,t.$ci.numberValue)}),t.addEventListener("change",function(e){e.detail||D(t,"change")})},$={bind:function(t,e,i){var a=e.value,r=i.context,n=y(t,a,r);F(n),f(n,n.$ci.currencyFormat.parse(n.value))},componentUpdated:function(t,e,i){var a=e.value,r=e.oldValue,n=i.context;if(!h(a,r)){var o=y(t,a,n);x(o,o.$ci.numberValue,!0)}}},k={render:function(t){var e=this;return t("input",{directives:[{name:"currency",value:this.options}],on:Object.assign({},this.$listeners,{change:function(t){t.detail&&e.$emit("change",t.detail.numberValue)},input:function(t){t.detail&&e.value!==t.detail.numberValue&&e.$emit("input",t.detail.numberValue)}})})},directives:{currency:$},name:"CurrencyInput",props:{value:{type:Number,default:null},locale:{type:String,default:void 0},currency:{type:[String,Object],default:void 0},distractionFree:{type:[Boolean,Object],default:void 0},precision:{type:[Number,Object],default:void 0},autoDecimalMode:{type:Boolean,default:void 0},valueAsInteger:{type:Boolean,default:void 0},valueRange:{type:Object,default:void 0},allowNegative:{type:Boolean,default:void 0}},mounted:function(){this.setValue(this.value)},computed:{options:function(){var t=this,e=Object.assign({},this.$CI_DEFAULT_OPTIONS||m);return Object.keys(m).forEach(function(i){void 0!==t[i]&&(e[i]=t[i])}),e}},watch:{value:"setValue"},methods:{setValue:function(t){f(this.$el,t)}}},C={install:function(t,e){void 0===e&&(e={});var i=e.componentName;void 0===i&&(i=k.name);var a=e.directiveName;void 0===a&&(a="currency");var r=e.globalOptions;void 0===r&&(r={}),t.prototype.$CI_DEFAULT_OPTIONS=Object.assign({},m,r),t.component(i,k),t.directive(a,$),t.prototype.$parseCurrency=function(t,e){return void 0===e&&(e={}),p(t,Object.assign({},r,e))}}};"undefined"!=typeof window&&window.Vue&&window.Vue.use(C),e.default=C},"6R8L":function(t,e,i){"use strict";i.d(e,"a",function(){return a}),i.d(e,"b",function(){return r});var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{md:16}},[i("div",{staticClass:"detail-section"},[i("div",{staticClass:"detail-item"},[i("div",{staticClass:"detail-label"},[i("small",[t._v(t._s(t.lang.name))])]),t._v(" "),i("div",{staticClass:"detail-value"},[t._v("\n          "+t._s(t.data.name)+"\n        ")])]),t._v(" "),i("div",{staticClass:"detail-item"},[i("div",{staticClass:"detail-label"},[i("small",[t._v(t._s(t.lang.price))])]),t._v(" "),i("div",{staticClass:"detail-value"},[t._v("\n          "+t._s(t.data.fprice)+"\n        ")])]),t._v(" "),i("div",{staticClass:"detail-item"},[i("div",{staticClass:"detail-label"},[i("small",[t._v(t._s(t.lang.link_to_product_stock))])]),t._v(" "),i("div",{staticClass:"detail-value"},[t._v("\n          "+t._s(t.data.product_qty)+" x "+t._s(t.data.product_name)+" "),t.data.product_variant_id?i("span",[t._v("\n            ("+t._s(t.data.product_variants_name)+")\n          ")]):t._e()])])])]),t._v(" "),i("el-col",{attrs:{md:8}},[i("div",{staticClass:"detail-section"},[i("div",{staticClass:"detail-item"},[i("div",{staticClass:"detail-label"},[t._v("\n          "+t._s(t.lang.valid_for_product_groups)+"\n        ")]),t._v(" "),i("div",{staticClass:"detail-value"},t._l(t.data.valid_product_groups,function(e){return i("div",{key:e.id,staticClass:"box-in-loop"},[t._v("\n            "+t._s(e.name)),i("br"),t._v(" "),i("span",{staticClass:"size-12 grey"},[t._v(t._s(e.product_group_name))])])}),0)])]),t._v(" "),i("div",{staticClass:"detail-section"},[i("div",{staticClass:"detail-item"},[i("div",{staticClass:"detail-label"},[t._v("\n          "+t._s(t.lang.valid_for_products)+"\n        ")]),t._v(" "),i("div",{staticClass:"detail-value"},t._l(t.data.valid_products,function(e){return i("div",{key:e.id,staticClass:"item-flex box-in-loop"},[i("img",{staticClass:"img-40 img-rounded",attrs:{src:e.photo_md,alt:e.name}}),t._v(" "),i("div",[t._v("\n              "+t._s(e.name)),i("br"),t._v(" "),i("span",{staticClass:"size-12 grey"},[t._v(t._s(e.product_group_name))])])])}),0)])])])],1)},r=[]},Bpd7:function(t,e,i){"use strict";i.d(e,"a",function(){return a}),i.d(e,"b",function(){return r});var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"box-card"},[i("div",{staticClass:"table-handler-flex",attrs:{slot:"header"},slot:"header"},[t.isViewingDetail?i("h4",{staticStyle:{"flex-grow":"1"}},[t._v(t._s(t.formData.name))]):i("h4",{staticStyle:{"flex-grow":"1"}},[t._v(t._s(t.lang.add)+" "+t._s(t.lang.product_addon))]),t._v(" "),i("div",[i("el-button",{attrs:{size:"small",type:"text"},on:{click:t.cancel}},[t._v(t._s(t.lang.cancel))]),t._v(" "),t.isEditing||!t.isViewingDetail?i("el-button",{attrs:{disabled:t.disabledSave&&(t.checkCustomPermission("catalog/prodaddon","edit")||t.checkCustomPermission("catalog/prodaddon","store")),size:"small",icon:"el-icon-check",type:"success"},on:{click:t.save}},[t._v("\n        "+t._s(t.lang.save)+"\n      ")]):i("button-action-authenticated",{attrs:{permission:["catalog/prodaddon","edit"],size:"small",icon:"el-icon-edit",type:"primary"},on:{click:t.handleEdit}},[t._v("\n        "+t._s(t.lang.edit)+"\n      ")])],1)]),t._v(" "),i("div",{staticClass:"card-body"},[t.isViewingDetail&&!t.isEditing?i("view-mode",{attrs:{data:t.formData,lang:t.lang}}):t._e(),t._v(" "),t.isEditing||!t.isViewingDetail?i("edit-mode",{attrs:{data:t.formData},on:{save:t.save,"save-disabled":t.handleSaveDisabled}}):t._e()],1),t._v(" "),t.isViewingDetail?i("div",{staticClass:"detail-item"},[i("div",{staticClass:"detail-value"},[i("button-action-authenticated",{attrs:{permission:["catalog/prodaddon","destroy"],type:"bordered-danger",icon:"el-icon-delete"},on:{click:t.remove}},[t._v("\n        "+t._s(t.$lang[t.langId].delete)+"\n      ")])],1)]):t._e()])},r=[]},OyzN:function(t,e,i){t.exports={default:i("fSc9"),__esModule:!0}},U8Se:function(t,e,i){"use strict";i.r(e);var a=i("qD8T"),r=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,function(){return a[t]})}(n);e.default=r.a},UJKi:function(t,e,i){"use strict";i.r(e);var a=i("6R8L"),r=i("l8Fk");for(var n in r)["default"].indexOf(n)<0&&function(t){i.d(e,t,function(){return r[t]})}(n);var o=i("KHd+"),s=Object(o.a)(r.default,a.a,a.b,!1,null,null,null);s.options.__file="ViewMode.vue",e.default=s.exports},WmNZ:function(t,e,i){"use strict";i.r(e);var a=i("lpsu"),r=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,function(){return a[t]})}(n);e.default=r.a},fSc9:function(t,e,i){i("kla0");var a=i("VSTI").Object;t.exports=function(t){return a.getOwnPropertyNames(t)}},jWND:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{data:{type:Object,required:!0},lang:{type:Object,required:!0}}}},kla0:function(t,e,i){i("czaS")("getOwnPropertyNames",function(){return i("GDZC").f})},l8Fk:function(t,e,i){"use strict";i.r(e);var a=i("jWND"),r=i.n(a);for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,function(){return a[t]})}(n);e.default=r.a},lpsu:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("xCek"),r=s(i("vDqi")),n=s(i("nbeG")),o=s(i("Ckak"));function s(t){return t&&t.__esModule?t:{default:t}}e.default={components:{SelectMultipleItems:n.default,InputMoney:o.default},props:["data"],data:function(){return{formData:this.data,searchingProducts:!1,searchResultProducts:[],searchResultProductGroups:[],searchResultValidProducts:[]}},computed:{langId:function(){return this.$store.state.userStores.langId},lang:function(){return this.$store.state.userStores.lang},token:function(){return this.$store.state.user.token},selectedStore:function(){return this.$store.getters.selectedStore}},watch:{formData:{handler:function(t){t.name&&null!==t.price?this.$emit("save-disabled",!1):this.$emit("save-disabled",!0)},deep:!0,immediate:!0}},mounted:function(){this.formData.id&&this.appendLinkToProduct()},methods:{searchProducts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.searchingProducts=!0;var i={Authorization:"Bearer "+this.token.access_token},n={search_column:"name",search_text:e,sort_column:"name",sort_type:"desc",per_page:50};e&&(0,r.default)({method:"GET",url:(0,a.baseApi)(this.selectedStore.url_id,this.langId,"productvariantsearch"),headers:i,params:n}).then(function(e){t.searchingProducts=!1,t.searchResultProducts=e.data.data}).catch(function(){t.searchingProducts=!1,t.searchResultProducts=[]})},appendLinkToProduct:function(){var t=this.formData.product_name,e=this.formData.product_id;this.formData.product_variant_id&&(t=this.formData.product_name+" - "+this.formData.product_variants_name,e=this.formData.product_id+"|"+this.formData.product_variant_id),this.formData.link_product=e,this.searchResultProducts.push({name:t,product_id:e})},handleSelectedValidProductGroups:function(t){this.formData.valid_product_groups.push(t)},handleRemoveValidProductGroup:function(t){this.formData.valid_product_groups.splice(t,1)},handleSelectedValidProducts:function(t){this.formData.valid_products.push(t)},handleRemoveValidProduct:function(t){this.formData.valid_products.splice(t,1)},save:function(){console.log("save")}}}},o0Np:function(t,e,i){"use strict";i.d(e,"a",function(){return a}),i.d(e,"b",function(){return r});var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-form",{attrs:{data:t.formData},nativeOn:{submit:function(t){t.preventDefault()}}},[i("el-form-item",{attrs:{label:t.lang.name}},[i("el-input",{model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.lang.price}},[i("div",{staticClass:"el-input"},[i("input-money",{model:{value:t.formData.price,callback:function(e){t.$set(t.formData,"price",e)},expression:"formData.price"}})],1)]),t._v(" "),i("hr"),t._v(" "),i("h4",{staticStyle:{"margin-bottom":"20px"}},[t._v(t._s(t.lang.link_to_product_stock))]),t._v(" "),i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{md:12}},[i("el-form-item",{attrs:{label:t.lang.product}},[i("el-select",{staticStyle:{width:"100%"},attrs:{"remote-method":t.searchProducts,loading:t.searchingProducts,remote:"",filterable:"",clearable:""},model:{value:t.formData.link_product,callback:function(e){t.$set(t.formData,"link_product",e)},expression:"formData.link_product"}},t._l(t.searchResultProducts,function(t,e){return i("el-option",{key:e,attrs:{label:t.name,value:t.product_id}})}),1)],1)],1),t._v(" "),i("el-col",{attrs:{md:12}},[i("el-form-item",{attrs:{label:t.lang.qty}},[i("el-input",{model:{value:t.formData.product_qty,callback:function(e){t.$set(t.formData,"product_qty",e)},expression:"formData.product_qty"}})],1)],1)],1),t._v(" "),i("hr"),t._v(" "),i("h4",{staticStyle:{"margin-bottom":"20px"}},[t._v(t._s(t.lang.valid_for_products))]),t._v(" "),i("el-form-item",{attrs:{label:t.lang.valid_for_product_groups}},[i("select-multiple-items",{attrs:{"prop-selected-items":t.formData.valid_product_groups,"value-key":"id","end-point":"productgroup","option-label":"name"},on:{change:t.handleSelectedValidProductGroups,remove:t.handleRemoveValidProductGroup}}),t._v(" "),i("p",{staticClass:"size-10"},[t._v("\n      "+t._s(t.lang.info_product_addon_for_product_groups)+"\n    ")])],1),t._v(" "),i("el-form-item",{attrs:{label:t.lang.valid_for_products}},[i("select-multiple-items",{attrs:{"prop-selected-items":t.formData.valid_products,"value-key":"product_id","end-point":"productsearch","option-label":"name"},on:{change:t.handleSelectedValidProducts,remove:t.handleRemoveValidProduct}}),t._v(" "),i("p",{staticClass:"size-10"},[t._v("\n      "+t._s(t.lang.info_product_addon_for_products)+"\n    ")])],1)],1)},r=[]},qD8T:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=d(i("OyzN")),r=d(i("P2sY")),n=d(i("QbLZ")),o=i("xCek"),s=d(i("vDqi")),u=d(i("+GYI")),c=d(i("UJKi")),l=i("6y4V");function d(t){return t&&t.__esModule?t:{default:t}}e.default={components:{ViewMode:c.default,EditMode:u.default},mixins:[l.checkCustomPermission],data:function(){return{loading:!1,formData:{name:"",price:"",product_qty:1,link_product:"",valid_products:[],valid_product_groups:[]},isEditing:!1,disabledSave:!0}},computed:{selectedStore:function(){return this.$store.getters.selectedStore},token:function(){return this.$store.state.user.token},langId:function(){return this.$store.state.userStores.langId},lang:function(){return this.$store.state.userStores.lang},isViewingDetail:function(){return!!this.$route.params.id}},mounted:function(){this.$route.params.id&&this.getData()},methods:{getData:function(){var t=this;this.loading=!0;var e={Authorization:"Bearer "+this.token.access_token};(0,s.default)({method:"GET",url:(0,o.baseApi)(this.selectedStore.url_id,this.langId,"productaddon/"+this.$route.params.id),headers:e}).then(function(e){t.formData=(0,n.default)({},t.formData,e.data.data),t.loading=!1}).catch(function(){t.loading=!1})},handleEdit:function(){this.isEditing?this.isEditing=!1:this.isEditing=!0},handleSaveDisabled:function(t){this.disabledSave=t},save:function(){var t=this;if(this.formData.id)this.update();else{this.loading=!0;var e=(0,r.default)({},this.formData);e.valid_products=[],e.valid_product_groups=[],this.formData.valid_products.length&&this.formData.valid_products.map(function(t){t.product_id?e.valid_products.push(t.product_id):e.valid_products.push(t.pivot.product_id)}),this.formData.valid_product_groups.length&&this.formData.valid_product_groups.map(function(t){e.valid_product_groups.push(t.id)}),e.valid_products=e.valid_products.join(","),e.valid_product_groups=e.valid_product_groups.join(",");var i={Authorization:"Bearer "+this.token.access_token};(0,s.default)({method:"POST",url:(0,o.baseApi)(this.selectedStore.url_id,this.langId,"productaddon/"),headers:i,data:e}).then(function(e){t.loading=!1,t.$message({type:"success",message:"Success"}),t.$router.push({path:"/catalog/addon/"})}).catch(function(e){t.loading=!1;var i=(0,a.default)(e.response.data.error.error);if(i.length>=2){var r=[];i.map(function(t,i){r.push(e.response.data.error.error[t][0])});var n=r.join(", ");t.$notify({type:"warning",title:e.response.data.error.message,message:n})}else t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error[i[0]][0]})})}},update:function(){var t=this;this.loading=!0,console.log(this.formData.valid_products);var e={valid_products:[],valid_product_groups:[]};this.formData.valid_products.length&&this.formData.valid_products.map(function(t){t.product_id?e.valid_products.push(t.product_id):e.valid_products.push(t.pivot.product_id)}),this.formData.valid_product_groups.length&&this.formData.valid_product_groups.map(function(t){e.valid_product_groups.push(t.id)}),e.valid_products=e.valid_products.join(","),e.valid_product_groups=e.valid_product_groups.join(","),e.name=this.formData.name,e.price=this.formData.price,e.link_product=this.formData.link_product,e.product_qty=parseInt(this.formData.product_qty),console.log(e,"data data data");var i={Authorization:"Bearer "+this.token.access_token};(0,s.default)({method:"PUT",url:(0,o.baseApi)(this.selectedStore.url_id,this.langId,"productaddon/"+this.formData.id),headers:i,data:e}).then(function(e){t.loading=!1,t.$message({type:"success",message:"Success"}),t.$router.push({path:"/catalog/addon/"})}).catch(function(e){t.loading=!1;var i=(0,a.default)(e.response.data.error.error);if(i.length>=2){var r=[];i.map(function(t,i){r.push(e.response.data.error.error[t][0])});var n=r.join(", ");t.$notify({type:"warning",title:e.response.data.error.message,message:n})}else t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error[i[0]][0]})})},cancel:function(){this.$router.push({path:"/catalog/addon"})},remove:function(){var t=this;this.loading=!0;var e={Authorization:"Bearer "+this.token.access_token};(0,s.default)({method:"delete",url:(0,o.baseApi)(this.selectedStore.url_id,this.langId,"productaddon/"+this.formData.id),headers:e}).then(function(){t.$message({type:"success",message:"Success"}),t.$router.push({path:"/catalog/addon"})}).catch(function(e){404!==e.response.data.error.status_code&&t.$notify({type:"warning",title:e.response.data.error.message,message:e.response.data.error.error}),t.loading=!1})}}}},zW5W:function(t,e,i){"use strict";i.r(e);var a=i("Bpd7"),r=i("U8Se");for(var n in r)["default"].indexOf(n)<0&&function(t){i.d(e,t,function(){return r[t]})}(n);var o=i("KHd+"),s=Object(o.a)(r.default,a.a,a.b,!1,null,null,null);s.options.__file="Form.vue",e.default=s.exports}}]);